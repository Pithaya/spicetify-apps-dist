var betterDlocalDfiles=(()=>{var P,z=Object.create,H=Object.defineProperty,$=Object.getOwnPropertyDescriptor,F=Object.getOwnPropertyNames,B=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty,e=(e,t)=>function(){return t||(0,e[F(e)[0]])((t={exports:{}}).exports,t),t.exports},G=(t,a,r,n)=>{if(a&&"object"==typeof a||"function"==typeof a)for(let e of F(a))j.call(t,e)||e===r||H(t,e,{get:()=>a[e],enumerable:!(n=$(a,e))||n.enumerable});return t},t=(e,t,a)=>(a=null!=e?z(B(e)):{},G(!t&&e&&e.__esModule?a:H(a,"default",{value:e,enumerable:!0}),e)),r=e({"external-global-plugin:react"(e,t){t.exports=Spicetify.React}}),W=e({"../../node_modules/spcr-whats-new/node_modules/semver/internal/debug.js"(e,t){var a="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};t.exports=a}}),U=e({"../../node_modules/spcr-whats-new/node_modules/semver/internal/constants.js"(e,t){var a=Number.MAX_SAFE_INTEGER||9007199254740991;t.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:a,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}}}),X=e({"../../node_modules/spcr-whats-new/node_modules/semver/internal/re.js"(e,t){var{MAX_SAFE_COMPONENT_LENGTH:a,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:n}=U(),i=W(),l=(e=t.exports={}).re=[],o=e.safeRe=[],c=e.src=[],s=e.t={},u=0,t="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",n],[t,r]],n=(e,t,a)=>{var r=(e=>{for(var[t,a]of d)e=e.split(t+"*").join(`${t}{0,${a}}`).split(t+"+").join(`${t}{1,${a}}`);return e})(t),n=u++;i(e,n,t),s[e]=n,c[n]=t,l[n]=new RegExp(t,a?"g":void 0),o[n]=new RegExp(r,a?"g":void 0)};n("NUMERICIDENTIFIER","0|[1-9]\\d*"),n("NUMERICIDENTIFIERLOOSE","\\d+"),n("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${t}*`),n("MAINVERSION",`(${c[s.NUMERICIDENTIFIER]})\\.(${c[s.NUMERICIDENTIFIER]})\\.(${c[s.NUMERICIDENTIFIER]})`),n("MAINVERSIONLOOSE",`(${c[s.NUMERICIDENTIFIERLOOSE]})\\.(${c[s.NUMERICIDENTIFIERLOOSE]})\\.(${c[s.NUMERICIDENTIFIERLOOSE]})`),n("PRERELEASEIDENTIFIER",`(?:${c[s.NUMERICIDENTIFIER]}|${c[s.NONNUMERICIDENTIFIER]})`),n("PRERELEASEIDENTIFIERLOOSE",`(?:${c[s.NUMERICIDENTIFIERLOOSE]}|${c[s.NONNUMERICIDENTIFIER]})`),n("PRERELEASE",`(?:-(${c[s.PRERELEASEIDENTIFIER]}(?:\\.${c[s.PRERELEASEIDENTIFIER]})*))`),n("PRERELEASELOOSE",`(?:-?(${c[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[s.PRERELEASEIDENTIFIERLOOSE]})*))`),n("BUILDIDENTIFIER",t+"+"),n("BUILD",`(?:\\+(${c[s.BUILDIDENTIFIER]}(?:\\.${c[s.BUILDIDENTIFIER]})*))`),n("FULLPLAIN",`v?${c[s.MAINVERSION]}${c[s.PRERELEASE]}?${c[s.BUILD]}?`),n("FULL",`^${c[s.FULLPLAIN]}$`),n("LOOSEPLAIN",`[v=\\s]*${c[s.MAINVERSIONLOOSE]}${c[s.PRERELEASELOOSE]}?${c[s.BUILD]}?`),n("LOOSE",`^${c[s.LOOSEPLAIN]}$`),n("GTLT","((?:<|>)?=?)"),n("XRANGEIDENTIFIERLOOSE",c[s.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*"),n("XRANGEIDENTIFIER",c[s.NUMERICIDENTIFIER]+"|x|X|\\*"),n("XRANGEPLAIN",`[v=\\s]*(${c[s.XRANGEIDENTIFIER]})(?:\\.(${c[s.XRANGEIDENTIFIER]})(?:\\.(${c[s.XRANGEIDENTIFIER]})(?:${c[s.PRERELEASE]})?${c[s.BUILD]}?)?)?`),n("XRANGEPLAINLOOSE",`[v=\\s]*(${c[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[s.XRANGEIDENTIFIERLOOSE]})(?:${c[s.PRERELEASELOOSE]})?${c[s.BUILD]}?)?)?`),n("XRANGE",`^${c[s.GTLT]}\\s*${c[s.XRANGEPLAIN]}$`),n("XRANGELOOSE",`^${c[s.GTLT]}\\s*${c[s.XRANGEPLAINLOOSE]}$`),n("COERCE",`(^|[^\\d])(\\d{1,${a}})(?:\\.(\\d{1,${a}}))?(?:\\.(\\d{1,${a}}))?(?:$|[^\\d])`),n("COERCERTL",c[s.COERCE],!0),n("LONETILDE","(?:~>?)"),n("TILDETRIM",`(\\s*)${c[s.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",n("TILDE",`^${c[s.LONETILDE]}${c[s.XRANGEPLAIN]}$`),n("TILDELOOSE",`^${c[s.LONETILDE]}${c[s.XRANGEPLAINLOOSE]}$`),n("LONECARET","(?:\\^)"),n("CARETTRIM",`(\\s*)${c[s.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",n("CARET",`^${c[s.LONECARET]}${c[s.XRANGEPLAIN]}$`),n("CARETLOOSE",`^${c[s.LONECARET]}${c[s.XRANGEPLAINLOOSE]}$`),n("COMPARATORLOOSE",`^${c[s.GTLT]}\\s*(${c[s.LOOSEPLAIN]})$|^$`),n("COMPARATOR",`^${c[s.GTLT]}\\s*(${c[s.FULLPLAIN]})$|^$`),n("COMPARATORTRIM",`(\\s*)${c[s.GTLT]}\\s*(${c[s.LOOSEPLAIN]}|${c[s.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",n("HYPHENRANGE",`^\\s*(${c[s.XRANGEPLAIN]})\\s+-\\s+(${c[s.XRANGEPLAIN]})\\s*$`),n("HYPHENRANGELOOSE",`^\\s*(${c[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[s.XRANGEPLAINLOOSE]})\\s*$`),n("STAR","(<|>)?=?\\s*\\*"),n("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),n("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}}),V=e({"../../node_modules/spcr-whats-new/node_modules/semver/internal/parse-options.js"(e,t){var a=Object.freeze({loose:!0}),r=Object.freeze({});t.exports=e=>e?"object"!=typeof e?a:e:r}}),Z=e({"../../node_modules/spcr-whats-new/node_modules/semver/internal/identifiers.js"(e,t){var n=/^[0-9]+$/,a=(e,t)=>{var a=n.test(e),r=n.test(t);return a&&r&&(e=+e,t=+t),e===t?0:a&&!r||(!r||a)&&e<t?-1:1};t.exports={compareIdentifiers:a,rcompareIdentifiers:(e,t)=>a(t,e)}}}),q=e({"../../node_modules/spcr-whats-new/node_modules/semver/classes/semver.js"(e,t){var n=W(),{MAX_LENGTH:a,MAX_SAFE_INTEGER:r}=U(),{safeRe:i,t:l}=X(),o=V(),c=Z()["compareIdentifiers"],s=class{constructor(e,t){if(t=o(t),e instanceof s){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>a)throw new TypeError(`version is longer than ${a} characters`);n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;t=e.trim().match(t.loose?i[l.LOOSE]:i[l.FULL]);if(!t)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+t[1],this.minor=+t[2],this.patch=+t[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");t[4]?this.prerelease=t[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){var t=+e;if(0<=t&&t<r)return t}return e}):this.prerelease=[],this.build=t[5]?t[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.`+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof s)){if("string"==typeof e&&e===this.version)return 0;e=new s(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof s||(e=new s(e,this.options)),c(this.major,e.major)||c(this.minor,e.minor)||c(this.patch,e.patch)}comparePre(e){if(e instanceof s||(e=new s(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{var a=this.prerelease[t],r=e.prerelease[t];if(n("prerelease compare",t,a,r),void 0===a&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===a)return-1;if(a!==r)return c(a,r)}while(++t)}compareBuild(e){e instanceof s||(e=new s(e,this.options));let t=0;do{var a=this.build[t],r=e.build[t];if(n("prerelease compare",t,a,r),void 0===a&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===a)return-1;if(a!==r)return c(a,r)}while(++t)}inc(e,t,a){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,a);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,a);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,a),this.inc("pre",t,a);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,a),this.inc("pre",t,a);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":var r=Number(a)?1:0;if(!t&&!1===a)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[r];else{let e=this.prerelease.length;for(;0<=--e;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);if(-1===e){if(t===this.prerelease.join(".")&&!1===a)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(r)}}if(t){let e=!1===a?[t]:[t,r];(0!==c(this.prerelease[0],t)||isNaN(this.prerelease[1]))&&(this.prerelease=e)}break;default:throw new Error("invalid increment argument: "+e)}return this.raw=this.format(),this.build.length&&(this.raw+="+"+this.build.join(".")),this}};t.exports=s}}),Y=e({"../../node_modules/spcr-whats-new/node_modules/semver/functions/compare.js"(e,t){var r=q();t.exports=(e,t,a)=>new r(e,a).compare(new r(t,a))}}),a=e({"../../node_modules/spcr-whats-new/node_modules/semver/functions/gt.js"(e,t){var r=Y();t.exports=(e,t,a)=>0<r(e,t,a)}}),J=e({"external-global-plugin:react-dom"(e,t){t.exports=Spicetify.ReactDOM}}),K=e({"../../node_modules/resize-observer-polyfill/dist/ResizeObserver.js"(e,t){var a;a=function(){"use strict";var r="undefined"!=typeof Map?Map:(Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){e=n(this.__entries__,e),e=this.__entries__[e];return e&&e[1]},e.prototype.set=function(e,t){var a=n(this.__entries__,e);~a?this.__entries__[a][1]=t:this.__entries__.push([e,t])},e.prototype.delete=function(e){var t=this.__entries__,e=n(t,e);~e&&t.splice(e,1)},e.prototype.has=function(e){return!!~n(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var a=0,r=this.__entries__;a<r.length;a++){var n=r[a];e.call(t,n[1],n[0])}},e);function e(){this.__entries__=[]}function n(e,a){var r=-1;return e.some(function(e,t){return e[0]===a&&(r=t,!0)}),r}var a="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,t="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),c="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(t):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)},s=2;var i=["top","right","bottom","left","width","height","size","weight"],l="undefined"!=typeof MutationObserver,o=(u.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},u.prototype.removeObserver=function(e){var t=this.observers_,e=t.indexOf(e);~e&&t.splice(e,1),!t.length&&this.connected_&&this.disconnect_()},u.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},u.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),0<e.length},u.prototype.connect_=function(){a&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),l?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},u.prototype.disconnect_=function(){a&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},u.prototype.onTransitionEnd_=function(e){var e=e.propertyName,t=void 0===e?"":e;i.some(function(e){return!!~t.indexOf(e)})&&this.refresh()},u.getInstance=function(){return this.instance_||(this.instance_=new u),this.instance_},u.instance_=null,u);function u(){function e(){i&&(i=!1,r()),l&&a()}function t(){c(e)}function a(){var e=Date.now();if(i){if(e-o<s)return;l=!0}else l=!(i=!0),setTimeout(t,n);o=e}var r,n,i,l,o;this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=(r=this.refresh.bind(this),l=i=!(n=20),o=0,a)}var d=function(e,t){for(var a=0,r=Object.keys(t);a<r.length;a++){var n=r[a];Object.defineProperty(e,n,{value:t[n],enumerable:!1,writable:!1,configurable:!0})}return e},m=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||t},f=b(0,0,0,0);function p(e){return parseFloat(e)||0}function h(a){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(e,t){return e+p(a["border-"+t+"-width"])},0)}function _(e){var t,a,r,n,i,l,o=e.clientWidth,c=e.clientHeight;return o||c?(a=(t=function(e){for(var t={},a=0,r=["top","right","bottom","left"];a<r.length;a++){var n=r[a],i=e["padding-"+n];t[n]=p(i)}return t}(l=m(e).getComputedStyle(e))).left+t.right,r=t.top+t.bottom,n=p(l.width),i=p(l.height),"border-box"===l.boxSizing&&(Math.round(n+a)!==o&&(n-=h(l,"left","right")+a),Math.round(i+r)!==c)&&(i-=h(l,"top","bottom")+r),e!==m(e).document.documentElement&&(l=Math.round(n+a)-o,e=Math.round(i+r)-c,1!==Math.abs(l)&&(n-=l),1!==Math.abs(e))&&(i-=e),b(t.left,t.top,n,i)):f}var E="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof m(e).SVGGraphicsElement}:function(e){return e instanceof m(e).SVGElement&&"function"==typeof e.getBBox};function v(e){var t;return a?E(e)?b(0,0,(t=(t=e).getBBox()).width,t.height):_(e):f}function b(e,t,a,r){return{x:e,y:t,width:a,height:r}}g.prototype.isActive=function(){var e=v(this.target);return(this.contentRect_=e).width!==this.broadcastWidth||e.height!==this.broadcastHeight},g.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e};var y=g;function g(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=b(0,0,0,0),this.target=e}var k=function(e,t){a=(t=t).x,r=t.y,i=t.width,t=t.height,n="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,n=Object.create(n.prototype),d(n,{x:a,y:r,width:i,height:t,top:r,right:a+i,bottom:t+r,left:a});var a,r,n,i=n;d(this,{target:e,contentRect:i})},w=(S.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof m(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new y(e)),this.controller_.addObserver(this),this.controller_.refresh())}},S.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof m(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},S.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},S.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},S.prototype.broadcastActive=function(){var e,t;this.hasActive()&&(e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new k(e.target,e.broadcastRect())}),this.callback_.call(e,t,e),this.clearActive())},S.prototype.clearActive=function(){this.activeObservations_.splice(0)},S.prototype.hasActive=function(){return 0<this.activeObservations_.length},S);function S(e,t,a){if(this.activeObservations_=[],this.observations_=new r,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=a}var D=new("undefined"!=typeof WeakMap?WeakMap:r),I=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var a=o.getInstance(),t=new w(t,a,this);D.set(this,t)};return["observe","unobserve","disconnect"].forEach(function(t){I.prototype[t]=function(){var e;return(e=D.get(this))[t].apply(e,arguments)}}),void 0!==t.ResizeObserver?t.ResizeObserver:I},"object"==typeof(e=e)&&void 0!==t?t.exports=a():"function"==typeof define&&define.amd?define(a):e.ResizeObserver=a()}}),e=e({"../../node_modules/use-fit-text/dist/index.js"(e,t){var a,g=r(),k=(a=K())&&"object"==typeof a&&"default"in a?a.default:a,w={debug:10,info:20,warn:30,error:40,none:100},S="undefined"!=typeof window&&window.document&&window.document.createElement?g.useLayoutEffect:g.useEffect;t.exports=function(e){var t=(e=void 0===e?{}:e).logLevel,a=e.maxFontSize,i=(void 0===a&&(a=100),e.minFontSize),l=(void 0===i&&(i=20),e.onFinish),r=e.onStart,o=e.resolution,c=(void 0===o&&(o=5),w[t=void 0===t?"info":t]),n=g.useCallback(function(){return{calcKey:0,fontSize:a,fontSizePrev:i,fontSizeMax:a,fontSizeMin:i}},[a,i]),s=g.useRef(null),u=g.useRef(),d=g.useRef(!1),e=g.useState(n),t=e[0],m=e[1],f=t.calcKey,p=t.fontSize,h=t.fontSizeMax,_=t.fontSizeMin,E=t.fontSizePrev,v=null,b=g.useState(function(){return new k(function(){v=window.requestAnimationFrame(function(){d.current||(r&&r(),d.current=!0,m(Object.assign({},n(),{calcKey:f+1})))})})})[0],y=(g.useEffect(function(){return s.current&&b.observe(s.current),function(){v&&window.cancelAnimationFrame(v),b.disconnect()}},[v,b]),s.current&&s.current.innerHTML);return g.useEffect(function(){0===f||d.current||(y!==u.current&&(r&&r(),m(Object.assign({},n(),{calcKey:f+1}))),u.current=y)},[f,n,y,r]),S(function(){var e,t,a,r,n;0!==f&&(r=Math.abs(p-E)<=o,e=!!s.current&&(s.current.scrollHeight>s.current.offsetHeight||s.current.scrollWidth>s.current.offsetWidth),t=E<p,r?e&&p===E?(d.current=!1,c<=w.info&&console.info("[use-fit-text] reached `minFontSize = "+i+"` without fitting text")):e?m({fontSize:t?E:_,fontSizeMax:h,fontSizeMin:_,fontSizePrev:E,calcKey:f}):(d.current=!1,l&&l(p)):(r=h,n=_,e?(a=t?E-p:_-p,r=Math.min(h,p)):(a=t?h-p:E-p,n=Math.max(_,p)),m({calcKey:f,fontSize:p+a/2,fontSizeMax:r,fontSizeMin:n,fontSizePrev:p})))},[f,p,h,_,E,l,s,o]),{fontSize:p+"%",ref:s}}}}),Q={},ee=Q,te={default:()=>function(){return ur.default.createElement(sr,null)}};for(P in te)H(ee,P,{get:te[P],enumerable:!0});function ae(e){return Spicetify.Platform?.[e]}function m(e){var t=ae(e);if(void 0===t)throw new Error(`Platform API "${e}" is not available`);return t}var o=t(r()),re=t(a()),ne=t(J());var ie=async function(t,a,e){for(;!Spicetify?.PopupModal||!Spicetify?.LocalStorage;)await new Promise(e=>setTimeout(e,100));var r,t=`spcr-whats-new_${t}-version`,n=Spicetify.LocalStorage.get(t)??"";try{(0,re.default)(a,n)&&(Spicetify.LocalStorage.set(t,a),r={...e,content:function(e){var t=document.createElement("div"),a=(t.setAttribute("id","whats-new-content-wrapper"),document.createElement("style"));return a.textContent=`
      #whats-new-content-wrapper ul, #whats-new-content-wrapper ol {
         list-style: inherit;
         margin-left: 1em;
      }
   `,ne.default.render(e,t),t.appendChild(a),t}(e.content)},Spicetify.PopupModal.display(r))}catch(e){Spicetify.LocalStorage.set(t,a)}},le="2.0.5",oe=["Fixed crash on start"],n=t(r());function p(e,t=null){var a=m("History");null===t?a.push(e):a.push({pathname:e,state:{uri:t},hash:"",key:"",search:""})}var c=t(r());function ce(t,e){0!==e.length&&e.some(e=>e.uri===t)&&Spicetify.Player.origin.play({uri:"spotify:internal:local-files",pages:[{items:e}]},{},{skipTo:{uri:t}})}function se(e){0!==e.length&&Spicetify.Player.origin.play({uri:"spotify:internal:local-files",pages:[{items:e}]},{},{})}var ue=t(r());function h(e,...a){let t=m("Translations");for(const n of e)t=t[n];let r=t;return a.forEach((e,t)=>{r=r.replace(`{${t}}`,a[t])}),r}var de=t(r());function f(e){return e.icon?de.default.createElement(Spicetify.ReactComponent.IconComponent,{iconSize:e.iconSize,semanticColor:e.semanticColor,dangerouslySetInnerHTML:{__html:Spicetify.SVGIcons[e.icon]},viewBox:"0 0 16 16"}):e.iconPath?de.default.createElement(Spicetify.ReactComponent.IconComponent,{iconSize:e.iconSize,semanticColor:e.semanticColor,dangerouslySetInnerHTML:{__html:e.iconPath},viewBox:"0 0 16 16"}):de.default.createElement(de.default.Fragment,null)}function me(t){return ue.default.createElement(Spicetify.ReactComponent.ButtonPrimary,{"aria-label":h(["play"]),buttonSize:t.size,disabled:t.disabled,onClick:e=>{e.stopPropagation(),t.onClick()},iconOnly:()=>ue.default.createElement(f,{icon:"play"})})}var s=t(r()),fe="TrackListGrid-module__display-list___ahMmJ_betterDlocalDfiles",pe="TrackListGrid-module__display-list-compact___Uwrj2_betterDlocalDfiles",_=t(r()),he=t(r());function _e(t){const[e,a]=(0,he.useState)(!1);return(0,he.useEffect)(()=>{const e=new IntersectionObserver((e,t)=>{a(e.some(e=>e.isIntersecting))},{rootMargin:"0px",threshold:0});return e.observe(t.current),()=>{e.disconnect()}},[t]),e}var Ee=t(r());function ve(e){const[t,a]=(0,Ee.useState)(m("LibraryAPI").containsSync(e));return(0,Ee.useEffect)(()=>{m("LibraryAPI").contains(e).then(e=>{a(e[0])}).catch(console.error)},[e]),[t,a]}var be=t(r());function E(e){const{elementType:t="span",children:a,fontSize:r,style:n,...i}=e;let l;switch(t){case"h1":l=Spicetify.ReactComponent.TextComponent.h1;break;case"h2":l=Spicetify.ReactComponent.TextComponent.h2;break;case"h3":l=Spicetify.ReactComponent.TextComponent.h3;break;case"h4":l=Spicetify.ReactComponent.TextComponent.h4;break;case"h5":l=Spicetify.ReactComponent.TextComponent.h5;break;case"h6":l=Spicetify.ReactComponent.TextComponent.h6;break;case"li":l=Spicetify.ReactComponent.TextComponent.li;break;case"p":l=Spicetify.ReactComponent.TextComponent.p;break;case"small":l=Spicetify.ReactComponent.TextComponent.small;break;case"span":l=Spicetify.ReactComponent.TextComponent.span;break;default:l=Spicetify.ReactComponent.TextComponent}return be.default.createElement(l,{...i,style:{...n,fontSize:r,display:e.paddingBottom?"block":void 0}},a)}function ye(a){var e=(0,_.useRef)(null);const r=_e(e),[t,n]=(0,_.useState)(!1),[i,l]=ve(a.track.uri);(0,_.useEffect)(()=>{const e=m("LibraryAPI");if(r){const t=e=>{e.data.uris.some(e=>e===a.track.uri)&&("add"===e.data.operation?l(!0):"remove"===e.data.operation&&l(!1))};return e.getEvents().addListener("operation_complete",t),()=>{e.getEvents().removeListener("operation_complete",t)}}},[r,a.track.uri,l]);var o=_.default.createElement("div",{style:{height:"compact"===a.displayType?"32px":"54px"}}),c=_.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:h(["save_to_your_liked_songs"]),showDelay:100},_.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":h(["save_to_your_liked_songs"]),iconOnly:()=>_.default.createElement(f,{icon:"plus-alt",iconSize:16}),buttonSize:"sm",style:{padding:0,visibility:t?void 0:"hidden"},onClick:async function(){await m("LibraryAPI").add({uris:[a.track.uri]})}})),s=_.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:h(["remove_from_your_liked_songs"]),showDelay:100},_.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":h(["remove_from_your_liked_songs"]),iconOnly:()=>_.default.createElement(f,{icon:"check-alt-fill",iconSize:16}),buttonSize:"sm",style:{padding:0},onClick:async function(){await m("LibraryAPI").remove({uris:[a.track.uri]})},semanticColor:"essentialBrightAccent"})),u=_.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{iconOnly:()=>_.default.createElement(_.default.Fragment,null),buttonSize:"sm",style:{padding:0,visibility:t?void 0:"hidden"}});let d;switch(i){case!0:d=s;break;case!1:d=c;break;default:d=u}return _.default.createElement("div",{ref:e,onMouseEnter:()=>{n(!0)},onMouseLeave:()=>{n(!1)}},r?_.default.createElement(Spicetify.ReactComponent.RightClickMenu,{menu:a.getRowMenu(a.track)},_.default.createElement("div",{"aria-selected":a.selected,onClick:a.onClick,onDoubleClick:()=>{a.track.isPlayable&&a.onDoubleClick()},draggable:"true",onDragStart:e=>{a.dragHandler.draggable&&a.dragHandler.onDragStart(e)}},_.default.createElement("div",{className:`main-trackList-trackListRow main-trackList-trackListRowGrid ${a.active?"main-trackList-active":""} ${a.selected?"main-trackList-selected":""} `+("compact"===a.displayType?"main-trackList-rowCompactMode":""),style:{opacity:a.track.isPlayable?1:.4}},_.default.createElement("div",{className:"main-trackList-rowSectionIndex","aria-colindex":1,tabIndex:-1},_.default.createElement("div",{className:"main-trackList-rowMarker"},a.playing?_.default.createElement(_.default.Fragment,null,_.default.createElement("img",{className:"main-trackList-playingIcon",width:"14",height:"14",alt:"",src:"/images/equaliser-animated-green.gif"}),_.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:h(["playback-control.pause"]),showDelay:200},_.default.createElement("button",{className:"main-trackList-rowImagePlayButton","aria-label":h(["playback-control.pause"]),tabIndex:0,"aria-expanded":"false",onClick:()=>{Spicetify.Player.pause()}},_.default.createElement("svg",{height:"24",width:"24","aria-hidden":"true",fill:"currentColor",className:"main-trackList-rowPlayPauseIcon",viewBox:"0 0 24 24"},_.default.createElement("path",{d:"M5.7 3a.7.7 0 0 0-.7.7v16.6a.7.7 0 0 0 .7.7h2.6a.7.7 0 0 0 .7-.7V3.7a.7.7 0 0 0-.7-.7H5.7zm10 0a.7.7 0 0 0-.7.7v16.6a.7.7 0 0 0 .7.7h2.6a.7.7 0 0 0 .7-.7V3.7a.7.7 0 0 0-.7-.7h-2.6z"}))))):_.default.createElement(_.default.Fragment,null,_.default.createElement("span",{className:"main-trackList-number"},a.index),a.track.isPlayable&&_.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:h(["tracklist.a11y.play"],a.track.name,a.track.artists.map(e=>e.name).join(", ")),showDelay:200},_.default.createElement("button",{className:"main-trackList-rowImagePlayButton","aria-label":h(["tracklist.a11y.play"],a.track.name,a.track.artists.map(e=>e.name).join(", ")),onClick:()=>{a.active?Spicetify.Player.play():a.track.isPlayable&&a.onDoubleClick()},tabIndex:-1},_.default.createElement("svg",{height:"24",width:"24","aria-hidden":"true",className:"main-trackList-rowPlayPauseIcon",viewBox:"0 0 24 24","data-encore-id":"icon",fill:"currentColor"},_.default.createElement("path",{d:"M7.05 3.606l13.49 7.788a.7.7 0 010 1.212L7.05 20.394A.7.7 0 016 19.788V4.212a.7.7 0 011.05-.606z"}))))))),a.children&&_.Children.map(a.children,(e,t)=>_.default.createElement("div",{className:0===t?"main-trackList-rowSectionStart":"main-trackList-rowSectionVariable","aria-colindex":t+2,tabIndex:-1},e)),_.default.createElement("div",{className:"main-trackList-rowSectionEnd","aria-colindex":_.Children.count(a.children)+2,tabIndex:-1},d,_.default.createElement(E,{variant:"mesto",semanticColor:"textSubdued",className:"main-trackList-rowDuration"},Spicetify.Player.formatTime(a.track.duration)),_.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:h(["more.label.track"],a.track.name,a.track.artists.map(e=>e.name).join(", ")),showDelay:100},_.default.createElement("div",null,_.default.createElement(Spicetify.ReactComponent.ContextMenu,{trigger:"click",action:"toggle",menu:a.getRowMenu(a.track)},_.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":h(["more.label.track"],a.track.name,a.track.artists.map(e=>e.name).join(", ")),"aria-haspopup":"menu",iconOnly:()=>_.default.createElement(f,{icon:"more",iconSize:16}),buttonSize:"sm",style:{padding:0,visibility:t?void 0:"hidden"}})))))))):o)}var i=t(r()),ge=t(r());function ke(e){return ge.default.createElement("svg",{height:"16",width:"16",viewBox:"0 0 16 16",fill:"var(--text-bright-accent)",className:e.className},ge.default.createElement("path",{d:"M14 10L8 4l-6 6h12z"}))}var we=t(r());function Se(e){return we.default.createElement("svg",{height:"16",width:"16",viewBox:"0 0 16 16",fill:"var(--text-bright-accent)",className:e.className},we.default.createElement("path",{d:"M14 6l-6 6-6-6h12z"}))}function De(a){function r(){return void 0===a.sortedHeader?i.default.createElement(i.default.Fragment,null):"ascending"===a.sortedHeader.order?i.default.createElement(ke,{className:"main-trackList-arrow"}):i.default.createElement(Se,{className:"main-trackList-arrow"})}const n=void 0!==a.sortedHeader?"main-trackList-sortable":"";return i.default.createElement("div",{className:"main-trackList-trackListHeader"},i.default.createElement("div",{className:"main-trackList-trackListHeaderRow main-trackList-trackListRowGrid","aria-rowindex":1},i.default.createElement("div",{className:"main-trackList-rowSectionIndex","aria-colindex":1,"aria-sort":"none",tabIndex:-1},"#"),a.headers.map((e,t)=>i.default.createElement("div",{key:e.key,className:0===t?"main-trackList-rowSectionStart":"main-trackList-rowSectionVariable","aria-colindex":t+2,"aria-sort":a.sortedHeader&&a.sortedHeader.key===e.key?a.sortedHeader.order:"none",tabIndex:-1},i.default.createElement("button",{className:"main-trackList-column "+n,tabIndex:-1,onClick:()=>{a.onHeaderClicked?.(e.key)}},i.default.createElement(E,{variant:"mesto"},e.label),a.sortedHeader&&a.sortedHeader.key===e.key&&r()))),i.default.createElement("div",{className:"main-trackList-rowSectionEnd","aria-colindex":a.headers.length+2,"aria-sort":"none",tabIndex:-1},i.default.createElement("button",{"aria-label":h(["tracklist.header.duration"]),className:"main-trackList-column main-trackList-durationHeader "+n,onClick:()=>{a.onHeaderClicked?.("duration")}},i.default.createElement("svg",{height:"16",width:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor"},i.default.createElement("path",{d:"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8z"}),i.default.createElement("path",{d:"M8 3.25a.75.75 0 01.75.75v3.25H11a.75.75 0 010 1.5H7.25V4A.75.75 0 018 3.25z"}))),a.sortedHeader&&"duration"===a.sortedHeader.key&&r())))}var Ie=t(r());var xe=t(r());function Ne(a){const r=function(){const[e,t]=(0,Ie.useState)(Spicetify.Player?.data?.item?.uri??"");return(0,Ie.useEffect)(()=>{function e(e){t((e?.data).item?.uri??"")}return Spicetify.Player.addEventListener("songchange",e),()=>{Spicetify.Player.removeEventListener("songchange",e)}}),e}(),n=function(){const[e,t]=(0,xe.useState)(Spicetify.Player?.data?.isPaused?"pause":"play");return(0,xe.useEffect)(()=>{function e(e){t((e?.data).isPaused?"pause":"play")}return Spicetify.Player.addEventListener("onplaypause",e),()=>{Spicetify.Player.removeEventListener("onplaypause",e)}}),e}(),[i,l]=(0,s.useState)(new Map),o=(0,s.useMemo)(()=>{var e=Array.from(i.entries());return 0===e.length?Spicetify.ReactHook.DragHandler({itemUris:[],dragLabelText:""}):Spicetify.ReactHook.DragHandler({itemUris:e.map(e=>e[0]),dragLabelText:1<i.size?h(["tracklist.drag.multiple.label","other"],i.size):e[0][1].name})},[i]);function c(e,t){e.ctrlKey?(i.has(t.uri)?i.delete(t.uri):i.set(t.uri,t),l(new Map(i))):l(new Map([[t.uri,t]]))}return s.default.createElement("div",{className:"contentSpacing"},s.default.createElement("div",{role:"grid","aria-rowcount":a.tracks.length,"aria-colcount":a.headers.length+2,"aria-label":a.gridLabel,className:"main-trackList-trackList main-trackList-indexable",tabIndex:0},s.default.createElement(De,{headers:a.headers,sortedHeader:a.sortedHeader,onHeaderClicked:a.onHeaderClicked}),s.default.createElement("div",{className:""+("compact"===a.displayType?pe:fe)},a.tracks.map((t,e)=>s.default.createElement(ye,{key:t.uri,track:t,index:a.useTrackNumber?t.trackNumber:e+1,selected:i.has(t.uri),active:r===t.uri,playing:r===t.uri&&"play"===n,onClick:e=>{c(e,t)},onDoubleClick:()=>{a.onPlayTrack(t.uri)},dragHandler:o,displayType:a.displayType,getRowMenu:a.getRowMenu},a.getRowContent(t))),a.subtracks.map(e=>s.default.createElement(s.default.Fragment,null,e.headerRow,e.tracks.map((t,e)=>s.default.createElement(ye,{key:t.uri,track:t,index:a.useTrackNumber?t.trackNumber:e+1,selected:i.has(t.uri),active:r===t.uri,playing:r===t.uri&&"play"===n,onClick:e=>{c(e,t)},onDoubleClick:()=>{a.onPlayTrack(t.uri)},dragHandler:o,displayType:a.displayType,getRowMenu:a.getRowMenu},a.getRowContent(t))))))))}var Ce=t(r());function Re(t){return Ce.default.createElement("div",{className:"main-trackList-rowMainContent"},Ce.default.createElement(E,{className:"main-trackList-rowTitle standalone-ellipsis-one-line",variant:"ballad",semanticColor:"textBase"},t.track.name),t.withArtists&&Ce.default.createElement(E,{className:"main-trackList-rowSubTitle standalone-ellipsis-one-line",variant:"mesto",semanticColor:"textSubdued"},t.track.artists.map(e=>Ce.default.createElement("a",{dir:"auto",href:"#",tabIndex:-1,onClick:()=>{t.onArtistClick(e.uri)},key:e.uri},e.name)).reduce((e,t)=>null===e?[t]:[...e,Ce.default.createElement(Ce.default.Fragment,null,", "),t],null)))}var l=t(r());function Te(e){return l.default.createElement("div",{className:"main-trackList-trackListRowGrid main-trackList-discRow"},l.default.createElement("div",{className:"main-trackList-rowSectionIndex","aria-colindex":1,tabIndex:-1},l.default.createElement("div",{className:"main-trackList-rowMarker"},l.default.createElement("span",{className:"main-trackList-icon"},l.default.createElement("svg",{height:"16",width:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor"},l.default.createElement("path",{d:"M8 1.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13zM0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8z"}),l.default.createElement("path",{d:"M8 6.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM5 8a3 3 0 1 1 6 0 3 3 0 0 1-6 0z"}))))),l.default.createElement("div",{className:"main-trackList-rowSectionStart","aria-colindex":2,tabIndex:-1},l.default.createElement("div",{className:"main-trackList-rowMainContent"},l.default.createElement("div",{dir:"auto",className:"main-trackList-rowTitle main-trackList-discTitle standalone-ellipsis-one-line"},h(["tracklist.disc-sperator.title"],e.discNumber)))))}var Le="app-module__flex-centered___5gRmM_betterDlocalDfiles",Oe=t(r());function Ae(e){return Oe.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:e.label,showDelay:100},Oe.default.createElement("div",{className:""+Le},Oe.default.createElement(Spicetify.ReactComponent.ContextMenu,{trigger:"click",action:"toggle",menu:e.menu},Oe.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":e.label,"aria-haspopup":"menu",iconOnly:()=>Oe.default.createElement(f,{icon:"more"})}))))}var Me=t(r()),Pe=t(r());function ze(e){var t=Spicetify.ReactDOMServer.renderToString(Pe.default.createElement(Spicetify.ReactComponent.MenuItem,{leadingIcon:e.leadingIcon,trailingIcon:Pe.default.createElement("svg",{height:"16",width:"16","aria-hidden":"true",className:"main-contextMenu-subMenuIcon",viewBox:"0 0 16 16",fill:"currentColor"},Pe.default.createElement("path",{d:"M14 10 8 4l-6 6h12z"}))},Pe.default.createElement("span",null,e.label)));return Pe.default.createElement(Spicetify.ReactComponent.ContextMenu,{trigger:"click",action:"toggle",placement:"right-end",renderInline:!0,menu:e.submenu},Pe.default.createElement("div",{onMouseEnter:e=>{e.currentTarget.click()},dangerouslySetInnerHTML:{__html:t}}))}var He=t(r()),a="/better-local-files",$e=a+"/album",Fe=a+"/albums",v=a+"/artist",Be=a+"/artists",je=a,Ge=[{key:"Tracks",href:je,label:h(["search.title.tracks"])},{key:"Albums",href:Fe,label:h(["search.title.albums"])},{key:"Artists",href:Be,label:h(["search.title.artists"])}],We="encore-dark-theme main-contextMenu-menu";function Ue(a){const[e,r]=(0,He.useState)([]);return(0,He.useEffect)(()=>{!async function(){const t=await m("UserAPI").getUser();var e=(await async function(){var e=await m("RootlistAPI").getContents();const t=e=>e.flatMap(e=>"playlist"===e.type?e:[...t(e.items)]);return t(e.items)}()).filter(e=>e.owner.uri===t.uri);r(e)}()},[]),He.default.createElement(Spicetify.ReactComponent.Menu,{className:We},e.map(t=>He.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:async()=>{var e;e=t.uri,await m("PlaylistAPI").add(e,a.tracksUri,{after:"end"})},key:t.uri},He.default.createElement("span",null,t.name))))}var Xe='<path d="M16 15H2v-1.5h14V15zm0-4.5H2V9h14v1.5zm-8.034-6A5.484 5.484 0 0 1 7.187 6H13.5a2.5 2.5 0 0 0 0-5H7.966c.159.474.255.978.278 1.5H13.5a1 1 0 1 1 0 2H7.966zM2 2V0h1.5v2h2v1.5h-2v2H2v-2H0V2h2z"></path>';function Ve(e){return Me.default.createElement(Spicetify.ReactComponent.Menu,{className:We},Me.default.createElement(ze,{label:h(["contextmenu.add-to-playlist"]),submenu:Me.default.createElement(Ue,{tracksUri:e.tracks.map(e=>e.uri)}),leadingIcon:Me.default.createElement(f,{icon:"plus2px",iconSize:16})}),Me.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:async function(){await m("PlayerAPI").addToQueue(e.tracks.map(e=>({uri:e.uri})))},leadingIcon:Me.default.createElement(f,{iconPath:Xe,iconSize:16})},Me.default.createElement("span",null,h(["contextmenu.add-to-queue"]))))}var u=t(r()),Ze=t(r());function qe(e){return Ze.default.createElement(Spicetify.ReactComponent.Menu,{className:We},e.artists.map(e=>Ze.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:()=>{p(v,e.uri)},key:e.uri},Ze.default.createElement("span",null,e.name))))}function Ye(e){var[t]=ve(e.track.uri);let a;switch(t){case!0:a=u.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:async function(){await m("LibraryAPI").remove({uris:[e.track.uri]})},leadingIcon:u.default.createElement(f,{icon:"check-alt-fill",iconSize:16,semanticColor:"essentialBrightAccent"})},u.default.createElement("span",null,h(["remove_from_your_liked_songs"])));break;case!1:a=u.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:async function(){await m("LibraryAPI").add({uris:[e.track.uri]})},leadingIcon:u.default.createElement(f,{icon:"plus-alt",iconSize:16})},u.default.createElement("span",null,h(["save_to_your_liked_songs"])));break;default:a=u.default.createElement(Spicetify.ReactComponent.MenuItem,null,u.default.createElement("span",null,"..."))}return u.default.createElement(Spicetify.ReactComponent.Menu,{className:We},u.default.createElement(ze,{label:h(["contextmenu.add-to-playlist"]),submenu:u.default.createElement(Ue,{tracksUri:[e.track.uri]}),leadingIcon:u.default.createElement(f,{icon:"plus2px",iconSize:16})}),a,u.default.createElement(Spicetify.ReactComponent.MenuItem,{divider:"after",onClick:async function(){await m("PlayerAPI").addToQueue([{uri:e.track.uri}])},leadingIcon:u.default.createElement(f,{iconPath:Xe,iconSize:16})},u.default.createElement("span",null,h(["contextmenu.add-to-queue"]))),1===e.track.artists.length?u.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:()=>{p(v,e.track.artists[0].uri)},leadingIcon:u.default.createElement(f,{icon:"artist",iconSize:16})},u.default.createElement("span",null,h(["contextmenu.go-to-artist"]))):u.default.createElement(ze,{label:h(["contextmenu.go-to-artist"]),submenu:u.default.createElement(qe,{artists:e.track.artists}),leadingIcon:u.default.createElement(f,{icon:"artist",iconSize:16})}),u.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:()=>{p($e,e.track.album.uri)},leadingIcon:u.default.createElement(f,{icon:"album",iconSize:16})},u.default.createElement("span",null,h(["contextmenu.go-to-album"]))))}function Je(e){var t=[],a=[];const r=Array.from(e.discs.values()).flat();if(1===e.discs.size)t.push(...r);else for(var[n,i]of e.discs.entries())a.push({headerRow:c.default.createElement(Te,{discNumber:n}),tracks:i});var l=[{key:"title",label:h(["sort.title"])}];return c.default.createElement(c.default.Fragment,null,c.default.createElement("div",{className:"main-actionBar-ActionBar contentSpacing"},c.default.createElement("div",{className:"main-actionBar-ActionBarRow"},c.default.createElement("div",{className:"main-playButton-PlayButton"},c.default.createElement(me,{size:"lg",onClick:()=>{se(r.map(e=>e.backingTrack))}})),c.default.createElement(Ae,{label:h(["more.label.context"],r[0].album.name),menu:c.default.createElement(Ve,{tracks:r})}))),c.default.createElement(Ne,{tracks:t,subtracks:a,gridLabel:e.albumName,useTrackNumber:!0,onPlayTrack:e=>{ce(e,r.map(e=>e.backingTrack))},headers:l,getRowContent:e=>[c.default.createElement(Re,{key:e.uri,track:e,withArtists:!0,onArtistClick:e=>{p(v,e)}})],displayType:"list",getRowMenu:e=>c.default.createElement(Ye,{track:e})}))}var Ke={"stretch-container":"app-module__stretch-container___SIzsh_betterDlocalDfiles","center-container":"app-module__center-container___LG8O4_betterDlocalDfiles","full-size-container":"app-module__full-size-container___XoGtP_betterDlocalDfiles","pad-top":"app-module__pad-top___8OIp9_betterDlocalDfiles","card-grid":"app-module__card-grid___4mWTm_betterDlocalDfiles","main-card-card":"app-module__main-card-card___E9Zy2_betterDlocalDfiles","text-subdued":"app-module__text-subdued___7rYtR_betterDlocalDfiles","details-page-header":"app-module__details-page-header___2JiWt_betterDlocalDfiles",controls:"app-module__controls___ZDW-X_betterDlocalDfiles","flex-centered":"app-module__flex-centered___5gRmM_betterDlocalDfiles","limit-lines-2":"app-module__limit-lines-2___GyZCj_betterDlocalDfiles","text-full-centered":"app-module__text-full-centered___xI2eE_betterDlocalDfiles"},d=t(r()),Qe=t(e());function et(e){const t=d.default.createElement("div",{className:"main-image-image main-entityHeader-image main-entityHeader-shadow main-image-loaded "+Ke["center-container"]},d.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d.default.createElement("path",{d:"M9 18V5l12-2v13"}),d.default.createElement("circle",{cx:"6",cy:"18",r:"3"}),d.default.createElement("circle",{cx:"18",cy:"16",r:"3"})));return d.default.createElement(d.default.Fragment,null,""!==e.imageSrc?d.default.createElement("img",{src:e.imageSrc,className:"main-image-image main-entityHeader-image main-entityHeader-shadow main-entityHeader-newEntityHeaders main-image-loaded",onError:e=>e.currentTarget.outerHTML=Spicetify.ReactDOMServer.renderToString(t)}):t)}function tt(e){var{fontSize:t,ref:a}=(0,Qe.default)();return d.default.createElement("div",{className:"contentSpacing main-entityHeader-container main-entityHeader-nonWrapped main-entityHeader-newEntityHeaders "+Ke["pad-top"]},d.default.createElement("div",{className:"main-entityHeader-backgroundColor"}),d.default.createElement("div",{className:"main-entityHeader-backgroundColor main-entityHeader-overlay"}),d.default.createElement("div",null),d.default.createElement("div",{className:"main-entityHeader-imageContainer main-entityHeader-imageContainerNew"},d.default.createElement("div",{className:"main-entityHeader-image"},e.image)),d.default.createElement("div",{className:"main-entityHeader-headerText"},e.subtitle&&d.default.createElement(E,{variant:"mesto",className:"main-entityHeader-pretitle"},e.subtitle),d.default.createElement("div",{dir:"auto",className:"main-entityHeader-title",style:{maxHeight:"135px",fontSize:"6rem"},ref:a},d.default.createElement(E,{variant:"bass",semanticColor:"textBase",elementType:"h1",style:{fontSize:t}},e.title)),e.metadata&&d.default.createElement("div",{className:"main-entityHeader-metaData",style:{maxHeight:"66px"}},e.metadata)))}function at(e){return n.default.createElement(tt,{image:n.default.createElement(et,{imageSrc:e.album.image}),subtitle:h(["album"]),title:e.album.name,metadata:n.default.createElement(n.default.Fragment,null,e.album.artists.map(e=>n.default.createElement(E,{variant:"mestoBold",key:e.uri},n.default.createElement("a",{href:"#",draggable:"false",onClick:()=>{p(v,e.uri)}},e.name))).reduce((e,t,a)=>null===e?[t]:[...e,n.default.createElement("span",{key:a,className:"main-entityHeader-divider"}),t],null),n.default.createElement(E,{variant:"mesto",className:"main-entityHeader-metaDataText"},h(["tracklist-header.songs-counter",1===e.album.getTracks().length?"one":"other"],e.album.getTracks().length)),n.default.createElement(E,{variant:"mesto",className:"main-entityHeader-metaDataText"},(e=e.album.getDuration(),t=Math.floor(e/1e3%60),a=Math.floor(e/1e3/60%60),e=Math.floor(e/1e3/60/60%24),r=[],0!==e&&r.push(h(["time.hours.short",1===e?"one":"other"],e)),0!==a&&r.push(h(["time.minutes.short",1===a?"one":"other"],a)),0===e&&0!==t&&r.push(h(["time.seconds.short",1===t?"one":"other"],t)),r.join(" "))))});var t,a,r}function rt(){var e=m("History"),t=e.location.state.uri??null;return null===t?(e.replace(Fe),n.default.createElement(n.default.Fragment,null)):(e=window.localTracksService.getAlbums()).has(t)?(e=e.get(t),n.default.createElement(n.default.Fragment,null,null!==e&&n.default.createElement(n.default.Fragment,null,n.default.createElement(at,{album:e}),n.default.createElement(Je,{albumName:e.name,discs:e.discs})))):(p(Fe),n.default.createElement(n.default.Fragment,null))}var b=t(r()),nt={"stretch-container":"app-module__stretch-container___SIzsh_betterDlocalDfiles","center-container":"app-module__center-container___LG8O4_betterDlocalDfiles","full-size-container":"app-module__full-size-container___XoGtP_betterDlocalDfiles","pad-top":"app-module__pad-top___8OIp9_betterDlocalDfiles","card-grid":"app-module__card-grid___4mWTm_betterDlocalDfiles","main-card-card":"app-module__main-card-card___E9Zy2_betterDlocalDfiles","text-subdued":"app-module__text-subdued___7rYtR_betterDlocalDfiles","details-page-header":"app-module__details-page-header___2JiWt_betterDlocalDfiles",controls:"app-module__controls___ZDW-X_betterDlocalDfiles","flex-centered":"app-module__flex-centered___5gRmM_betterDlocalDfiles","limit-lines-2":"app-module__limit-lines-2___GyZCj_betterDlocalDfiles","text-full-centered":"app-module__text-full-centered___xI2eE_betterDlocalDfiles"},y=t(r()),it={"stretch-container":"app-module__stretch-container___SIzsh_betterDlocalDfiles","center-container":"app-module__center-container___LG8O4_betterDlocalDfiles","full-size-container":"app-module__full-size-container___XoGtP_betterDlocalDfiles","pad-top":"app-module__pad-top___8OIp9_betterDlocalDfiles","card-grid":"app-module__card-grid___4mWTm_betterDlocalDfiles","main-card-card":"app-module__main-card-card___E9Zy2_betterDlocalDfiles","text-subdued":"app-module__text-subdued___7rYtR_betterDlocalDfiles","details-page-header":"app-module__details-page-header___2JiWt_betterDlocalDfiles",controls:"app-module__controls___ZDW-X_betterDlocalDfiles","flex-centered":"app-module__flex-centered___5gRmM_betterDlocalDfiles","limit-lines-2":"app-module__limit-lines-2___GyZCj_betterDlocalDfiles","text-full-centered":"app-module__text-full-centered___xI2eE_betterDlocalDfiles"};function lt(e){var t=(0,y.useRef)(null),a=_e(t);const r=Spicetify.ReactHook.DragHandler({itemUris:e.album.getTracks().map(e=>e.uri),dragLabelText:e.album.name,contextUri:e.album.uri});var n=y.default.createElement("div",{style:{height:"250px"}});const i=y.default.createElement("div",{className:"main-image-image main-cardImage-image main-image-loading main-image-loaded "+it["center-container"]},y.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},y.default.createElement("path",{d:"M9 18V5l12-2v13"}),y.default.createElement("circle",{cx:"6",cy:"18",r:"3"}),y.default.createElement("circle",{cx:"18",cy:"16",r:"3"})));var l=y.default.createElement("div",{className:it["main-card-card"]+" main-card-card",draggable:!0,onClick:()=>{p($e,e.album.uri)},onDragStart:e=>{r.draggable&&r.onDragStart(e)}},y.default.createElement("div",{className:"main-card-draggable"},y.default.createElement("div",{className:"main-card-imageContainer main-card-imageContainerOld"},y.default.createElement("div",{className:"main-cardImage-imageWrapper"},""!==e.album.image?y.default.createElement("img",{"aria-hidden":"false",draggable:"false",loading:"lazy",src:e.album.image,alt:"album image",className:"main-image-image main-cardImage-image main-image-loading main-image-loaded",onError:e=>e.currentTarget.outerHTML=Spicetify.ReactDOMServer.renderToString(i)}):i),y.default.createElement("div",{className:"main-card-PlayButtonContainer"},y.default.createElement("div",{className:"main-playButton-PlayButton"},y.default.createElement(me,{size:"md",onClick:()=>{e.onPlayClicked(e.album)}})))),y.default.createElement("div",{className:"main-card-cardMetadata"},y.default.createElement(E,{className:"main-cardHeader-link main-cardHeader-text",variant:"balladBold",semanticColor:"textBase",paddingBottom:"4px"},e.album.name),y.default.createElement(E,{className:"main-cardSubHeader-root "+it["limit-lines-2"],variant:"mesto",semanticColor:"textSubdued"},e.album.artists.map(t=>y.default.createElement("span",{key:t.uri},y.default.createElement("a",{href:"#",draggable:"false",onClick:e=>{e.stopPropagation(),p(v,t.uri)}},t.name))).reduce((e,t)=>null===e?[t]:[...e,y.default.createElement(y.default.Fragment,null,", "),t],null)))));return y.default.createElement("div",{ref:t},a?y.default.createElement(Spicetify.ReactComponent.RightClickMenu,{menu:y.default.createElement(Ve,{tracks:e.album.getTracks()})},l):n)}var ot=t(r()),ct={"search-container":"SearchInput-module__search-container___6V0Ij_betterDlocalDfiles","search-icon":"SearchInput-module__search-icon___scfSd_betterDlocalDfiles","clear-icon":"SearchInput-module__clear-icon___-dvoN_betterDlocalDfiles"},st=function(e,t){return(st=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}))(e,t)};function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function a(){this.constructor=e}st(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}function ut(e){var t="function"==typeof Symbol&&Symbol.iterator,a=t&&e[t],r=0;if(a)return a.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function dt(e,t){var a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var r,n,i=a.call(e),l=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)l.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}return l}function mt(e,t,a){if(a||2===arguments.length)for(var r,n=0,i=t.length;n<i;n++)!r&&n in t||((r=r||Array.prototype.slice.call(t,0,n))[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))}function k(e){return"function"==typeof e}function ft(e){e=e(function(e){Error.call(e),e.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e}var pt=ft(function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}});function ht(e,t){e&&0<=(t=e.indexOf(t))&&e.splice(t,1)}w.prototype.unsubscribe=function(){var t,e,a;if(!this.closed){this.closed=!0;var r=this._parentage;if(r)if(this._parentage=null,Array.isArray(r))try{for(var n=ut(r),i=n.next();!i.done;i=n.next())i.value.remove(this)}catch(e){o={error:e}}finally{try{i&&!i.done&&(l=n.return)&&l.call(n)}finally{if(o)throw o.error}}else r.remove(this);var l=this.initialTeardown;if(k(l))try{l()}catch(e){a=e instanceof pt?e.errors:[e]}var o=this._finalizers;if(o){this._finalizers=null;try{for(var c=ut(o),s=c.next();!s.done;s=c.next()){var u=s.value;try{bt(u)}catch(e){a=null!=a?a:[],e instanceof pt?a=mt(mt([],dt(a)),dt(e.errors)):a.push(e)}}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=c.return)&&e.call(c)}finally{if(t)throw t.error}}}if(a)throw new pt(a)}},w.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)bt(e);else{if(e instanceof w){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!=(t=this._finalizers)?t:[]).push(e)}},w.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},w.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},w.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&ht(t,e)},w.prototype.remove=function(e){var t=this._finalizers;t&&ht(t,e),e instanceof w&&e._removeParent(this)},w.EMPTY=((J=new w).closed=!0,J);var _t=w;function w(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var Et=_t.EMPTY;function vt(e){return e instanceof _t||e&&"closed"in e&&k(e.remove)&&k(e.add)&&k(e.unsubscribe)}function bt(e){k(e)?e():e.unsubscribe()}var yt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},gt={setTimeout:function(e,t){for(var a=[],r=2;r<arguments.length;r++)a[r-2]=arguments[r];var n=gt.delegate;return null!=n&&n.setTimeout?n.setTimeout.apply(n,mt([e,t],dt(a))):setTimeout.apply(void 0,mt([e,t],dt(a)))},clearTimeout:function(e){var t=gt.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function kt(){}var wt=St("C",void 0,void 0);function St(e,t,a){return{kind:e,value:t,error:a}}var Dt=null;function It(e){if(yt.useDeprecatedSynchronousErrorHandling){var t=!Dt;if(t&&(Dt={errorThrown:!1,error:null}),e(),t){var t=Dt,a=t.errorThrown,t=t.error;if(Dt=null,a)throw t}}else e()}g(S,xt=_t),S.create=function(e,t,a){return new At(e,t,a)},S.prototype.next=function(e){this.isStopped?zt(St("N",e,void 0),this):this._next(e)},S.prototype.error=function(e){this.isStopped?zt(St("E",void 0,e),this):(this.isStopped=!0,this._error(e))},S.prototype.complete=function(){this.isStopped?zt(wt,this):(this.isStopped=!0,this._complete())},S.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,xt.prototype.unsubscribe.call(this),this.destination=null)},S.prototype._next=function(e){this.destination.next(e)},S.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},S.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}};var xt,Nt=S;function S(e){var t=xt.call(this)||this;return t.isStopped=!1,e?vt(t.destination=e)&&e.add(t):t.destination=Ht,t}var Ct=Function.prototype.bind;function Rt(e,t){return Ct.call(e,t)}Lt.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){Pt(e)}},Lt.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){Pt(e)}else Pt(e)},Lt.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){Pt(e)}};var Tt=Lt;function Lt(e){this.partialObserver=e}g(Mt,Ot=Nt);var Ot,At=Mt;function Mt(e,t,a){var r=Ot.call(this)||this;return a=k(e)||!e?{next:null!=e?e:void 0,error:null!=t?t:void 0,complete:null!=a?a:void 0}:r&&yt.useDeprecatedNextContext?((t=Object.create(e)).unsubscribe=function(){return r.unsubscribe()},{next:e.next&&Rt(e.next,t),error:e.error&&Rt(e.error,t),complete:e.complete&&Rt(e.complete,t)}):e,r.destination=new Tt(a),r}function Pt(e){var t,a;yt.useDeprecatedSynchronousErrorHandling?(a=e,yt.useDeprecatedSynchronousErrorHandling&&Dt&&(Dt.errorThrown=!0,Dt.error=a)):(t=e,gt.setTimeout(function(){var e=yt.onUnhandledError;if(!e)throw t;e(t)}))}function zt(e,t){var a=yt.onStoppedNotification;a&&gt.setTimeout(function(){return a(e,t)})}var Ht={closed:!0,next:kt,error:function(e){throw e},complete:kt},a="function"==typeof Symbol&&Symbol.observable||"@@observable";function $t(e){return e}D.prototype.lift=function(e){var t=new D;return t.source=this,t.operator=e,t},D.prototype.subscribe=function(e,t,a){var r,n=this,i=(r=e)&&r instanceof Nt||function(e){return e&&k(e.next)&&k(e.error)&&k(e.complete)}(r)&&vt(r)?e:new At(e,t,a);return It(function(){var e=n.operator,t=n.source;i.add(e?e.call(i,t):t?n._subscribe(i):n._trySubscribe(i))}),i},D.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},D.prototype.forEach=function(r,e){var n=this;return new(e=Bt(e))(function(e,t){var a=new At({next:function(e){try{r(e)}catch(e){t(e),a.unsubscribe()}},error:t,complete:e});n.subscribe(a)})},D.prototype._subscribe=function(e){var t;return null==(t=this.source)?void 0:t.subscribe(e)},D.prototype[a]=function(){return this},D.prototype.pipe=function(){for(var t,e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];return(0===(t=e).length?$t:1===t.length?t[0]:function(e){return t.reduce(function(e,t){return t(e)},e)})(this)},D.prototype.toPromise=function(e){var r=this;return new(e=Bt(e))(function(e,t){var a;r.subscribe(function(e){return a=e},function(e){return t(e)},function(){return e(a)})})},D.create=function(e){return new D(e)};var Ft=D;function D(e){e&&(this._subscribe=e)}function Bt(e){return null!=(e=null!=e?e:yt.Promise)?e:Promise}function jt(a){return function(e){if(k(null==(t=e)?void 0:t.lift))return e.lift(function(e){try{return a(e,this)}catch(e){this.error(e)}});var t;throw new TypeError("Unable to lift unknown Observable type")}}function Gt(e,t,a,r,n){return new Ut(e,t,a,r,n)}g(Xt,Wt=Nt),Xt.prototype.unsubscribe=function(){var e;this.shouldUnsubscribe&&!this.shouldUnsubscribe()||(e=this.closed,Wt.prototype.unsubscribe.call(this),e)||null==(e=this.onFinalize)||e.call(this)};var Wt,Ut=Xt;function Xt(t,a,e,r,n,i){var l=Wt.call(this,t)||this;return l.onFinalize=n,l.shouldUnsubscribe=i,l._next=a?function(e){try{a(e)}catch(e){t.error(e)}}:Wt.prototype._next,l._error=r?function(e){try{r(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:Wt.prototype._error,l._complete=e?function(){try{e()}catch(e){t.error(e)}finally{this.unsubscribe()}}:Wt.prototype._complete,l}var Vt,Zt=ft(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),e=(g(I,Vt=Ft),I.prototype.lift=function(e){var t=new Yt(this,this);return t.operator=e,t},I.prototype._throwIfClosed=function(){if(this.closed)throw new Zt},I.prototype.next=function(n){var i=this;It(function(){var t,e;if(i._throwIfClosed(),!i.isStopped){i.currentObservers||(i.currentObservers=Array.from(i.observers));try{for(var a=ut(i.currentObservers),r=a.next();!r.done;r=a.next())r.value.next(n)}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}}})},I.prototype.error=function(t){var a=this;It(function(){if(a._throwIfClosed(),!a.isStopped){a.hasError=a.isStopped=!0,a.thrownError=t;for(var e=a.observers;e.length;)e.shift().error(t)}})},I.prototype.complete=function(){var t=this;It(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var e=t.observers;e.length;)e.shift().complete()}})},I.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(I.prototype,"observed",{get:function(){var e;return 0<(null==(e=this.observers)?void 0:e.length)},enumerable:!1,configurable:!0}),I.prototype._trySubscribe=function(e){return this._throwIfClosed(),Vt.prototype._trySubscribe.call(this,e)},I.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},I.prototype._innerSubscribe=function(e){var t=this,a=this.hasError,r=this.isStopped,n=this.observers;return a||r?Et:(this.currentObservers=null,n.push(e),new _t(function(){t.currentObservers=null,ht(n,e)}))},I.prototype._checkFinalizedStatuses=function(e){var t=this.hasError,a=this.thrownError,r=this.isStopped;t?e.error(a):r&&e.complete()},I.prototype.asObservable=function(){var e=new Ft;return e.source=this,e},I.create=function(e,t){return new Yt(e,t)},I);function I(){var e=Vt.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}g(Jt,qt=e),Jt.prototype.next=function(e){var t,a;null!=(a=null==(t=this.destination)?void 0:t.next)&&a.call(t,e)},Jt.prototype.error=function(e){var t,a;null!=(a=null==(t=this.destination)?void 0:t.error)&&a.call(t,e)},Jt.prototype.complete=function(){var e,t;null!=(t=null==(e=this.destination)?void 0:e.complete)&&t.call(e)},Jt.prototype._subscribe=function(e){var t;return null!=(t=null==(t=this.source)?void 0:t.subscribe(e))?t:Et};var qt,Yt=Jt;function Jt(e,t){var a=qt.call(this)||this;return a.destination=e,a.source=t,a}g(ea,Kt=e),Object.defineProperty(ea.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),ea.prototype._subscribe=function(e){var t=Kt.prototype._subscribe.call(this,e);return t.closed||e.next(this._value),t},ea.prototype.getValue=function(){var e=this.hasError,t=this.thrownError,a=this._value;if(e)throw t;return this._throwIfClosed(),a},ea.prototype.next=function(e){Kt.prototype.next.call(this,this._value=e)};var Kt,Qt=ea;function ea(e){var t=Kt.call(this)||this;return t._value=e,t}var ta,aa={now:function(){return(aa.delegate||Date).now()},delegate:void 0},J=(g(ra,ta=_t),ra.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},ra);function ra(e,t){return ta.call(this)||this}var na,ia={setInterval:function(e,t){for(var a=[],r=2;r<arguments.length;r++)a[r-2]=arguments[r];var n=ia.delegate;return null!=n&&n.setInterval?n.setInterval.apply(n,mt([e,t],dt(a))):setInterval.apply(void 0,mt([e,t],dt(a)))},clearInterval:function(e){var t=ia.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},a=(g(la,na=J),la.prototype.schedule=function(e,t){var a;return void 0===t&&(t=0),this.closed||(this.state=e,e=this.id,a=this.scheduler,null!=e&&(this.id=this.recycleAsyncId(a,e,t)),this.pending=!0,this.delay=t,this.id=null!=(e=this.id)?e:this.requestAsyncId(a,this.id,t)),this},la.prototype.requestAsyncId=function(e,t,a){return void 0===a&&(a=0),ia.setInterval(e.flush.bind(e,this),a)},la.prototype.recycleAsyncId=function(e,t,a){if(null!=(a=void 0===a?0:a)&&this.delay===a&&!1===this.pending)return t;null!=t&&ia.clearInterval(t)},la.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;e=this._execute(e,t);if(e)return e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},la.prototype._execute=function(e,t){var a,r=!1;try{this.work(e)}catch(e){r=!0,a=e||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),a},la.prototype.unsubscribe=function(){var e,t,a;this.closed||(e=this.id,a=(t=this.scheduler).actions,this.work=this.state=this.scheduler=null,this.pending=!1,ht(a,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,na.prototype.unsubscribe.call(this))},la);function la(e,t){var a=na.call(this,e,t)||this;return a.scheduler=e,a.work=t,a.pending=!1,a}sa.prototype.schedule=function(e,t,a){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(a,t)},sa.now=aa.now;var oa,ca=sa;function sa(e,t){void 0===t&&(t=sa.now),this.schedulerActionCtor=e,this.now=t}function ua(e,t){e=oa.call(this,e,t=void 0===t?ca.now:t)||this;return e.actions=[],e._active=!1,e}g(ua,oa=ca),ua.prototype.flush=function(e){var t,a=this.actions;if(this._active)a.push(e);else{this._active=!0;do{if(t=e.execute(e.state,e.delay))break}while(e=a.shift());if(this._active=!1,t){for(;e=a.shift();)e.unsubscribe();throw t}}};var da=new ua(a);function ma(e,t){return e===t}var fa=t(r()),pa={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},e=(c,s)=>{var e=(0,fa.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:r,className:n="",children:i,...l},o)=>(0,fa.createElement)("svg",{ref:o,...pa,width:t,height:t,stroke:e,strokeWidth:r?24*Number(a)/Number(t):a,className:["lucide","lucide-"+c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n].join(" "),...l},[...s.map(([e,t])=>(0,fa.createElement)(e,t)),...Array.isArray(i)?i:[i]]));return e.displayName=""+c,e},ha=e("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),_a=e("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),Ea=e("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),va=e("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),x=t(r(),1),ba=e=>e+1|0,ya=()=>{const e=(0,x.useState)(0)[1];return(0,x.useRef)(()=>e(ba)).current},ga=(()=>"undefined"==typeof window?x.useEffect:x.useLayoutEffect)(),ka=e=>e[1]?.next?e[1]:{next:e[1],error:e[2],complete:e[3]};function wa(e,t,a,r){{var n=x.useEffect,i=[e,t,a,r];const l=(0,x.useRef)(i),o=(0,x.useRef)(),c=(0,x.useRef)();ga(()=>{l.current=i,o.current=ka(i)}),n(()=>{const t=l.current[0],e=(o.current||(o.current=ka(l.current)),t.subscribe({next:e=>{t===l.current[0]&&o.current.next?.(e)},error:e=>{t===l.current[0]&&(o.current.error?o.current:console).error(e)},complete:()=>{t===l.current[0]&&o.current.complete?.()}}));return c.current=e,()=>{e.unsubscribe()}},[i[0]]),c}}function Sa(e){const r=ya(),n=(0,x.useRef)(e),i=(0,x.useRef)(),l=(0,x.useRef)(!1),a=(0,x.useRef)(!1),[o,c]=(0,x.useState)(()=>{let t;return e.subscribe({next:e=>{a.current=!0,t=e},error:e=>{i.current=e}}).unsubscribe(),t});if(ga(()=>{n.current=e}),(0,x.useEffect)(()=>{i.current=null;const t=n.current;let a=o;const e=t.subscribe({next:e=>{t===n.current&&(l.current?c(e):a=e)},error:e=>{t===n.current&&(i.current=e,r())}});return l.current||a!==o&&c(a),l.current=!0,()=>{e.unsubscribe()}},[e]),i.current)throw i.current;if(a.current)return(0,x.useDebugValue)(o),o;throw new Error("Observable did not synchronously emit a value.")}function Da(t){const[a,e]=function(e){const[t]=(0,x.useState)(()=>new Qt(e));var[a]=(0,x.useState)(()=>({get current(){return t.value},set current(e){t.next(e)}}));return[a,t]}(t.search);var i,l,o,c;function r(e){a.current=e,t.setSearch(e)}return wa(e.pipe((o=400,void 0===c&&(c=da),jt(function(e,a){var r=null,t=null,n=null,i=function(){var e;r&&(r.unsubscribe(),e=t,t=r=null,a.next(e))};function l(){var e=n+o,t=c.now();t<e?(r=this.schedule(void 0,e-t),a.add(r)):i()}e.subscribe(Gt(a,function(e){t=e,n=c.now(),r||(r=c.schedule(l,o),a.add(r))},function(){i(),a.complete()},void 0,function(){t=r=null}))})),(void 0===l&&(l=$t),i=null!=i?i:ma,jt(function(e,a){var r,n=!0;e.subscribe(Gt(a,function(e){var t=l(e);!n&&i(r,t)||(n=!1,r=t,a.next(e))}))}))),t.setDebouncedSearch),ot.default.createElement("div",{className:ct["search-container"]},ot.default.createElement("div",{className:ct["search-icon"]},ot.default.createElement(va,{size:18})),ot.default.createElement("input",{role:"searchbox",maxLength:80,autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",placeholder:h(["navbar.search"]),"aria-hidden":"true",tabIndex:-1,value:t.search,onChange:e=>{r(e.target.value)}}),ot.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{iconOnly:()=>ot.default.createElement(f,{icon:"x",iconSize:16}),buttonSize:"sm",className:ct["clear-icon"],onClick:()=>{r("")},style:{visibility:t.search?"visible":"hidden"}}))}var N=t(r()),Ia={list:"list-view",compact:"menu",grid:"grid-view"},xa=t(r());function Na(e){return xa.default.createElement("li",null,xa.default.createElement(E,{className:"main-contextMenu-menuHeading ellipsis-one-line",variant:"finaleBold"},e.children))}var Ca=t(r());function Ra(e){return Ca.default.createElement(E,{className:"main-contextMenu-menuItemLabel ellipsis-one-line",variant:"mesto"},e.children)}function Ta(t){var e=N.default.createElement(N.default.Fragment,null,N.default.createElement(Na,null,h(["drop_down.sort_by"])),t.sortOptions.map(e=>N.default.createElement(Spicetify.ReactComponent.MenuItem,{key:e.key,onClick:()=>{t.setSelectedSortOption(e.key)},role:"menuitemradio","aria-checked":t.selectedSortOption.key===e.key,CheckedIcon:()=>"ascending"===t.selectedSortOption.order?N.default.createElement(_a,null):N.default.createElement(ha,null)},N.default.createElement(Ra,null,e.label)))),a=N.default.createElement(N.default.Fragment,null,N.default.createElement(Na,null,h(["web-player.your-library-x.sort-and-view-picker.view-as"])),t.displayTypes.map(e=>N.default.createElement(Spicetify.ReactComponent.MenuItem,{key:e,onClick:()=>{t.setSelectedDisplayType(e)},leadingIcon:N.default.createElement(f,{icon:Ia[e],iconSize:16}),role:"menuitemradio","aria-checked":t.selectedDisplayType===e},N.default.createElement(Ra,null,h(["web-player.your-library-x.sort-and-view-picker."+e]))))),e=N.default.createElement(Spicetify.ReactComponent.Menu,{className:We},0<t.sortOptions.length&&e,0<t.displayTypes.length&&a);return N.default.createElement(Spicetify.ReactComponent.ContextMenu,{trigger:"click",action:"toggle",menu:e},N.default.createElement("button",{className:"x-sortBox-sortDropdown"},N.default.createElement("span",null,t.sortOptions.find(e=>e.key===t.selectedSortOption.key)?.label??""),N.default.createElement(f,{icon:Ia[t.selectedDisplayType],iconSize:16})))}function La(e,t,a){a="descending"===a?-1:1;return t<e?a:e<t?-1*a:0}function Oa(){var[e,t]=(0,b.useState)("");const[a,r]=(0,b.useState)("");var n=[{key:"title",label:h(["collection.sort.alphabetical"])}];const i=Array.from(window.localTracksService.getAlbums()).map(([,e])=>e);const l=(0,b.useMemo)(()=>{return e=i,""===(t=a)?e:e.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())||e.artists.some(e=>e.name.toLowerCase().includes(t.toLowerCase())));var e,t},[i,a]),[o,c]=(0,b.useState)({...n[0],order:"ascending"});var s=(0,b.useMemo)(()=>{return[...(e=l,"title"===(a=o).key?e.sort((e,t)=>La(e.name,t.name,a.order)):e)];var e,a},[l,o]);function u(e){se(e.getTracks().map(e=>e.backingTrack))}return b.default.createElement("div",{className:"contentSpacing"},b.default.createElement("div",{className:nt["details-page-header"]+" "+nt["pad-top"]},b.default.createElement("h1",null,h(["albums"])),b.default.createElement("div",{className:nt.controls},b.default.createElement(Da,{search:e,setSearch:t,setDebouncedSearch:r}),b.default.createElement(Ta,{sortOptions:n,selectedSortOption:o,setSelectedSortOption:function(t){c(e=>{return{key:t,order:e.key===t&&"ascending"===e.order?"descending":"ascending"}})},displayTypes:["grid"],selectedDisplayType:"grid",setSelectedDisplayType:()=>{}}))),b.default.createElement("div",{className:nt["card-grid"]+" main-gridContainer-gridContainer main-gridContainer-fixedWidth"},s.map(e=>b.default.createElement(lt,{key:e.uri,album:e,onPlayClicked:u}))))}var C=t(r()),R=t(r()),Aa=t(r());function Ma(e){const t=Aa.default.createElement("div",{className:"main-trackList-rowImage main-trackList-rowImageFallback"},Aa.default.createElement("svg",{role:"img",height:"16",width:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor"},Aa.default.createElement("path",{d:"M10 2v9.5a2.75 2.75 0 11-2.75-2.75H8.5V2H10zm-1.5 8.25H7.25A1.25 1.25 0 108.5 11.5v-1.25z"})));var a=0===(a=e.track.backingTrack.album).images.length?"":a.images[0].url??"";return Aa.default.createElement(Aa.default.Fragment,null,""!==a?Aa.default.createElement("img",{loading:"eager",src:a,className:"main-image-image main-trackList-rowImage main-image-loaded",width:"40",height:"40",onError:e=>e.currentTarget.outerHTML=Spicetify.ReactDOMServer.renderToString(t)}):t,Aa.default.createElement(Re,{track:e.track,withArtists:e.withArtists,onArtistClick:e.onArtistClick}))}var Pa=t(r());function za(e){return Pa.default.createElement(E,{variant:"mesto"},Pa.default.createElement("a",{className:"standalone-ellipsis-one-line",dir:"auto",href:"#",tabIndex:-1,onClick:()=>{e.onAlbumClick(e.track.album.uri)}},e.track.album.name))}function Ha(t){var e=[{key:"title",label:h(["sort.title"])},{key:"album",label:h(["sort.album"])}];return R.default.createElement(R.default.Fragment,null,R.default.createElement("div",{className:"main-actionBar-ActionBar contentSpacing"},R.default.createElement("div",{className:"main-actionBar-ActionBarRow"},R.default.createElement("div",{className:"main-playButton-PlayButton"},R.default.createElement(me,{size:"lg",onClick:()=>{se(t.tracks.map(e=>e.backingTrack))}})),R.default.createElement(Ae,{label:h(["more.label.context"],t.artist.name),menu:R.default.createElement(Ve,{tracks:t.tracks})}))),R.default.createElement(Ne,{tracks:t.tracks,subtracks:[],gridLabel:t.artist.name,useTrackNumber:!1,onPlayTrack:e=>{ce(e,t.tracks.map(e=>e.backingTrack))},headers:e,getRowContent:e=>[R.default.createElement(Ma,{key:e.uri,track:e,withArtists:!1,onArtistClick:()=>{}}),R.default.createElement(za,{key:e.uri,track:e,onAlbumClick:e=>{p($e,e)}})],displayType:"list",getRowMenu:e=>R.default.createElement(Ye,{track:e})}))}function $a(e){return C.default.createElement(tt,{image:C.default.createElement(et,{imageSrc:e.artist.image}),subtitle:h(["artist"]),title:e.artist.name})}function Fa(){var e=m("History"),t=e.location.state.uri??null;return null===t?(e.replace(Be),C.default.createElement(C.default.Fragment,null)):(e=window.localTracksService.getArtists()).has(t)?(e=e.get(t),t=window.localTracksService.getArtistTracks(e.uri),C.default.createElement(C.default.Fragment,null,null!==e&&C.default.createElement(C.default.Fragment,null,C.default.createElement($a,{artist:e}),C.default.createElement(Ha,{tracks:t,artist:e})))):(p(Be),C.default.createElement(C.default.Fragment,null))}var T=t(r()),Ba={"stretch-container":"app-module__stretch-container___SIzsh_betterDlocalDfiles","center-container":"app-module__center-container___LG8O4_betterDlocalDfiles","full-size-container":"app-module__full-size-container___XoGtP_betterDlocalDfiles","pad-top":"app-module__pad-top___8OIp9_betterDlocalDfiles","card-grid":"app-module__card-grid___4mWTm_betterDlocalDfiles","main-card-card":"app-module__main-card-card___E9Zy2_betterDlocalDfiles","text-subdued":"app-module__text-subdued___7rYtR_betterDlocalDfiles","details-page-header":"app-module__details-page-header___2JiWt_betterDlocalDfiles",controls:"app-module__controls___ZDW-X_betterDlocalDfiles","flex-centered":"app-module__flex-centered___5gRmM_betterDlocalDfiles","limit-lines-2":"app-module__limit-lines-2___GyZCj_betterDlocalDfiles","text-full-centered":"app-module__text-full-centered___xI2eE_betterDlocalDfiles"},L=t(r()),ja={"stretch-container":"app-module__stretch-container___SIzsh_betterDlocalDfiles","center-container":"app-module__center-container___LG8O4_betterDlocalDfiles","full-size-container":"app-module__full-size-container___XoGtP_betterDlocalDfiles","pad-top":"app-module__pad-top___8OIp9_betterDlocalDfiles","card-grid":"app-module__card-grid___4mWTm_betterDlocalDfiles","main-card-card":"app-module__main-card-card___E9Zy2_betterDlocalDfiles","text-subdued":"app-module__text-subdued___7rYtR_betterDlocalDfiles","details-page-header":"app-module__details-page-header___2JiWt_betterDlocalDfiles",controls:"app-module__controls___ZDW-X_betterDlocalDfiles","flex-centered":"app-module__flex-centered___5gRmM_betterDlocalDfiles","limit-lines-2":"app-module__limit-lines-2___GyZCj_betterDlocalDfiles","text-full-centered":"app-module__text-full-centered___xI2eE_betterDlocalDfiles"};function Ga(e){var t=(0,L.useRef)(null),a=_e(t),r=L.default.createElement("div",{style:{height:"260px"}});const n=L.default.createElement("div",{className:ja["center-container"],style:{height:"100%",left:0,position:"absolute",top:0,width:"100%"}},L.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"50",height:"50",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},L.default.createElement("path",{d:"M9 18V5l12-2v13"}),L.default.createElement("circle",{cx:"6",cy:"18",r:"3"}),L.default.createElement("circle",{cx:"18",cy:"16",r:"3"})));return L.default.createElement("div",{ref:t},a?L.default.createElement(Spicetify.ReactComponent.RightClickMenu,{menu:L.default.createElement(Ve,{tracks:window.localTracksService.getArtistTracks(e.artist.uri)})},L.default.createElement("div",{className:ja["main-card-card"]+" main-card-card",onClick:()=>{p(v,e.artist.uri)}},L.default.createElement("div",{draggable:"true",className:"main-card-draggable"},L.default.createElement("div",{className:"main-card-imageContainer main-card-imageContainerOld"},L.default.createElement("div",{className:"main-cardImage-imageWrapper main-cardImage-circular"},""!==e.artist.image?L.default.createElement("img",{"aria-hidden":"false",draggable:"false",loading:"lazy",src:e.artist.image,alt:"artist image",className:"main-image-image main-cardImage-image main-cardImage-circular main-image-loading main-image-loaded",onError:e=>e.currentTarget.outerHTML=Spicetify.ReactDOMServer.renderToString(n)}):n),L.default.createElement("div",{className:"main-card-PlayButtonContainer"},L.default.createElement("div",{className:"main-playButton-PlayButton"},L.default.createElement(me,{size:"md",onClick:()=>{e.onPlayClicked(e.artist)}})))),L.default.createElement("div",{className:"main-card-cardMetadata"},L.default.createElement(E,{className:"main-cardHeader-link main-cardHeader-text "+ja["text-full-centered"],variant:"balladBold",semanticColor:"textBase",paddingBottom:"4px"},e.artist.name))))):r)}function Wa(){var[e,t]=(0,T.useState)("");const[a,r]=(0,T.useState)("");var n=[{key:"title",label:h(["collection.sort.alphabetical"])}];const i=Array.from(window.localTracksService.getArtists()).map(([,e])=>e);const l=(0,T.useMemo)(()=>{return e=i,""===(t=a)?e:e.filter(e=>e.name.toLowerCase().includes(t.toLowerCase()));var e,t},[i,a]),[o,c]=(0,T.useState)({...n[0],order:"ascending"});var s=(0,T.useMemo)(()=>{return[...(e=l,"title"===(a=o).key?e.sort((e,t)=>La(e.name,t.name,a.order)):e)];var e,a},[l,o]);function u(e){se(window.localTracksService.getArtistTracks(e.uri).map(e=>e.backingTrack))}return T.default.createElement("div",{className:"contentSpacing"},T.default.createElement("div",{className:Ba["details-page-header"]+" "+Ba["pad-top"]},T.default.createElement("h1",null,h(["artists"])),T.default.createElement("div",{className:Ba.controls},T.default.createElement(Da,{search:e,setSearch:t,setDebouncedSearch:r}),T.default.createElement(Ta,{sortOptions:n,selectedSortOption:o,setSelectedSortOption:function(t){c(e=>{return{key:t,order:e.key===t&&"ascending"===e.order?"descending":"ascending"}})},displayTypes:["grid"],selectedDisplayType:"grid",setSelectedDisplayType:()=>{}}))),T.default.createElement("div",{className:Ba["card-grid"]+" main-gridContainer-gridContainer main-gridContainer-fixedWidth"},s.map(e=>T.default.createElement(Ga,{key:e.uri,artist:e,onPlayClicked:u}))))}var Ua=t(r());function Xa(){return Ua.default.createElement("svg",{width:"100px",height:"100px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"},Ua.default.createElement("circle",{cx:"50",cy:"50",r:"0",fill:"none",stroke:"currentColor",strokeWidth:"2"},Ua.default.createElement("animate",{attributeName:"r",repeatCount:"indefinite",dur:"1s",values:"0;40",keyTimes:"0;1",keySplines:"0 0.2 0.8 1",calcMode:"spline",begin:"0s"}),Ua.default.createElement("animate",{attributeName:"opacity",repeatCount:"indefinite",dur:"1s",values:"1;0",keyTimes:"0;1",keySplines:"0.2 0 0.8 1",calcMode:"spline",begin:"0s"})),Ua.default.createElement("circle",{cx:"50",cy:"50",r:"0",fill:"none",stroke:"currentColor",strokeWidth:"2"},Ua.default.createElement("animate",{attributeName:"r",repeatCount:"indefinite",dur:"1s",values:"0;40",keyTimes:"0;1",keySplines:"0 0.2 0.8 1",calcMode:"spline",begin:"-0.5s"}),Ua.default.createElement("animate",{attributeName:"opacity",repeatCount:"indefinite",dur:"1s",values:"1;0",keyTimes:"0;1",keySplines:"0.2 0 0.8 1",calcMode:"spline",begin:"-0.5s"})))}var Va=t(r()),O=t(r()),Za=t(r()),qa="TabBar-module__active___qFHnJ_betterDlocalDfiles";function Ya(e){return Za.default.createElement("li",{"data-tab":e.item.key,onClick:()=>{e.onItemClicked(e.item)}},Za.default.createElement("button",{className:e.active?qa:"",draggable:"false"},Za.default.createElement(E,{variant:"mestoBold"},e.item.label)))}var Ja=t(r());function Ka(a){var e={width:a.size+"px"};return Ja.default.createElement("li",{id:"more-button",style:e},Ja.default.createElement("select",{className:"main-dropDown-dropDown",value:a.activeItem.key,disabled:!1,onChange:t=>{var e=a.items.find(e=>e.key===t.target.value);e&&a.onClick(e)}},a.items.map(e=>Ja.default.createElement("option",{key:e.key,value:e.key},e.label))))}var Qa={tabBar:"TabBar-module__tabBar___DxQjm_betterDlocalDfiles",active:"TabBar-module__active___qFHnJ_betterDlocalDfiles"};function er(a){const t=O.default.useRef(null),[n,r]=(0,O.useState)([]),[i,e]=(0,O.useState)(0),[l,o]=(0,O.useState)([]),[c,s]=(0,O.useState)(0);return(0,O.useEffect)(()=>{t.current&&e(t.current.clientWidth)},[a.windowSize]),(0,O.useEffect)(()=>{var e;t.current&&(e=Array.from(t.current.children).filter(e=>"more-button"!==e.id).map(e=>e.clientWidth),r(e))},[a.items]),(0,O.useEffect)(()=>{if(t.current)if(n.reduce((e,t)=>e+t,0)<=i)o([]);else{var e=Math.max(...n)+32;const r=[];let a=e;n.forEach((e,t)=>{i>=a+e?a+=e:r.push(t)}),o(r),s(e)}},[i,n]),O.default.createElement("nav",{className:Qa.tabBar},O.default.createElement("ul",{ref:t},a.items.filter((e,t)=>!l.includes(t)).map(e=>O.default.createElement(Ya,{key:e.key,item:e,active:a.activeItem.key===e.key,onItemClicked:a.onItemClicked})),l.length||0===n.length?O.default.createElement(Ka,{items:a.items.filter((e,t)=>l.includes(t)||e.key===a.activeItem.key),activeItem:a.activeItem,onClick:a.onItemClicked,size:c}):null))}function tr(e){const t=document.querySelector(".Root__main-view .os-resize-observer-host")??document.querySelector(".Root__main-view .os-size-observer");if(!t)throw new Error("Could not find resize host");const[a,r]=(0,Va.useState)(t.clientWidth);return(0,Va.useEffect)(()=>{const e=new ResizeObserver(()=>{r(t.clientWidth)});return e.observe(t),()=>{e.disconnect()}},[t]),Va.default.createElement(er,{windowSize:a,items:e.items,activeItem:e.activeItem,onItemClicked:e.onItemClicked})}var A=t(r()),M=t(r()),ar={"stretch-container":"app-module__stretch-container___SIzsh_betterDlocalDfiles","center-container":"app-module__center-container___LG8O4_betterDlocalDfiles","full-size-container":"app-module__full-size-container___XoGtP_betterDlocalDfiles","pad-top":"app-module__pad-top___8OIp9_betterDlocalDfiles","card-grid":"app-module__card-grid___4mWTm_betterDlocalDfiles","main-card-card":"app-module__main-card-card___E9Zy2_betterDlocalDfiles","text-subdued":"app-module__text-subdued___7rYtR_betterDlocalDfiles","details-page-header":"app-module__details-page-header___2JiWt_betterDlocalDfiles",controls:"app-module__controls___ZDW-X_betterDlocalDfiles","flex-centered":"app-module__flex-centered___5gRmM_betterDlocalDfiles","limit-lines-2":"app-module__limit-lines-2___GyZCj_betterDlocalDfiles","text-full-centered":"app-module__text-full-centered___xI2eE_betterDlocalDfiles"},rr=t(r());function nr(t){return rr.default.createElement(E,{className:"standalone-ellipsis-one-line",variant:"mesto"},t.track.artists.map(e=>rr.default.createElement("a",{dir:"auto",href:"#",tabIndex:-1,onClick:()=>{t.onArtistClick(e.uri)},key:e.uri},e.name)).reduce((e,t)=>null===e?[t]:[...e,rr.default.createElement(rr.default.Fragment,null,", "),t],null))}function ir(a){var[e,t]=(0,M.useState)("");const[r,n]=(0,M.useState)("");var i=[{key:"date",label:h(["sort.date-added"])},{key:"title",label:h(["sort.title"])},{key:"artist",label:h(["sort.artist"])},{key:"album",label:h(["sort.album"])},{key:"duration",label:h(["sort.duration"])}];const[l,o]=(0,M.useState)({...i[0],order:"ascending"}),[c,s]=(0,M.useState)("list");var u=[];"list"===c?u.push("artist"===l.key?{key:"artist",label:h(["artist"])}:{key:"title",label:h(["tracklist.header.title"])}):u.push({key:"title",label:h(["tracklist.header.title"])},{key:"artist",label:h(["artist"])}),u.push({key:"album",label:h(["tracklist.header.album"])},{key:"date",label:h(["tracklist.header.date-added"])});const d=(0,M.useMemo)(()=>{return e=a.tracks,""===(t=r)?e:e.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())||e.album.name.toLowerCase().includes(t.toLowerCase())||e.artists.some(e=>e.name.toLowerCase().includes(t.toLowerCase())));var e,t},[a.tracks,r]),m=(0,M.useMemo)(()=>[...function(e,a){switch(a.key){case"date":return e.sort((e,t)=>La(e.addedAt,t.addedAt,a.order));case"title":return e.sort((e,t)=>La(e.name,t.name,a.order));case"artist":return e.sort((e,t)=>La(e.artists.map(e=>e.name).join(", "),t.artists.map(e=>e.name).join(", "),a.order));case"album":return e.sort((e,t)=>La(e.album.name,t.album.name,a.order));case"duration":return e.sort((e,t)=>La(e.duration,t.duration,a.order));default:return e}}(d,l)],[d,l]);function f(r,n){o(e=>{let t,a;return a=n||"title"!==r||"descending"!==l.order||"compact"===c?n||"artist"!==r||"descending"!==l.order||"compact"===c?(t=r,e.key===r&&"ascending"===e.order?"descending":"ascending"):(t="title","ascending"):(t="artist","ascending"),{key:t,order:a}})}return M.default.createElement(M.default.Fragment,null,M.default.createElement("div",{className:"main-actionBar-ActionBar contentSpacing"},M.default.createElement("div",{className:"main-actionBar-ActionBarRow"},M.default.createElement("div",{className:"main-playButton-PlayButton"},M.default.createElement(me,{size:"lg",onClick:()=>{se(m.map(e=>e.backingTrack))}})),M.default.createElement("div",{className:""+ar.controls},M.default.createElement(Da,{search:e,setSearch:t,setDebouncedSearch:n}),M.default.createElement(Ta,{sortOptions:i,selectedSortOption:l,setSelectedSortOption:e=>{f(e,!0)},displayTypes:["list","compact"],selectedDisplayType:c,setSelectedDisplayType:s})))),M.default.createElement(Ne,{tracks:m,subtracks:[],gridLabel:h(["local-files"]),useTrackNumber:!1,onPlayTrack:e=>{ce(e,m.map(e=>e.backingTrack))},headers:u,onHeaderClicked:e=>{f(e,!1)},sortedHeader:l,getRowContent:e=>{var t=["compact"===c?M.default.createElement(E,{className:"main-trackList-rowTitle standalone-ellipsis-one-line",variant:"ballad",semanticColor:"textBase",key:e.uri},e.name):M.default.createElement(Ma,{track:e,withArtists:!0,key:e.uri,onArtistClick:e=>{p(v,e)}})];return"compact"===c&&t.push(M.default.createElement(nr,{track:e,key:e.uri,onArtistClick:e=>{p(v,e)}})),t.push(M.default.createElement(za,{track:e,key:e.uri,onAlbumClick:e=>{p($e,e)}}),M.default.createElement(E,{variant:"mesto",semanticColor:"textSubdued",key:e.uri},e.addedAt.toLocaleDateString())),t},displayType:c,getRowMenu:e=>M.default.createElement(Ye,{track:e})}))}var lr={"stretch-container":"app-module__stretch-container___SIzsh_betterDlocalDfiles","center-container":"app-module__center-container___LG8O4_betterDlocalDfiles","full-size-container":"app-module__full-size-container___XoGtP_betterDlocalDfiles","pad-top":"app-module__pad-top___8OIp9_betterDlocalDfiles","card-grid":"app-module__card-grid___4mWTm_betterDlocalDfiles","main-card-card":"app-module__main-card-card___E9Zy2_betterDlocalDfiles","text-subdued":"app-module__text-subdued___7rYtR_betterDlocalDfiles","details-page-header":"app-module__details-page-header___2JiWt_betterDlocalDfiles",controls:"app-module__controls___ZDW-X_betterDlocalDfiles","flex-centered":"app-module__flex-centered___5gRmM_betterDlocalDfiles","limit-lines-2":"app-module__limit-lines-2___GyZCj_betterDlocalDfiles","text-full-centered":"app-module__text-full-centered___xI2eE_betterDlocalDfiles"};function or(){var e=Array.from(window.localTracksService.getTracks().values());return A.default.createElement(A.default.Fragment,null,A.default.createElement(tt,{image:A.default.createElement("div",{className:""+lr["center-container"],style:{background:"linear-gradient(126deg, rgba(69,8,245,1) 0%, rgba(111,86,235,1) 27%, rgba(151,159,225,1) 67%, rgba(189,228,217,1) 100%)",borderRadius:"4px"}},A.default.createElement(Ea,{fill:"var(--spice-text)",size:100})),title:h(["local-files"]),titleFontSize:"6rem",metadata:A.default.createElement(A.default.Fragment,null,A.default.createElement(E,{variant:"mesto",className:"main-entityHeader-metaDataText"},h(["local-files.description"])),A.default.createElement(E,{variant:"mesto",className:"main-entityHeader-metaDataText"},h(["tracklist-header.songs-counter",1===e.length?"one":"other"],e.length)))}),A.default.createElement(ir,{tracks:e}))}var cr={"stretch-container":"app-module__stretch-container___SIzsh_betterDlocalDfiles","center-container":"app-module__center-container___LG8O4_betterDlocalDfiles","full-size-container":"app-module__full-size-container___XoGtP_betterDlocalDfiles","pad-top":"app-module__pad-top___8OIp9_betterDlocalDfiles","card-grid":"app-module__card-grid___4mWTm_betterDlocalDfiles","main-card-card":"app-module__main-card-card___E9Zy2_betterDlocalDfiles","text-subdued":"app-module__text-subdued___7rYtR_betterDlocalDfiles","details-page-header":"app-module__details-page-header___2JiWt_betterDlocalDfiles",controls:"app-module__controls___ZDW-X_betterDlocalDfiles","flex-centered":"app-module__flex-centered___5gRmM_betterDlocalDfiles","limit-lines-2":"app-module__limit-lines-2___GyZCj_betterDlocalDfiles","text-full-centered":"app-module__text-full-centered___xI2eE_betterDlocalDfiles"};var sr=function(){var e=Sa(window.localTracksService.isReady$),t=Sa(window.localTracksService.processedAlbums$),a=Sa(window.localTracksService.albumCount$);(0,o.useEffect)(()=>{!async function(){await window.localTracksService.init(),await ie("better-local-files",le,{title:"New in v"+le,content:o.default.createElement("p",null,o.default.createElement("ul",null,oe.map(e=>o.default.createElement("li",{key:e},e)))),isLarge:!0})}()},[]);const r=m("History"),n=r.location;let i=o.default.createElement(o.default.Fragment,null);switch(n.pathname){case je:i=o.default.createElement(or,null);break;case $e:i=o.default.createElement(rt,null);break;case Fe:i=o.default.createElement(Oa,null);break;case v:i=o.default.createElement(Fa,null);break;case Be:i=o.default.createElement(Wa,null);break;default:r.replace(je)}var l=document.querySelector(".main-topBar-topbarContentWrapper");return o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:cr["full-size-container"]},e?o.default.createElement("div",{className:cr["stretch-container"]+" "+cr.padded},i):o.default.createElement("div",{className:cr["center-container"]+" "+cr.padded},o.default.createElement(Xa,null),0===a&&o.default.createElement("p",null,"Processing tracks..."),0<a&&o.default.createElement("p",null,`Processing album ${t} of ${a}...`))),null!==l&&Spicetify.ReactDOM.createPortal(o.default.createElement(tr,{onItemClicked:e=>{r.push(e.href)},items:Ge,activeItem:Ge.find(e=>e.href.startsWith(n.pathname))??Ge[0]}),l))},ur=t(r());return J=Q,G(H({},"__esModule",{value:!0}),J)})();const render=()=>betterDlocalDfiles.default();