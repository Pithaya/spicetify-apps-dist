var betterDlocalDfiles=(()=>{var P,z=Object.create,H=Object.defineProperty,$=Object.getOwnPropertyDescriptor,F=Object.getOwnPropertyNames,B=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty,e=(e,t)=>function(){return t||(0,e[F(e)[0]])((t={exports:{}}).exports,t),t.exports},G=(t,a,r,n)=>{if(a&&"object"==typeof a||"function"==typeof a)for(let e of F(a))j.call(t,e)||e===r||H(t,e,{get:()=>a[e],enumerable:!(n=$(a,e))||n.enumerable});return t},t=(e,t,a)=>(a=null!=e?z(B(e)):{},G(!t&&e&&e.__esModule?a:H(a,"default",{value:e,enumerable:!0}),e)),r=e({"external-global-plugin:react"(e,t){t.exports=Spicetify.React}}),W=e({"external-global-plugin:react-dom"(e,t){t.exports=Spicetify.ReactDOM}}),U=e({"../../node_modules/spcr-whats-new/node_modules/semver/internal/debug.js"(e,t){var a="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};t.exports=a}}),X=e({"../../node_modules/spcr-whats-new/node_modules/semver/internal/constants.js"(e,t){var a=Number.MAX_SAFE_INTEGER||9007199254740991;t.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:a,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}}}),V=e({"../../node_modules/spcr-whats-new/node_modules/semver/internal/re.js"(e,t){var{MAX_SAFE_COMPONENT_LENGTH:a,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:n}=X(),i=U(),l=(e=t.exports={}).re=[],o=e.safeRe=[],c=e.src=[],s=e.t={},u=0,t="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",n],[t,r]],n=(e,t,a)=>{var r=(e=>{for(var[t,a]of d)e=e.split(t+"*").join(`${t}{0,${a}}`).split(t+"+").join(`${t}{1,${a}}`);return e})(t),n=u++;i(e,n,t),s[e]=n,c[n]=t,l[n]=new RegExp(t,a?"g":void 0),o[n]=new RegExp(r,a?"g":void 0)};n("NUMERICIDENTIFIER","0|[1-9]\\d*"),n("NUMERICIDENTIFIERLOOSE","\\d+"),n("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${t}*`),n("MAINVERSION",`(${c[s.NUMERICIDENTIFIER]})\\.(${c[s.NUMERICIDENTIFIER]})\\.(${c[s.NUMERICIDENTIFIER]})`),n("MAINVERSIONLOOSE",`(${c[s.NUMERICIDENTIFIERLOOSE]})\\.(${c[s.NUMERICIDENTIFIERLOOSE]})\\.(${c[s.NUMERICIDENTIFIERLOOSE]})`),n("PRERELEASEIDENTIFIER",`(?:${c[s.NUMERICIDENTIFIER]}|${c[s.NONNUMERICIDENTIFIER]})`),n("PRERELEASEIDENTIFIERLOOSE",`(?:${c[s.NUMERICIDENTIFIERLOOSE]}|${c[s.NONNUMERICIDENTIFIER]})`),n("PRERELEASE",`(?:-(${c[s.PRERELEASEIDENTIFIER]}(?:\\.${c[s.PRERELEASEIDENTIFIER]})*))`),n("PRERELEASELOOSE",`(?:-?(${c[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[s.PRERELEASEIDENTIFIERLOOSE]})*))`),n("BUILDIDENTIFIER",t+"+"),n("BUILD",`(?:\\+(${c[s.BUILDIDENTIFIER]}(?:\\.${c[s.BUILDIDENTIFIER]})*))`),n("FULLPLAIN",`v?${c[s.MAINVERSION]}${c[s.PRERELEASE]}?${c[s.BUILD]}?`),n("FULL",`^${c[s.FULLPLAIN]}$`),n("LOOSEPLAIN",`[v=\\s]*${c[s.MAINVERSIONLOOSE]}${c[s.PRERELEASELOOSE]}?${c[s.BUILD]}?`),n("LOOSE",`^${c[s.LOOSEPLAIN]}$`),n("GTLT","((?:<|>)?=?)"),n("XRANGEIDENTIFIERLOOSE",c[s.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*"),n("XRANGEIDENTIFIER",c[s.NUMERICIDENTIFIER]+"|x|X|\\*"),n("XRANGEPLAIN",`[v=\\s]*(${c[s.XRANGEIDENTIFIER]})(?:\\.(${c[s.XRANGEIDENTIFIER]})(?:\\.(${c[s.XRANGEIDENTIFIER]})(?:${c[s.PRERELEASE]})?${c[s.BUILD]}?)?)?`),n("XRANGEPLAINLOOSE",`[v=\\s]*(${c[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[s.XRANGEIDENTIFIERLOOSE]})(?:${c[s.PRERELEASELOOSE]})?${c[s.BUILD]}?)?)?`),n("XRANGE",`^${c[s.GTLT]}\\s*${c[s.XRANGEPLAIN]}$`),n("XRANGELOOSE",`^${c[s.GTLT]}\\s*${c[s.XRANGEPLAINLOOSE]}$`),n("COERCE",`(^|[^\\d])(\\d{1,${a}})(?:\\.(\\d{1,${a}}))?(?:\\.(\\d{1,${a}}))?(?:$|[^\\d])`),n("COERCERTL",c[s.COERCE],!0),n("LONETILDE","(?:~>?)"),n("TILDETRIM",`(\\s*)${c[s.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",n("TILDE",`^${c[s.LONETILDE]}${c[s.XRANGEPLAIN]}$`),n("TILDELOOSE",`^${c[s.LONETILDE]}${c[s.XRANGEPLAINLOOSE]}$`),n("LONECARET","(?:\\^)"),n("CARETTRIM",`(\\s*)${c[s.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",n("CARET",`^${c[s.LONECARET]}${c[s.XRANGEPLAIN]}$`),n("CARETLOOSE",`^${c[s.LONECARET]}${c[s.XRANGEPLAINLOOSE]}$`),n("COMPARATORLOOSE",`^${c[s.GTLT]}\\s*(${c[s.LOOSEPLAIN]})$|^$`),n("COMPARATOR",`^${c[s.GTLT]}\\s*(${c[s.FULLPLAIN]})$|^$`),n("COMPARATORTRIM",`(\\s*)${c[s.GTLT]}\\s*(${c[s.LOOSEPLAIN]}|${c[s.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",n("HYPHENRANGE",`^\\s*(${c[s.XRANGEPLAIN]})\\s+-\\s+(${c[s.XRANGEPLAIN]})\\s*$`),n("HYPHENRANGELOOSE",`^\\s*(${c[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[s.XRANGEPLAINLOOSE]})\\s*$`),n("STAR","(<|>)?=?\\s*\\*"),n("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),n("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}}),Z=e({"../../node_modules/spcr-whats-new/node_modules/semver/internal/parse-options.js"(e,t){var a=Object.freeze({loose:!0}),r=Object.freeze({});t.exports=e=>e?"object"!=typeof e?a:e:r}}),q=e({"../../node_modules/spcr-whats-new/node_modules/semver/internal/identifiers.js"(e,t){var n=/^[0-9]+$/,a=(e,t)=>{var a=n.test(e),r=n.test(t);return a&&r&&(e=+e,t=+t),e===t?0:a&&!r||(!r||a)&&e<t?-1:1};t.exports={compareIdentifiers:a,rcompareIdentifiers:(e,t)=>a(t,e)}}}),Y=e({"../../node_modules/spcr-whats-new/node_modules/semver/classes/semver.js"(e,t){var n=U(),{MAX_LENGTH:a,MAX_SAFE_INTEGER:r}=X(),{safeRe:i,t:l}=V(),o=Z(),c=q()["compareIdentifiers"],s=class{constructor(e,t){if(t=o(t),e instanceof s){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>a)throw new TypeError(`version is longer than ${a} characters`);n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;t=e.trim().match(t.loose?i[l.LOOSE]:i[l.FULL]);if(!t)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+t[1],this.minor=+t[2],this.patch=+t[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");t[4]?this.prerelease=t[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){var t=+e;if(0<=t&&t<r)return t}return e}):this.prerelease=[],this.build=t[5]?t[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.`+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof s)){if("string"==typeof e&&e===this.version)return 0;e=new s(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof s||(e=new s(e,this.options)),c(this.major,e.major)||c(this.minor,e.minor)||c(this.patch,e.patch)}comparePre(e){if(e instanceof s||(e=new s(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{var a=this.prerelease[t],r=e.prerelease[t];if(n("prerelease compare",t,a,r),void 0===a&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===a)return-1;if(a!==r)return c(a,r)}while(++t)}compareBuild(e){e instanceof s||(e=new s(e,this.options));let t=0;do{var a=this.build[t],r=e.build[t];if(n("prerelease compare",t,a,r),void 0===a&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===a)return-1;if(a!==r)return c(a,r)}while(++t)}inc(e,t,a){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,a);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,a);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,a),this.inc("pre",t,a);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,a),this.inc("pre",t,a);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":var r=Number(a)?1:0;if(!t&&!1===a)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[r];else{let e=this.prerelease.length;for(;0<=--e;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);if(-1===e){if(t===this.prerelease.join(".")&&!1===a)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(r)}}if(t){let e=!1===a?[t]:[t,r];(0!==c(this.prerelease[0],t)||isNaN(this.prerelease[1]))&&(this.prerelease=e)}break;default:throw new Error("invalid increment argument: "+e)}return this.raw=this.format(),this.build.length&&(this.raw+="+"+this.build.join(".")),this}};t.exports=s}}),J=e({"../../node_modules/spcr-whats-new/node_modules/semver/functions/compare.js"(e,t){var r=Y();t.exports=(e,t,a)=>new r(e,a).compare(new r(t,a))}}),a=e({"../../node_modules/spcr-whats-new/node_modules/semver/functions/gt.js"(e,t){var r=J();t.exports=(e,t,a)=>0<r(e,t,a)}}),K=e({"../../node_modules/resize-observer-polyfill/dist/ResizeObserver.js"(e,t){var a;a=function(){"use strict";var r="undefined"!=typeof Map?Map:(Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){e=n(this.__entries__,e),e=this.__entries__[e];return e&&e[1]},e.prototype.set=function(e,t){var a=n(this.__entries__,e);~a?this.__entries__[a][1]=t:this.__entries__.push([e,t])},e.prototype.delete=function(e){var t=this.__entries__,e=n(t,e);~e&&t.splice(e,1)},e.prototype.has=function(e){return!!~n(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var a=0,r=this.__entries__;a<r.length;a++){var n=r[a];e.call(t,n[1],n[0])}},e);function e(){this.__entries__=[]}function n(e,a){var r=-1;return e.some(function(e,t){return e[0]===a&&(r=t,!0)}),r}var a="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,t="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),c="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(t):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)},s=2;var i=["top","right","bottom","left","width","height","size","weight"],l="undefined"!=typeof MutationObserver,o=(u.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},u.prototype.removeObserver=function(e){var t=this.observers_,e=t.indexOf(e);~e&&t.splice(e,1),!t.length&&this.connected_&&this.disconnect_()},u.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},u.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),0<e.length},u.prototype.connect_=function(){a&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),l?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},u.prototype.disconnect_=function(){a&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},u.prototype.onTransitionEnd_=function(e){var e=e.propertyName,t=void 0===e?"":e;i.some(function(e){return!!~t.indexOf(e)})&&this.refresh()},u.getInstance=function(){return this.instance_||(this.instance_=new u),this.instance_},u.instance_=null,u);function u(){function e(){i&&(i=!1,r()),l&&a()}function t(){c(e)}function a(){var e=Date.now();if(i){if(e-o<s)return;l=!0}else l=!(i=!0),setTimeout(t,n);o=e}var r,n,i,l,o;this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=(r=this.refresh.bind(this),l=i=!(n=20),o=0,a)}var d=function(e,t){for(var a=0,r=Object.keys(t);a<r.length;a++){var n=r[a];Object.defineProperty(e,n,{value:t[n],enumerable:!1,writable:!1,configurable:!0})}return e},m=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||t},f=y(0,0,0,0);function p(e){return parseFloat(e)||0}function h(a){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(e,t){return e+p(a["border-"+t+"-width"])},0)}function _(e){var t,a,r,n,i,l,o=e.clientWidth,c=e.clientHeight;return o||c?(a=(t=function(e){for(var t={},a=0,r=["top","right","bottom","left"];a<r.length;a++){var n=r[a],i=e["padding-"+n];t[n]=p(i)}return t}(l=m(e).getComputedStyle(e))).left+t.right,r=t.top+t.bottom,n=p(l.width),i=p(l.height),"border-box"===l.boxSizing&&(Math.round(n+a)!==o&&(n-=h(l,"left","right")+a),Math.round(i+r)!==c)&&(i-=h(l,"top","bottom")+r),e!==m(e).document.documentElement&&(l=Math.round(n+a)-o,e=Math.round(i+r)-c,1!==Math.abs(l)&&(n-=l),1!==Math.abs(e))&&(i-=e),y(t.left,t.top,n,i)):f}var E="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof m(e).SVGGraphicsElement}:function(e){return e instanceof m(e).SVGElement&&"function"==typeof e.getBBox};function v(e){var t;return a?E(e)?y(0,0,(t=(t=e).getBBox()).width,t.height):_(e):f}function y(e,t,a,r){return{x:e,y:t,width:a,height:r}}g.prototype.isActive=function(){var e=v(this.target);return(this.contentRect_=e).width!==this.broadcastWidth||e.height!==this.broadcastHeight},g.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e};var b=g;function g(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=y(0,0,0,0),this.target=e}var k=function(e,t){a=(t=t).x,r=t.y,i=t.width,t=t.height,n="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,n=Object.create(n.prototype),d(n,{x:a,y:r,width:i,height:t,top:r,right:a+i,bottom:t+r,left:a});var a,r,n,i=n;d(this,{target:e,contentRect:i})},w=(S.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof m(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new b(e)),this.controller_.addObserver(this),this.controller_.refresh())}},S.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof m(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},S.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},S.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},S.prototype.broadcastActive=function(){var e,t;this.hasActive()&&(e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new k(e.target,e.broadcastRect())}),this.callback_.call(e,t,e),this.clearActive())},S.prototype.clearActive=function(){this.activeObservations_.splice(0)},S.prototype.hasActive=function(){return 0<this.activeObservations_.length},S);function S(e,t,a){if(this.activeObservations_=[],this.observations_=new r,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=a}var D=new("undefined"!=typeof WeakMap?WeakMap:r),I=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var a=o.getInstance(),t=new w(t,a,this);D.set(this,t)};return["observe","unobserve","disconnect"].forEach(function(t){I.prototype[t]=function(){var e;return(e=D.get(this))[t].apply(e,arguments)}}),void 0!==t.ResizeObserver?t.ResizeObserver:I},"object"==typeof(e=e)&&void 0!==t?t.exports=a():"function"==typeof define&&define.amd?define(a):e.ResizeObserver=a()}}),e=e({"../../node_modules/use-fit-text/dist/index.js"(e,t){var a,g=r(),k=(a=K())&&"object"==typeof a&&"default"in a?a.default:a,w={debug:10,info:20,warn:30,error:40,none:100},S="undefined"!=typeof window&&window.document&&window.document.createElement?g.useLayoutEffect:g.useEffect;t.exports=function(e){var t=(e=void 0===e?{}:e).logLevel,a=e.maxFontSize,i=(void 0===a&&(a=100),e.minFontSize),l=(void 0===i&&(i=20),e.onFinish),r=e.onStart,o=e.resolution,c=(void 0===o&&(o=5),w[t=void 0===t?"info":t]),n=g.useCallback(function(){return{calcKey:0,fontSize:a,fontSizePrev:i,fontSizeMax:a,fontSizeMin:i}},[a,i]),s=g.useRef(null),u=g.useRef(),d=g.useRef(!1),e=g.useState(n),t=e[0],m=e[1],f=t.calcKey,p=t.fontSize,h=t.fontSizeMax,_=t.fontSizeMin,E=t.fontSizePrev,v=null,y=g.useState(function(){return new k(function(){v=window.requestAnimationFrame(function(){d.current||(r&&r(),d.current=!0,m(Object.assign({},n(),{calcKey:f+1})))})})})[0],b=(g.useEffect(function(){return s.current&&y.observe(s.current),function(){v&&window.cancelAnimationFrame(v),y.disconnect()}},[v,y]),s.current&&s.current.innerHTML);return g.useEffect(function(){0===f||d.current||(b!==u.current&&(r&&r(),m(Object.assign({},n(),{calcKey:f+1}))),u.current=b)},[f,n,b,r]),S(function(){var e,t,a,r,n;0!==f&&(r=Math.abs(p-E)<=o,e=!!s.current&&(s.current.scrollHeight>s.current.offsetHeight||s.current.scrollWidth>s.current.offsetWidth),t=E<p,r?e&&p===E?(d.current=!1,c<=w.info&&console.info("[use-fit-text] reached `minFontSize = "+i+"` without fitting text")):e?m({fontSize:t?E:_,fontSizeMax:h,fontSizeMin:_,fontSizePrev:E,calcKey:f}):(d.current=!1,l&&l(p)):(r=h,n=_,e?(a=t?E-p:_-p,r=Math.min(h,p)):(a=t?h-p:E-p,n=Math.max(_,p)),m({calcKey:f,fontSize:p+a/2,fontSizeMax:r,fontSizeMin:n,fontSizePrev:p})))},[f,p,h,_,E,l,s,o]),{fontSize:p+"%",ref:s}}}}),Q={},ee=Q,te={default:()=>function(){return dr.default.createElement(ur,null)}};for(P in te)H(ee,P,{get:te[P],enumerable:!0});function ae(e){return Spicetify.Platform?.[e]}function f(e){var t=ae(e);if(void 0===t)throw new Error(`Platform API "${e}" is not available`);return t}var o=t(r()),re=t(W()),ne=t(a()),ie=t(W());var le=async function(t,a,e){for(;!Spicetify?.PopupModal||!Spicetify?.LocalStorage;)await new Promise(e=>setTimeout(e,100));var r,t=`spcr-whats-new_${t}-version`,n=Spicetify.LocalStorage.get(t)??"";try{(0,ne.default)(a,n)&&(Spicetify.LocalStorage.set(t,a),r={...e,content:function(e){var t=document.createElement("div"),a=(t.setAttribute("id","whats-new-content-wrapper"),document.createElement("style"));return a.textContent=`
      #whats-new-content-wrapper ul, #whats-new-content-wrapper ol {
         list-style: inherit;
         margin-left: 1em;
      }
   `,ie.default.render(e,t),t.appendChild(a),t}(e.content)},Spicetify.PopupModal.display(r))}catch(e){Spicetify.LocalStorage.set(t,a)}},oe="2.0.3",ce=["Fix the app crashing on load"],n=t(r());function c(e,t=null){var a=f("History");null===t?a.push(e):a.push({pathname:e,state:{uri:t},hash:"",key:"",search:""})}var s=t(r());function se(t,e){0!==e.length&&e.some(e=>e.uri===t)&&Spicetify.Player.origin.play({uri:"spotify:internal:local-files",pages:[{items:e}]},{},{skipTo:{uri:t}})}function ue(e){0!==e.length&&Spicetify.Player.origin.play({uri:"spotify:internal:local-files",pages:[{items:e}]},{},{})}var de=t(r());function p(e,...a){let t=f("Translations");for(const n of e)t=t[n];let r=t;return a.forEach((e,t)=>{r=r.replace(`{${t}}`,a[t])}),r}var me=t(r());function h(e){return e.icon?me.default.createElement(Spicetify.ReactComponent.IconComponent,{iconSize:e.iconSize,semanticColor:e.semanticColor,dangerouslySetInnerHTML:{__html:Spicetify.SVGIcons[e.icon]},viewBox:"0 0 16 16"}):e.iconPath?me.default.createElement(Spicetify.ReactComponent.IconComponent,{iconSize:e.iconSize,semanticColor:e.semanticColor,dangerouslySetInnerHTML:{__html:e.iconPath},viewBox:"0 0 16 16"}):me.default.createElement(me.default.Fragment,null)}function fe(t){return de.default.createElement(Spicetify.ReactComponent.ButtonPrimary,{"aria-label":p(["play"]),buttonSize:t.size,onClick:e=>{e.stopPropagation(),t.onClick()},iconOnly:()=>de.default.createElement(h,{icon:"play"})})}var pe="TrackListGrid-module__display-list___WHmbc_betterDlocalDfiles",he="TrackListGrid-module__display-list-compact___HMOok_betterDlocalDfiles",u=t(r()),_=t(r()),_e=t(r());function Ee(t){const[e,a]=(0,_e.useState)(!1);return(0,_e.useEffect)(()=>{const e=new IntersectionObserver((e,t)=>{a(e.some(e=>e.isIntersecting))},{rootMargin:"0px",threshold:0});return e.observe(t.current),()=>{e.disconnect()}},[t]),e}var i=t(r()),ve=t(r());function ye(e){var t=Spicetify.ReactDOMServer.renderToString(ve.default.createElement(Spicetify.ReactComponent.MenuItem,{leadingIcon:e.leadingIcon,trailingIcon:ve.default.createElement("svg",{height:"16",width:"16","aria-hidden":"true",className:"main-contextMenu-subMenuIcon",viewBox:"0 0 16 16",fill:"currentColor"},ve.default.createElement("path",{d:"M14 10 8 4l-6 6h12z"}))},ve.default.createElement("span",null,e.label)));return ve.default.createElement(Spicetify.ReactComponent.ContextMenu,{trigger:"click",action:"toggle",placement:"right-end",renderInline:!0,menu:e.submenu},ve.default.createElement("div",{onMouseEnter:e=>{e.currentTarget.click()},dangerouslySetInnerHTML:{__html:t}}))}var a="/better-local-files",be=a+"/album",ge=a+"/albums",d=a+"/artist",ke=a+"/artists",we=a,Se=[{key:"Tracks",href:we,label:p(["search.title.tracks"])},{key:"Albums",href:ge,label:p(["search.title.albums"])},{key:"Artists",href:ke,label:p(["search.title.artists"])}],De="encore-dark-theme main-contextMenu-menu",Ie=t(r());function xe(e){return Ie.default.createElement(Spicetify.ReactComponent.Menu,{className:De},e.artists.map(e=>Ie.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:()=>{c(d,e.uri)},key:e.uri},Ie.default.createElement("span",null,e.name))))}var Ne=t(r());function Ce(a){const r=f("PlaylistAPI"),n=f("RootlistAPI"),i=f("UserAPI"),[e,l]=(0,Ne.useState)([]);return(0,Ne.useEffect)(()=>{!async function(){var e=await n.getContents();const t=await i.getUser();e=e.items.flatMap(e=>"playlist"===e.type?e:e.items).filter(e=>"playlist"===e.type).filter(e=>e.owner.uri===t.uri),l(e)}()},[]),Ne.default.createElement(Spicetify.ReactComponent.Menu,{className:De},e.map(t=>Ne.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:async()=>{var e;e=t.uri,await r.add(e,a.tracksUri,{after:"end"})},key:t.uri},Ne.default.createElement("span",null,t.name))))}var Re='<path d="M16 15H2v-1.5h14V15zm0-4.5H2V9h14v1.5zm-8.034-6A5.484 5.484 0 0 1 7.187 6H13.5a2.5 2.5 0 0 0 0-5H7.966c.159.474.255.978.278 1.5H13.5a1 1 0 1 1 0 2H7.966zM2 2V0h1.5v2h2v1.5h-2v2H2v-2H0V2h2z"></path>',Te=t(r());function Le(e){const t=f("LibraryAPI"),[a,r]=(0,Te.useState)(t.containsSync(e));return(0,Te.useEffect)(()=>{void 0===a&&t.contains(e).then(e=>{r(e[0])}).catch(console.error)},[e]),[a,r]}function Oe(e){var[t]=Le(e.track.uri);let a;switch(t){case!0:a=i.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:async function(){await f("LibraryAPI").remove({uris:[e.track.uri]})},leadingIcon:i.default.createElement(h,{icon:"check-alt-fill",iconSize:16,semanticColor:"essentialBrightAccent"})},i.default.createElement("span",null,p(["remove_from_your_liked_songs"])));break;case!1:a=i.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:async function(){await f("LibraryAPI").add({uris:[e.track.uri]})},leadingIcon:i.default.createElement(h,{icon:"plus-alt",iconSize:16})},i.default.createElement("span",null,p(["save_to_your_liked_songs"])));break;default:a=i.default.createElement(Spicetify.ReactComponent.MenuItem,null,i.default.createElement("span",null,"..."))}return i.default.createElement(Spicetify.ReactComponent.Menu,{className:De},i.default.createElement(ye,{label:p(["contextmenu.add-to-playlist"]),submenu:i.default.createElement(Ce,{tracksUri:[e.track.uri]}),leadingIcon:i.default.createElement(h,{icon:"plus2px",iconSize:16})}),a,i.default.createElement(Spicetify.ReactComponent.MenuItem,{divider:"after",onClick:async function(){await f("PlayerAPI").addToQueue([{uri:e.track.uri}])},leadingIcon:i.default.createElement(h,{iconPath:Re,iconSize:16})},i.default.createElement("span",null,p(["contextmenu.add-to-queue"]))),1===e.track.artists.length?i.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:()=>{c(d,e.track.artists[0].uri)},leadingIcon:i.default.createElement(h,{icon:"artist",iconSize:16})},i.default.createElement("span",null,p(["contextmenu.go-to-artist"]))):i.default.createElement(ye,{label:p(["contextmenu.go-to-artist"]),submenu:i.default.createElement(xe,{artists:e.track.artists}),leadingIcon:i.default.createElement(h,{icon:"artist",iconSize:16})}),i.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:()=>{c(be,e.track.album.uri)},leadingIcon:i.default.createElement(h,{icon:"album",iconSize:16})},i.default.createElement("span",null,p(["contextmenu.go-to-album"]))))}var Ae=t(r());function E(e){const{elementType:t="span",children:a,...r}=e;let n;switch(t){case"h1":n=Spicetify.ReactComponent.TextComponent.h1;break;case"h2":n=Spicetify.ReactComponent.TextComponent.h2;break;case"h3":n=Spicetify.ReactComponent.TextComponent.h3;break;case"h4":n=Spicetify.ReactComponent.TextComponent.h4;break;case"h5":n=Spicetify.ReactComponent.TextComponent.h5;break;case"h6":n=Spicetify.ReactComponent.TextComponent.h6;break;case"li":n=Spicetify.ReactComponent.TextComponent.li;break;case"p":n=Spicetify.ReactComponent.TextComponent.p;break;case"small":n=Spicetify.ReactComponent.TextComponent.small;break;case"span":n=Spicetify.ReactComponent.TextComponent.span;break;default:n=Spicetify.ReactComponent.TextComponent}return Ae.default.createElement(n,{...r,style:e.style},a)}function Me(t){var e=(0,_.useRef)(null);const a=Ee(e),[r,n]=(0,_.useState)(!1),[i,l]=Le(t.track.uri),o=f("LibraryAPI");(0,_.useEffect)(()=>{if(a){const e=e=>{e.data.uris.some(e=>e===t.track.uri)&&("add"===e.data.operation?l(!0):"remove"===e.data.operation&&l(!1))};return o.getEvents().addListener("operation_complete",e),()=>{o.getEvents().removeListener("operation_complete",e)}}},[a,t.track.uri]);var c=_.default.createElement("div",{style:{height:"compact"===t.displayType?"32px":"54px"}}),s=_.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:p(["save_to_your_liked_songs"]),showDelay:100},_.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":p(["save_to_your_liked_songs"]),iconOnly:()=>_.default.createElement(h,{icon:"plus-alt",iconSize:16}),buttonSize:"sm",style:{padding:0,visibility:r?void 0:"hidden"},onClick:async function(){await o.add({uris:[t.track.uri]})}})),u=_.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:p(["remove_from_your_liked_songs"]),showDelay:100},_.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":p(["remove_from_your_liked_songs"]),iconOnly:()=>_.default.createElement(h,{icon:"check-alt-fill",iconSize:16}),buttonSize:"sm",style:{padding:0},onClick:async function(){await o.remove({uris:[t.track.uri]})},semanticColor:"essentialBrightAccent"})),d=_.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{iconOnly:()=>_.default.createElement(_.default.Fragment,null),buttonSize:"sm",style:{padding:0,visibility:r?void 0:"hidden"}});let m;switch(i){case!0:m=u;break;case!1:m=s;break;default:m=d}return _.default.createElement("div",{ref:e,onMouseEnter:()=>{n(!0)},onMouseLeave:()=>{n(!1)}},a?_.default.createElement(Spicetify.ReactComponent.RightClickMenu,{menu:_.default.createElement(Oe,{track:t.track})},_.default.createElement("div",{"aria-selected":t.selected,onClick:t.onClick,onDoubleClick:t.onDoubleClick,draggable:"true",onDragStart:e=>{t.dragHandler.draggable&&t.dragHandler.onDragStart(e)}},_.default.createElement("div",{className:`main-trackList-trackListRow main-trackList-trackListRowGrid ${t.active?"main-trackList-active":""} ${t.selected?"main-trackList-selected":""} `+("compact"===t.displayType?"main-trackList-rowCompactMode":"")},_.default.createElement("div",{className:"main-trackList-rowSectionIndex","aria-colindex":1,tabIndex:-1},_.default.createElement("div",{className:"main-trackList-rowMarker"},t.playing?_.default.createElement(_.default.Fragment,null,_.default.createElement("img",{className:"main-trackList-playingIcon",width:"14",height:"14",alt:"",src:"/images/equaliser-animated-green.gif"}),_.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:p(["playback-control.pause"]),showDelay:200},_.default.createElement("button",{className:"main-trackList-rowImagePlayButton","aria-label":p(["playback-control.pause"]),tabIndex:0,"aria-expanded":"false",onClick:()=>{Spicetify.Player.pause()}},_.default.createElement("svg",{height:"24",width:"24","aria-hidden":"true",fill:"currentColor",className:"main-trackList-rowPlayPauseIcon",viewBox:"0 0 24 24"},_.default.createElement("path",{d:"M5.7 3a.7.7 0 0 0-.7.7v16.6a.7.7 0 0 0 .7.7h2.6a.7.7 0 0 0 .7-.7V3.7a.7.7 0 0 0-.7-.7H5.7zm10 0a.7.7 0 0 0-.7.7v16.6a.7.7 0 0 0 .7.7h2.6a.7.7 0 0 0 .7-.7V3.7a.7.7 0 0 0-.7-.7h-2.6z"}))))):_.default.createElement(_.default.Fragment,null,_.default.createElement("span",{className:"main-trackList-number"},t.index),_.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:p(["tracklist.a11y.play"],t.track.name,t.track.artists.map(e=>e.name).join(", ")),showDelay:200},_.default.createElement("button",{className:"main-trackList-rowImagePlayButton","aria-label":p(["tracklist.a11y.play"],t.track.name,t.track.artists.map(e=>e.name).join(", ")),onClick:()=>{t.active?Spicetify.Player.play():t.onDoubleClick()},tabIndex:-1},_.default.createElement("svg",{height:"24",width:"24","aria-hidden":"true",className:"main-trackList-rowPlayPauseIcon",viewBox:"0 0 24 24","data-encore-id":"icon",fill:"currentColor"},_.default.createElement("path",{d:"M7.05 3.606l13.49 7.788a.7.7 0 010 1.212L7.05 20.394A.7.7 0 016 19.788V4.212a.7.7 0 011.05-.606z"}))))))),t.children&&_.Children.map(t.children,(e,t)=>_.default.createElement("div",{className:0===t?"main-trackList-rowSectionStart":"main-trackList-rowSectionVariable","aria-colindex":t+2,tabIndex:-1},e)),_.default.createElement("div",{className:"main-trackList-rowSectionEnd","aria-colindex":_.Children.count(t.children)+2,tabIndex:-1},m,_.default.createElement(E,{variant:"mesto",semanticColor:"textSubdued",className:"main-trackList-rowDuration"},Spicetify.Player.formatTime(t.track.duration)),_.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:p(["more.label.track"],t.track.name,t.track.artists.map(e=>e.name).join(", ")),showDelay:100},_.default.createElement("div",null,_.default.createElement(Spicetify.ReactComponent.ContextMenu,{trigger:"click",action:"toggle",menu:_.default.createElement(Oe,{track:t.track})},_.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":p(["more.label.track"],t.track.name,t.track.artists.map(e=>e.name).join(", ")),"aria-haspopup":"menu",iconOnly:()=>_.default.createElement(h,{icon:"more",iconSize:16}),buttonSize:"sm",style:{padding:0,visibility:r?void 0:"hidden"}})))))))):c)}var l=t(r()),Pe=t(r());function ze(e){return Pe.default.createElement("svg",{height:"16",width:"16",viewBox:"0 0 16 16",fill:"var(--text-bright-accent)",className:e.className},Pe.default.createElement("path",{d:"M14 10L8 4l-6 6h12z"}))}var He=t(r());function $e(e){return He.default.createElement("svg",{height:"16",width:"16",viewBox:"0 0 16 16",fill:"var(--text-bright-accent)",className:e.className},He.default.createElement("path",{d:"M14 6l-6 6-6-6h12z"}))}function Fe(a){function r(){return void 0===a.sortedHeader?l.default.createElement(l.default.Fragment,null):"ascending"===a.sortedHeader.order?l.default.createElement(ze,{className:"main-trackList-arrow"}):l.default.createElement($e,{className:"main-trackList-arrow"})}const n=void 0!==a.sortedHeader?"main-trackList-sortable":"";return l.default.createElement("div",{className:"main-trackList-trackListHeader"},l.default.createElement("div",{className:"main-trackList-trackListHeaderRow main-trackList-trackListRowGrid","aria-rowindex":1},l.default.createElement("div",{className:"main-trackList-rowSectionIndex","aria-colindex":1,"aria-sort":"none",tabIndex:-1},"#"),a.headers.map((e,t)=>l.default.createElement("div",{key:e.key,className:0===t?"main-trackList-rowSectionStart":"main-trackList-rowSectionVariable","aria-colindex":t+2,"aria-sort":a.sortedHeader&&a.sortedHeader.key===e.key?a.sortedHeader.order:"none",tabIndex:-1},l.default.createElement("button",{className:"main-trackList-column "+n,tabIndex:-1,onClick:()=>{a.onHeaderClicked?.(e.key)}},l.default.createElement(E,{variant:"mesto"},e.label),a.sortedHeader&&a.sortedHeader.key===e.key&&r()))),l.default.createElement("div",{className:"main-trackList-rowSectionEnd","aria-colindex":a.headers.length+2,"aria-sort":"none",tabIndex:-1},l.default.createElement("button",{"aria-label":p(["tracklist.header.duration"]),className:"main-trackList-column main-trackList-durationHeader "+n,onClick:()=>{a.onHeaderClicked?.("duration")}},l.default.createElement("svg",{height:"16",width:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor"},l.default.createElement("path",{d:"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8z"}),l.default.createElement("path",{d:"M8 3.25a.75.75 0 01.75.75v3.25H11a.75.75 0 010 1.5H7.25V4A.75.75 0 018 3.25z"}))),a.sortedHeader&&"duration"===a.sortedHeader.key&&r())))}var Be=t(r());var je=t(r());function Ge(a){const r=function(){const[e,t]=(0,Be.useState)(Spicetify.Player?.data?.item?.uri??"");return(0,Be.useEffect)(()=>{function e(e){t((e?.data).item?.uri??"")}return Spicetify.Player.addEventListener("songchange",e),()=>{Spicetify.Player.removeEventListener("songchange",e)}}),e}(),n=function(){const[e,t]=(0,je.useState)(Spicetify.Player?.data?.isPaused?"pause":"play");return(0,je.useEffect)(()=>{function e(e){t((e?.data).isPaused?"pause":"play")}return Spicetify.Player.addEventListener("onplaypause",e),()=>{Spicetify.Player.removeEventListener("onplaypause",e)}}),e}(),[i,l]=(0,u.useState)(new Map),o=(0,u.useMemo)(()=>{var e=Array.from(i.entries());return 0===e.length?Spicetify.ReactHook.DragHandler({itemUris:[],dragLabelText:""}):Spicetify.ReactHook.DragHandler({itemUris:e.map(e=>e[0]),dragLabelText:1<i.size?p(["tracklist.drag.multiple.label","other"],i.size):e[0][1].name})},[i]);function c(e,t){e.ctrlKey?(i.has(t.uri)?i.delete(t.uri):i.set(t.uri,t),l(new Map(i))):l(new Map([[t.uri,t]]))}return u.default.createElement("div",{className:"contentSpacing"},u.default.createElement("div",{role:"grid","aria-rowcount":a.tracks.length,"aria-colcount":a.headers.length+2,"aria-label":a.gridLabel,className:"main-trackList-trackList main-trackList-indexable",tabIndex:0},u.default.createElement(Fe,{headers:a.headers,sortedHeader:a.sortedHeader,onHeaderClicked:a.onHeaderClicked}),u.default.createElement("div",{className:""+("compact"===a.displayType?he:pe)},a.tracks.map((t,e)=>u.default.createElement(Me,{key:t.uri,track:t,index:a.useTrackNumber?t.trackNumber:e+1,selected:i.has(t.uri),active:r===t.uri,playing:r===t.uri&&"play"===n,onClick:e=>{c(e,t)},onDoubleClick:()=>{a.onPlayTrack(t.uri)},dragHandler:o,displayType:a.displayType},a.getRowContent(t))),a.subtracks.map(e=>u.default.createElement(u.default.Fragment,null,e.headerRow,e.tracks.map((t,e)=>u.default.createElement(Me,{key:t.uri,track:t,index:a.useTrackNumber?t.trackNumber:e+1,selected:i.has(t.uri),active:r===t.uri,playing:r===t.uri&&"play"===n,onClick:e=>{c(e,t)},onDoubleClick:()=>{a.onPlayTrack(t.uri)},dragHandler:o,displayType:a.displayType},a.getRowContent(t))))))))}var We=t(r());function Ue(e){return We.default.createElement("div",{className:"main-trackList-rowMainContent"},We.default.createElement(E,{className:"main-trackList-rowTitle standalone-ellipsis-one-line",variant:"ballad",semanticColor:"textBase"},e.track.name),e.withArtists&&We.default.createElement(E,{className:"main-trackList-rowSubTitle standalone-ellipsis-one-line",variant:"mesto",semanticColor:"textSubdued"},e.track.artists.map(e=>We.default.createElement("a",{dir:"auto",href:"#",tabIndex:-1,onClick:()=>{c(d,e.uri)},key:e.uri},e.name)).reduce((e,t)=>null===e?[t]:[...e,We.default.createElement(We.default.Fragment,null,", "),t],null)))}var m=t(r());function Xe(e){return m.default.createElement("div",{className:"main-trackList-trackListRowGrid main-trackList-discRow"},m.default.createElement("div",{className:"main-trackList-rowSectionIndex","aria-colindex":1,tabIndex:-1},m.default.createElement("div",{className:"main-trackList-rowMarker"},m.default.createElement("span",{className:"main-trackList-icon"},m.default.createElement("svg",{height:"16",width:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor"},m.default.createElement("path",{d:"M8 1.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13zM0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8z"}),m.default.createElement("path",{d:"M8 6.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM5 8a3 3 0 1 1 6 0 3 3 0 0 1-6 0z"}))))),m.default.createElement("div",{className:"main-trackList-rowSectionStart","aria-colindex":2,tabIndex:-1},m.default.createElement("div",{className:"main-trackList-rowMainContent"},m.default.createElement("div",{dir:"auto",className:"main-trackList-rowTitle main-trackList-discTitle standalone-ellipsis-one-line"},p(["tracklist.disc-sperator.title"],e.discNumber)))))}var Ve="app-module__flex-centered___5gRmM_betterDlocalDfiles",Ze=t(r());function qe(e){return Ze.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:e.label,showDelay:100},Ze.default.createElement("div",{className:""+Ve},Ze.default.createElement(Spicetify.ReactComponent.ContextMenu,{trigger:"click",action:"toggle",menu:e.menu},Ze.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":e.label,"aria-haspopup":"menu",iconOnly:()=>Ze.default.createElement(h,{icon:"more"})}))))}var Ye=t(r());function Je(e){return Ye.default.createElement(Spicetify.ReactComponent.Menu,{className:De},Ye.default.createElement(ye,{label:p(["contextmenu.add-to-playlist"]),submenu:Ye.default.createElement(Ce,{tracksUri:e.tracks.map(e=>e.uri)}),leadingIcon:Ye.default.createElement(h,{icon:"plus2px",iconSize:16})}),Ye.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:async function(){await f("PlayerAPI").addToQueue(e.tracks.map(e=>({uri:e.uri})))},leadingIcon:Ye.default.createElement(h,{iconPath:Re,iconSize:16})},Ye.default.createElement("span",null,p(["contextmenu.add-to-queue"]))))}function Ke(e){var t=[],a=[];const r=Array.from(e.discs.values()).flat();if(1===e.discs.size)t.push(...r);else for(var[n,i]of e.discs.entries())a.push({headerRow:s.default.createElement(Xe,{discNumber:n}),tracks:i});var l=[{key:"title",label:p(["sort.title"])}];return s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:"main-actionBar-ActionBar contentSpacing"},s.default.createElement("div",{className:"main-actionBar-ActionBarRow"},s.default.createElement("div",{className:"main-playButton-PlayButton"},s.default.createElement(fe,{size:"lg",onClick:()=>{ue(r.map(e=>e.localTrack))}})),s.default.createElement(qe,{label:p(["more.label.context"],r[0].album.name),menu:s.default.createElement(Je,{tracks:r})}))),s.default.createElement(Ge,{tracks:t,subtracks:a,gridLabel:e.albumName,useTrackNumber:!0,onPlayTrack:e=>{se(e,r.map(e=>e.localTrack))},headers:l,getRowContent:e=>[s.default.createElement(Ue,{key:e.uri,track:e,withArtists:!0})],displayType:"list"}))}var Qe="app-module__center-container___LG8O4_betterDlocalDfiles",v=t(r()),et=t(e());function tt(e){const t=v.default.createElement("div",{className:"main-image-image main-entityHeader-image main-entityHeader-shadow main-image-loaded "+Qe},v.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},v.default.createElement("path",{d:"M9 18V5l12-2v13"}),v.default.createElement("circle",{cx:"6",cy:"18",r:"3"}),v.default.createElement("circle",{cx:"18",cy:"16",r:"3"})));return v.default.createElement(v.default.Fragment,null,""!==e.imageSrc?v.default.createElement("img",{src:e.imageSrc,className:"main-image-image main-entityHeader-image main-entityHeader-shadow main-entityHeader-newEntityHeaders main-image-loaded",onError:e=>e.currentTarget.outerHTML=Spicetify.ReactDOMServer.renderToString(t)}):t)}function at(e){var{fontSize:t,ref:a}=(0,et.default)();return v.default.createElement("div",{className:"contentSpacing main-entityHeader-container main-entityHeader-nonWrapped main-entityHeader-newEntityHeaders"},v.default.createElement("div",{className:"main-entityHeader-backgroundColor"}),v.default.createElement("div",{className:"main-entityHeader-backgroundColor main-entityHeader-overlay"}),v.default.createElement("div",null),v.default.createElement("div",{className:"main-entityHeader-imageContainer main-entityHeader-imageContainerNew"},v.default.createElement("div",{className:"main-entityHeader-image"},e.image)),v.default.createElement("div",{className:"main-entityHeader-headerText"},e.subtitle&&v.default.createElement(E,{variant:"mesto",className:"main-entityHeader-pretitle"},e.subtitle),v.default.createElement("div",{dir:"auto",className:"main-entityHeader-title",style:{maxHeight:"135px",fontSize:"6rem"},ref:a},v.default.createElement(E,{variant:"bass",semanticColor:"textBase",elementType:"h1",style:{fontSize:t}},e.title)),e.metadata&&v.default.createElement("div",{className:"main-entityHeader-metaData",style:{maxHeight:"66px"}},e.metadata)))}function rt(e){return n.default.createElement(at,{image:n.default.createElement(tt,{imageSrc:e.album.image}),subtitle:p(["album"]),title:e.album.name,metadata:n.default.createElement(n.default.Fragment,null,e.album.artists.map(e=>n.default.createElement(E,{variant:"mestoBold",key:e.uri},n.default.createElement("a",{href:"#",draggable:"false",onClick:()=>{c(d,e.uri)}},e.name))).reduce((e,t,a)=>null===e?[t]:[...e,n.default.createElement("span",{key:a,className:"main-entityHeader-divider"}),t],null),n.default.createElement(E,{variant:"mesto",className:"main-entityHeader-metaDataText"},p(["tracklist-header.songs-counter",1===e.album.getTracks().length?"one":"other"],e.album.getTracks().length)),n.default.createElement(E,{variant:"mesto",className:"main-entityHeader-metaDataText"},(e=e.album.getDuration(),t=Math.floor(e/1e3%60),a=Math.floor(e/1e3/60%60),e=Math.floor(e/1e3/60/60%24),r=[],0!==e&&r.push(p(["time.hours.short",1===e?"one":"other"],e)),0!==a&&r.push(p(["time.minutes.short",1===a?"one":"other"],a)),0===e&&0!==t&&r.push(p(["time.seconds.short",1===t?"one":"other"],t)),r.join(" "))))});var t,a,r}function nt(){var e=f("History"),t=e.location.state.uri??null;return null===t?(e.replace(ge),n.default.createElement(n.default.Fragment,null)):(e=window.localTracksService.getAlbums()).has(t)?(e=e.get(t),n.default.createElement(n.default.Fragment,null,null!==e&&n.default.createElement(n.default.Fragment,null,n.default.createElement(rt,{album:e}),n.default.createElement(Ke,{albumName:e.name,discs:e.discs})))):(c(ge),n.default.createElement(n.default.Fragment,null))}var y=t(r()),it={"stretch-container":"app-module__stretch-container___SIzsh_betterDlocalDfiles","center-container":"app-module__center-container___LG8O4_betterDlocalDfiles","full-size-container":"app-module__full-size-container___XoGtP_betterDlocalDfiles","pad-top":"app-module__pad-top___8OIp9_betterDlocalDfiles","card-grid":"app-module__card-grid___4mWTm_betterDlocalDfiles","main-card-card":"app-module__main-card-card___E9Zy2_betterDlocalDfiles","text-subdued":"app-module__text-subdued___7rYtR_betterDlocalDfiles","details-page-header":"app-module__details-page-header___2JiWt_betterDlocalDfiles",controls:"app-module__controls___ZDW-X_betterDlocalDfiles","flex-centered":"app-module__flex-centered___5gRmM_betterDlocalDfiles","limit-lines-2":"app-module__limit-lines-2___GyZCj_betterDlocalDfiles","text-full-centered":"app-module__text-full-centered___xI2eE_betterDlocalDfiles"},b=t(r()),lt={"stretch-container":"app-module__stretch-container___SIzsh_betterDlocalDfiles","center-container":"app-module__center-container___LG8O4_betterDlocalDfiles","full-size-container":"app-module__full-size-container___XoGtP_betterDlocalDfiles","pad-top":"app-module__pad-top___8OIp9_betterDlocalDfiles","card-grid":"app-module__card-grid___4mWTm_betterDlocalDfiles","main-card-card":"app-module__main-card-card___E9Zy2_betterDlocalDfiles","text-subdued":"app-module__text-subdued___7rYtR_betterDlocalDfiles","details-page-header":"app-module__details-page-header___2JiWt_betterDlocalDfiles",controls:"app-module__controls___ZDW-X_betterDlocalDfiles","flex-centered":"app-module__flex-centered___5gRmM_betterDlocalDfiles","limit-lines-2":"app-module__limit-lines-2___GyZCj_betterDlocalDfiles","text-full-centered":"app-module__text-full-centered___xI2eE_betterDlocalDfiles"};function ot(e){var t=(0,b.useRef)(null),a=Ee(t);const r=Spicetify.ReactHook.DragHandler({itemUris:e.album.getTracks().map(e=>e.uri),dragLabelText:e.album.name,contextUri:e.album.uri});var n=b.default.createElement("div",{style:{height:"250px"}});const i=b.default.createElement("div",{className:"main-image-image main-cardImage-image main-image-loading main-image-loaded "+lt["center-container"]},b.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},b.default.createElement("path",{d:"M9 18V5l12-2v13"}),b.default.createElement("circle",{cx:"6",cy:"18",r:"3"}),b.default.createElement("circle",{cx:"18",cy:"16",r:"3"})));var l=b.default.createElement("div",{className:lt["main-card-card"]+" main-card-card",draggable:!0,onClick:()=>{c(be,e.album.uri)},onDragStart:e=>{r.draggable&&r.onDragStart(e)}},b.default.createElement("div",{className:"main-card-draggable"},b.default.createElement("div",{className:"main-card-imageContainer main-card-imageContainerOld"},b.default.createElement("div",{className:"main-cardImage-imageWrapper"},""!==e.album.image?b.default.createElement("img",{"aria-hidden":"false",draggable:"false",loading:"lazy",src:e.album.image,alt:"album image",className:"main-image-image main-cardImage-image main-image-loading main-image-loaded",onError:e=>e.currentTarget.outerHTML=Spicetify.ReactDOMServer.renderToString(i)}):i),b.default.createElement("div",{className:"main-card-PlayButtonContainer"},b.default.createElement("div",{className:"main-playButton-PlayButton"},b.default.createElement(fe,{size:"md",onClick:()=>{e.onPlayClicked(e.album)}})))),b.default.createElement("div",{className:"main-card-cardMetadata"},b.default.createElement(E,{className:"main-cardHeader-link main-cardHeader-text",variant:"balladBold",semanticColor:"textBase",paddingBottom:"4px"},e.album.name),b.default.createElement(E,{className:"main-cardSubHeader-root "+lt["limit-lines-2"],variant:"mesto",semanticColor:"textSubdued"},e.album.artists.map(t=>b.default.createElement("span",{key:t.uri},b.default.createElement("a",{href:"#",draggable:"false",onClick:e=>{e.stopPropagation(),c(d,t.uri)}},t.name))).reduce((e,t)=>null===e?[t]:[...e,b.default.createElement(b.default.Fragment,null,", "),t],null)))));return b.default.createElement("div",{ref:t},a?b.default.createElement(Spicetify.ReactComponent.RightClickMenu,{menu:b.default.createElement(Je,{tracks:e.album.getTracks()})},l):n)}var ct=t(r()),st={"search-container":"SearchInput-module__search-container___6V0Ij_betterDlocalDfiles","search-icon":"SearchInput-module__search-icon___scfSd_betterDlocalDfiles","clear-icon":"SearchInput-module__clear-icon___-dvoN_betterDlocalDfiles"},ut=function(e,t){return(ut=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}))(e,t)};function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function a(){this.constructor=e}ut(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}function dt(e){var t="function"==typeof Symbol&&Symbol.iterator,a=t&&e[t],r=0;if(a)return a.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&r>=e.length?void 0:e)&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function mt(e,t){var a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var r,n,i=a.call(e),l=[];try{for(;(void 0===t||0<t--)&&!(r=i.next()).done;)l.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(a=i.return)&&a.call(i)}finally{if(n)throw n.error}}return l}function ft(e,t,a){if(a||2===arguments.length)for(var r,n=0,i=t.length;n<i;n++)!r&&n in t||((r=r||Array.prototype.slice.call(t,0,n))[n]=t[n]);return e.concat(r||Array.prototype.slice.call(t))}function k(e){return"function"==typeof e}function pt(e){e=e(function(e){Error.call(e),e.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e}var ht=pt(function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}});function _t(e,t){e&&0<=(t=e.indexOf(t))&&e.splice(t,1)}w.prototype.unsubscribe=function(){var t,e,a;if(!this.closed){this.closed=!0;var r=this._parentage;if(r)if(this._parentage=null,Array.isArray(r))try{for(var n=dt(r),i=n.next();!i.done;i=n.next())i.value.remove(this)}catch(e){o={error:e}}finally{try{i&&!i.done&&(l=n.return)&&l.call(n)}finally{if(o)throw o.error}}else r.remove(this);var l=this.initialTeardown;if(k(l))try{l()}catch(e){a=e instanceof ht?e.errors:[e]}var o=this._finalizers;if(o){this._finalizers=null;try{for(var c=dt(o),s=c.next();!s.done;s=c.next()){var u=s.value;try{bt(u)}catch(e){a=null!=a?a:[],e instanceof ht?a=ft(ft([],mt(a)),mt(e.errors)):a.push(e)}}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=c.return)&&e.call(c)}finally{if(t)throw t.error}}}if(a)throw new ht(a)}},w.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)bt(e);else{if(e instanceof w){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!=(t=this._finalizers)?t:[]).push(e)}},w.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},w.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},w.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&_t(t,e)},w.prototype.remove=function(e){var t=this._finalizers;t&&_t(t,e),e instanceof w&&e._removeParent(this)},w.EMPTY=((W=new w).closed=!0,W);var Et=w;function w(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var vt=Et.EMPTY;function yt(e){return e instanceof Et||e&&"closed"in e&&k(e.remove)&&k(e.add)&&k(e.unsubscribe)}function bt(e){k(e)?e():e.unsubscribe()}var gt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},kt={setTimeout:function(e,t){for(var a=[],r=2;r<arguments.length;r++)a[r-2]=arguments[r];var n=kt.delegate;return null!=n&&n.setTimeout?n.setTimeout.apply(n,ft([e,t],mt(a))):setTimeout.apply(void 0,ft([e,t],mt(a)))},clearTimeout:function(e){var t=kt.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function wt(){}var St=Dt("C",void 0,void 0);function Dt(e,t,a){return{kind:e,value:t,error:a}}var It=null;function xt(e){if(gt.useDeprecatedSynchronousErrorHandling){var t=!It;if(t&&(It={errorThrown:!1,error:null}),e(),t){var t=It,a=t.errorThrown,t=t.error;if(It=null,a)throw t}}else e()}g(S,Nt=Et),S.create=function(e,t,a){return new Mt(e,t,a)},S.prototype.next=function(e){this.isStopped?Ht(Dt("N",e,void 0),this):this._next(e)},S.prototype.error=function(e){this.isStopped?Ht(Dt("E",void 0,e),this):(this.isStopped=!0,this._error(e))},S.prototype.complete=function(){this.isStopped?Ht(St,this):(this.isStopped=!0,this._complete())},S.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,Nt.prototype.unsubscribe.call(this),this.destination=null)},S.prototype._next=function(e){this.destination.next(e)},S.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},S.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}};var Nt,Ct=S;function S(e){var t=Nt.call(this)||this;return t.isStopped=!1,e?yt(t.destination=e)&&e.add(t):t.destination=$t,t}var Rt=Function.prototype.bind;function Tt(e,t){return Rt.call(e,t)}Ot.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){zt(e)}},Ot.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){zt(e)}else zt(e)},Ot.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){zt(e)}};var Lt=Ot;function Ot(e){this.partialObserver=e}g(Pt,At=Ct);var At,Mt=Pt;function Pt(e,t,a){var r=At.call(this)||this;return a=k(e)||!e?{next:null!=e?e:void 0,error:null!=t?t:void 0,complete:null!=a?a:void 0}:r&&gt.useDeprecatedNextContext?((t=Object.create(e)).unsubscribe=function(){return r.unsubscribe()},{next:e.next&&Tt(e.next,t),error:e.error&&Tt(e.error,t),complete:e.complete&&Tt(e.complete,t)}):e,r.destination=new Lt(a),r}function zt(e){var t,a;gt.useDeprecatedSynchronousErrorHandling?(a=e,gt.useDeprecatedSynchronousErrorHandling&&It&&(It.errorThrown=!0,It.error=a)):(t=e,kt.setTimeout(function(){var e=gt.onUnhandledError;if(!e)throw t;e(t)}))}function Ht(e,t){var a=gt.onStoppedNotification;a&&kt.setTimeout(function(){return a(e,t)})}var $t={closed:!0,next:wt,error:function(e){throw e},complete:wt},a="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ft(e){return e}D.prototype.lift=function(e){var t=new D;return t.source=this,t.operator=e,t},D.prototype.subscribe=function(e,t,a){var r,n=this,i=(r=e)&&r instanceof Ct||function(e){return e&&k(e.next)&&k(e.error)&&k(e.complete)}(r)&&yt(r)?e:new Mt(e,t,a);return xt(function(){var e=n.operator,t=n.source;i.add(e?e.call(i,t):t?n._subscribe(i):n._trySubscribe(i))}),i},D.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},D.prototype.forEach=function(r,e){var n=this;return new(e=jt(e))(function(e,t){var a=new Mt({next:function(e){try{r(e)}catch(e){t(e),a.unsubscribe()}},error:t,complete:e});n.subscribe(a)})},D.prototype._subscribe=function(e){var t;return null==(t=this.source)?void 0:t.subscribe(e)},D.prototype[a]=function(){return this},D.prototype.pipe=function(){for(var t,e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];return(0===(t=e).length?Ft:1===t.length?t[0]:function(e){return t.reduce(function(e,t){return t(e)},e)})(this)},D.prototype.toPromise=function(e){var r=this;return new(e=jt(e))(function(e,t){var a;r.subscribe(function(e){return a=e},function(e){return t(e)},function(){return e(a)})})},D.create=function(e){return new D(e)};var Bt=D;function D(e){e&&(this._subscribe=e)}function jt(e){return null!=(e=null!=e?e:gt.Promise)?e:Promise}function Gt(a){return function(e){if(k(null==(t=e)?void 0:t.lift))return e.lift(function(e){try{return a(e,this)}catch(e){this.error(e)}});var t;throw new TypeError("Unable to lift unknown Observable type")}}function Wt(e,t,a,r,n){return new Xt(e,t,a,r,n)}g(Vt,Ut=Ct),Vt.prototype.unsubscribe=function(){var e;this.shouldUnsubscribe&&!this.shouldUnsubscribe()||(e=this.closed,Ut.prototype.unsubscribe.call(this),e)||null==(e=this.onFinalize)||e.call(this)};var Ut,Xt=Vt;function Vt(t,a,e,r,n,i){var l=Ut.call(this,t)||this;return l.onFinalize=n,l.shouldUnsubscribe=i,l._next=a?function(e){try{a(e)}catch(e){t.error(e)}}:Ut.prototype._next,l._error=r?function(e){try{r(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:Ut.prototype._error,l._complete=e?function(){try{e()}catch(e){t.error(e)}finally{this.unsubscribe()}}:Ut.prototype._complete,l}var Zt,qt=pt(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),e=(g(I,Zt=Bt),I.prototype.lift=function(e){var t=new Jt(this,this);return t.operator=e,t},I.prototype._throwIfClosed=function(){if(this.closed)throw new qt},I.prototype.next=function(n){var i=this;xt(function(){var t,e;if(i._throwIfClosed(),!i.isStopped){i.currentObservers||(i.currentObservers=Array.from(i.observers));try{for(var a=dt(i.currentObservers),r=a.next();!r.done;r=a.next())r.value.next(n)}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}}})},I.prototype.error=function(t){var a=this;xt(function(){if(a._throwIfClosed(),!a.isStopped){a.hasError=a.isStopped=!0,a.thrownError=t;for(var e=a.observers;e.length;)e.shift().error(t)}})},I.prototype.complete=function(){var t=this;xt(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var e=t.observers;e.length;)e.shift().complete()}})},I.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(I.prototype,"observed",{get:function(){var e;return 0<(null==(e=this.observers)?void 0:e.length)},enumerable:!1,configurable:!0}),I.prototype._trySubscribe=function(e){return this._throwIfClosed(),Zt.prototype._trySubscribe.call(this,e)},I.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},I.prototype._innerSubscribe=function(e){var t=this,a=this.hasError,r=this.isStopped,n=this.observers;return a||r?vt:(this.currentObservers=null,n.push(e),new Et(function(){t.currentObservers=null,_t(n,e)}))},I.prototype._checkFinalizedStatuses=function(e){var t=this.hasError,a=this.thrownError,r=this.isStopped;t?e.error(a):r&&e.complete()},I.prototype.asObservable=function(){var e=new Bt;return e.source=this,e},I.create=function(e,t){return new Jt(e,t)},I);function I(){var e=Zt.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}g(Kt,Yt=e),Kt.prototype.next=function(e){var t,a;null!=(a=null==(t=this.destination)?void 0:t.next)&&a.call(t,e)},Kt.prototype.error=function(e){var t,a;null!=(a=null==(t=this.destination)?void 0:t.error)&&a.call(t,e)},Kt.prototype.complete=function(){var e,t;null!=(t=null==(e=this.destination)?void 0:e.complete)&&t.call(e)},Kt.prototype._subscribe=function(e){var t;return null!=(t=null==(t=this.source)?void 0:t.subscribe(e))?t:vt};var Yt,Jt=Kt;function Kt(e,t){var a=Yt.call(this)||this;return a.destination=e,a.source=t,a}g(ta,Qt=e),Object.defineProperty(ta.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),ta.prototype._subscribe=function(e){var t=Qt.prototype._subscribe.call(this,e);return t.closed||e.next(this._value),t},ta.prototype.getValue=function(){var e=this.hasError,t=this.thrownError,a=this._value;if(e)throw t;return this._throwIfClosed(),a},ta.prototype.next=function(e){Qt.prototype.next.call(this,this._value=e)};var Qt,ea=ta;function ta(e){var t=Qt.call(this)||this;return t._value=e,t}var aa,ra={now:function(){return(ra.delegate||Date).now()},delegate:void 0},W=(g(na,aa=Et),na.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},na);function na(e,t){return aa.call(this)||this}var ia,la={setInterval:function(e,t){for(var a=[],r=2;r<arguments.length;r++)a[r-2]=arguments[r];var n=la.delegate;return null!=n&&n.setInterval?n.setInterval.apply(n,ft([e,t],mt(a))):setInterval.apply(void 0,ft([e,t],mt(a)))},clearInterval:function(e){var t=la.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},a=(g(oa,ia=W),oa.prototype.schedule=function(e,t){var a;return void 0===t&&(t=0),this.closed||(this.state=e,e=this.id,a=this.scheduler,null!=e&&(this.id=this.recycleAsyncId(a,e,t)),this.pending=!0,this.delay=t,this.id=null!=(e=this.id)?e:this.requestAsyncId(a,this.id,t)),this},oa.prototype.requestAsyncId=function(e,t,a){return void 0===a&&(a=0),la.setInterval(e.flush.bind(e,this),a)},oa.prototype.recycleAsyncId=function(e,t,a){if(null!=(a=void 0===a?0:a)&&this.delay===a&&!1===this.pending)return t;null!=t&&la.clearInterval(t)},oa.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;e=this._execute(e,t);if(e)return e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},oa.prototype._execute=function(e,t){var a,r=!1;try{this.work(e)}catch(e){r=!0,a=e||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),a},oa.prototype.unsubscribe=function(){var e,t,a;this.closed||(e=this.id,a=(t=this.scheduler).actions,this.work=this.state=this.scheduler=null,this.pending=!1,_t(a,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,ia.prototype.unsubscribe.call(this))},oa);function oa(e,t){var a=ia.call(this,e,t)||this;return a.scheduler=e,a.work=t,a.pending=!1,a}ua.prototype.schedule=function(e,t,a){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(a,t)},ua.now=ra.now;var ca,sa=ua;function ua(e,t){void 0===t&&(t=ua.now),this.schedulerActionCtor=e,this.now=t}function da(e,t){e=ca.call(this,e,t=void 0===t?sa.now:t)||this;return e.actions=[],e._active=!1,e}g(da,ca=sa),da.prototype.flush=function(e){var t,a=this.actions;if(this._active)a.push(e);else{this._active=!0;do{if(t=e.execute(e.state,e.delay))break}while(e=a.shift());if(this._active=!1,t){for(;e=a.shift();)e.unsubscribe();throw t}}};var ma=new da(a);function fa(e,t){return e===t}var pa=t(r()),ha={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},e=(c,s)=>{var e=(0,pa.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:r,className:n="",children:i,...l},o)=>(0,pa.createElement)("svg",{ref:o,...ha,width:t,height:t,stroke:e,strokeWidth:r?24*Number(a)/Number(t):a,className:["lucide","lucide-"+c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n].join(" "),...l},[...s.map(([e,t])=>(0,pa.createElement)(e,t)),...Array.isArray(i)?i:[i]]));return e.displayName=""+c,e},_a=e("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),Ea=e("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),va=e("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),ya=e("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),x=t(r(),1),ba=e=>e+1|0,ga=()=>{const e=(0,x.useState)(0)[1];return(0,x.useRef)(()=>e(ba)).current},ka=(()=>"undefined"==typeof window?x.useEffect:x.useLayoutEffect)(),wa=e=>e[1]?.next?e[1]:{next:e[1],error:e[2],complete:e[3]};function Sa(e,t,a,r){{var n=x.useEffect,i=[e,t,a,r];const l=(0,x.useRef)(i),o=(0,x.useRef)(),c=(0,x.useRef)();ka(()=>{l.current=i,o.current=wa(i)}),n(()=>{const t=l.current[0],e=(o.current||(o.current=wa(l.current)),t.subscribe({next:e=>{t===l.current[0]&&o.current.next?.(e)},error:e=>{t===l.current[0]&&(o.current.error?o.current:console).error(e)},complete:()=>{t===l.current[0]&&o.current.complete?.()}}));return c.current=e,()=>{e.unsubscribe()}},[i[0]]),c}}function Da(e){const r=ga(),n=(0,x.useRef)(e),i=(0,x.useRef)(),l=(0,x.useRef)(!1),a=(0,x.useRef)(!1),[o,c]=(0,x.useState)(()=>{let t;return e.subscribe({next:e=>{a.current=!0,t=e},error:e=>{i.current=e}}).unsubscribe(),t});if(ka(()=>{n.current=e}),(0,x.useEffect)(()=>{i.current=null;const t=n.current;let a=o;const e=t.subscribe({next:e=>{t===n.current&&(l.current?c(e):a=e)},error:e=>{t===n.current&&(i.current=e,r())}});return l.current||a!==o&&c(a),l.current=!0,()=>{e.unsubscribe()}},[e]),i.current)throw i.current;if(a.current)return(0,x.useDebugValue)(o),o;throw new Error("Observable did not synchronously emit a value.")}function Ia(t){const[a,e]=function(e){const[t]=(0,x.useState)(()=>new ea(e));var[a]=(0,x.useState)(()=>({get current(){return t.value},set current(e){t.next(e)}}));return[a,t]}(t.search);var i,l,o,c;function r(e){a.current=e,t.setSearch(e)}return Sa(e.pipe((o=400,void 0===c&&(c=ma),Gt(function(e,a){var r=null,t=null,n=null,i=function(){var e;r&&(r.unsubscribe(),e=t,t=r=null,a.next(e))};function l(){var e=n+o,t=c.now();t<e?(r=this.schedule(void 0,e-t),a.add(r)):i()}e.subscribe(Wt(a,function(e){t=e,n=c.now(),r||(r=c.schedule(l,o),a.add(r))},function(){i(),a.complete()},void 0,function(){t=r=null}))})),(void 0===l&&(l=Ft),i=null!=i?i:fa,Gt(function(e,a){var r,n=!0;e.subscribe(Wt(a,function(e){var t=l(e);!n&&i(r,t)||(n=!1,r=t,a.next(e))}))}))),t.setDebouncedSearch),ct.default.createElement("div",{className:st["search-container"]},ct.default.createElement("div",{className:st["search-icon"]},ct.default.createElement(ya,{size:18})),ct.default.createElement("input",{role:"searchbox",maxLength:80,autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",placeholder:p(["navbar.search"]),"aria-hidden":"true",tabIndex:-1,value:t.search,onChange:e=>{r(e.target.value)}}),ct.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{iconOnly:()=>ct.default.createElement(h,{icon:"x",iconSize:16}),buttonSize:"sm",className:st["clear-icon"],onClick:()=>{r("")},style:{visibility:t.search?"visible":"hidden"}}))}var N=t(r()),xa={list:"list-view",compact:"menu",grid:"grid-view"},Na=t(r());function Ca(e){return Na.default.createElement("li",null,Na.default.createElement(E,{className:"main-contextMenu-menuHeading ellipsis-one-line",variant:"finaleBold"},e.children))}var Ra=t(r());function Ta(e){return Ra.default.createElement(E,{className:"main-contextMenu-menuItemLabel ellipsis-one-line",variant:"mesto"},e.children)}function La(t){var e=N.default.createElement(N.default.Fragment,null,N.default.createElement(Ca,null,p(["drop_down.sort_by"])),t.sortOptions.map(e=>N.default.createElement(Spicetify.ReactComponent.MenuItem,{key:e.key,onClick:()=>{t.setSelectedSortOption(e.key)},role:"menuitemradio","aria-checked":t.selectedSortOption.key===e.key,CheckedIcon:()=>"ascending"===t.selectedSortOption.order?N.default.createElement(Ea,null):N.default.createElement(_a,null)},N.default.createElement(Ta,null,e.label)))),a=N.default.createElement(N.default.Fragment,null,N.default.createElement(Ca,null,p(["web-player.your-library-x.sort-and-view-picker.view-as"])),t.displayTypes.map(e=>N.default.createElement(Spicetify.ReactComponent.MenuItem,{key:e,onClick:()=>{t.setSelectedDisplayType(e)},leadingIcon:N.default.createElement(h,{icon:xa[e],iconSize:16}),role:"menuitemradio","aria-checked":t.selectedDisplayType===e},N.default.createElement(Ta,null,p(["web-player.your-library-x.sort-and-view-picker."+e]))))),e=N.default.createElement(Spicetify.ReactComponent.Menu,{className:De},0<t.sortOptions.length&&e,0<t.displayTypes.length&&a);return N.default.createElement(Spicetify.ReactComponent.ContextMenu,{trigger:"click",action:"toggle",menu:e},N.default.createElement("button",{className:"x-sortBox-sortDropdown"},N.default.createElement("span",null,t.sortOptions.find(e=>e.key===t.selectedSortOption.key)?.label??""),N.default.createElement(h,{icon:xa[t.selectedDisplayType],iconSize:16})))}function Oa(e,t,a){a="descending"===a?-1:1;return t<e?a:e<t?-1*a:0}function Aa(){var[e,t]=(0,y.useState)("");const[a,r]=(0,y.useState)("");var n=[{key:"title",label:p(["collection.sort.alphabetical"])}];const i=Array.from(window.localTracksService.getAlbums()).map(([,e])=>e);const l=(0,y.useMemo)(()=>{return e=i,""===(t=a)?e:e.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())||e.artists.some(e=>e.name.toLowerCase().includes(t.toLowerCase())));var e,t},[i,a]),[o,c]=(0,y.useState)({...n[0],order:"ascending"});var s=(0,y.useMemo)(()=>{return[...(e=l,"title"===(a=o).key?e.sort((e,t)=>Oa(e.name,t.name,a.order)):e)];var e,a},[l,o]);function u(e){ue(e.getTracks().map(e=>e.localTrack))}return y.default.createElement("div",{className:"contentSpacing"},y.default.createElement("div",{className:it["details-page-header"]+" "+it["pad-top"]},y.default.createElement("h1",null,p(["albums"])),y.default.createElement("div",{className:it.controls},y.default.createElement(Ia,{search:e,setSearch:t,setDebouncedSearch:r}),y.default.createElement(La,{sortOptions:n,selectedSortOption:o,setSelectedSortOption:function(t){c(e=>{return{key:t,order:e.key===t&&"ascending"===e.order?"descending":"ascending"}})},displayTypes:["grid"],selectedDisplayType:"grid",setSelectedDisplayType:()=>{}}))),y.default.createElement("div",{className:it["card-grid"]+" main-gridContainer-gridContainer main-gridContainer-fixedWidth"},s.map(e=>y.default.createElement(ot,{key:e.uri,album:e,onPlayClicked:u}))))}var C=t(r()),R=t(r()),Ma=t(r());function Pa(e){const t=Ma.default.createElement("div",{className:"main-trackList-rowImage main-trackList-rowImageFallback"},Ma.default.createElement("svg",{role:"img",height:"16",width:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor"},Ma.default.createElement("path",{d:"M10 2v9.5a2.75 2.75 0 11-2.75-2.75H8.5V2H10zm-1.5 8.25H7.25A1.25 1.25 0 108.5 11.5v-1.25z"})));var a=0===(a=e.track.localTrack.album).images.length?"":a.images[0].url??"";return Ma.default.createElement(Ma.default.Fragment,null,""!==a?Ma.default.createElement("img",{loading:"eager",src:a,className:"main-image-image main-trackList-rowImage main-image-loaded",width:"40",height:"40",onError:e=>e.currentTarget.outerHTML=Spicetify.ReactDOMServer.renderToString(t)}):t,Ma.default.createElement(Ue,{track:e.track,withArtists:e.withArtists}))}var za=t(r());function Ha(e){return za.default.createElement(E,{variant:"mesto"},za.default.createElement("a",{className:"standalone-ellipsis-one-line",dir:"auto",href:"#",tabIndex:-1,onClick:()=>{c(be,e.track.album.uri)}},e.track.album.name))}function $a(t){var e=[{key:"title",label:p(["sort.title"])},{key:"album",label:p(["sort.album"])}];return R.default.createElement(R.default.Fragment,null,R.default.createElement("div",{className:"main-actionBar-ActionBar contentSpacing"},R.default.createElement("div",{className:"main-actionBar-ActionBarRow"},R.default.createElement("div",{className:"main-playButton-PlayButton"},R.default.createElement(fe,{size:"lg",onClick:()=>{ue(t.tracks.map(e=>e.localTrack))}})),R.default.createElement(qe,{label:p(["more.label.context"],t.artist.name),menu:R.default.createElement(Je,{tracks:t.tracks})}))),R.default.createElement(Ge,{tracks:t.tracks,subtracks:[],gridLabel:t.artist.name,useTrackNumber:!1,onPlayTrack:e=>{se(e,t.tracks.map(e=>e.localTrack))},headers:e,getRowContent:e=>[R.default.createElement(Pa,{key:e.uri,track:e,withArtists:!1}),R.default.createElement(Ha,{key:e.uri,track:e})],displayType:"list"}))}function Fa(e){return C.default.createElement(at,{image:C.default.createElement(tt,{imageSrc:e.artist.image}),subtitle:p(["artist"]),title:e.artist.name})}function Ba(){var e=f("History"),t=e.location.state.uri??null;return null===t?(e.replace(ke),C.default.createElement(C.default.Fragment,null)):(e=window.localTracksService.getArtists()).has(t)?(e=e.get(t),t=window.localTracksService.getArtistTracks(e.uri),C.default.createElement(C.default.Fragment,null,null!==e&&C.default.createElement(C.default.Fragment,null,C.default.createElement(Fa,{artist:e}),C.default.createElement($a,{tracks:t,artist:e})))):(c(ke),C.default.createElement(C.default.Fragment,null))}var T=t(r()),ja={"stretch-container":"app-module__stretch-container___SIzsh_betterDlocalDfiles","center-container":"app-module__center-container___LG8O4_betterDlocalDfiles","full-size-container":"app-module__full-size-container___XoGtP_betterDlocalDfiles","pad-top":"app-module__pad-top___8OIp9_betterDlocalDfiles","card-grid":"app-module__card-grid___4mWTm_betterDlocalDfiles","main-card-card":"app-module__main-card-card___E9Zy2_betterDlocalDfiles","text-subdued":"app-module__text-subdued___7rYtR_betterDlocalDfiles","details-page-header":"app-module__details-page-header___2JiWt_betterDlocalDfiles",controls:"app-module__controls___ZDW-X_betterDlocalDfiles","flex-centered":"app-module__flex-centered___5gRmM_betterDlocalDfiles","limit-lines-2":"app-module__limit-lines-2___GyZCj_betterDlocalDfiles","text-full-centered":"app-module__text-full-centered___xI2eE_betterDlocalDfiles"},L=t(r()),Ga={"stretch-container":"app-module__stretch-container___SIzsh_betterDlocalDfiles","center-container":"app-module__center-container___LG8O4_betterDlocalDfiles","full-size-container":"app-module__full-size-container___XoGtP_betterDlocalDfiles","pad-top":"app-module__pad-top___8OIp9_betterDlocalDfiles","card-grid":"app-module__card-grid___4mWTm_betterDlocalDfiles","main-card-card":"app-module__main-card-card___E9Zy2_betterDlocalDfiles","text-subdued":"app-module__text-subdued___7rYtR_betterDlocalDfiles","details-page-header":"app-module__details-page-header___2JiWt_betterDlocalDfiles",controls:"app-module__controls___ZDW-X_betterDlocalDfiles","flex-centered":"app-module__flex-centered___5gRmM_betterDlocalDfiles","limit-lines-2":"app-module__limit-lines-2___GyZCj_betterDlocalDfiles","text-full-centered":"app-module__text-full-centered___xI2eE_betterDlocalDfiles"};function Wa(e){var t=(0,L.useRef)(null),a=Ee(t),r=L.default.createElement("div",{style:{height:"260px"}});const n=L.default.createElement("div",{className:Ga["center-container"],style:{height:"100%",left:0,position:"absolute",top:0,width:"100%"}},L.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"50",height:"50",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},L.default.createElement("path",{d:"M9 18V5l12-2v13"}),L.default.createElement("circle",{cx:"6",cy:"18",r:"3"}),L.default.createElement("circle",{cx:"18",cy:"16",r:"3"})));return L.default.createElement("div",{ref:t},a?L.default.createElement(Spicetify.ReactComponent.RightClickMenu,{menu:L.default.createElement(Je,{tracks:window.localTracksService.getArtistTracks(e.artist.uri)})},L.default.createElement("div",{className:Ga["main-card-card"]+" main-card-card",onClick:()=>{c(d,e.artist.uri)}},L.default.createElement("div",{draggable:"true",className:"main-card-draggable"},L.default.createElement("div",{className:"main-card-imageContainer main-card-imageContainerOld"},L.default.createElement("div",{className:"main-cardImage-imageWrapper main-cardImage-circular"},""!==e.artist.image?L.default.createElement("img",{"aria-hidden":"false",draggable:"false",loading:"lazy",src:e.artist.image,alt:"artist image",className:"main-image-image main-cardImage-image main-cardImage-circular main-image-loading main-image-loaded",onError:e=>e.currentTarget.outerHTML=Spicetify.ReactDOMServer.renderToString(n)}):n),L.default.createElement("div",{className:"main-card-PlayButtonContainer"},L.default.createElement("div",{className:"main-playButton-PlayButton"},L.default.createElement(fe,{size:"md",onClick:()=>{e.onPlayClicked(e.artist)}})))),L.default.createElement("div",{className:"main-card-cardMetadata"},L.default.createElement(E,{className:"main-cardHeader-link main-cardHeader-text "+Ga["text-full-centered"],variant:"balladBold",semanticColor:"textBase",paddingBottom:"4px"},e.artist.name))))):r)}function Ua(){var[e,t]=(0,T.useState)("");const[a,r]=(0,T.useState)("");var n=[{key:"title",label:p(["collection.sort.alphabetical"])}];const i=Array.from(window.localTracksService.getArtists()).map(([,e])=>e);const l=(0,T.useMemo)(()=>{return e=i,""===(t=a)?e:e.filter(e=>e.name.toLowerCase().includes(t.toLowerCase()));var e,t},[i,a]),[o,c]=(0,T.useState)({...n[0],order:"ascending"});var s=(0,T.useMemo)(()=>{return[...(e=l,"title"===(a=o).key?e.sort((e,t)=>Oa(e.name,t.name,a.order)):e)];var e,a},[l,o]);function u(e){ue(window.localTracksService.getArtistTracks(e.uri).map(e=>e.localTrack))}return T.default.createElement("div",{className:"contentSpacing"},T.default.createElement("div",{className:ja["details-page-header"]+" "+ja["pad-top"]},T.default.createElement("h1",null,p(["artists"])),T.default.createElement("div",{className:ja.controls},T.default.createElement(Ia,{search:e,setSearch:t,setDebouncedSearch:r}),T.default.createElement(La,{sortOptions:n,selectedSortOption:o,setSelectedSortOption:function(t){c(e=>{return{key:t,order:e.key===t&&"ascending"===e.order?"descending":"ascending"}})},displayTypes:["grid"],selectedDisplayType:"grid",setSelectedDisplayType:()=>{}}))),T.default.createElement("div",{className:ja["card-grid"]+" main-gridContainer-gridContainer main-gridContainer-fixedWidth"},s.map(e=>T.default.createElement(Wa,{key:e.uri,artist:e,onPlayClicked:u}))))}var Xa=t(r());function Va(){return Xa.default.createElement("svg",{width:"100px",height:"100px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"},Xa.default.createElement("circle",{cx:"50",cy:"50",r:"0",fill:"none",stroke:"currentColor",strokeWidth:"2"},Xa.default.createElement("animate",{attributeName:"r",repeatCount:"indefinite",dur:"1s",values:"0;40",keyTimes:"0;1",keySplines:"0 0.2 0.8 1",calcMode:"spline",begin:"0s"}),Xa.default.createElement("animate",{attributeName:"opacity",repeatCount:"indefinite",dur:"1s",values:"1;0",keyTimes:"0;1",keySplines:"0.2 0 0.8 1",calcMode:"spline",begin:"0s"})),Xa.default.createElement("circle",{cx:"50",cy:"50",r:"0",fill:"none",stroke:"currentColor",strokeWidth:"2"},Xa.default.createElement("animate",{attributeName:"r",repeatCount:"indefinite",dur:"1s",values:"0;40",keyTimes:"0;1",keySplines:"0 0.2 0.8 1",calcMode:"spline",begin:"-0.5s"}),Xa.default.createElement("animate",{attributeName:"opacity",repeatCount:"indefinite",dur:"1s",values:"1;0",keyTimes:"0;1",keySplines:"0.2 0 0.8 1",calcMode:"spline",begin:"-0.5s"})))}var Za=t(r()),O=t(r()),qa=t(r()),Ya="TabBar-module__active___eiZFw_betterDlocalDfiles";function Ja(e){return qa.default.createElement("li",{"data-tab":e.item.key,onClick:()=>{e.onItemClicked(e.item)}},qa.default.createElement("button",{className:e.active?Ya:"",draggable:"false"},qa.default.createElement(E,{variant:"mestoBold"},e.item.label)))}var Ka=t(r());function Qa(a){var e={width:a.size+"px"};return Ka.default.createElement("li",{id:"more-button",style:e},Ka.default.createElement(Spicetify.ReactComponent.Dropdown,{value:a.activeItem.key,disabled:!1,onSelect:t=>{var e=a.items.find(e=>e.key===t);e&&a.onClick(e)}},a.items.map(e=>Ka.default.createElement("option",{key:e.key,value:e.key},e.label))))}var er={tabBar:"TabBar-module__tabBar___-Q8zx_betterDlocalDfiles",active:"TabBar-module__active___eiZFw_betterDlocalDfiles"};function tr(a){const t=O.default.useRef(null),[n,r]=(0,O.useState)([]),[i,e]=(0,O.useState)(0),[l,o]=(0,O.useState)([]),[c,s]=(0,O.useState)(0);return(0,O.useEffect)(()=>{t.current&&e(t.current.clientWidth)},[a.windowSize]),(0,O.useEffect)(()=>{var e;t.current&&(e=Array.from(t.current.children).filter(e=>"more-button"!==e.id).map(e=>e.clientWidth),r(e))},[a.items]),(0,O.useEffect)(()=>{if(t.current)if(n.reduce((e,t)=>e+t,0)<=i)o([]);else{var e=Math.max(...n)+32;const r=[];let a=e;n.forEach((e,t)=>{i>=a+e?a+=e:r.push(t)}),o(r),s(e)}},[i,n]),O.default.createElement("nav",{className:er.tabBar},O.default.createElement("ul",{ref:t},a.items.filter((e,t)=>!l.includes(t)).map(e=>O.default.createElement(Ja,{key:e.key,item:e,active:a.activeItem.key===e.key,onItemClicked:a.onItemClicked})),l.length||0===n.length?O.default.createElement(Qa,{items:a.items.filter((e,t)=>l.includes(t)||e.key===a.activeItem.key),activeItem:a.activeItem,onClick:a.onItemClicked,size:c}):null))}function ar(e){const t=document.querySelector(".Root__main-view .os-resize-observer-host")??document.querySelector(".Root__main-view .os-size-observer");if(!t)throw new Error("Could not find resize host");const[a,r]=(0,Za.useState)(t.clientWidth),n=()=>{r(t.clientWidth)};return(0,Za.useEffect)(()=>{const e=new ResizeObserver(n);return e.observe(t),()=>{e.disconnect()}},[]),Za.default.createElement(tr,{windowSize:a,items:e.items,activeItem:e.activeItem,onItemClicked:e.onItemClicked})}var A=t(r()),rr={"stretch-container":"app-module__stretch-container___SIzsh_betterDlocalDfiles","center-container":"app-module__center-container___LG8O4_betterDlocalDfiles","full-size-container":"app-module__full-size-container___XoGtP_betterDlocalDfiles","pad-top":"app-module__pad-top___8OIp9_betterDlocalDfiles","card-grid":"app-module__card-grid___4mWTm_betterDlocalDfiles","main-card-card":"app-module__main-card-card___E9Zy2_betterDlocalDfiles","text-subdued":"app-module__text-subdued___7rYtR_betterDlocalDfiles","details-page-header":"app-module__details-page-header___2JiWt_betterDlocalDfiles",controls:"app-module__controls___ZDW-X_betterDlocalDfiles","flex-centered":"app-module__flex-centered___5gRmM_betterDlocalDfiles","limit-lines-2":"app-module__limit-lines-2___GyZCj_betterDlocalDfiles","text-full-centered":"app-module__text-full-centered___xI2eE_betterDlocalDfiles"},M=t(r()),nr=t(r());function ir(e){return nr.default.createElement(E,{className:"standalone-ellipsis-one-line",variant:"mesto"},e.track.artists.map(e=>nr.default.createElement("a",{dir:"auto",href:"#",tabIndex:-1,onClick:()=>{c(d,e.uri)},key:e.uri},e.name)).reduce((e,t)=>null===e?[t]:[...e,nr.default.createElement(nr.default.Fragment,null,", "),t],null))}function lr(a){var[e,t]=(0,M.useState)("");const[r,n]=(0,M.useState)("");var i=[{key:"date",label:p(["sort.date-added"])},{key:"title",label:p(["sort.title"])},{key:"artist",label:p(["sort.artist"])},{key:"album",label:p(["sort.album"])},{key:"duration",label:p(["sort.duration"])}];const[l,o]=(0,M.useState)({...i[0],order:"ascending"}),[c,s]=(0,M.useState)("list");var u=[];"list"===c?u.push("artist"===l.key?{key:"artist",label:p(["artist"])}:{key:"title",label:p(["tracklist.header.title"])}):u.push({key:"title",label:p(["tracklist.header.title"])},{key:"artist",label:p(["artist"])}),u.push({key:"album",label:p(["tracklist.header.album"])},{key:"date",label:p(["tracklist.header.date-added"])});const d=(0,M.useMemo)(()=>{return e=a.tracks,""===(t=r)?e:e.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())||e.album.name.toLowerCase().includes(t.toLowerCase())||e.artists.some(e=>e.name.toLowerCase().includes(t.toLowerCase())));var e,t},[a.tracks,r]),m=(0,M.useMemo)(()=>[...function(e,a){switch(a.key){case"date":return e.sort((e,t)=>Oa(e.addedAt,t.addedAt,a.order));case"title":return e.sort((e,t)=>Oa(e.name,t.name,a.order));case"artist":return e.sort((e,t)=>Oa(e.artists.map(e=>e.name).join(", "),t.artists.map(e=>e.name).join(", "),a.order));case"album":return e.sort((e,t)=>Oa(e.album.name,t.album.name,a.order));case"duration":return e.sort((e,t)=>Oa(e.duration,t.duration,a.order));default:return e}}(d,l)],[d,l]);function f(r,n){o(e=>{let t,a;return a=n||"title"!==r||"descending"!==l.order||"compact"===c?n||"artist"!==r||"descending"!==l.order||"compact"===c?(t=r,e.key===r&&"ascending"===e.order?"descending":"ascending"):(t="title","ascending"):(t="artist","ascending"),{key:t,order:a}})}return M.default.createElement(M.default.Fragment,null,M.default.createElement("div",{className:"main-actionBar-ActionBar contentSpacing"},M.default.createElement("div",{className:"main-actionBar-ActionBarRow"},M.default.createElement("div",{className:"main-playButton-PlayButton"},M.default.createElement(fe,{size:"lg",onClick:()=>{ue(m.map(e=>e.localTrack))}})),M.default.createElement("div",{className:""+rr.controls},M.default.createElement(Ia,{search:e,setSearch:t,setDebouncedSearch:n}),M.default.createElement(La,{sortOptions:i,selectedSortOption:l,setSelectedSortOption:e=>{f(e,!0)},displayTypes:["list","compact"],selectedDisplayType:c,setSelectedDisplayType:s})))),M.default.createElement(Ge,{tracks:m,subtracks:[],gridLabel:p(["local-files"]),useTrackNumber:!1,onPlayTrack:e=>{se(e,m.map(e=>e.localTrack))},headers:u,onHeaderClicked:e=>{f(e,!1)},sortedHeader:l,getRowContent:e=>{var t=["compact"===c?M.default.createElement(E,{className:"main-trackList-rowTitle standalone-ellipsis-one-line",variant:"ballad",semanticColor:"textBase",key:e.uri},e.name):M.default.createElement(Pa,{track:e,withArtists:!0,key:e.uri})];return"compact"===c&&t.push(M.default.createElement(ir,{track:e,key:e.uri})),t.push(M.default.createElement(Ha,{track:e,key:e.uri}),M.default.createElement(E,{variant:"mesto",semanticColor:"textSubdued",key:e.uri},e.addedAt.toLocaleDateString())),t},displayType:c}))}var or={"stretch-container":"app-module__stretch-container___SIzsh_betterDlocalDfiles","center-container":"app-module__center-container___LG8O4_betterDlocalDfiles","full-size-container":"app-module__full-size-container___XoGtP_betterDlocalDfiles","pad-top":"app-module__pad-top___8OIp9_betterDlocalDfiles","card-grid":"app-module__card-grid___4mWTm_betterDlocalDfiles","main-card-card":"app-module__main-card-card___E9Zy2_betterDlocalDfiles","text-subdued":"app-module__text-subdued___7rYtR_betterDlocalDfiles","details-page-header":"app-module__details-page-header___2JiWt_betterDlocalDfiles",controls:"app-module__controls___ZDW-X_betterDlocalDfiles","flex-centered":"app-module__flex-centered___5gRmM_betterDlocalDfiles","limit-lines-2":"app-module__limit-lines-2___GyZCj_betterDlocalDfiles","text-full-centered":"app-module__text-full-centered___xI2eE_betterDlocalDfiles"};function cr(){var e=Array.from(window.localTracksService.getTracks().values());return A.default.createElement(A.default.Fragment,null,A.default.createElement(at,{image:A.default.createElement("div",{className:""+or["center-container"],style:{background:"linear-gradient(126deg, rgba(69,8,245,1) 0%, rgba(111,86,235,1) 27%, rgba(151,159,225,1) 67%, rgba(189,228,217,1) 100%)",borderRadius:"4px"}},A.default.createElement(va,{fill:"var(--spice-text)",size:100})),title:p(["local-files"]),titleFontSize:"6rem",metadata:A.default.createElement(A.default.Fragment,null,A.default.createElement(E,{variant:"mesto",className:"main-entityHeader-metaDataText"},p(["local-files.description"])),A.default.createElement(E,{variant:"mesto",className:"main-entityHeader-metaDataText"},p(["tracklist-header.songs-counter",1===e.length?"one":"other"],e.length)))}),A.default.createElement(lr,{tracks:e}))}var sr={"stretch-container":"app-module__stretch-container___SIzsh_betterDlocalDfiles","center-container":"app-module__center-container___LG8O4_betterDlocalDfiles","full-size-container":"app-module__full-size-container___XoGtP_betterDlocalDfiles","pad-top":"app-module__pad-top___8OIp9_betterDlocalDfiles","card-grid":"app-module__card-grid___4mWTm_betterDlocalDfiles","main-card-card":"app-module__main-card-card___E9Zy2_betterDlocalDfiles","text-subdued":"app-module__text-subdued___7rYtR_betterDlocalDfiles","details-page-header":"app-module__details-page-header___2JiWt_betterDlocalDfiles",controls:"app-module__controls___ZDW-X_betterDlocalDfiles","flex-centered":"app-module__flex-centered___5gRmM_betterDlocalDfiles","limit-lines-2":"app-module__limit-lines-2___GyZCj_betterDlocalDfiles","text-full-centered":"app-module__text-full-centered___xI2eE_betterDlocalDfiles"};var ur=function(){var e=Da(window.localTracksService.isReady$),t=Da(window.localTracksService.processedAlbums$),a=Da(window.localTracksService.albumCount$);(0,o.useEffect)(()=>{!async function(){await window.localTracksService.init(),await le("better-local-files",oe,{title:"New in v"+oe,content:o.default.createElement("p",null,o.default.createElement("ul",null,ce.map(e=>o.default.createElement("li",{key:e},e)))),isLarge:!0})}()},[]);const r=f("History"),n=r.location;let i=o.default.createElement(o.default.Fragment,null);switch(n.pathname){case we:i=o.default.createElement(cr,null);break;case be:i=o.default.createElement(nt,null);break;case ge:i=o.default.createElement(Aa,null);break;case d:i=o.default.createElement(Ba,null);break;case ke:i=o.default.createElement(Ua,null);break;default:r.replace(we)}var l=document.querySelector(".main-topBar-topbarContentWrapper");return o.default.createElement(o.default.Fragment,null,o.default.createElement("div",{className:sr["full-size-container"]},e?o.default.createElement("div",{className:sr["stretch-container"]+" "+sr.padded},i):o.default.createElement("div",{className:sr["center-container"]+" "+sr.padded},o.default.createElement(Va,null),0===a&&o.default.createElement("p",null,"Processing tracks..."),0<a&&o.default.createElement("p",null,`Processing album ${t} of ${a}...`))),null!==l&&re.default.createPortal(o.default.createElement(ar,{onItemClicked:e=>{r.push(e.href)},items:Se,activeItem:Se.find(e=>e.href.startsWith(n.pathname))??Se[0]}),l))},dr=t(r());return W=Q,G(H({},"__esModule",{value:!0}),W)})();const render=()=>betterDlocalDfiles.default();