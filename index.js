var eternalDjukebox=(()=>{var e,T=Object.create,o=Object.defineProperty,B=Object.getOwnPropertyDescriptor,$=Object.getOwnPropertyNames,P=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty,t=(e,t)=>function(){return t||(0,e[$(e)[0]])((t={exports:{}}).exports,t),t.exports},G=(t,a,r,n)=>{if(a&&"object"==typeof a||"function"==typeof a)for(let e of $(a))F.call(t,e)||e===r||o(t,e,{get:()=>a[e],enumerable:!(n=B(a,e))||n.enumerable});return t},a=(e,t,a)=>(a=null!=e?T(P(e)):{},G(!t&&e&&e.__esModule?a:o(a,"default",{value:e,enumerable:!0}),e)),r=(e,t,a)=>{var r;return r=a,(t="symbol"!=typeof t?t+"":t)in(e=e)?o(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,a},n=t({"external-global-plugin:react"(e,t){t.exports=Spicetify.React}}),X=t({"../../node_modules/spcr-whats-new/node_modules/semver/internal/debug.js"(e,t){var a="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};t.exports=a}}),H=t({"../../node_modules/spcr-whats-new/node_modules/semver/internal/constants.js"(e,t){var a=Number.MAX_SAFE_INTEGER||9007199254740991;t.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:a,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}}}),z=t({"../../node_modules/spcr-whats-new/node_modules/semver/internal/re.js"(e,t){var{MAX_SAFE_COMPONENT_LENGTH:a,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:n}=H(),o=X(),l=(e=t.exports={}).re=[],i=e.safeRe=[],s=e.src=[],u=e.t={},c=0,t="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",n],[t,r]],n=(e,t,a)=>{var r=(e=>{for(var[t,a]of d)e=e.split(t+"*").join(`${t}{0,${a}}`).split(t+"+").join(`${t}{1,${a}}`);return e})(t),n=c++;o(e,n,t),u[e]=n,s[n]=t,l[n]=new RegExp(t,a?"g":void 0),i[n]=new RegExp(r,a?"g":void 0)};n("NUMERICIDENTIFIER","0|[1-9]\\d*"),n("NUMERICIDENTIFIERLOOSE","\\d+"),n("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${t}*`),n("MAINVERSION",`(${s[u.NUMERICIDENTIFIER]})\\.(${s[u.NUMERICIDENTIFIER]})\\.(${s[u.NUMERICIDENTIFIER]})`),n("MAINVERSIONLOOSE",`(${s[u.NUMERICIDENTIFIERLOOSE]})\\.(${s[u.NUMERICIDENTIFIERLOOSE]})\\.(${s[u.NUMERICIDENTIFIERLOOSE]})`),n("PRERELEASEIDENTIFIER",`(?:${s[u.NUMERICIDENTIFIER]}|${s[u.NONNUMERICIDENTIFIER]})`),n("PRERELEASEIDENTIFIERLOOSE",`(?:${s[u.NUMERICIDENTIFIERLOOSE]}|${s[u.NONNUMERICIDENTIFIER]})`),n("PRERELEASE",`(?:-(${s[u.PRERELEASEIDENTIFIER]}(?:\\.${s[u.PRERELEASEIDENTIFIER]})*))`),n("PRERELEASELOOSE",`(?:-?(${s[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${s[u.PRERELEASEIDENTIFIERLOOSE]})*))`),n("BUILDIDENTIFIER",t+"+"),n("BUILD",`(?:\\+(${s[u.BUILDIDENTIFIER]}(?:\\.${s[u.BUILDIDENTIFIER]})*))`),n("FULLPLAIN",`v?${s[u.MAINVERSION]}${s[u.PRERELEASE]}?${s[u.BUILD]}?`),n("FULL",`^${s[u.FULLPLAIN]}$`),n("LOOSEPLAIN",`[v=\\s]*${s[u.MAINVERSIONLOOSE]}${s[u.PRERELEASELOOSE]}?${s[u.BUILD]}?`),n("LOOSE",`^${s[u.LOOSEPLAIN]}$`),n("GTLT","((?:<|>)?=?)"),n("XRANGEIDENTIFIERLOOSE",s[u.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*"),n("XRANGEIDENTIFIER",s[u.NUMERICIDENTIFIER]+"|x|X|\\*"),n("XRANGEPLAIN",`[v=\\s]*(${s[u.XRANGEIDENTIFIER]})(?:\\.(${s[u.XRANGEIDENTIFIER]})(?:\\.(${s[u.XRANGEIDENTIFIER]})(?:${s[u.PRERELEASE]})?${s[u.BUILD]}?)?)?`),n("XRANGEPLAINLOOSE",`[v=\\s]*(${s[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[u.XRANGEIDENTIFIERLOOSE]})(?:${s[u.PRERELEASELOOSE]})?${s[u.BUILD]}?)?)?`),n("XRANGE",`^${s[u.GTLT]}\\s*${s[u.XRANGEPLAIN]}$`),n("XRANGELOOSE",`^${s[u.GTLT]}\\s*${s[u.XRANGEPLAINLOOSE]}$`),n("COERCE",`(^|[^\\d])(\\d{1,${a}})(?:\\.(\\d{1,${a}}))?(?:\\.(\\d{1,${a}}))?(?:$|[^\\d])`),n("COERCERTL",s[u.COERCE],!0),n("LONETILDE","(?:~>?)"),n("TILDETRIM",`(\\s*)${s[u.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",n("TILDE",`^${s[u.LONETILDE]}${s[u.XRANGEPLAIN]}$`),n("TILDELOOSE",`^${s[u.LONETILDE]}${s[u.XRANGEPLAINLOOSE]}$`),n("LONECARET","(?:\\^)"),n("CARETTRIM",`(\\s*)${s[u.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",n("CARET",`^${s[u.LONECARET]}${s[u.XRANGEPLAIN]}$`),n("CARETLOOSE",`^${s[u.LONECARET]}${s[u.XRANGEPLAINLOOSE]}$`),n("COMPARATORLOOSE",`^${s[u.GTLT]}\\s*(${s[u.LOOSEPLAIN]})$|^$`),n("COMPARATOR",`^${s[u.GTLT]}\\s*(${s[u.FULLPLAIN]})$|^$`),n("COMPARATORTRIM",`(\\s*)${s[u.GTLT]}\\s*(${s[u.LOOSEPLAIN]}|${s[u.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",n("HYPHENRANGE",`^\\s*(${s[u.XRANGEPLAIN]})\\s+-\\s+(${s[u.XRANGEPLAIN]})\\s*$`),n("HYPHENRANGELOOSE",`^\\s*(${s[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${s[u.XRANGEPLAINLOOSE]})\\s*$`),n("STAR","(<|>)?=?\\s*\\*"),n("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),n("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}}),U=t({"../../node_modules/spcr-whats-new/node_modules/semver/internal/parse-options.js"(e,t){var a=Object.freeze({loose:!0}),r=Object.freeze({});t.exports=e=>e?"object"!=typeof e?a:e:r}}),q=t({"../../node_modules/spcr-whats-new/node_modules/semver/internal/identifiers.js"(e,t){var n=/^[0-9]+$/,a=(e,t)=>{var a=n.test(e),r=n.test(t);return a&&r&&(e=+e,t=+t),e===t?0:a&&!r||(!r||a)&&e<t?-1:1};t.exports={compareIdentifiers:a,rcompareIdentifiers:(e,t)=>a(t,e)}}}),W=t({"../../node_modules/spcr-whats-new/node_modules/semver/classes/semver.js"(e,t){var n=X(),{MAX_LENGTH:a,MAX_SAFE_INTEGER:r}=H(),{safeRe:o,t:l}=z(),i=U(),s=q()["compareIdentifiers"],u=class{constructor(e,t){if(t=i(t),e instanceof u){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>a)throw new TypeError(`version is longer than ${a} characters`);n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;t=e.trim().match(t.loose?o[l.LOOSE]:o[l.FULL]);if(!t)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+t[1],this.minor=+t[2],this.patch=+t[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");t[4]?this.prerelease=t[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){var t=+e;if(0<=t&&t<r)return t}return e}):this.prerelease=[],this.build=t[5]?t[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.`+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof u)){if("string"==typeof e&&e===this.version)return 0;e=new u(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof u||(e=new u(e,this.options)),s(this.major,e.major)||s(this.minor,e.minor)||s(this.patch,e.patch)}comparePre(e){if(e instanceof u||(e=new u(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{var a=this.prerelease[t],r=e.prerelease[t];if(n("prerelease compare",t,a,r),void 0===a&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===a)return-1;if(a!==r)return s(a,r)}while(++t)}compareBuild(e){e instanceof u||(e=new u(e,this.options));let t=0;do{var a=this.build[t],r=e.build[t];if(n("prerelease compare",t,a,r),void 0===a&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===a)return-1;if(a!==r)return s(a,r)}while(++t)}inc(e,t,a){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,a);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,a);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,a),this.inc("pre",t,a);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,a),this.inc("pre",t,a);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":var r=Number(a)?1:0;if(!t&&!1===a)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[r];else{let e=this.prerelease.length;for(;0<=--e;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);if(-1===e){if(t===this.prerelease.join(".")&&!1===a)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(r)}}if(t){let e=!1===a?[t]:[t,r];(0!==s(this.prerelease[0],t)||isNaN(this.prerelease[1]))&&(this.prerelease=e)}break;default:throw new Error("invalid increment argument: "+e)}return this.raw=this.format(),this.build.length&&(this.raw+="+"+this.build.join(".")),this}};t.exports=u}}),Y=t({"../../node_modules/spcr-whats-new/node_modules/semver/functions/compare.js"(e,t){var r=W();t.exports=(e,t,a)=>new r(e,a).compare(new r(t,a))}}),V=t({"../../node_modules/spcr-whats-new/node_modules/semver/functions/gt.js"(e,t){var r=Y();t.exports=(e,t,a)=>0<r(e,t,a)}}),t=t({"external-global-plugin:react-dom"(e,t){t.exports=Spicetify.ReactDOM}}),J={},Z=J,Q={default:()=>function(){return ot.default.createElement(nt,null)}};for(e in Q)o(Z,e,{get:Q[e],enumerable:!0});var l=a(n()),K="app-module__full-size-container___XoGtP_eternalDjukebox",ee="app-module__empty-container___Or2XU_eternalDjukebox",te="app-module__elements-container___Ac4rM_eternalDjukebox",i={"flex-center":"app-module__flex-center___p5IEY_eternalDjukebox","jukebox-header":"app-module__jukebox-header___Wi-sm_eternalDjukebox",side:"app-module__side___Z2aTX_eternalDjukebox",center:"app-module__center___OPvDb_eternalDjukebox",container:"app-module__container___thHYo_eternalDjukebox","full-size-container":"app-module__full-size-container___XoGtP_eternalDjukebox","empty-container":"app-module__empty-container___Or2XU_eternalDjukebox","elements-container":"app-module__elements-container___Ac4rM_eternalDjukebox","visualizer-container":"app-module__visualizer-container___yEp00_eternalDjukebox",stats:"app-module__stats___LylvR_eternalDjukebox","jukebox-graph":"app-module__jukebox-graph___x0joh_eternalDjukebox","edge-path":"app-module__edge-path___Snm24_eternalDjukebox","settings-button":"app-module__settings-button___N-QYL_eternalDjukebox","settings-modal":"app-module__settings-modal___utbkc_eternalDjukebox","range-subtext":"app-module__range-subtext___-pTR-_eternalDjukebox","small-text":"app-module__small-text___--IM9_eternalDjukebox","checkbox-container":"app-module__checkbox-container___SJTXB_eternalDjukebox"},s=a(n()),ae={"flex-center":"app-module__flex-center___p5IEY_eternalDjukebox","jukebox-header":"app-module__jukebox-header___Wi-sm_eternalDjukebox",side:"app-module__side___Z2aTX_eternalDjukebox",center:"app-module__center___OPvDb_eternalDjukebox",container:"app-module__container___thHYo_eternalDjukebox","full-size-container":"app-module__full-size-container___XoGtP_eternalDjukebox","empty-container":"app-module__empty-container___Or2XU_eternalDjukebox","elements-container":"app-module__elements-container___Ac4rM_eternalDjukebox","visualizer-container":"app-module__visualizer-container___yEp00_eternalDjukebox",stats:"app-module__stats___LylvR_eternalDjukebox","jukebox-graph":"app-module__jukebox-graph___x0joh_eternalDjukebox","edge-path":"app-module__edge-path___Snm24_eternalDjukebox","settings-button":"app-module__settings-button___N-QYL_eternalDjukebox","settings-modal":"app-module__settings-modal___utbkc_eternalDjukebox","range-subtext":"app-module__range-subtext___-pTR-_eternalDjukebox","small-text":"app-module__small-text___--IM9_eternalDjukebox","checkbox-container":"app-module__checkbox-container___SJTXB_eternalDjukebox"},u=a(n()),c=a(n()),re={"flex-center":"app-module__flex-center___p5IEY_eternalDjukebox","jukebox-header":"app-module__jukebox-header___Wi-sm_eternalDjukebox",side:"app-module__side___Z2aTX_eternalDjukebox",center:"app-module__center___OPvDb_eternalDjukebox",container:"app-module__container___thHYo_eternalDjukebox","full-size-container":"app-module__full-size-container___XoGtP_eternalDjukebox","empty-container":"app-module__empty-container___Or2XU_eternalDjukebox","elements-container":"app-module__elements-container___Ac4rM_eternalDjukebox","visualizer-container":"app-module__visualizer-container___yEp00_eternalDjukebox",stats:"app-module__stats___LylvR_eternalDjukebox","jukebox-graph":"app-module__jukebox-graph___x0joh_eternalDjukebox","edge-path":"app-module__edge-path___Snm24_eternalDjukebox","settings-button":"app-module__settings-button___N-QYL_eternalDjukebox","settings-modal":"app-module__settings-modal___utbkc_eternalDjukebox","range-subtext":"app-module__range-subtext___-pTR-_eternalDjukebox","small-text":"app-module__small-text___--IM9_eternalDjukebox","checkbox-container":"app-module__checkbox-container___SJTXB_eternalDjukebox"};function ne(e){return Spicetify.Platform?.[e]}function oe(e){const[t,a]=(0,c.useState)(!1);return c.default.createElement("path",{className:re["beat-path"],fill:e.drawData.beat.isPlaying||t?e.drawData.activeColor:e.drawData.color,d:e.drawData.drawCommand,onMouseOver:()=>{a(!0)},onMouseOut:()=>{a(!1)},onClick:async()=>{await function(e){var t=ne(e);if(void 0===t)throw new Error(`Platform API "${e}" is not available`);return t}("PlayerAPI").seekTo(e.drawData.beat.start)}},c.default.createElement("title",null,"Beat ",e.drawData.beat.index))}var d=a(n()),le="app-module__edge-path___Snm24_eternalDjukebox";function ie(e){const[t,a]=(0,d.useState)(!1);return d.default.createElement("path",{className:le+" "+(e.drawData.edge.isPlaying?"is-active":""),fill:"none",stroke:e.drawData.edge.isPlaying||t?e.drawData.activeColor:e.drawData.color,strokeWidth:e.drawData.strokeWidth,d:e.drawData.drawCommand,onMouseOver:e=>{e=e.target,document.getElementById("#jukebox-graph")?.firstChild?.appendChild(e),a(!0)},onMouseOut:()=>{a(!1)}},d.default.createElement("title",null,e.drawData.edge.source.index+" - "+e.drawData.edge.destination.index))}function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var se=/^\s+/,ue=/\s+$/;function g(e,t){var a;return t=t||{},(e=e||"")instanceof g?e:this instanceof g?(a=function(e){var t={r:0,g:0,b:0},a=1,r=null,n=null,o=null,l=!1,i=!1;"string"==typeof e&&(e=function(e){e=e.replace(se,"").replace(ue,"").toLowerCase();var t,a=!1;if(m[e])e=m[e],a=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=v.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=v.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=v.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=v.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=v.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=v.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=v.hex8.exec(e))return{r:p(t[1]),g:p(t[2]),b:p(t[3]),a:Ie(t[4]),format:a?"name":"hex8"};if(t=v.hex6.exec(e))return{r:p(t[1]),g:p(t[2]),b:p(t[3]),format:a?"name":"hex"};if(t=v.hex4.exec(e))return{r:p(t[1]+""+t[1]),g:p(t[2]+""+t[2]),b:p(t[3]+""+t[3]),a:Ie(t[4]+""+t[4]),format:a?"name":"hex8"};if(t=v.hex3.exec(e))return{r:p(t[1]+""+t[1]),g:p(t[2]+""+t[2]),b:p(t[3]+""+t[3]),format:a?"name":"hex"};return!1}(e));"object"==h(e)&&(k(e.r)&&k(e.g)&&k(e.b)?(t=function(e,t,a){return{r:255*_(e,255),g:255*_(t,255),b:255*_(a,255)}}(e.r,e.g,e.b),l=!0,i="%"===String(e.r).substr(-1)?"prgb":"rgb"):k(e.h)&&k(e.s)&&k(e.v)?(r=E(e.s),n=E(e.v),t=function(e,t,a){e=6*_(e,360),t=_(t,100),a=_(a,100);var r=Math.floor(e),e=e-r,n=a*(1-t),o=a*(1-e*t),e=a*(1-(1-e)*t),t=r%6;return{r:255*[a,o,n,n,e,a][t],g:255*[e,a,a,o,n,n][t],b:255*[n,n,e,a,a,o][t]}}(e.h,r,n),l=!0,i="hsv"):k(e.h)&&k(e.s)&&k(e.l)&&(r=E(e.s),o=E(e.l),t=function(e,t,a){var r,n,o;function l(e,t,a){return a<0&&(a+=1),1<a&&--a,a<1/6?e+6*(t-e)*a:a<.5?t:a<2/3?e+(t-e)*(2/3-a)*6:e}e=_(e,360),t=_(t,100),a=_(a,100),0===t?r=n=o=a:(r=l(t=2*a-(a=a<.5?a*(1+t):a+t-a*t),a,e+1/3),n=l(t,a,e),o=l(t,a,e-1/3));return{r:255*r,g:255*n,b:255*o}}(e.h,r,o),l=!0,i="hsl"),e.hasOwnProperty("a"))&&(a=e.a);return a=je(a),{ok:l,format:e.format||i,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:a}}(e),this._originalInput=e,this._r=a.r,this._g=a.g,this._b=a.b,this._a=a.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||a.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),void(this._ok=a.ok)):new g(e,t)}function ce(e,t,a){e=_(e,255),t=_(t,255),a=_(a,255);var r,n=Math.max(e,t,a),o=Math.min(e,t,a),l=(n+o)/2;if(n==o)r=s=0;else{var i=n-o,s=.5<l?i/(2-n-o):i/(n+o);switch(n){case e:r=(t-a)/i+(t<a?6:0);break;case t:r=(a-e)/i+2;break;case a:r=(e-t)/i+4}r/=6}return{h:r,s:s,l:l}}function de(e,t,a){e=_(e,255),t=_(t,255),a=_(a,255);var r,n=Math.max(e,t,a),o=Math.min(e,t,a),l=n,i=n-o,s=0===n?0:i/n;if(n==o)r=0;else{switch(n){case e:r=(t-a)/i+(t<a?6:0);break;case t:r=(a-e)/i+2;break;case a:r=(e-t)/i+4}r/=6}return{h:r,s:s,v:l}}function he(e,t,a,r){e=[b(Math.round(e).toString(16)),b(Math.round(t).toString(16)),b(Math.round(a).toString(16))];return r&&e[0].charAt(0)==e[0].charAt(1)&&e[1].charAt(0)==e[1].charAt(1)&&e[2].charAt(0)==e[2].charAt(1)?e[0].charAt(0)+e[1].charAt(0)+e[2].charAt(0):e.join("")}function me(e,t,a,r){return[b(we(r)),b(Math.round(e).toString(16)),b(Math.round(t).toString(16)),b(Math.round(a).toString(16))].join("")}function _e(e,t){t=0===t?0:t||10;e=g(e).toHsl();return e.s-=t/100,e.s=f(e.s),g(e)}function fe(e,t){t=0===t?0:t||10;e=g(e).toHsl();return e.s+=t/100,e.s=f(e.s),g(e)}function pe(e){return g(e).desaturate(100)}function be(e,t){t=0===t?0:t||10;e=g(e).toHsl();return e.l+=t/100,e.l=f(e.l),g(e)}function ge(e,t){t=0===t?0:t||10;e=g(e).toRgb();return e.r=Math.max(0,Math.min(255,e.r-Math.round(-t/100*255))),e.g=Math.max(0,Math.min(255,e.g-Math.round(-t/100*255))),e.b=Math.max(0,Math.min(255,e.b-Math.round(-t/100*255))),g(e)}function Ee(e,t){t=0===t?0:t||10;e=g(e).toHsl();return e.l-=t/100,e.l=f(e.l),g(e)}function xe(e,t){e=g(e).toHsl(),t=(e.h+t)%360;return e.h=t<0?360+t:t,g(e)}function ve(e){e=g(e).toHsl();return e.h=(e.h+180)%360,g(e)}function ke(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var a=g(e).toHsl(),r=[g(e)],n=360/t,o=1;o<t;o++)r.push(g({h:(a.h+o*n)%360,s:a.s,l:a.l}));return r}function ye(e){var t=g(e).toHsl(),a=t.h;return[g(e),g({h:(a+72)%360,s:t.s,l:t.l}),g({h:(a+216)%360,s:t.s,l:t.l})]}function Ne(e,t,a){t=t||6,a=a||30;var r=g(e).toHsl(),n=360/a,o=[g(e)];for(r.h=(r.h-(n*t>>1)+720)%360;--t;)r.h=(r.h+n)%360,o.push(g(r));return o}function De(e,t){t=t||6;for(var e=g(e).toHsv(),a=e.h,r=e.s,n=e.v,o=[],l=1/t;t--;)o.push(g({h:a,s:r,v:n})),n=(n+l)%1;return o}g.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e=this.toRgb(),t=e.r/255,a=e.g/255,e=e.b/255,t=t<=.03928?t/12.92:Math.pow((.055+t)/1.055,2.4),a=a<=.03928?a/12.92:Math.pow((.055+a)/1.055,2.4),e=e<=.03928?e/12.92:Math.pow((.055+e)/1.055,2.4);return.2126*t+.7152*a+.0722*e},setAlpha:function(e){return this._a=je(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=de(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=de(this._r,this._g,this._b),t=Math.round(360*e.h),a=Math.round(100*e.s),e=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+a+"%, "+e+"%)":"hsva("+t+", "+a+"%, "+e+"%, "+this._roundA+")"},toHsl:function(){var e=ce(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=ce(this._r,this._g,this._b),t=Math.round(360*e.h),a=Math.round(100*e.s),e=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+a+"%, "+e+"%)":"hsla("+t+", "+a+"%, "+e+"%, "+this._roundA+")"},toHex:function(e){return he(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){var t=this._r,a=this._g,r=this._b,n=this._a;return t=[b(Math.round(t).toString(16)),b(Math.round(a).toString(16)),b(Math.round(r).toString(16)),b(we(n))],e&&t[0].charAt(0)==t[0].charAt(1)&&t[1].charAt(0)==t[1].charAt(1)&&t[2].charAt(0)==t[2].charAt(1)&&t[3].charAt(0)==t[3].charAt(1)?t[0].charAt(0)+t[1].charAt(0)+t[2].charAt(0)+t[3].charAt(0):t.join("")},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*_(this._r,255))+"%",g:Math.round(100*_(this._g,255))+"%",b:Math.round(100*_(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*_(this._r,255))+"%, "+Math.round(100*_(this._g,255))+"%, "+Math.round(100*_(this._b,255))+"%)":"rgba("+Math.round(100*_(this._r,255))+"%, "+Math.round(100*_(this._g,255))+"%, "+Math.round(100*_(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&Re[he(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+me(this._r,this._g,this._b,this._a),a=t;return"progid:DXImageTransform.Microsoft.gradient("+(this._gradientType?"GradientType = 1, ":"")+"startColorstr="+t+",endColorstr="+(a=e?"#"+me((t=g(e))._r,t._g,t._b,t._a):a)+")"},toString:function(e){var t=!!e,a=(e=e||this._format,!1),r=this._a<1&&0<=this._a;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(a=this.toRgbString()),"prgb"===e&&(a=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(a=this.toHexString()),"hex3"===e&&(a=this.toHexString(!0)),"hex4"===e&&(a=this.toHex8String(!0)),"hex8"===e&&(a=this.toHex8String()),"name"===e&&(a=this.toName()),"hsl"===e&&(a=this.toHslString()),(a="hsv"===e?this.toHsvString():a)||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return g(this.toString())},_applyModification:function(e,t){e=e.apply(null,[this].concat([].slice.call(t)));return this._r=e._r,this._g=e._g,this._b=e._b,this.setAlpha(e._a),this},lighten:function(){return this._applyModification(be,arguments)},brighten:function(){return this._applyModification(ge,arguments)},darken:function(){return this._applyModification(Ee,arguments)},desaturate:function(){return this._applyModification(_e,arguments)},saturate:function(){return this._applyModification(fe,arguments)},greyscale:function(){return this._applyModification(pe,arguments)},spin:function(){return this._applyModification(xe,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(Ne,arguments)},complement:function(){return this._applyCombination(ve,arguments)},monochromatic:function(){return this._applyCombination(De,arguments)},splitcomplement:function(){return this._applyCombination(ye,arguments)},triad:function(){return this._applyCombination(ke,[3])},tetrad:function(){return this._applyCombination(ke,[4])}},g.fromRatio=function(e,t){if("object"==h(e)){var a,r={};for(a in e)e.hasOwnProperty(a)&&(r[a]="a"===a?e[a]:E(e[a]));e=r}return g(e,t)},g.equals=function(e,t){return!(!e||!t)&&g(e).toRgbString()==g(t).toRgbString()},g.random=function(){return g.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},g.mix=function(e,t,a){a=0===a?0:a||50;e=g(e).toRgb(),t=g(t).toRgb(),a/=100;return g({r:(t.r-e.r)*a+e.r,g:(t.g-e.g)*a+e.g,b:(t.b-e.b)*a+e.b,a:(t.a-e.a)*a+e.a})},g.readability=function(e,t){e=g(e),t=g(t);return(Math.max(e.getLuminance(),t.getLuminance())+.05)/(Math.min(e.getLuminance(),t.getLuminance())+.05)},g.isReadable=function(e,t,a){var r=g.readability(e,t),n=!1,e=function(e){var t;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),e=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==e&&"large"!==e&&(e="small");return{level:t,size:e}}(a);switch(e.level+e.size){case"AAsmall":case"AAAlarge":n=4.5<=r;break;case"AAlarge":n=3<=r;break;case"AAAsmall":n=7<=r}return n},g.mostReadable=function(e,t,a){for(var r,n=null,o=0,l=(a=a||{}).includeFallbackColors,i=a.level,s=a.size,u=0;u<t.length;u++)o<(r=g.readability(e,t[u]))&&(o=r,n=g(t[u]));return g.isReadable(e,n,{level:i,size:s})||!l?n:(a.includeFallbackColors=!1,g.mostReadable(e,["#fff","#000"],a))};var m=g.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Re=g.hexNames=function(e){var t,a={};for(t in e)e.hasOwnProperty(t)&&(a[e[t]]=t);return a}(m);function je(e){return e=parseFloat(e),e=isNaN(e)||e<0||1<e?1:e}function _(e,t){"string"==typeof(a=e)&&-1!=a.indexOf(".")&&1===parseFloat(a)&&(e="100%");var a="string"==typeof(a=e)&&-1!=a.indexOf("%");return e=Math.min(t,Math.max(0,parseFloat(e))),a&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function f(e){return Math.min(1,Math.max(0,e))}function p(e){return parseInt(e,16)}function b(e){return 1==e.length?"0"+e:""+e}function E(e){return e=e<=1?100*e+"%":e}function we(e){return Math.round(255*parseFloat(e)).toString(16)}function Ie(e){return p(e)/255}C="[\\s|\\(]+("+(R="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+R+")[,|\\s]+("+R+")\\s*\\)?",x="[\\s|\\(]+("+R+")[,|\\s]+("+R+")[,|\\s]+("+R+")[,|\\s]+("+R+")\\s*\\)?";var x,v={CSS_UNIT:new RegExp(R),rgb:new RegExp("rgb"+C),rgba:new RegExp("rgba"+x),hsl:new RegExp("hsl"+C),hsla:new RegExp("hsla"+x),hsv:new RegExp("hsv"+C),hsva:new RegExp("hsva"+x),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function k(e){return v.CSS_UNIT.exec(e)}var y=class{constructor(e=0,t=0){this.x=e,this.y=t}toString(){return this.x+","+this.y}static getMiddlePoint(e,t){return new y((e.x+t.x)/2,(e.y+t.y)/2)}static getDistanceBetweenPoints(e,t){var a=t.x-e.x,t=t.y-e.y;return Math.sqrt(t*t+a*a)}};function N(e,t,a){e=function(e){e=function(e){return e*Math.PI/180}(e);return new y(Math.cos(e),Math.sin(e))}(360*e/100);return e.x=e.x*t+a/2,e.y=e.y*-t+a/2,e}function Se(e,t,a){var r,n,o,l,u,c,d,h,m,_,f,p,b;return 0===a.beats.length?{beats:[],edges:[]}:([r,n]=function(e){var t=[100,100,100],a=[-100,-100,-100];for(const n of e.segments)for(let e=0;e<3;e++){var r=n.timbre[e+1];r<t[e]&&(t[e]=r),r>a[e]&&(a[e]=r)}return[t,a]}(a),l=a.beats[0].start,o=a.beats[a.beats.length-1].start+a.beats[a.beats.length-1].duration-l,c=l,d=o,h=(l=40*e/100)+(o=2*e/100),m=l,_=e,f=o,p=r,b=n,{beats:l=(u=a).beats.map(e=>{var t=100*(e.start-c)/d,a=100*e.duration/d,r=N(t,h+(e.isPlaying?f:0),_),n=N(t+a,h+(e.isPlaying?f:0),_),o=N(t,m,_),l=N(t+a,m,_),i=function(e,t,a,r){e=e.remixedBeats[t.index].firstOverlappingSegment??null;return null!==e?function(t,a,r){var n=[];for(let e=0;e<3;e++){var o=(t.timbre[e+1]-a[e])/(r[e]-a[e]);n[e]=o}var e=g.fromRatio({r:n[1],g:n[2],b:n[0]});return e.toHexString()}(e,a,r):"#000"}(u,e,p,b),s=`M ${r.toString()} 
        A ${h},${h} 0 0 0 ${n.toString()}
        L ${l.toString()}
        A ${m},${m} 0 0 1 `+o.toString();return{beat:e,percentFromStart:t,percentOfSong:a,outerArcStart:r,outerArcEnd:n,innerArcStart:o,innerArcEnd:l,drawCommand:s,color:i,activeColor:g(i).complement().saturate(100).toHexString()}}),edges:function(e,t){var a=[];for(const i of e)for(const s of i.beat.neighbours){var r=e[s.source.index],n=e[s.destination.index],o=y.getMiddlePoint(r.innerArcStart,r.innerArcEnd),l=y.getMiddlePoint(n.innerArcStart,n.innerArcEnd),r=y.getDistanceBetweenPoints(r.innerArcStart,r.innerArcEnd),n=y.getDistanceBetweenPoints(n.innerArcStart,n.innerArcEnd),r={edge:s,strokeWidth:Math.min(r,n),drawCommand:`
                        M ${o.toString()}
                        Q ${t},${t} `+l.toString(),color:i.color,activeColor:i.activeColor};a.push(r)}return a}(l,t)})}function Ae(e){return(0,u.useEffect)(()=>{var e=document.querySelector("svg path.is-active");null!==e&&(e=e,document.getElementById("#jukebox-graph")?.firstChild?.appendChild(e))}),0===e.state.beats.length?u.default.createElement("div",null,"Loading..."):(e=Se(600,300,e.state),u.default.createElement("div",null,u.default.createElement("svg",{id:"#jukebox-graph",height:600,width:600,viewBox:"0 0 600 600",className:ae["jukebox-graph"]},u.default.createElement("g",{transform:"scale(-1,1) translate(-600, 0) rotate(-90,300,300) "},e.beats.map(e=>u.default.createElement(oe,{key:e.beat.index,drawData:e})),e.edges.map(e=>u.default.createElement(ie,{key:e.edge.source.index+"-"+e.edge.destination.index,drawData:e}))))))}var D,Le,R,Me={"flex-center":"app-module__flex-center___p5IEY_eternalDjukebox","jukebox-header":"app-module__jukebox-header___Wi-sm_eternalDjukebox",side:"app-module__side___Z2aTX_eternalDjukebox",center:"app-module__center___OPvDb_eternalDjukebox",container:"app-module__container___thHYo_eternalDjukebox","full-size-container":"app-module__full-size-container___XoGtP_eternalDjukebox","empty-container":"app-module__empty-container___Or2XU_eternalDjukebox","elements-container":"app-module__elements-container___Ac4rM_eternalDjukebox","visualizer-container":"app-module__visualizer-container___yEp00_eternalDjukebox",stats:"app-module__stats___LylvR_eternalDjukebox","jukebox-graph":"app-module__jukebox-graph___x0joh_eternalDjukebox","edge-path":"app-module__edge-path___Snm24_eternalDjukebox","settings-button":"app-module__settings-button___N-QYL_eternalDjukebox","settings-modal":"app-module__settings-modal___utbkc_eternalDjukebox","range-subtext":"app-module__range-subtext___-pTR-_eternalDjukebox","small-text":"app-module__small-text___--IM9_eternalDjukebox","checkbox-container":"app-module__checkbox-container___SJTXB_eternalDjukebox"},j=a(n()),w=a(n()),Oe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},Ce=(D="Settings",Le=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],(R=(0,w.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:r,className:n="",children:o,...l},i)=>(0,w.createElement)("svg",{ref:i,...Oe,width:t,height:t,stroke:e,strokeWidth:r?24*Number(a)/Number(t):a,className:["lucide","lucide-"+D.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n].join(" "),...l},[...Le.map(([e,t])=>(0,w.createElement)(e,t)),...Array.isArray(o)?o:[o]]))).displayName=""+D,R),I={"flex-center":"app-module__flex-center___p5IEY_eternalDjukebox","jukebox-header":"app-module__jukebox-header___Wi-sm_eternalDjukebox",side:"app-module__side___Z2aTX_eternalDjukebox",center:"app-module__center___OPvDb_eternalDjukebox",container:"app-module__container___thHYo_eternalDjukebox","full-size-container":"app-module__full-size-container___XoGtP_eternalDjukebox","empty-container":"app-module__empty-container___Or2XU_eternalDjukebox","elements-container":"app-module__elements-container___Ac4rM_eternalDjukebox","visualizer-container":"app-module__visualizer-container___yEp00_eternalDjukebox",stats:"app-module__stats___LylvR_eternalDjukebox","jukebox-graph":"app-module__jukebox-graph___x0joh_eternalDjukebox","edge-path":"app-module__edge-path___Snm24_eternalDjukebox","settings-button":"app-module__settings-button___N-QYL_eternalDjukebox","settings-modal":"app-module__settings-modal___utbkc_eternalDjukebox","range-subtext":"app-module__range-subtext___-pTR-_eternalDjukebox","small-text":"app-module__small-text___--IM9_eternalDjukebox","checkbox-container":"app-module__checkbox-container___SJTXB_eternalDjukebox"},S=a(n()),A=class{maxBranchDistance=A.defaultBranchDistance;useDynamicBranchDistance=!1;minRandomBranchChance=A.defaultMinRandomBranchChance;maxRandomBranchChance=A.defaultMaxRandomBranchChance;randomBranchChanceDelta=A.defaultRandomBranchChanceDelta;addLastEdge=!0;justBackwards=!1;justLongBranches=!1;removeSequentialBranches=!1;static fromPartial(e){var t=new A;return t.maxBranchDistance=e.maxBranchDistance,t.useDynamicBranchDistance=e.useDynamicBranchDistance,t.minRandomBranchChance=e.minRandomBranchChance,t.maxRandomBranchChance=e.maxRandomBranchChance,t.randomBranchChanceDelta=e.randomBranchChanceDelta,t.addLastEdge=e.addLastEdge,t.justBackwards=e.justBackwards,t.justLongBranches=e.justLongBranches,t.removeSequentialBranches=e.removeSequentialBranches,t}toPartial(){return{maxBranchDistance:this.maxBranchDistance,useDynamicBranchDistance:this.useDynamicBranchDistance,minRandomBranchChance:this.minRandomBranchChance,maxRandomBranchChance:this.maxRandomBranchChance,randomBranchChanceDelta:this.randomBranchChanceDelta,addLastEdge:this.addLastEdge,justBackwards:this.justBackwards,justLongBranches:this.justLongBranches,removeSequentialBranches:this.removeSequentialBranches}}},L=A,Te=(r(L,"minBeatsBeforeBranching",5),r(L,"rangeMinBranchDistance",2),r(L,"rangeMaxBranchDistance",80),r(L,"defaultBranchDistance",30),r(L,"defaultMinRandomBranchChance",.18),r(L,"defaultMaxRandomBranchChance",.5),r(L,"minRandomBranchChanceDelta",0),r(L,"maxRandomBranchChanceDelta",.2),r(L,"defaultRandomBranchChanceDelta",.018),class{static get settings(){return L.fromPartial(Te.storedSettings)}static set settings(e){Te.storedSettings=e.toPartial()}static get storedSettings(){var e=Spicetify.LocalStorage.get(this.settingId);return null==e?(new L).toPartial():JSON.parse(e)}static set storedSettings(e){Spicetify.LocalStorage.set(this.settingId,JSON.stringify(e))}}),Be=Te;r(Be,"settingId","jukebox:settings");var $e="multi-range-slider-module__container___fWxBd_eternalDjukebox",Pe="multi-range-slider-module__slider___u1hIa_eternalDjukebox",Fe="multi-range-slider-module__slider__track___zGTv-_eternalDjukebox",Ge="multi-range-slider-module__slider__range___Z8eDh_eternalDjukebox",Xe="multi-range-slider-module__thumb___2wJ-q_eternalDjukebox",He="multi-range-slider-module__thumb--zindex-3___CAGIo_eternalDjukebox",ze="multi-range-slider-module__thumb--zindex-4___7wtbs_eternalDjukebox",Ue="multi-range-slider-module__thumb--zindex-5___ZY98y_eternalDjukebox",M=a(n());function qe(t){const[a,r]=(0,M.useState)(t.minDefaultValue),[n,o]=(0,M.useState)(t.maxDefaultValue),l=(0,M.useRef)(null),i=(0,M.useRef)(null),s=(0,M.useRef)(null),u=(0,M.useCallback)(e=>Math.round((e-t.min)/(t.max-t.min)*100),[t.min,t.max]);return(0,M.useEffect)(()=>{var e,t;i.current&&(e=u(a),t=u(i.current.valueAsNumber),s.current)&&(s.current.style.left=e+"%",s.current.style.width=t-e+"%")},[a,u]),(0,M.useEffect)(()=>{var e,t;l.current&&(e=u(l.current.valueAsNumber),t=u(n),s.current)&&(s.current.style.width=t-e+"%")},[n,u]),(0,M.useEffect)(()=>{t.onChange({min:a,max:n})},[a,n,t.onChange]),M.default.createElement("div",{className:$e},M.default.createElement("input",{type:"range",min:t.min,max:t.max,value:a,ref:l,onChange:e=>{var t=Math.min(e.target.valueAsNumber,n-1);r(t),e.target.value=t.toString()},className:Xe+" "+He+(a>t.max-10*t.max/100?" "+Ue:"")}),M.default.createElement("input",{type:"range",min:t.min,max:t.max,value:n,ref:i,onChange:e=>{var t=Math.max(e.target.valueAsNumber,a+1);o(t),e.target.value=t.toString()},className:Xe+" "+ze}),M.default.createElement("div",{className:Pe},M.default.createElement("div",{className:Fe}),M.default.createElement("div",{ref:s,className:Ge})))}function We(){const[r,e]=(0,S.useState)(Be.storedSettings);function a(t,a){if(typeof a!=typeof r[t])throw new Error("Value type does not match field type");r[t]!==a&&e(e=>({...e,[t]:a}))}(0,S.useEffect)(()=>{const r=new MutationObserver(e=>{let t=!1;for(const a of e)a.removedNodes.forEach(e=>{"GENERIC-MODAL"===e.nodeName&&(t=!0)});t&&(window.jukebox.reloadSettings().catch(console.error),r.disconnect())});r.observe(document.getElementsByTagName("body")[0],{childList:!0})},[]),(0,S.useEffect)(()=>{Be.storedSettings=r},[r]);var t={marginBottom:"0.5rem",marginTop:"0.5rem",display:"block"},n={marginBottom:"0.5rem",marginTop:"0.5rem",display:"inline-block",marginRight:"0.5rem"};return S.default.createElement("div",{className:I["settings-modal"]},S.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:"The maximum similarity distance allowed between two beats in order to create a branch.",showDelay:100},S.default.createElement("label",{htmlFor:"jukebox.settings.maxBranchDistance",style:t},S.default.createElement("b",null,"Branch Similarity Threshold"),":",r.maxBranchDistance)),S.default.createElement("div",{className:I["input-range-container"]},S.default.createElement("input",{id:"jukebox.settings.maxBranchDistance",className:I["w-100"],type:"range",min:L.rangeMinBranchDistance,max:L.rangeMaxBranchDistance,value:r.maxBranchDistance,step:1,onChange:e=>{a("maxBranchDistance",e.target.valueAsNumber)}}),S.default.createElement("div",{className:I["range-subtext"]},S.default.createElement("span",{className:I["small-text"]},"Higher quality"),S.default.createElement("span",{className:I["small-text"]},"More branches"))),S.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:"The minimum and maximum chance for a branch to be selected each beat.",showDelay:100},S.default.createElement("label",{htmlFor:"jukebox.settings.randomBranchChance",style:t},S.default.createElement("b",null,"Branch Probability Range"),":",` ${Math.round(100*r.minRandomBranchChance)}% to 
                ${Math.round(100*r.maxRandomBranchChance)}%`)),S.default.createElement("div",{className:I["input-range-container"]},S.default.createElement(qe,{min:0,max:100,minDefaultValue:100*r.minRandomBranchChance,maxDefaultValue:100*r.maxRandomBranchChance,onChange:({min:e,max:t})=>{a("minRandomBranchChance",e/100),a("maxRandomBranchChance",t/100)}}),S.default.createElement("div",{className:I["range-subtext"]},S.default.createElement("span",{className:I["small-text"]},"Low"),S.default.createElement("span",{className:I["small-text"]},"High"))),S.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:"Controls how fast the chance to select a branch will increase.",showDelay:100},S.default.createElement("label",{htmlFor:"jukebox.settings.randomBranchChanceDelta",style:t},S.default.createElement("b",null,"Branch Probability Ramp-up Speed"),":",Math.round(100*r.randomBranchChanceDelta),"%")),S.default.createElement("div",{className:I["input-range-container"]},S.default.createElement("input",{id:"jukebox.settings.randomBranchChanceDelta",className:I["w-100"],type:"range",min:0,max:100,value:100*r.randomBranchChanceDelta,step:2,onChange:e=>{a("randomBranchChanceDelta",e.target.valueAsNumber/100)}}),S.default.createElement("div",{className:I["range-subtext"]},S.default.createElement("span",{className:I["small-text"]},"Slow"),S.default.createElement("span",{className:I["small-text"]},"Fast"))),S.default.createElement("div",{className:I["checkbox-container"]},S.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:"If true, optimize by adding a good last edge.",showDelay:100},S.default.createElement("label",{htmlFor:"jukebox.settings.addLastEdge",style:n},S.default.createElement("b",null,"Loop extension optimization"),":")),S.default.createElement("label",{className:"x-toggle-wrapper"},S.default.createElement("input",{id:"jukebox.settings.addLastEdge",className:"x-toggle-input",type:"checkbox",checked:r.addLastEdge,onChange:e=>{a("addLastEdge",!r.addLastEdge)}}),S.default.createElement("span",{className:"x-toggle-indicatorWrapper"},S.default.createElement("span",{className:"x-toggle-indicator"})))),S.default.createElement("div",{className:I["checkbox-container"]},S.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:"If true, only add backward branches.",showDelay:100},S.default.createElement("label",{htmlFor:"jukebox.settings.justBackwards",style:n},S.default.createElement("b",null,"Allow only reverse branches"),":")),S.default.createElement("label",{className:"x-toggle-wrapper"},S.default.createElement("input",{id:"jukebox.settings.justBackwards",className:"x-toggle-input",type:"checkbox",checked:r.justBackwards,onChange:e=>{a("justBackwards",!r.justBackwards)}}),S.default.createElement("span",{className:"x-toggle-indicatorWrapper"},S.default.createElement("span",{className:"x-toggle-indicator"})))),S.default.createElement("div",{className:I["checkbox-container"]},S.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:"If true, only add long branches.",showDelay:100},S.default.createElement("label",{htmlFor:"jukebox.settings.justLongBranches",style:n},S.default.createElement("b",null,"Allow only long branches"),":")),S.default.createElement("label",{className:"x-toggle-wrapper"},S.default.createElement("input",{id:"jukebox.settings.justLongBranches",className:"x-toggle-input",type:"checkbox",checked:r.justLongBranches,onChange:e=>{a("justLongBranches",!r.justLongBranches)}}),S.default.createElement("span",{className:"x-toggle-indicatorWrapper"},S.default.createElement("span",{className:"x-toggle-indicator"})))),S.default.createElement("div",{className:I["checkbox-container"]},S.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:"If true, remove consecutive branches of the same distance.",showDelay:100},S.default.createElement("label",{htmlFor:"jukebox.settings.removeSequentialBranches",style:n},S.default.createElement("b",null,"Remove sequential branches"),":")),S.default.createElement("label",{className:"x-toggle-wrapper"},S.default.createElement("input",{id:"jukebox.settings.removeSequentialBranches",className:"x-toggle-input",type:"checkbox",checked:r.removeSequentialBranches,onChange:e=>{a("removeSequentialBranches",!r.removeSequentialBranches)}}),S.default.createElement("span",{className:"x-toggle-indicatorWrapper"},S.default.createElement("span",{className:"x-toggle-indicator"})))),S.default.createElement("div",{className:I["flex-center"]},S.default.createElement("button",{onClick:function(){e((new L).toPartial())}},"Reset")))}function Ye(){return j.default.createElement("button",{className:Me["settings-button"],onClick:e=>{Spicetify.PopupModal.display({title:"Jukebox settings",content:j.default.createElement(We),isLarge:!0})},style:{height:"50px",width:"50px",borderRadius:"15px"}},j.default.createElement(Ce,{stroke:"currentColor",size:20}))}function Ve(){const[e,t]=(0,s.useState)({trackName:"",artistName:""}),[a,r]=(0,s.useState)({beats:[],remixedBeats:[],segments:[]}),[n,o]=(0,s.useState)({beatsPlayed:0,listenTime:"0",currentRandomBranchChance:0});return(0,s.useEffect)(()=>{const e=window.jukebox.songState$.subscribe(e=>{t({trackName:e?.track?.metadata?.title??"",artistName:e?.track?.metadata?.artist_name??""}),r({beats:e?.graph.beats??[],segments:e?.analysis.segments??[],remixedBeats:e?.analysis.beats??[]})});return()=>{e.unsubscribe()}},[]),(0,s.useEffect)(()=>{const e=window.jukebox.statsChanged$.subscribe(e=>{var t;o({beatsPlayed:e.beatsPlayed,currentRandomBranchChance:100*e.currentRandomBranchChance,listenTime:(e=e.listenTime,t=Math.floor(e/6e4),60===(e=Math.floor(e%6e4/1e3))?t+1+":00":t+":"+(e<10?"0":"")+e)})});return()=>{e.unsubscribe()}},[]),s.default.createElement("div",{className:i.container},s.default.createElement("div",{className:i["jukebox-header"]},s.default.createElement("span",{className:i.side}),s.default.createElement("div",{className:i.center},s.default.createElement("h1",null,e.trackName),s.default.createElement("p",null,"by"),s.default.createElement("h2",null,e.artistName)),s.default.createElement("div",{className:i.side},s.default.createElement(Ye,null))),s.default.createElement("div",{className:i["visualizer-container"]},s.default.createElement(Ae,{state:a})),s.default.createElement("div",{className:i.stats},s.default.createElement("span",null,"Total Beats: "+n.beatsPlayed),s.default.createElement("span",null,`Current branch change: ${Math.round(n.currentRandomBranchChance)}%`),s.default.createElement("span",null,"Listen Time: "+n.listenTime)))}var Je="1.0.0-beta.2",Ze=a(V()),Qe=a(t());var Ke=async function(t,a,e){for(;!Spicetify?.PopupModal||!Spicetify?.LocalStorage;)await new Promise(e=>setTimeout(e,100));var r,t=`spcr-whats-new_${t}-version`,n=Spicetify.LocalStorage.get(t)??"";try{(0,Ze.default)(a,n)&&(Spicetify.LocalStorage.set(t,a),r={...e,content:function(e){var t=document.createElement("div"),a=(t.setAttribute("id","whats-new-content-wrapper"),document.createElement("style"));return a.textContent=`
      #whats-new-content-wrapper ul, #whats-new-content-wrapper ol {
         list-style: inherit;
         margin-left: 1em;
      }
   `,Qe.default.render(e,t),t.appendChild(a),t}(e.content)},Spicetify.PopupModal.display(r))}catch(e){Spicetify.LocalStorage.set(t,a)}},et=['Fix "No analysis available for this track".'],O=a(n(),1),tt=(()=>"undefined"==typeof window?O.useEffect:O.useLayoutEffect)(),at=e=>e[1]?.next?e[1]:{next:e[1],error:e[2],complete:e[3]};function rt(e,t,a,r){{var n=O.useEffect,o=[e,t,a,r];const l=(0,O.useRef)(o),i=(0,O.useRef)(),s=(0,O.useRef)();tt(()=>{l.current=o,i.current=at(o)}),n(()=>{const t=l.current[0],e=(i.current||(i.current=at(l.current)),t.subscribe({next:e=>{t===l.current[0]&&i.current.next?.(e)},error:e=>{t===l.current[0]&&(i.current.error?i.current:console).error(e)},complete:()=>{t===l.current[0]&&i.current.complete?.()}}));return s.current=e,()=>{e.unsubscribe()}},[o[0]]),s}}var C,nt=function(){var[e,t]=(0,l.useState)(null);return rt(window.jukebox.songState$,t),(0,l.useEffect)(()=>{!async function(){await Ke("eternal-jukebox",Je,{title:"New in v"+Je,content:l.default.createElement("p",null,l.default.createElement("ul",null,et.map(e=>l.default.createElement("li",{key:e},e)))),isLarge:!0})}()},[]),window.jukebox.isEnabled?null!==e?l.default.createElement("div",{className:K},l.default.createElement(Ve,null)):l.default.createElement("div",{className:ee},l.default.createElement("div",{className:te},l.default.createElement(Ye,null),l.default.createElement("div",null,l.default.createElement("h1",null,"Loading...")))):l.default.createElement("div",{className:ee},l.default.createElement("div",{className:te},l.default.createElement(Ye,null),l.default.createElement("div",null,l.default.createElement("h1",null,"Jukebox not enabled."))))},ot=a(n());return C=J,G(o({},"__esModule",{value:!0}),C)})();const render=()=>eternalDjukebox.default();