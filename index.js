var betterDlocalDfiles=(()=>{var P,z=Object.create,H=Object.defineProperty,$=Object.getOwnPropertyDescriptor,F=Object.getOwnPropertyNames,j=Object.getPrototypeOf,B=Object.prototype.hasOwnProperty,e=(e,t)=>function(){return t||(0,e[F(e)[0]])((t={exports:{}}).exports,t),t.exports},G=(t,r,a,n)=>{if(r&&"object"==typeof r||"function"==typeof r)for(let e of F(r))B.call(t,e)||e===a||H(t,e,{get:()=>r[e],enumerable:!(n=$(r,e))||n.enumerable});return t},t=(e,t,r)=>(r=null!=e?z(j(e)):{},G(!t&&e&&e.__esModule?r:H(r,"default",{value:e,enumerable:!0}),e)),a=e({"external-global-plugin:react"(e,t){t.exports=Spicetify.React}}),W=e({"../../node_modules/spcr-whats-new/node_modules/semver/internal/debug.js"(e,t){var r="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};t.exports=r}}),U=e({"../../node_modules/spcr-whats-new/node_modules/semver/internal/constants.js"(e,t){var r=Number.MAX_SAFE_INTEGER||9007199254740991;t.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:r,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}}}),X=e({"../../node_modules/spcr-whats-new/node_modules/semver/internal/re.js"(e,t){var{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:a,MAX_LENGTH:n}=U(),i=W(),l=(e=t.exports={}).re=[],o=e.safeRe=[],c=e.src=[],s=e.t={},u=0,t="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",n],[t,a]],n=(e,t,r)=>{var a=(e=>{for(var[t,r]of d)e=e.split(t+"*").join(`${t}{0,${r}}`).split(t+"+").join(`${t}{1,${r}}`);return e})(t),n=u++;i(e,n,t),s[e]=n,c[n]=t,l[n]=new RegExp(t,r?"g":void 0),o[n]=new RegExp(a,r?"g":void 0)};n("NUMERICIDENTIFIER","0|[1-9]\\d*"),n("NUMERICIDENTIFIERLOOSE","\\d+"),n("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${t}*`),n("MAINVERSION",`(${c[s.NUMERICIDENTIFIER]})\\.(${c[s.NUMERICIDENTIFIER]})\\.(${c[s.NUMERICIDENTIFIER]})`),n("MAINVERSIONLOOSE",`(${c[s.NUMERICIDENTIFIERLOOSE]})\\.(${c[s.NUMERICIDENTIFIERLOOSE]})\\.(${c[s.NUMERICIDENTIFIERLOOSE]})`),n("PRERELEASEIDENTIFIER",`(?:${c[s.NUMERICIDENTIFIER]}|${c[s.NONNUMERICIDENTIFIER]})`),n("PRERELEASEIDENTIFIERLOOSE",`(?:${c[s.NUMERICIDENTIFIERLOOSE]}|${c[s.NONNUMERICIDENTIFIER]})`),n("PRERELEASE",`(?:-(${c[s.PRERELEASEIDENTIFIER]}(?:\\.${c[s.PRERELEASEIDENTIFIER]})*))`),n("PRERELEASELOOSE",`(?:-?(${c[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[s.PRERELEASEIDENTIFIERLOOSE]})*))`),n("BUILDIDENTIFIER",t+"+"),n("BUILD",`(?:\\+(${c[s.BUILDIDENTIFIER]}(?:\\.${c[s.BUILDIDENTIFIER]})*))`),n("FULLPLAIN",`v?${c[s.MAINVERSION]}${c[s.PRERELEASE]}?${c[s.BUILD]}?`),n("FULL",`^${c[s.FULLPLAIN]}$`),n("LOOSEPLAIN",`[v=\\s]*${c[s.MAINVERSIONLOOSE]}${c[s.PRERELEASELOOSE]}?${c[s.BUILD]}?`),n("LOOSE",`^${c[s.LOOSEPLAIN]}$`),n("GTLT","((?:<|>)?=?)"),n("XRANGEIDENTIFIERLOOSE",c[s.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*"),n("XRANGEIDENTIFIER",c[s.NUMERICIDENTIFIER]+"|x|X|\\*"),n("XRANGEPLAIN",`[v=\\s]*(${c[s.XRANGEIDENTIFIER]})(?:\\.(${c[s.XRANGEIDENTIFIER]})(?:\\.(${c[s.XRANGEIDENTIFIER]})(?:${c[s.PRERELEASE]})?${c[s.BUILD]}?)?)?`),n("XRANGEPLAINLOOSE",`[v=\\s]*(${c[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[s.XRANGEIDENTIFIERLOOSE]})(?:${c[s.PRERELEASELOOSE]})?${c[s.BUILD]}?)?)?`),n("XRANGE",`^${c[s.GTLT]}\\s*${c[s.XRANGEPLAIN]}$`),n("XRANGELOOSE",`^${c[s.GTLT]}\\s*${c[s.XRANGEPLAINLOOSE]}$`),n("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),n("COERCERTL",c[s.COERCE],!0),n("LONETILDE","(?:~>?)"),n("TILDETRIM",`(\\s*)${c[s.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",n("TILDE",`^${c[s.LONETILDE]}${c[s.XRANGEPLAIN]}$`),n("TILDELOOSE",`^${c[s.LONETILDE]}${c[s.XRANGEPLAINLOOSE]}$`),n("LONECARET","(?:\\^)"),n("CARETTRIM",`(\\s*)${c[s.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",n("CARET",`^${c[s.LONECARET]}${c[s.XRANGEPLAIN]}$`),n("CARETLOOSE",`^${c[s.LONECARET]}${c[s.XRANGEPLAINLOOSE]}$`),n("COMPARATORLOOSE",`^${c[s.GTLT]}\\s*(${c[s.LOOSEPLAIN]})$|^$`),n("COMPARATOR",`^${c[s.GTLT]}\\s*(${c[s.FULLPLAIN]})$|^$`),n("COMPARATORTRIM",`(\\s*)${c[s.GTLT]}\\s*(${c[s.LOOSEPLAIN]}|${c[s.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",n("HYPHENRANGE",`^\\s*(${c[s.XRANGEPLAIN]})\\s+-\\s+(${c[s.XRANGEPLAIN]})\\s*$`),n("HYPHENRANGELOOSE",`^\\s*(${c[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[s.XRANGEPLAINLOOSE]})\\s*$`),n("STAR","(<|>)?=?\\s*\\*"),n("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),n("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}}),V=e({"../../node_modules/spcr-whats-new/node_modules/semver/internal/parse-options.js"(e,t){var r=Object.freeze({loose:!0}),a=Object.freeze({});t.exports=e=>e?"object"!=typeof e?r:e:a}}),Z=e({"../../node_modules/spcr-whats-new/node_modules/semver/internal/identifiers.js"(e,t){var n=/^[0-9]+$/,r=(e,t)=>{var r=n.test(e),a=n.test(t);return r&&a&&(e=+e,t=+t),e===t?0:r&&!a||(!a||r)&&e<t?-1:1};t.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}}}),q=e({"../../node_modules/spcr-whats-new/node_modules/semver/classes/semver.js"(e,t){var n=W(),{MAX_LENGTH:r,MAX_SAFE_INTEGER:a}=U(),{safeRe:i,t:l}=X(),o=V(),c=Z()["compareIdentifiers"],s=class{constructor(e,t){if(t=o(t),e instanceof s){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>r)throw new TypeError(`version is longer than ${r} characters`);n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;t=e.trim().match(t.loose?i[l.LOOSE]:i[l.FULL]);if(!t)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+t[1],this.minor=+t[2],this.patch=+t[3],this.major>a||this.major<0)throw new TypeError("Invalid major version");if(this.minor>a||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>a||this.patch<0)throw new TypeError("Invalid patch version");t[4]?this.prerelease=t[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){var t=+e;if(0<=t&&t<a)return t}return e}):this.prerelease=[],this.build=t[5]?t[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.`+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof s)){if("string"==typeof e&&e===this.version)return 0;e=new s(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof s||(e=new s(e,this.options)),c(this.major,e.major)||c(this.minor,e.minor)||c(this.patch,e.patch)}comparePre(e){if(e instanceof s||(e=new s(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{var r=this.prerelease[t],a=e.prerelease[t];if(n("prerelease compare",t,r,a),void 0===r&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===r)return-1;if(r!==a)return c(r,a)}while(++t)}compareBuild(e){e instanceof s||(e=new s(e,this.options));let t=0;do{var r=this.build[t],a=e.build[t];if(n("prerelease compare",t,r,a),void 0===r&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===r)return-1;if(r!==a)return c(r,a)}while(++t)}inc(e,t,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":var a=Number(r)?1:0;if(!t&&!1===r)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[a];else{let e=this.prerelease.length;for(;0<=--e;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);if(-1===e){if(t===this.prerelease.join(".")&&!1===r)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(a)}}if(t){let e=!1===r?[t]:[t,a];(0!==c(this.prerelease[0],t)||isNaN(this.prerelease[1]))&&(this.prerelease=e)}break;default:throw new Error("invalid increment argument: "+e)}return this.raw=this.format(),this.build.length&&(this.raw+="+"+this.build.join(".")),this}};t.exports=s}}),Y=e({"../../node_modules/spcr-whats-new/node_modules/semver/functions/compare.js"(e,t){var a=q();t.exports=(e,t,r)=>new a(e,r).compare(new a(t,r))}}),J=e({"../../node_modules/spcr-whats-new/node_modules/semver/functions/gt.js"(e,t){var a=Y();t.exports=(e,t,r)=>0<a(e,t,r)}}),K=e({"external-global-plugin:react-dom"(e,t){t.exports=Spicetify.ReactDOM}}),Q=e({"../../node_modules/resize-observer-polyfill/dist/ResizeObserver.js"(e,t){var r;r=function(){"use strict";var a="undefined"!=typeof Map?Map:(Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){e=n(this.__entries__,e),e=this.__entries__[e];return e&&e[1]},e.prototype.set=function(e,t){var r=n(this.__entries__,e);~r?this.__entries__[r][1]=t:this.__entries__.push([e,t])},e.prototype.delete=function(e){var t=this.__entries__,e=n(t,e);~e&&t.splice(e,1)},e.prototype.has=function(e){return!!~n(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var r=0,a=this.__entries__;r<a.length;r++){var n=a[r];e.call(t,n[1],n[0])}},e);function e(){this.__entries__=[]}function n(e,r){var a=-1;return e.some(function(e,t){return e[0]===r&&(a=t,!0)}),a}var r="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,t="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),c="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(t):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)},s=2;var i=["top","right","bottom","left","width","height","size","weight"],l="undefined"!=typeof MutationObserver,o=(u.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},u.prototype.removeObserver=function(e){var t=this.observers_,e=t.indexOf(e);~e&&t.splice(e,1),!t.length&&this.connected_&&this.disconnect_()},u.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},u.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),0<e.length},u.prototype.connect_=function(){r&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),l?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},u.prototype.disconnect_=function(){r&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},u.prototype.onTransitionEnd_=function(e){var e=e.propertyName,t=void 0===e?"":e;i.some(function(e){return!!~t.indexOf(e)})&&this.refresh()},u.getInstance=function(){return this.instance_||(this.instance_=new u),this.instance_},u.instance_=null,u);function u(){function e(){i&&(i=!1,a()),l&&r()}function t(){c(e)}function r(){var e=Date.now();if(i){if(e-o<s)return;l=!0}else l=!(i=!0),setTimeout(t,n);o=e}var a,n,i,l,o;this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=(a=this.refresh.bind(this),l=i=!(n=20),o=0,r)}var d=function(e,t){for(var r=0,a=Object.keys(t);r<a.length;r++){var n=a[r];Object.defineProperty(e,n,{value:t[n],enumerable:!1,writable:!1,configurable:!0})}return e},m=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||t},f=b(0,0,0,0);function p(e){return parseFloat(e)||0}function h(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(e,t){return e+p(r["border-"+t+"-width"])},0)}function _(e){var t,r,a,n,i,l,o=e.clientWidth,c=e.clientHeight;return o||c?(r=(t=function(e){for(var t={},r=0,a=["top","right","bottom","left"];r<a.length;r++){var n=a[r],i=e["padding-"+n];t[n]=p(i)}return t}(l=m(e).getComputedStyle(e))).left+t.right,a=t.top+t.bottom,n=p(l.width),i=p(l.height),"border-box"===l.boxSizing&&(Math.round(n+r)!==o&&(n-=h(l,"left","right")+r),Math.round(i+a)!==c)&&(i-=h(l,"top","bottom")+a),e!==m(e).document.documentElement&&(l=Math.round(n+r)-o,e=Math.round(i+a)-c,1!==Math.abs(l)&&(n-=l),1!==Math.abs(e))&&(i-=e),b(t.left,t.top,n,i)):f}var E="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof m(e).SVGGraphicsElement}:function(e){return e instanceof m(e).SVGElement&&"function"==typeof e.getBBox};function y(e){var t;return r?E(e)?b(0,0,(t=(t=e).getBBox()).width,t.height):_(e):f}function b(e,t,r,a){return{x:e,y:t,width:r,height:a}}g.prototype.isActive=function(){var e=y(this.target);return(this.contentRect_=e).width!==this.broadcastWidth||e.height!==this.broadcastHeight},g.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e};var v=g;function g(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=b(0,0,0,0),this.target=e}var k=function(e,t){r=(t=t).x,a=t.y,i=t.width,t=t.height,n="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,n=Object.create(n.prototype),d(n,{x:r,y:a,width:i,height:t,top:a,right:r+i,bottom:t+a,left:r});var r,a,n,i=n;d(this,{target:e,contentRect:i})},w=(S.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof m(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new v(e)),this.controller_.addObserver(this),this.controller_.refresh())}},S.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof m(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},S.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},S.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},S.prototype.broadcastActive=function(){var e,t;this.hasActive()&&(e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new k(e.target,e.broadcastRect())}),this.callback_.call(e,t,e),this.clearActive())},S.prototype.clearActive=function(){this.activeObservations_.splice(0)},S.prototype.hasActive=function(){return 0<this.activeObservations_.length},S);function S(e,t,r){if(this.activeObservations_=[],this.observations_=new a,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=r}var D=new("undefined"!=typeof WeakMap?WeakMap:a),I=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=o.getInstance(),t=new w(t,r,this);D.set(this,t)};return["observe","unobserve","disconnect"].forEach(function(t){I.prototype[t]=function(){var e;return(e=D.get(this))[t].apply(e,arguments)}}),void 0!==t.ResizeObserver?t.ResizeObserver:I},"object"==typeof(e=e)&&void 0!==t?t.exports=r():"function"==typeof define&&define.amd?define(r):e.ResizeObserver=r()}}),e=e({"../../node_modules/use-fit-text/dist/index.js"(e,t){var r,g=a(),k=(r=Q())&&"object"==typeof r&&"default"in r?r.default:r,w={debug:10,info:20,warn:30,error:40,none:100},S="undefined"!=typeof window&&window.document&&window.document.createElement?g.useLayoutEffect:g.useEffect;t.exports=function(e){var t=(e=void 0===e?{}:e).logLevel,r=e.maxFontSize,i=(void 0===r&&(r=100),e.minFontSize),l=(void 0===i&&(i=20),e.onFinish),a=e.onStart,o=e.resolution,c=(void 0===o&&(o=5),w[t=void 0===t?"info":t]),n=g.useCallback(function(){return{calcKey:0,fontSize:r,fontSizePrev:i,fontSizeMax:r,fontSizeMin:i}},[r,i]),s=g.useRef(null),u=g.useRef(),d=g.useRef(!1),e=g.useState(n),t=e[0],m=e[1],f=t.calcKey,p=t.fontSize,h=t.fontSizeMax,_=t.fontSizeMin,E=t.fontSizePrev,y=null,b=g.useState(function(){return new k(function(){y=window.requestAnimationFrame(function(){d.current||(a&&a(),d.current=!0,m(Object.assign({},n(),{calcKey:f+1})))})})})[0],v=(g.useEffect(function(){return s.current&&b.observe(s.current),function(){y&&window.cancelAnimationFrame(y),b.disconnect()}},[y,b]),s.current&&s.current.innerHTML);return g.useEffect(function(){0===f||d.current||(v!==u.current&&(a&&a(),m(Object.assign({},n(),{calcKey:f+1}))),u.current=v)},[f,n,v,a]),S(function(){var e,t,r,a,n;0!==f&&(a=Math.abs(p-E)<=o,e=!!s.current&&(s.current.scrollHeight>s.current.offsetHeight||s.current.scrollWidth>s.current.offsetWidth),t=E<p,a?e&&p===E?(d.current=!1,c<=w.info&&console.info("[use-fit-text] reached `minFontSize = "+i+"` without fitting text")):e?m({fontSize:t?E:_,fontSizeMax:h,fontSizeMin:_,fontSizePrev:E,calcKey:f}):(d.current=!1,l&&l(p)):(a=h,n=_,e?(r=t?E-p:_-p,a=Math.min(h,p)):(r=t?h-p:E-p,n=Math.max(_,p)),m({calcKey:f,fontSize:p+r/2,fontSizeMax:a,fontSizeMin:n,fontSizePrev:p})))},[f,p,h,_,E,l,s,o]),{fontSize:p+"%",ref:s}}}}),ee={},te=ee,re={default:()=>function(){return _a.default.createElement(ha,null)}};for(P in re)H(te,P,{get:re[P],enumerable:!0});var ae=t(a()),u=t(a()),ne=t(a()),ie="TabBar-module__active___qFHnJ_betterDlocalDfiles",le=t(a());function p(e){const{elementType:t="span",children:r,fontSize:a,style:n,...i}=e;let l;switch(t){case"h1":l=Spicetify.ReactComponent.TextComponent.h1;break;case"h2":l=Spicetify.ReactComponent.TextComponent.h2;break;case"h3":l=Spicetify.ReactComponent.TextComponent.h3;break;case"h4":l=Spicetify.ReactComponent.TextComponent.h4;break;case"h5":l=Spicetify.ReactComponent.TextComponent.h5;break;case"h6":l=Spicetify.ReactComponent.TextComponent.h6;break;case"li":l=Spicetify.ReactComponent.TextComponent.li;break;case"p":l=Spicetify.ReactComponent.TextComponent.p;break;case"small":l=Spicetify.ReactComponent.TextComponent.small;break;case"span":l=Spicetify.ReactComponent.TextComponent.span;break;default:l=Spicetify.ReactComponent.TextComponent}return le.default.createElement(l,{...i,style:{...n,fontSize:a,display:e.paddingBottom?"block":n?.display}},r)}function oe(e){return ne.default.createElement("li",{"data-tab":e.item.key,onClick:()=>{e.onItemClicked(e.item)}},ne.default.createElement("button",{className:e.active?ie:"",draggable:"false"},ne.default.createElement(p,{variant:"mestoBold"},e.item.label)))}var ce=t(a());function se(r){var e={width:r.size+"px"};return ce.default.createElement("li",{id:"more-button",style:e},ce.default.createElement("select",{className:"main-dropDown-dropDown",value:r.activeItem.key,disabled:!1,onChange:t=>{var e=r.items.find(e=>e.key===t.target.value);e&&r.onClick(e)}},r.items.map(e=>ce.default.createElement("option",{key:e.key,value:e.key},e.label))))}var ue={tabBar:"TabBar-module__tabBar___DxQjm_betterDlocalDfiles",active:"TabBar-module__active___qFHnJ_betterDlocalDfiles"};function de(r){const t=u.default.useRef(null),[n,a]=(0,u.useState)([]),[i,e]=(0,u.useState)(0),[l,o]=(0,u.useState)([]),[c,s]=(0,u.useState)(0);return(0,u.useEffect)(()=>{t.current&&e(t.current.clientWidth)},[r.windowSize]),(0,u.useEffect)(()=>{var e;t.current&&(e=Array.from(t.current.children).filter(e=>"more-button"!==e.id).map(e=>e.clientWidth),a(e))},[r.items]),(0,u.useEffect)(()=>{if(t.current)if(n.reduce((e,t)=>e+t,0)<=i)o([]);else{var e=Math.max(...n)+32;const a=[];let r=e;n.forEach((e,t)=>{i>=r+e?r+=e:a.push(t)}),o(a),s(e)}},[i,n]),u.default.createElement("nav",{className:ue.tabBar},u.default.createElement("ul",{ref:t},r.items.filter((e,t)=>!l.includes(t)).map(e=>u.default.createElement(oe,{key:e.key,item:e,active:r.activeItem.key===e.key,onItemClicked:r.onItemClicked})),l.length||0===n.length?u.default.createElement(se,{items:r.items.filter((e,t)=>l.includes(t)||e.key===r.activeItem.key),activeItem:r.activeItem,onClick:r.onItemClicked,size:c}):null))}function me(e){const t=document.querySelector(".Root__main-view .os-resize-observer-host, .Root__main-view .os-size-observer, .Root__main-view .main-view-container__scroll-node");if(!t)throw new Error("Could not find resize host");const[r,a]=(0,ae.useState)(t.clientWidth);return(0,ae.useEffect)(()=>{const e=new ResizeObserver(()=>{a(t.clientWidth)});return e.observe(t),()=>{e.disconnect()}},[t]),ae.default.createElement(de,{windowSize:r,items:e.items,activeItem:e.activeItem,onItemClicked:e.onItemClicked})}var fe=t(a());function pe(){return fe.default.createElement("svg",{width:"100px",height:"100px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"},fe.default.createElement("circle",{cx:"50",cy:"50",r:"0",fill:"none",stroke:"currentColor",strokeWidth:"2"},fe.default.createElement("animate",{attributeName:"r",repeatCount:"indefinite",dur:"1s",values:"0;40",keyTimes:"0;1",keySplines:"0 0.2 0.8 1",calcMode:"spline",begin:"0s"}),fe.default.createElement("animate",{attributeName:"opacity",repeatCount:"indefinite",dur:"1s",values:"1;0",keyTimes:"0;1",keySplines:"0.2 0 0.8 1",calcMode:"spline",begin:"0s"})),fe.default.createElement("circle",{cx:"50",cy:"50",r:"0",fill:"none",stroke:"currentColor",strokeWidth:"2"},fe.default.createElement("animate",{attributeName:"r",repeatCount:"indefinite",dur:"1s",values:"0;40",keyTimes:"0;1",keySplines:"0 0.2 0.8 1",calcMode:"spline",begin:"-0.5s"}),fe.default.createElement("animate",{attributeName:"opacity",repeatCount:"indefinite",dur:"1s",values:"1;0",keyTimes:"0;1",keySplines:"0.2 0 0.8 1",calcMode:"spline",begin:"-0.5s"})))}function m(){return Spicetify.Platform}var he=function(e,t){return(he=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)};function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}he(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function _e(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],a=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&a>=e.length?void 0:e)&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ee(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var a,n,i=r.call(e),l=[];try{for(;(void 0===t||0<t--)&&!(a=i.next()).done;)l.push(a.value)}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return l}function ye(e,t,r){if(r||2===arguments.length)for(var a,n=0,i=t.length;n<i;n++)!a&&n in t||((a=a||Array.prototype.slice.call(t,0,n))[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}function d(e){return"function"==typeof e}function be(e){e=e(function(e){Error.call(e),e.stack=(new Error).stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e}var ve=be(function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}});function ge(e,t){e&&0<=(t=e.indexOf(t))&&e.splice(t,1)}n.prototype.unsubscribe=function(){var t,e,r;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var n=_e(a),i=n.next();!i.done;i=n.next())i.value.remove(this)}catch(e){o={error:e}}finally{try{i&&!i.done&&(l=n.return)&&l.call(n)}finally{if(o)throw o.error}}else a.remove(this);var l=this.initialTeardown;if(d(l))try{l()}catch(e){r=e instanceof ve?e.errors:[e]}var o=this._finalizers;if(o){this._finalizers=null;try{for(var c=_e(o),s=c.next();!s.done;s=c.next()){var u=s.value;try{De(u)}catch(e){r=null!=r?r:[],e instanceof ve?r=ye(ye([],Ee(r)),Ee(e.errors)):r.push(e)}}}catch(e){t={error:e}}finally{try{s&&!s.done&&(e=c.return)&&e.call(c)}finally{if(t)throw t.error}}}if(r)throw new ve(r)}},n.prototype.add=function(e){var t;if(e&&e!==this)if(this.closed)De(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!=(t=this._finalizers)?t:[]).push(e)}},n.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},n.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},n.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&ge(t,e)},n.prototype.remove=function(e){var t=this._finalizers;t&&ge(t,e),e instanceof n&&e._removeParent(this)},n.EMPTY=((l=new n).closed=!0,l);var ke=n;function n(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var we=ke.EMPTY;function Se(e){return e instanceof ke||e&&"closed"in e&&d(e.remove)&&d(e.add)&&d(e.unsubscribe)}function De(e){d(e)?e():e.unsubscribe()}var Ie={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},xe={setTimeout:function(e,t){for(var r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];var n=xe.delegate;return null!=n&&n.setTimeout?n.setTimeout.apply(n,ye([e,t],Ee(r))):setTimeout.apply(void 0,ye([e,t],Ee(r)))},clearTimeout:function(e){var t=xe.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function Ce(){}var Re=Ne("C",void 0,void 0);function Ne(e,t,r){return{kind:e,value:t,error:r}}var Te=null;function Le(e){if(Ie.useDeprecatedSynchronousErrorHandling){var t=!Te;if(t&&(Te={errorThrown:!1,error:null}),e(),t){var t=Te,r=t.errorThrown,t=t.error;if(Te=null,r)throw t}}else e()}r(i,Oe=ke),i.create=function(e,t,r){return new Fe(e,t,r)},i.prototype.next=function(e){this.isStopped?Ge(Ne("N",e,void 0),this):this._next(e)},i.prototype.error=function(e){this.isStopped?Ge(Ne("E",void 0,e),this):(this.isStopped=!0,this._error(e))},i.prototype.complete=function(){this.isStopped?Ge(Re,this):(this.isStopped=!0,this._complete())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,Oe.prototype.unsubscribe.call(this),this.destination=null)},i.prototype._next=function(e){this.destination.next(e)},i.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},i.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}};var Oe,Ae=i;function i(e){var t=Oe.call(this)||this;return t.isStopped=!1,e?Se(t.destination=e)&&e.add(t):t.destination=We,t}var Me=Function.prototype.bind;function Pe(e,t){return Me.call(e,t)}He.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){Be(e)}},He.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){Be(e)}else Be(e)},He.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){Be(e)}};var ze=He;function He(e){this.partialObserver=e}r(je,$e=Ae);var $e,Fe=je;function je(e,t,r){var a=$e.call(this)||this;return r=d(e)||!e?{next:null!=e?e:void 0,error:null!=t?t:void 0,complete:null!=r?r:void 0}:a&&Ie.useDeprecatedNextContext?((t=Object.create(e)).unsubscribe=function(){return a.unsubscribe()},{next:e.next&&Pe(e.next,t),error:e.error&&Pe(e.error,t),complete:e.complete&&Pe(e.complete,t)}):e,a.destination=new ze(r),a}function Be(e){var t,r;Ie.useDeprecatedSynchronousErrorHandling?(r=e,Ie.useDeprecatedSynchronousErrorHandling&&Te&&(Te.errorThrown=!0,Te.error=r)):(t=e,xe.setTimeout(function(){var e=Ie.onUnhandledError;if(!e)throw t;e(t)}))}function Ge(e,t){var r=Ie.onStoppedNotification;r&&xe.setTimeout(function(){return r(e,t)})}var We={closed:!0,next:Ce,error:function(e){throw e},complete:Ce},l="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ue(e){return e}o.prototype.lift=function(e){var t=new o;return t.source=this,t.operator=e,t},o.prototype.subscribe=function(e,t,r){var a,n=this,i=(a=e)&&a instanceof Ae||function(e){return e&&d(e.next)&&d(e.error)&&d(e.complete)}(a)&&Se(a)?e:new Fe(e,t,r);return Le(function(){var e=n.operator,t=n.source;i.add(e?e.call(i,t):t?n._subscribe(i):n._trySubscribe(i))}),i},o.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},o.prototype.forEach=function(a,e){var n=this;return new(e=Ve(e))(function(e,t){var r=new Fe({next:function(e){try{a(e)}catch(e){t(e),r.unsubscribe()}},error:t,complete:e});n.subscribe(r)})},o.prototype._subscribe=function(e){var t;return null==(t=this.source)?void 0:t.subscribe(e)},o.prototype[l]=function(){return this},o.prototype.pipe=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return(0===(t=e).length?Ue:1===t.length?t[0]:function(e){return t.reduce(function(e,t){return t(e)},e)})(this)},o.prototype.toPromise=function(e){var a=this;return new(e=Ve(e))(function(e,t){var r;a.subscribe(function(e){return r=e},function(e){return t(e)},function(){return e(r)})})},o.create=function(e){return new o(e)};var Xe=o;function o(e){e&&(this._subscribe=e)}function Ve(e){return null!=(e=null!=e?e:Ie.Promise)?e:Promise}function Ze(r){return function(e){if(d(null==(t=e)?void 0:t.lift))return e.lift(function(e){try{return r(e,this)}catch(e){this.error(e)}});var t;throw new TypeError("Unable to lift unknown Observable type")}}function qe(e,t,r,a,n){return new Je(e,t,r,a,n)}r(Ke,Ye=Ae),Ke.prototype.unsubscribe=function(){var e;this.shouldUnsubscribe&&!this.shouldUnsubscribe()||(e=this.closed,Ye.prototype.unsubscribe.call(this),e)||null==(e=this.onFinalize)||e.call(this)};var Ye,Je=Ke;function Ke(t,r,e,a,n,i){var l=Ye.call(this,t)||this;return l.onFinalize=n,l.shouldUnsubscribe=i,l._next=r?function(e){try{r(e)}catch(e){t.error(e)}}:Ye.prototype._next,l._error=a?function(e){try{a(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:Ye.prototype._error,l._complete=e?function(){try{e()}catch(e){t.error(e)}finally{this.unsubscribe()}}:Ye.prototype._complete,l}var Qe,et=be(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),l=(r(c,Qe=Xe),c.prototype.lift=function(e){var t=new rt(this,this);return t.operator=e,t},c.prototype._throwIfClosed=function(){if(this.closed)throw new et},c.prototype.next=function(n){var i=this;Le(function(){var t,e;if(i._throwIfClosed(),!i.isStopped){i.currentObservers||(i.currentObservers=Array.from(i.observers));try{for(var r=_e(i.currentObservers),a=r.next();!a.done;a=r.next())a.value.next(n)}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}}})},c.prototype.error=function(t){var r=this;Le(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=t;for(var e=r.observers;e.length;)e.shift().error(t)}})},c.prototype.complete=function(){var t=this;Le(function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var e=t.observers;e.length;)e.shift().complete()}})},c.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(c.prototype,"observed",{get:function(){var e;return 0<(null==(e=this.observers)?void 0:e.length)},enumerable:!1,configurable:!0}),c.prototype._trySubscribe=function(e){return this._throwIfClosed(),Qe.prototype._trySubscribe.call(this,e)},c.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},c.prototype._innerSubscribe=function(e){var t=this,r=this.hasError,a=this.isStopped,n=this.observers;return r||a?we:(this.currentObservers=null,n.push(e),new ke(function(){t.currentObservers=null,ge(n,e)}))},c.prototype._checkFinalizedStatuses=function(e){var t=this.hasError,r=this.thrownError,a=this.isStopped;t?e.error(r):a&&e.complete()},c.prototype.asObservable=function(){var e=new Xe;return e.source=this,e},c.create=function(e,t){return new rt(e,t)},c);function c(){var e=Qe.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}r(at,tt=l),at.prototype.next=function(e){var t,r;null!=(r=null==(t=this.destination)?void 0:t.next)&&r.call(t,e)},at.prototype.error=function(e){var t,r;null!=(r=null==(t=this.destination)?void 0:t.error)&&r.call(t,e)},at.prototype.complete=function(){var e,t;null!=(t=null==(e=this.destination)?void 0:e.complete)&&t.call(e)},at.prototype._subscribe=function(e){var t;return null!=(t=null==(t=this.source)?void 0:t.subscribe(e))?t:we};var tt,rt=at;function at(e,t){var r=tt.call(this)||this;return r.destination=e,r.source=t,r}r(lt,nt=l),Object.defineProperty(lt.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),lt.prototype._subscribe=function(e){var t=nt.prototype._subscribe.call(this,e);return t.closed||e.next(this._value),t},lt.prototype.getValue=function(){var e=this.hasError,t=this.thrownError,r=this._value;if(e)throw t;return this._throwIfClosed(),r},lt.prototype.next=function(e){nt.prototype.next.call(this,this._value=e)};var nt,it=lt;function lt(e){var t=nt.call(this)||this;return t._value=e,t}var ot,ct={now:function(){return(ct.delegate||Date).now()},delegate:void 0},l=(r(st,ot=ke),st.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},st);function st(e,t){return ot.call(this)||this}var ut,dt={setInterval:function(e,t){for(var r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];var n=dt.delegate;return null!=n&&n.setInterval?n.setInterval.apply(n,ye([e,t],Ee(r))):setInterval.apply(void 0,ye([e,t],Ee(r)))},clearInterval:function(e){var t=dt.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},l=(r(mt,ut=l),mt.prototype.schedule=function(e,t){var r;return void 0===t&&(t=0),this.closed||(this.state=e,e=this.id,r=this.scheduler,null!=e&&(this.id=this.recycleAsyncId(r,e,t)),this.pending=!0,this.delay=t,this.id=null!=(e=this.id)?e:this.requestAsyncId(r,this.id,t)),this},mt.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),dt.setInterval(e.flush.bind(e,this),r)},mt.prototype.recycleAsyncId=function(e,t,r){if(null!=(r=void 0===r?0:r)&&this.delay===r&&!1===this.pending)return t;null!=t&&dt.clearInterval(t)},mt.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;e=this._execute(e,t);if(e)return e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},mt.prototype._execute=function(e,t){var r,a=!1;try{this.work(e)}catch(e){a=!0,r=e||new Error("Scheduled action threw falsy error")}if(a)return this.unsubscribe(),r},mt.prototype.unsubscribe=function(){var e,t,r;this.closed||(e=this.id,r=(t=this.scheduler).actions,this.work=this.state=this.scheduler=null,this.pending=!1,ge(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,ut.prototype.unsubscribe.call(this))},mt);function mt(e,t){var r=ut.call(this,e,t)||this;return r.scheduler=e,r.work=t,r.pending=!1,r}ht.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(r,t)},ht.now=ct.now;var ft,pt=ht;function ht(e,t){void 0===t&&(t=ht.now),this.schedulerActionCtor=e,this.now=t}function _t(e,t){e=ft.call(this,e,t=void 0===t?pt.now:t)||this;return e.actions=[],e._active=!1,e}r(_t,ft=pt),_t.prototype.flush=function(e){var t,r=this.actions;if(this._active)r.push(e);else{this._active=!0;do{if(t=e.execute(e.state,e.delay))break}while(e=r.shift());if(this._active=!1,t){for(;e=r.shift();)e.unsubscribe();throw t}}};var Et=new _t(l);function yt(e,t){return e===t}var s=t(a(),1),bt=e=>e+1|0,vt=()=>{const e=(0,s.useState)(0)[1];return(0,s.useRef)(()=>e(bt)).current},gt=(()=>"undefined"==typeof window?s.useEffect:s.useLayoutEffect)(),kt=e=>e[1]?.next?e[1]:{next:e[1],error:e[2],complete:e[3]};function wt(e,t,r,a){{var n=s.useEffect,i=[e,t,r,a];const l=(0,s.useRef)(i),o=(0,s.useRef)(),c=(0,s.useRef)();gt(()=>{l.current=i,o.current=kt(i)}),n(()=>{const t=l.current[0],e=(o.current||(o.current=kt(l.current)),t.subscribe({next:e=>{t===l.current[0]&&o.current.next?.(e)},error:e=>{t===l.current[0]&&(o.current.error?o.current:console).error(e)},complete:()=>{t===l.current[0]&&o.current.complete?.()}}));return c.current=e,()=>{e.unsubscribe()}},[i[0]]),c}}function St(e){const a=vt(),n=(0,s.useRef)(e),i=(0,s.useRef)(),l=(0,s.useRef)(!1),r=(0,s.useRef)(!1),[o,c]=(0,s.useState)(()=>{let t;return e.subscribe({next:e=>{r.current=!0,t=e},error:e=>{i.current=e}}).unsubscribe(),t});if(gt(()=>{n.current=e}),(0,s.useEffect)(()=>{i.current=null;const t=n.current;let r=o;const e=t.subscribe({next:e=>{t===n.current&&(l.current?c(e):r=e)},error:e=>{t===n.current&&(i.current=e,a())}});return l.current||r!==o&&c(r),l.current=!0,()=>{e.unsubscribe()}},[e]),i.current)throw i.current;if(r.current)return(0,s.useDebugValue)(o),o;throw new Error("Observable did not synchronously emit a value.")}var f=t(a()),Dt=t(J()),It=t(K());var xt=async function(t,r,e){for(;!Spicetify?.PopupModal||!Spicetify?.LocalStorage;)await new Promise(e=>setTimeout(e,100));var a,t=`spcr-whats-new_${t}-version`,n=Spicetify.LocalStorage.get(t)??"";try{(0,Dt.default)(r,n)&&(Spicetify.LocalStorage.set(t,r),a={...e,content:function(e){var t=document.createElement("div"),r=(t.setAttribute("id","whats-new-content-wrapper"),document.createElement("style"));return r.textContent=`
      #whats-new-content-wrapper ul, #whats-new-content-wrapper ol {
         list-style: inherit;
         margin-left: 1em;
      }
   `,It.default.render(e,t),t.appendChild(r),t}(e.content)},Spicetify.PopupModal.display(a))}catch(e){Spicetify.LocalStorage.set(t,r)}},Ct=["Fixed album disk sort","Fixed missing translations on the artist and album sort menus"];function h(e,...t){let r=m().Translations;for(const n of e){if("string"==typeof r)throw new Error(`Key "${n}" not found in translations.`);r=r[n]}let a=r;return t.forEach((e,t)=>{a=a.replace(`{${t.toFixed()}}`,e)}),a}var l="/better-local-files",Rt=l+"/album",Nt=l+"/albums",_=l+"/artist",Tt=l+"/artists",Lt=l,Ot=[{key:"Tracks",href:Lt,label:h(["search.title.tracks"])},{key:"Albums",href:Nt,label:h(["search.title.albums"])},{key:"Artists",href:Tt,label:h(["search.title.artists"])}],E=t(a());function y(e,t=null){var r=m().History;null===t?r.push(e):r.push({pathname:e,state:{uri:t},hash:"",key:"",search:""})}var b=t(a()),At=t(e()),Mt={"stretch-container":"app-module__stretch-container___SIzsh_betterDlocalDfiles","center-container":"app-module__center-container___LG8O4_betterDlocalDfiles","full-size-container":"app-module__full-size-container___XoGtP_betterDlocalDfiles","pad-top":"app-module__pad-top___8OIp9_betterDlocalDfiles","card-grid":"app-module__card-grid___4mWTm_betterDlocalDfiles","main-card-card":"app-module__main-card-card___E9Zy2_betterDlocalDfiles","text-subdued":"app-module__text-subdued___7rYtR_betterDlocalDfiles","details-page-header":"app-module__details-page-header___2JiWt_betterDlocalDfiles",controls:"app-module__controls___ZDW-X_betterDlocalDfiles","flex-centered":"app-module__flex-centered___5gRmM_betterDlocalDfiles","limit-lines-2":"app-module__limit-lines-2___GyZCj_betterDlocalDfiles","text-full-centered":"app-module__text-full-centered___xI2eE_betterDlocalDfiles"};function Pt(e){const t=b.default.createElement("div",{className:"main-image-image main-entityHeader-image main-entityHeader-shadow main-image-loaded "+Mt["center-container"]},b.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},b.default.createElement("path",{d:"M9 18V5l12-2v13"}),b.default.createElement("circle",{cx:"6",cy:"18",r:"3"}),b.default.createElement("circle",{cx:"18",cy:"16",r:"3"})));return b.default.createElement(b.default.Fragment,null,""!==e.imageSrc?b.default.createElement("img",{src:e.imageSrc,className:"main-image-image main-entityHeader-image main-entityHeader-shadow main-entityHeader-newEntityHeaders main-image-loaded",onError:e=>e.currentTarget.outerHTML=Spicetify.ReactDOMServer.renderToString(t)}):t)}function zt(e){var{fontSize:t,ref:r}=(0,At.default)();return b.default.createElement("div",{className:"contentSpacing main-entityHeader-container main-entityHeader-nonWrapped main-entityHeader-newEntityHeaders "+Mt["pad-top"]},b.default.createElement("div",{className:"main-entityHeader-backgroundColor"}),b.default.createElement("div",{className:"main-entityHeader-backgroundColor main-entityHeader-overlay"}),b.default.createElement("div",null),b.default.createElement("div",{className:"main-entityHeader-imageContainer main-entityHeader-imageContainerNew"},b.default.createElement("div",{className:"main-entityHeader-image"},e.image)),b.default.createElement("div",{className:"main-entityHeader-headerText"},void 0!==e.subtitle&&b.default.createElement(p,{variant:"mesto",className:"main-entityHeader-pretitle"},e.subtitle),b.default.createElement("div",{dir:"auto",className:"main-entityHeader-title",style:{maxHeight:"135px",fontSize:"6rem"},ref:r},b.default.createElement(p,{variant:"bass",semanticColor:"textBase",elementType:"h1",style:{fontSize:t}},e.title)),e.metadata&&b.default.createElement("div",{className:"main-entityHeader-metaData",style:{maxHeight:"66px"}},e.metadata)))}var Ht=t(a());function v(e){return e.icon?Ht.default.createElement(Spicetify.ReactComponent.IconComponent,{iconSize:e.iconSize,semanticColor:e.semanticColor,dangerouslySetInnerHTML:{__html:Spicetify.SVGIcons[e.icon]},viewBox:"0 0 16 16"}):e.iconPath?Ht.default.createElement(Spicetify.ReactComponent.IconComponent,{iconSize:e.iconSize,semanticColor:e.semanticColor,dangerouslySetInnerHTML:{__html:e.iconPath},viewBox:"0 0 16 16"}):Ht.default.createElement(Ht.default.Fragment,null)}var $t='<path d="M16 15H2v-1.5h14V15zm0-4.5H2V9h14v1.5zm-8.034-6A5.484 5.484 0 0 1 7.187 6H13.5a2.5 2.5 0 0 0 0-5H7.966c.159.474.255.978.278 1.5H13.5a1 1 0 1 1 0 2H7.966zM2 2V0h1.5v2h2v1.5h-2v2H2v-2H0V2h2z"></path>',Ft=t(a()),jt=t(a());function Bt(e){return jt.default.createElement(Spicetify.ReactComponent.Menu,{className:"encore-dark-theme main-contextMenu-menu"},e.children)}function Gt(e){return"playlist"===e.type}var Wt=t(a());function Ut(r){const[e,a]=(0,Wt.useState)([]);return(0,Wt.useEffect)(()=>{!async function(){const t=await m().UserAPI.getUser();var e=(await(await m().RootlistAPI.getContents({flatten:!0,filter:e})).items.filter(Gt)).filter(e=>e.owner.uri===t.uri);a(e)}()},[]),Wt.default.createElement(Bt,null,e.map(t=>Wt.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:async()=>{var e;e=t.uri,await m().PlaylistAPI.add(e,r.tracksUri,{after:"end"})},key:t.uri},Wt.default.createElement("span",null,t.name))))}var Xt=t(a());function Vt(e){var t=Spicetify.ReactDOMServer.renderToString(Xt.default.createElement(Spicetify.ReactComponent.MenuItem,{leadingIcon:e.leadingIcon,trailingIcon:Xt.default.createElement("svg",{height:"16",width:"16","aria-hidden":"true",className:"main-contextMenu-subMenuIcon",viewBox:"0 0 16 16",fill:"currentColor"},Xt.default.createElement("path",{d:"M14 10 8 4l-6 6h12z"}))},Xt.default.createElement("span",null,e.label)));return Xt.default.createElement(Spicetify.ReactComponent.ContextMenu,{trigger:"click",action:"toggle",placement:"right-end",renderInline:!0,menu:e.submenu},Xt.default.createElement("div",{role:"menu",tabIndex:0,onMouseEnter:e=>{e.currentTarget.click()},dangerouslySetInnerHTML:{__html:t}}))}function Zt(e){return Ft.default.createElement(Bt,null,Ft.default.createElement(Vt,{label:h(["contextmenu.add-to-playlist"]),submenu:Ft.default.createElement(Ut,{tracksUri:e.tracks.map(e=>e.uri)}),leadingIcon:Ft.default.createElement(v,{icon:"plus2px",iconSize:16})}),Ft.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:async function(){await m().PlayerAPI.addToQueue(e.tracks.map(e=>({uri:e.uri})))},leadingIcon:Ft.default.createElement(v,{iconPath:$t,iconSize:16})},Ft.default.createElement("span",null,h(["contextmenu.add-to-queue"]))))}var qt=t(a());var Yt=t(a());var g=t(a()),Jt="TrackListGrid-module__display-list___ahMmJ_betterDlocalDfiles",Kt="TrackListGrid-module__display-list-compact___Uwrj2_betterDlocalDfiles",k=t(a()),Qt=t(a());function er(e){return Qt.default.createElement("svg",{height:"16",width:"16",viewBox:"0 0 16 16",fill:"var(--text-bright-accent)",className:e.className},Qt.default.createElement("path",{d:"M14 10L8 4l-6 6h12z"}))}var tr=t(a());function rr(e){return tr.default.createElement("svg",{height:"16",width:"16",viewBox:"0 0 16 16",fill:"var(--text-bright-accent)",className:e.className},tr.default.createElement("path",{d:"M14 6l-6 6-6-6h12z"}))}function ar(r){function a(){return void 0===r.sortedHeader?k.default.createElement(k.default.Fragment,null):"ascending"===r.sortedHeader.order?k.default.createElement(er,{className:"main-trackList-arrow"}):k.default.createElement(rr,{className:"main-trackList-arrow"})}const n=void 0!==r.sortedHeader?"main-trackList-sortable":"";return k.default.createElement("div",{className:"main-trackList-trackListHeader"},k.default.createElement("div",{className:"main-trackList-trackListHeaderRow main-trackList-trackListRowGrid","aria-rowindex":1},k.default.createElement("div",{className:"main-trackList-rowSectionIndex","aria-colindex":1,"aria-sort":"none",tabIndex:-1},"#"),r.headers.map((e,t)=>k.default.createElement("div",{key:e.key,className:0===t?"main-trackList-rowSectionStart":"main-trackList-rowSectionVariable","aria-colindex":t+2,"aria-sort":r.sortedHeader&&r.sortedHeader.key===e.key?r.sortedHeader.order:"none",tabIndex:-1},k.default.createElement("button",{className:"main-trackList-column "+n,tabIndex:-1,onClick:()=>{r.onHeaderClicked?.(e.key)}},k.default.createElement(p,{variant:"mesto"},e.label),r.sortedHeader&&r.sortedHeader.key===e.key&&a()))),k.default.createElement("div",{className:"main-trackList-rowSectionEnd","aria-colindex":r.headers.length+2,"aria-sort":"none",tabIndex:-1},k.default.createElement("button",{"aria-label":h(["tracklist.header.duration"]),className:"main-trackList-column main-trackList-durationHeader "+n,onClick:()=>{r.onHeaderClicked?.("duration")}},k.default.createElement("svg",{height:"16",width:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor"},k.default.createElement("path",{d:"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8z"}),k.default.createElement("path",{d:"M8 3.25a.75.75 0 01.75.75v3.25H11a.75.75 0 010 1.5H7.25V4A.75.75 0 018 3.25z"}))),r.sortedHeader&&"duration"===r.sortedHeader.key&&a())))}var nr=t(a());function ir(t){const[e,r]=(0,nr.useState)(!1);return(0,nr.useEffect)(()=>{const e=new IntersectionObserver(e=>{r(e.some(e=>e.isIntersecting))},{rootMargin:"0px",threshold:0});return e.observe(t.current),()=>{e.disconnect()}},[t]),e}var lr=t(a());function or(e){const[t,r]=(0,lr.useState)(m().LibraryAPI.containsSync(e));return(0,lr.useEffect)(()=>{m().LibraryAPI.contains(e).then(e=>{r(e[0])}).catch(console.error)},[e]),[t,r]}var w=t(a());function cr(r){var e=(0,w.useRef)(null);const a=ir(e),[t,n]=(0,w.useState)(!1),[i,l]=or(r.track.uri);(0,w.useEffect)(()=>{const e=m().LibraryAPI;if(a){const t=e=>{e.data.uris.some(e=>e===r.track.uri)&&("add"===e.data.operation?l(!0):"remove"===e.data.operation&&l(!1))};return e.getEvents().addListener("operation_complete",t),()=>{e.getEvents().removeListener("operation_complete",t)}}},[a,r.track.uri,l]);var o=w.default.createElement("div",{style:{height:"compact"===r.displayType?"32px":"54px"}}),c=w.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:h(["save_to_your_liked_songs"]),showDelay:100},w.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":h(["save_to_your_liked_songs"]),iconOnly:()=>w.default.createElement(v,{icon:"plus-alt",iconSize:16}),buttonSize:"sm",style:{padding:0,visibility:t?void 0:"hidden"},onClick:async function(){await m().LibraryAPI.add({uris:[r.track.uri]})}})),s=w.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:h(["remove_from_your_liked_songs"]),showDelay:100},w.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":h(["remove_from_your_liked_songs"]),iconOnly:()=>w.default.createElement(v,{icon:"check-alt-fill",iconSize:16}),buttonSize:"sm",style:{padding:0},onClick:async function(){await m().LibraryAPI.remove({uris:[r.track.uri]})},semanticColor:"essentialBrightAccent"})),u=w.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{iconOnly:()=>w.default.createElement(w.default.Fragment,null),buttonSize:"sm",style:{padding:0,visibility:t?void 0:"hidden"}});let d;switch(i){case!0:d=s;break;case!1:d=c;break;default:d=u}return w.default.createElement("div",{ref:e,onMouseEnter:()=>{n(!0)},onMouseLeave:()=>{n(!1)}},a?w.default.createElement(Spicetify.ReactComponent.RightClickMenu,{menu:r.getRowMenu(r.track)},w.default.createElement("div",{"aria-selected":r.selected,onClick:r.onClick,onDoubleClick:()=>{r.track.isPlayable&&r.onDoubleClick()},draggable:"true",onDragStart:e=>{r.dragHandler.draggable&&r.dragHandler.onDragStart(e)}},w.default.createElement("div",{className:`main-trackList-trackListRow main-trackList-trackListRowGrid ${r.active?"main-trackList-active":""} ${r.selected?"main-trackList-selected":""} `+("compact"===r.displayType?"main-trackList-rowCompactMode":""),style:{opacity:r.track.isPlayable?1:.4}},w.default.createElement("div",{className:"main-trackList-rowSectionIndex","aria-colindex":1,tabIndex:-1},w.default.createElement("div",{className:"main-trackList-rowMarker"},r.playing?w.default.createElement(w.default.Fragment,null,w.default.createElement("img",{className:"main-trackList-playingIcon",width:"14",height:"14",alt:"",src:"/images/equaliser-animated-green.gif"}),w.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:h(["playback-control.pause"]),showDelay:200},w.default.createElement("button",{className:"main-trackList-rowImagePlayButton","aria-label":h(["playback-control.pause"]),tabIndex:0,"aria-expanded":"false",onClick:()=>{Spicetify.Player.pause()}},w.default.createElement("svg",{height:"24",width:"24","aria-hidden":"true",fill:"currentColor",className:"main-trackList-rowPlayPauseIcon",viewBox:"0 0 24 24"},w.default.createElement("path",{d:"M5.7 3a.7.7 0 0 0-.7.7v16.6a.7.7 0 0 0 .7.7h2.6a.7.7 0 0 0 .7-.7V3.7a.7.7 0 0 0-.7-.7H5.7zm10 0a.7.7 0 0 0-.7.7v16.6a.7.7 0 0 0 .7.7h2.6a.7.7 0 0 0 .7-.7V3.7a.7.7 0 0 0-.7-.7h-2.6z"}))))):w.default.createElement(w.default.Fragment,null,w.default.createElement("span",{className:"main-trackList-number"},r.index),r.track.isPlayable&&w.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:h(["tracklist.a11y.play"],r.track.name,r.track.artists.map(e=>e.name).join(", ")),showDelay:200},w.default.createElement("button",{className:"main-trackList-rowImagePlayButton","aria-label":h(["tracklist.a11y.play"],r.track.name,r.track.artists.map(e=>e.name).join(", ")),onClick:()=>{r.active?Spicetify.Player.play():r.track.isPlayable&&r.onDoubleClick()},tabIndex:-1},w.default.createElement("svg",{height:"24",width:"24","aria-hidden":"true",className:"main-trackList-rowPlayPauseIcon",viewBox:"0 0 24 24","data-encore-id":"icon",fill:"currentColor"},w.default.createElement("path",{d:"M7.05 3.606l13.49 7.788a.7.7 0 010 1.212L7.05 20.394A.7.7 0 016 19.788V4.212a.7.7 0 011.05-.606z"}))))))),r.children&&w.Children.map(r.children,(e,t)=>w.default.createElement("div",{className:0===t?"main-trackList-rowSectionStart":"main-trackList-rowSectionVariable","aria-colindex":t+2,tabIndex:-1},e)),w.default.createElement("div",{className:"main-trackList-rowSectionEnd","aria-colindex":w.Children.count(r.children)+2,tabIndex:-1},d,w.default.createElement(p,{variant:"mesto",semanticColor:"textSubdued",className:"main-trackList-rowDuration"},Spicetify.Player.formatTime(r.track.duration)),w.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:h(["more.label.track"],r.track.name,r.track.artists.map(e=>e.name).join(", ")),showDelay:100},w.default.createElement("div",null,w.default.createElement(Spicetify.ReactComponent.ContextMenu,{trigger:"click",action:"toggle",menu:r.getRowMenu(r.track)},w.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":h(["more.label.track"],r.track.name,r.track.artists.map(e=>e.name).join(", ")),"aria-haspopup":"menu",iconOnly:()=>w.default.createElement(v,{icon:"more",iconSize:16}),buttonSize:"sm",style:{padding:0,visibility:t?void 0:"hidden"}})))))))):o)}function sr(r){const a=function(){const[e,t]=(0,qt.useState)(Spicetify.Player.data.item.uri);return(0,qt.useEffect)(()=>{function e(e){t(e?.data.item.uri??"")}return Spicetify.Player.addEventListener("songchange",e),()=>{Spicetify.Player.removeEventListener("songchange",e)}}),e}(),n=function(){const[e,t]=(0,Yt.useState)(Spicetify.Player.data.isPaused?"pause":"play");return(0,Yt.useEffect)(()=>{function e(e){t(e.data.isPaused?"pause":"play")}return Spicetify.Player.addEventListener("onplaypause",e),()=>{Spicetify.Player.removeEventListener("onplaypause",e)}}),e}(),[i,l]=(0,g.useState)(new Map),o=(0,g.useMemo)(()=>{var e=Array.from(i.entries());return 0===e.length?Spicetify.ReactHook.DragHandler({itemUris:[],dragLabelText:""}):Spicetify.ReactHook.DragHandler({itemUris:e.map(e=>e[0]),dragLabelText:1<i.size?h(["tracklist.drag.multiple.label","other"],i.size.toFixed()):e[0][1].name})},[i]);function c(e,t){e.ctrlKey?(i.has(t.uri)?i.delete(t.uri):i.set(t.uri,t),l(new Map(i))):l(new Map([[t.uri,t]]))}return g.default.createElement("div",{className:"contentSpacing"},g.default.createElement("div",{role:"grid","aria-rowcount":r.tracks.length,"aria-colcount":r.headers.length+2,"aria-label":r.gridLabel,className:"main-trackList-trackList main-trackList-indexable",tabIndex:0},g.default.createElement(ar,{headers:r.headers,sortedHeader:r.sortedHeader,onHeaderClicked:r.onHeaderClicked}),g.default.createElement("div",{className:"compact"===r.displayType?Kt:Jt},r.tracks.map((t,e)=>g.default.createElement(cr,{key:t.uri,track:t,index:r.useTrackNumber?t.trackNumber:e+1,selected:i.has(t.uri),active:a===t.uri,playing:a===t.uri&&"play"===n,onClick:e=>{c(e,t)},onDoubleClick:()=>{r.onPlayTrack(t.uri)},dragHandler:o,displayType:r.displayType,getRowMenu:r.getRowMenu},r.getRowContent(t))),r.subtracks.map(e=>g.default.createElement(g.default.Fragment,null,e.headerRow,e.tracks.map((t,e)=>g.default.createElement(cr,{key:t.uri,track:t,index:r.useTrackNumber?t.trackNumber:e+1,selected:i.has(t.uri),active:a===t.uri,playing:a===t.uri&&"play"===n,onClick:e=>{c(e,t)},onDoubleClick:()=>{r.onPlayTrack(t.uri)},dragHandler:o,displayType:r.displayType,getRowMenu:r.getRowMenu},r.getRowContent(t))))))))}var ur,dr,mr=t(a()),fr={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},pr=(ur="Radio",dr=[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]],(J=(0,mr.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,children:n,...i},l)=>(0,mr.createElement)("svg",{ref:l,...fr,width:t,height:t,stroke:e,strokeWidth:a?24*Number(r)/Number(t):r,className:"lucide lucide-"+ur.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),...i},[...dr.map(([e,t])=>(0,mr.createElement)(e,t)),...(Array.isArray(n)?n:[n])||[]]))).displayName=""+ur,J),S=t(a()),hr=t(a());function _r(t){return hr.default.createElement(Bt,null,t.artists.map(e=>hr.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:()=>{t.onArtistClick(e.uri)},key:e.uri},hr.default.createElement("span",null,e.name))))}function Er(t){var[e]=or(t.track.uri);let r;switch(e){case!0:r=S.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:async function(){await m().LibraryAPI.remove({uris:[t.track.uri]})},leadingIcon:S.default.createElement(v,{icon:"check-alt-fill",iconSize:16,semanticColor:"essentialBrightAccent"})},S.default.createElement("span",null,h(["remove_from_your_liked_songs"])));break;case!1:r=S.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:async function(){await m().LibraryAPI.add({uris:[t.track.uri]})},leadingIcon:S.default.createElement(v,{icon:"plus-alt",iconSize:16})},S.default.createElement("span",null,h(["save_to_your_liked_songs"])));break;default:r=S.default.createElement(Spicetify.ReactComponent.MenuItem,null,S.default.createElement("span",null,"..."))}return S.default.createElement(Bt,null,S.default.createElement(Vt,{label:h(["contextmenu.add-to-playlist"]),submenu:S.default.createElement(Ut,{tracksUri:[t.track.uri]}),leadingIcon:S.default.createElement(v,{icon:"plus2px",iconSize:16})}),r,S.default.createElement(Spicetify.ReactComponent.MenuItem,{divider:"after",onClick:async function(){await m().PlayerAPI.addToQueue([{uri:t.track.uri}])},leadingIcon:S.default.createElement(v,{iconPath:$t,iconSize:16})},S.default.createElement("span",null,h(["contextmenu.add-to-queue"]))),1===t.track.artists.length?S.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:()=>{t.onArtistClick(t.track.artists[0].uri)},leadingIcon:S.default.createElement(v,{icon:"artist",iconSize:16})},S.default.createElement("span",null,h(["contextmenu.go-to-artist"]))):S.default.createElement(Vt,{label:h(["contextmenu.go-to-artist"]),submenu:S.default.createElement(_r,{artists:t.track.artists,onArtistClick:t.onArtistClick}),leadingIcon:S.default.createElement(v,{icon:"artist",iconSize:16})}),S.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:()=>{t.onAlbumClick(t.track.album.uri)},leadingIcon:S.default.createElement(v,{icon:"album",iconSize:16})},S.default.createElement("span",null,h(["contextmenu.go-to-album"]))),!Spicetify.URI.isLocalTrack(t.track.uri)&&S.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:async function(){var e=await async function(e){if(!(Spicetify.URI.isTrack(e)||Spicetify.URI.isArtist(e)||Spicetify.URI.isAlbum(e)))throw new Error("The source URI must be a track, artist or album URI.");if(200!==(e=await m().RequestBuilder.build().withHost("https://spclient.wg.spotify.com/inspiredby-mix/v2").withPath("/seed_to_playlist/"+e).withEndpointIdentifier("/seed_to_playlist/{uri}").withQueryParameters({"response-format":"json"}).withoutMarket().send()).status)throw new Error("Failed to get the radio playlist.");return e.body.mediaItems[0].uri}(t.track.uri);m().History.push(Spicetify.URI.fromString(e).toURLPath(!0))},leadingIcon:S.default.createElement(pr,{size:16})},S.default.createElement("span",null,h(["contextmenu.go-to-song-radio"]))))}var yr=t(a());function br(t){return yr.default.createElement("div",{className:"main-trackList-rowMainContent"},yr.default.createElement(p,{className:"main-trackList-rowTitle standalone-ellipsis-one-line",variant:"ballad",semanticColor:"textBase"},t.track.name),t.withArtists&&yr.default.createElement(p,{className:"main-trackList-rowSubTitle standalone-ellipsis-one-line",variant:"mesto",semanticColor:"textSubdued"},t.track.artists.map(e=>yr.default.createElement("a",{dir:"auto",href:"#",tabIndex:-1,onClick:()=>{t.onArtistClick(e.uri)},key:e.uri},e.name)).reduce((e,t)=>null===e?[t]:[...e,yr.default.createElement(yr.default.Fragment,null,", "),t],null)))}var vr=t(a());function gr(t){let e;return"lg"===t.size?e="large":"md"===t.size?e="medium":"sm"===t.size&&(e="small"),vr.default.createElement(Spicetify.ReactComponent.ButtonPrimary,{"aria-label":h(["play"]),size:e,buttonSize:t.size,disabled:t.disabled,onClick:e=>{e.stopPropagation(),t.onClick()},iconOnly:()=>vr.default.createElement(v,{icon:"play"})})}var D=t(a());async function kr(t,e){0!==e.length&&e.some(e=>e.uri===t)&&await m().PlayerAPI.play({uri:"spotify:internal:local-files",pages:[{items:e}]},{},{skipTo:{uri:t}})}async function wr(e){0!==e.length&&await m().PlayerAPI.play({uri:"spotify:internal:local-files",pages:[{items:e}]},{},{})}var Sr=t(a()),Dr="app-module__flex-centered___5gRmM_betterDlocalDfiles";function Ir(e){return Sr.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:e.label,showDelay:100},Sr.default.createElement("div",{className:Dr},Sr.default.createElement(Spicetify.ReactComponent.ContextMenu,{trigger:"click",action:"toggle",menu:e.menu},Sr.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":e.label,"aria-haspopup":"menu",iconOnly:()=>Sr.default.createElement(v,{icon:"more"})}))))}var I=t(a());function xr(e){return I.default.createElement("div",{className:"main-trackList-trackListRowGrid main-trackList-discRow"},I.default.createElement("div",{className:"main-trackList-rowSectionIndex","aria-colindex":1,tabIndex:-1},I.default.createElement("div",{className:"main-trackList-rowMarker"},I.default.createElement("span",{className:"main-trackList-icon"},I.default.createElement("svg",{height:"16",width:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor"},I.default.createElement("path",{d:"M8 1.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13zM0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8z"}),I.default.createElement("path",{d:"M8 6.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM5 8a3 3 0 1 1 6 0 3 3 0 0 1-6 0z"}))))),I.default.createElement("div",{className:"main-trackList-rowSectionStart","aria-colindex":2,tabIndex:-1},I.default.createElement("div",{className:"main-trackList-rowMainContent"},I.default.createElement("div",{dir:"auto",className:"main-trackList-rowTitle main-trackList-discTitle standalone-ellipsis-one-line"},h(["tracklist.disc-sperator.title"],e.discNumber)))))}function Cr(e){var t,r,a=[],n=[];const i=Array.from(e.discs.values()).flat();if(1===e.discs.size)a.push(...i);else for([t,r]of Array.from(e.discs.entries()).toSorted(([e],[t])=>e-t))n.push({headerRow:D.default.createElement(xr,{discNumber:t}),tracks:r});var l=[{key:"title",label:h(["sort.title"])}];return D.default.createElement(D.default.Fragment,null,D.default.createElement("div",{className:"main-actionBar-ActionBar contentSpacing"},D.default.createElement("div",{className:"main-actionBar-ActionBarRow"},D.default.createElement("div",{className:"main-playButton-PlayButton"},D.default.createElement(gr,{size:"lg",onClick:()=>{wr(i.map(e=>e.backingTrack))}})),D.default.createElement(Ir,{label:h(["more.label.context"],i[0].album.name),menu:D.default.createElement(Zt,{tracks:i})}))),D.default.createElement(sr,{tracks:a,subtracks:n,gridLabel:e.albumName,useTrackNumber:!0,onPlayTrack:e=>{kr(e,i.map(e=>e.backingTrack))},headers:l,getRowContent:e=>[D.default.createElement(br,{key:e.uri,track:e,withArtists:!0,onArtistClick:e=>{y(_,e)}})],displayType:"list",getRowMenu:e=>D.default.createElement(Er,{track:e,onArtistClick:e=>{y(_,e)},onAlbumClick:e=>{y(Rt,e)}})}))}function Rr(e){return E.default.createElement(zt,{image:E.default.createElement(Pt,{imageSrc:e.album.image}),subtitle:h(["album"]),title:e.album.name,metadata:E.default.createElement(E.default.Fragment,null,e.album.artists.map(e=>E.default.createElement(p,{variant:"mestoBold",key:e.uri},E.default.createElement("a",{href:"#",draggable:"false",onClick:()=>{y(_,e.uri)}},e.name))).reduce((e,t,r)=>null===e?[t]:[...e,E.default.createElement("span",{key:r,className:"main-entityHeader-divider"}),t],null),E.default.createElement(p,{variant:"mesto",className:"main-entityHeader-metaDataText"},h(["tracklist-header.songs-counter",1===e.album.getTracks().length?"one":"other"],e.album.getTracks().length.toFixed())),E.default.createElement(p,{variant:"mesto",className:"main-entityHeader-metaDataText"},(e=e.album.getDuration(),t=Math.floor(e/1e3%60),r=Math.floor(e/1e3/60%60),e=Math.floor(e/1e3/60/60%24),a=[],0!==e&&a.push(h(["time.hours.short",1===e?"one":"other"],e.toFixed())),0!==r&&a.push(h(["time.minutes.short",1===r?"one":"other"],r.toFixed())),0===e&&0!==t&&a.push(h(["time.seconds.short",1===t?"one":"other"],t.toFixed())),a.join(" "))))});var t,r,a}function Nr(){var e=m().History,t=e.location.state.uri??null;return null===t?(e.replace(Nt),E.default.createElement(E.default.Fragment,null)):(e=window.localTracksService.getAlbums()).has(t)?(e=e.get(t),E.default.createElement(E.default.Fragment,null,E.default.createElement(Rr,{album:e}),E.default.createElement(Cr,{albumName:e.name,discs:e.discs}))):(y(Nt),E.default.createElement(E.default.Fragment,null))}function Tr(e,t,r){r="descending"===r?-1:1;return t<e?r:e<t?-1*r:0}var x=t(a()),Lr={"stretch-container":"app-module__stretch-container___SIzsh_betterDlocalDfiles","center-container":"app-module__center-container___LG8O4_betterDlocalDfiles","full-size-container":"app-module__full-size-container___XoGtP_betterDlocalDfiles","pad-top":"app-module__pad-top___8OIp9_betterDlocalDfiles","card-grid":"app-module__card-grid___4mWTm_betterDlocalDfiles","main-card-card":"app-module__main-card-card___E9Zy2_betterDlocalDfiles","text-subdued":"app-module__text-subdued___7rYtR_betterDlocalDfiles","details-page-header":"app-module__details-page-header___2JiWt_betterDlocalDfiles",controls:"app-module__controls___ZDW-X_betterDlocalDfiles","flex-centered":"app-module__flex-centered___5gRmM_betterDlocalDfiles","limit-lines-2":"app-module__limit-lines-2___GyZCj_betterDlocalDfiles","text-full-centered":"app-module__text-full-centered___xI2eE_betterDlocalDfiles"},Or=t(a()),Ar={"search-container":"SearchInput-module__search-container___6V0Ij_betterDlocalDfiles","search-icon":"SearchInput-module__search-icon___scfSd_betterDlocalDfiles","clear-icon":"SearchInput-module__clear-icon___-dvoN_betterDlocalDfiles"},Mr=t(a()),Pr={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},K=(c,s)=>{var e=(0,Mr.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:n="",children:i,...l},o)=>(0,Mr.createElement)("svg",{ref:o,...Pr,width:t,height:t,stroke:e,strokeWidth:a?24*Number(r)/Number(t):r,className:["lucide","lucide-"+c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n].join(" "),...l},[...s.map(([e,t])=>(0,Mr.createElement)(e,t)),...Array.isArray(i)?i:[i]]));return e.displayName=""+c,e},zr=K("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),Hr=K("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),$r=K("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]),Fr=K("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);function jr(t){const[r,e]=function(e){const[t]=(0,s.useState)(()=>new it(e));var[r]=(0,s.useState)(()=>({get current(){return t.value},set current(e){t.next(e)}}));return[r,t]}(t.search);var i,l,o,c;function a(e){r.current=e,t.setSearch(e)}return wt(e.pipe((o=400,void 0===c&&(c=Et),Ze(function(e,r){var a=null,t=null,n=null,i=function(){var e;a&&(a.unsubscribe(),e=t,t=a=null,r.next(e))};function l(){var e=n+o,t=c.now();t<e?(a=this.schedule(void 0,e-t),r.add(a)):i()}e.subscribe(qe(r,function(e){t=e,n=c.now(),a||(a=c.schedule(l,o),r.add(a))},function(){i(),r.complete()},void 0,function(){t=a=null}))})),(void 0===l&&(l=Ue),i=null!=i?i:yt,Ze(function(e,r){var a,n=!0;e.subscribe(qe(r,function(e){var t=l(e);!n&&i(a,t)||(n=!1,a=t,r.next(e))}))}))),t.setDebouncedSearch),Or.default.createElement("div",{className:Ar["search-container"]},Or.default.createElement("div",{className:Ar["search-icon"]},Or.default.createElement(Fr,{size:18})),Or.default.createElement("input",{role:"searchbox",maxLength:80,autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",placeholder:h(["navbar.search"]),"aria-hidden":"true",tabIndex:-1,value:t.search,onChange:e=>{a(e.target.value)}}),Or.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{iconOnly:()=>Or.default.createElement(v,{icon:"x",iconSize:16}),buttonSize:"sm",className:Ar["clear-icon"],onClick:()=>{a("")},style:{visibility:t.search?"visible":"hidden"}}))}var Br=t(a());function Gr(e){return Br.default.createElement("li",null,Br.default.createElement(p,{className:"main-contextMenu-menuHeading ellipsis-one-line",variant:"finaleBold"},e.children))}var Wr=t(a());function Ur(e){return Wr.default.createElement(p,{className:"main-contextMenu-menuItemLabel ellipsis-one-line",variant:"mesto"},e.children)}var Xr={list:"list-view",compact:"menu",grid:"grid-view"},C=t(a());function Vr(t){var e=C.default.createElement(C.default.Fragment,null,C.default.createElement(Gr,null,h(["drop_down.sort_by"])),t.sortOptions.map(e=>C.default.createElement(Spicetify.ReactComponent.MenuItem,{key:e.key,onClick:()=>{t.setSelectedSortOption(e.key)},role:"menuitemradio","aria-checked":t.selectedSortOption.key===e.key,CheckedIcon:()=>"ascending"===t.selectedSortOption.order?C.default.createElement(Hr,null):C.default.createElement(zr,null)},C.default.createElement(Ur,null,e.label)))),r=C.default.createElement(C.default.Fragment,null,C.default.createElement(Gr,null,h(["web-player.your-library-x.sort-and-view-picker.view-as"])),t.displayTypes.map(e=>C.default.createElement(Spicetify.ReactComponent.MenuItem,{key:e,onClick:()=>{t.setSelectedDisplayType(e)},leadingIcon:C.default.createElement(v,{icon:Xr[e],iconSize:16}),role:"menuitemradio","aria-checked":t.selectedDisplayType===e},C.default.createElement(Ur,null,h(["web-player.your-library-x.sort-and-view-picker."+e]))))),e=C.default.createElement(Bt,null,0<t.sortOptions.length&&e,0<t.displayTypes.length&&r);return C.default.createElement(Spicetify.ReactComponent.ContextMenu,{trigger:"click",action:"toggle",menu:e},C.default.createElement("button",{className:"x-sortBox-sortDropdown"},C.default.createElement("span",null,t.sortOptions.find(e=>e.key===t.selectedSortOption.key)?.label??""),C.default.createElement(v,{icon:Xr[t.selectedDisplayType],iconSize:16})))}var R=t(a()),Zr={"stretch-container":"app-module__stretch-container___SIzsh_betterDlocalDfiles","center-container":"app-module__center-container___LG8O4_betterDlocalDfiles","full-size-container":"app-module__full-size-container___XoGtP_betterDlocalDfiles","pad-top":"app-module__pad-top___8OIp9_betterDlocalDfiles","card-grid":"app-module__card-grid___4mWTm_betterDlocalDfiles","main-card-card":"app-module__main-card-card___E9Zy2_betterDlocalDfiles","text-subdued":"app-module__text-subdued___7rYtR_betterDlocalDfiles","details-page-header":"app-module__details-page-header___2JiWt_betterDlocalDfiles",controls:"app-module__controls___ZDW-X_betterDlocalDfiles","flex-centered":"app-module__flex-centered___5gRmM_betterDlocalDfiles","limit-lines-2":"app-module__limit-lines-2___GyZCj_betterDlocalDfiles","text-full-centered":"app-module__text-full-centered___xI2eE_betterDlocalDfiles"};function qr(e){var t=(0,R.useRef)(null),r=ir(t);const a=Spicetify.ReactHook.DragHandler({itemUris:e.album.getTracks().map(e=>e.uri),dragLabelText:e.album.name,contextUri:e.album.uri});var n=R.default.createElement("div",{style:{height:"250px"}});const i=R.default.createElement("div",{className:"main-image-image main-cardImage-image main-image-loading main-image-loaded "+Zr["center-container"]},R.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"80",height:"80",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},R.default.createElement("path",{d:"M9 18V5l12-2v13"}),R.default.createElement("circle",{cx:"6",cy:"18",r:"3"}),R.default.createElement("circle",{cx:"18",cy:"16",r:"3"})));var l=R.default.createElement("div",{className:Zr["main-card-card"]+" main-card-card",draggable:!0,onClick:()=>{y(Rt,e.album.uri)},onDragStart:e=>{a.draggable&&a.onDragStart(e)}},R.default.createElement("div",{className:"main-card-draggable"},R.default.createElement("div",{className:"main-card-imageContainer main-card-imageContainerOld"},R.default.createElement("div",{className:"main-cardImage-imageWrapper"},""!==e.album.image?R.default.createElement("img",{"aria-hidden":"false",draggable:"false",loading:"lazy",src:e.album.image,alt:"album image",className:"main-image-image main-cardImage-image main-image-loading main-image-loaded",onError:e=>e.currentTarget.outerHTML=Spicetify.ReactDOMServer.renderToString(i)}):i),R.default.createElement("div",{className:"main-card-PlayButtonContainer"},R.default.createElement("div",{className:"main-playButton-PlayButton"},R.default.createElement(gr,{size:"md",onClick:()=>{e.onPlayClicked(e.album)}})))),R.default.createElement("div",{className:"main-card-cardMetadata"},R.default.createElement(p,{className:"main-cardHeader-link main-cardHeader-text",variant:"balladBold",semanticColor:"textBase",paddingBottom:"4px"},e.album.name),R.default.createElement(p,{className:"main-cardSubHeader-root "+Zr["limit-lines-2"],variant:"mesto",semanticColor:"textSubdued"},e.album.artists.map(t=>R.default.createElement("span",{key:t.uri},R.default.createElement("a",{href:"#",draggable:"false",onClick:e=>{e.stopPropagation(),y(_,t.uri)}},t.name))).reduce((e,t)=>null===e?[t]:[...e,R.default.createElement(R.default.Fragment,null,", "),t],null)))));return R.default.createElement("div",{ref:t},r?R.default.createElement(Spicetify.ReactComponent.RightClickMenu,{menu:R.default.createElement(Zt,{tracks:e.album.getTracks()})},l):n)}function Yr(){var[e,t]=(0,x.useState)("");const[r,a]=(0,x.useState)("");var n=[{key:"title",label:h(["sort.title"])}];const i=Array.from(window.localTracksService.getAlbums()).map(([,e])=>e);const l=(0,x.useMemo)(()=>{return e=i,""===(t=r)?e:e.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())||e.artists.some(e=>e.name.toLowerCase().includes(t.toLowerCase())));var e,t},[i,r]),[o,c]=(0,x.useState)({...n[0],order:"ascending"});var s=(0,x.useMemo)(()=>{return[...(e=l,"title"===(r=o).key?e.sort((e,t)=>Tr(e.name,t.name,r.order)):e)];var e,r},[l,o]);function u(e){wr(e.getTracks().map(e=>e.backingTrack))}return x.default.createElement("div",{className:"contentSpacing"},x.default.createElement("div",{className:Lr["details-page-header"]+" "+Lr["pad-top"]},x.default.createElement("h1",null,h(["albums"])),x.default.createElement("div",{className:Lr.controls},x.default.createElement(jr,{search:e,setSearch:t,setDebouncedSearch:a}),x.default.createElement(Vr,{sortOptions:n,selectedSortOption:o,setSelectedSortOption:function(t){c(e=>{return{key:t,order:e.key===t&&"ascending"===e.order?"descending":"ascending"}})},displayTypes:["grid"],selectedDisplayType:"grid",setSelectedDisplayType:()=>{}}))),x.default.createElement("div",{className:Lr["card-grid"]+" main-gridContainer-gridContainer main-gridContainer-fixedWidth"},s.map(e=>x.default.createElement(qr,{key:e.uri,album:e,onPlayClicked:u}))))}var N=t(a()),Jr=t(a());function Kr(e){return Jr.default.createElement(p,{variant:"mesto"},Jr.default.createElement("a",{className:"standalone-ellipsis-one-line",dir:"auto",href:"#",tabIndex:-1,onClick:()=>{e.onAlbumClick(e.track.album.uri)}},e.track.album.name))}var Qr=t(a());function ea(e){const t=Qr.default.createElement("div",{className:"main-trackList-rowImage main-trackList-rowImageFallback"},Qr.default.createElement("svg",{role:"img",height:"16",width:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor"},Qr.default.createElement("path",{d:"M10 2v9.5a2.75 2.75 0 11-2.75-2.75H8.5V2H10zm-1.5 8.25H7.25A1.25 1.25 0 108.5 11.5v-1.25z"})));var r=0===(r=e.track.backingTrack.album).images.length?"":r.images[0].url;return Qr.default.createElement(Qr.default.Fragment,null,""!==r?Qr.default.createElement("img",{loading:"eager",src:r,className:"main-image-image main-trackList-rowImage main-image-loaded",width:"40",height:"40",onError:e=>e.currentTarget.outerHTML=Spicetify.ReactDOMServer.renderToString(t)}):t,Qr.default.createElement(br,{track:e.track,withArtists:e.withArtists,onArtistClick:e.onArtistClick}))}var T=t(a());function ta(t){var e=[{key:"title",label:h(["sort.title"])},{key:"album",label:h(["sort.album"])}];return T.default.createElement(T.default.Fragment,null,T.default.createElement("div",{className:"main-actionBar-ActionBar contentSpacing"},T.default.createElement("div",{className:"main-actionBar-ActionBarRow"},T.default.createElement("div",{className:"main-playButton-PlayButton"},T.default.createElement(gr,{size:"lg",onClick:()=>{wr(t.tracks.map(e=>e.backingTrack))}})),T.default.createElement(Ir,{label:h(["more.label.context"],t.artist.name),menu:T.default.createElement(Zt,{tracks:t.tracks})}))),T.default.createElement(sr,{tracks:t.tracks,subtracks:[],gridLabel:t.artist.name,useTrackNumber:!1,onPlayTrack:e=>{kr(e,t.tracks.map(e=>e.backingTrack))},headers:e,getRowContent:e=>[T.default.createElement(ea,{key:e.uri,track:e,withArtists:!1,onArtistClick:()=>{}}),T.default.createElement(Kr,{key:e.uri,track:e,onAlbumClick:e=>{y(Rt,e)}})],displayType:"list",getRowMenu:e=>T.default.createElement(Er,{track:e,onArtistClick:e=>{y(_,e)},onAlbumClick:e=>{y(Rt,e)}})}))}function ra(e){return N.default.createElement(zt,{image:N.default.createElement(Pt,{imageSrc:e.artist.image}),subtitle:h(["artist"]),title:e.artist.name})}function aa(){var e=m().History,t=e.location.state.uri??null;return null===t?(e.replace(Tt),N.default.createElement(N.default.Fragment,null)):(e=window.localTracksService.getArtists()).has(t)?(e=e.get(t),t=window.localTracksService.getArtistTracks(e.uri),N.default.createElement(N.default.Fragment,null,N.default.createElement(ra,{artist:e}),N.default.createElement(ta,{tracks:t,artist:e}))):(y(Tt),N.default.createElement(N.default.Fragment,null))}var L=t(a()),na={"stretch-container":"app-module__stretch-container___SIzsh_betterDlocalDfiles","center-container":"app-module__center-container___LG8O4_betterDlocalDfiles","full-size-container":"app-module__full-size-container___XoGtP_betterDlocalDfiles","pad-top":"app-module__pad-top___8OIp9_betterDlocalDfiles","card-grid":"app-module__card-grid___4mWTm_betterDlocalDfiles","main-card-card":"app-module__main-card-card___E9Zy2_betterDlocalDfiles","text-subdued":"app-module__text-subdued___7rYtR_betterDlocalDfiles","details-page-header":"app-module__details-page-header___2JiWt_betterDlocalDfiles",controls:"app-module__controls___ZDW-X_betterDlocalDfiles","flex-centered":"app-module__flex-centered___5gRmM_betterDlocalDfiles","limit-lines-2":"app-module__limit-lines-2___GyZCj_betterDlocalDfiles","text-full-centered":"app-module__text-full-centered___xI2eE_betterDlocalDfiles"},O=t(a()),ia={"stretch-container":"app-module__stretch-container___SIzsh_betterDlocalDfiles","center-container":"app-module__center-container___LG8O4_betterDlocalDfiles","full-size-container":"app-module__full-size-container___XoGtP_betterDlocalDfiles","pad-top":"app-module__pad-top___8OIp9_betterDlocalDfiles","card-grid":"app-module__card-grid___4mWTm_betterDlocalDfiles","main-card-card":"app-module__main-card-card___E9Zy2_betterDlocalDfiles","text-subdued":"app-module__text-subdued___7rYtR_betterDlocalDfiles","details-page-header":"app-module__details-page-header___2JiWt_betterDlocalDfiles",controls:"app-module__controls___ZDW-X_betterDlocalDfiles","flex-centered":"app-module__flex-centered___5gRmM_betterDlocalDfiles","limit-lines-2":"app-module__limit-lines-2___GyZCj_betterDlocalDfiles","text-full-centered":"app-module__text-full-centered___xI2eE_betterDlocalDfiles"};function la(e){var t=(0,O.useRef)(null),r=ir(t),a=O.default.createElement("div",{style:{height:"260px"}});const n=O.default.createElement("div",{className:ia["center-container"],style:{height:"100%",left:0,position:"absolute",top:0,width:"100%"}},O.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"50",height:"50",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},O.default.createElement("path",{d:"M9 18V5l12-2v13"}),O.default.createElement("circle",{cx:"6",cy:"18",r:"3"}),O.default.createElement("circle",{cx:"18",cy:"16",r:"3"})));return O.default.createElement("div",{ref:t},r?O.default.createElement(Spicetify.ReactComponent.RightClickMenu,{menu:O.default.createElement(Zt,{tracks:window.localTracksService.getArtistTracks(e.artist.uri)})},O.default.createElement("div",{tabIndex:0,className:ia["main-card-card"]+" main-card-card",onClick:()=>{y(_,e.artist.uri)}},O.default.createElement("div",{draggable:"true",className:"main-card-draggable"},O.default.createElement("div",{className:"main-card-imageContainer main-card-imageContainerOld"},O.default.createElement("div",{className:"main-cardImage-imageWrapper main-cardImage-circular"},""!==e.artist.image?O.default.createElement("img",{"aria-hidden":"false",draggable:"false",loading:"lazy",src:e.artist.image,alt:"artist avatar",className:"main-image-image main-cardImage-image main-cardImage-circular main-image-loading main-image-loaded",onError:e=>e.currentTarget.outerHTML=Spicetify.ReactDOMServer.renderToString(n)}):n),O.default.createElement("div",{className:"main-card-PlayButtonContainer"},O.default.createElement("div",{className:"main-playButton-PlayButton"},O.default.createElement(gr,{size:"md",onClick:()=>{e.onPlayClicked(e.artist)}})))),O.default.createElement("div",{className:"main-card-cardMetadata"},O.default.createElement(p,{className:"main-cardHeader-link main-cardHeader-text "+ia["text-full-centered"],variant:"balladBold",semanticColor:"textBase",paddingBottom:"4px"},e.artist.name))))):a)}function oa(){var[e,t]=(0,L.useState)("");const[r,a]=(0,L.useState)("");var n=[{key:"title",label:h(["web-player.artist.discography.sort-box.sort-name"])}];const i=Array.from(window.localTracksService.getArtists()).map(([,e])=>e);const l=(0,L.useMemo)(()=>{return e=i,""===(t=r)?e:e.filter(e=>e.name.toLowerCase().includes(t.toLowerCase()));var e,t},[i,r]),[o,c]=(0,L.useState)({...n[0],order:"ascending"});var s=(0,L.useMemo)(()=>{return[...(e=l,"title"===(r=o).key?e.sort((e,t)=>Tr(e.name,t.name,r.order)):e)];var e,r},[l,o]);function u(e){wr(window.localTracksService.getArtistTracks(e.uri).map(e=>e.backingTrack))}return L.default.createElement("div",{className:"contentSpacing"},L.default.createElement("div",{className:na["details-page-header"]+" "+na["pad-top"]},L.default.createElement("h1",null,h(["artists"])),L.default.createElement("div",{className:na.controls},L.default.createElement(jr,{search:e,setSearch:t,setDebouncedSearch:a}),L.default.createElement(Vr,{sortOptions:n,selectedSortOption:o,setSelectedSortOption:function(t){c(e=>{return{key:t,order:e.key===t&&"ascending"===e.order?"descending":"ascending"}})},displayTypes:["grid"],selectedDisplayType:"grid",setSelectedDisplayType:()=>{}}))),L.default.createElement("div",{className:na["card-grid"]+" main-gridContainer-gridContainer main-gridContainer-fixedWidth"},s.map(e=>L.default.createElement(la,{key:e.uri,artist:e,onPlayClicked:u}))))}var A=t(a()),ca={"stretch-container":"app-module__stretch-container___SIzsh_betterDlocalDfiles","center-container":"app-module__center-container___LG8O4_betterDlocalDfiles","full-size-container":"app-module__full-size-container___XoGtP_betterDlocalDfiles","pad-top":"app-module__pad-top___8OIp9_betterDlocalDfiles","card-grid":"app-module__card-grid___4mWTm_betterDlocalDfiles","main-card-card":"app-module__main-card-card___E9Zy2_betterDlocalDfiles","text-subdued":"app-module__text-subdued___7rYtR_betterDlocalDfiles","details-page-header":"app-module__details-page-header___2JiWt_betterDlocalDfiles",controls:"app-module__controls___ZDW-X_betterDlocalDfiles","flex-centered":"app-module__flex-centered___5gRmM_betterDlocalDfiles","limit-lines-2":"app-module__limit-lines-2___GyZCj_betterDlocalDfiles","text-full-centered":"app-module__text-full-centered___xI2eE_betterDlocalDfiles"},sa=t(a());function ua(t){return sa.default.createElement(p,{className:"standalone-ellipsis-one-line",variant:"mesto"},t.track.artists.map(e=>sa.default.createElement("a",{dir:"auto",href:"#",tabIndex:-1,onClick:()=>{t.onArtistClick(e.uri)},key:e.uri},e.name)).reduce((e,t)=>null===e?[t]:[...e,sa.default.createElement(sa.default.Fragment,null,", "),t],null))}var M=t(a()),da={"stretch-container":"app-module__stretch-container___SIzsh_betterDlocalDfiles","center-container":"app-module__center-container___LG8O4_betterDlocalDfiles","full-size-container":"app-module__full-size-container___XoGtP_betterDlocalDfiles","pad-top":"app-module__pad-top___8OIp9_betterDlocalDfiles","card-grid":"app-module__card-grid___4mWTm_betterDlocalDfiles","main-card-card":"app-module__main-card-card___E9Zy2_betterDlocalDfiles","text-subdued":"app-module__text-subdued___7rYtR_betterDlocalDfiles","details-page-header":"app-module__details-page-header___2JiWt_betterDlocalDfiles",controls:"app-module__controls___ZDW-X_betterDlocalDfiles","flex-centered":"app-module__flex-centered___5gRmM_betterDlocalDfiles","limit-lines-2":"app-module__limit-lines-2___GyZCj_betterDlocalDfiles","text-full-centered":"app-module__text-full-centered___xI2eE_betterDlocalDfiles"};function ma(r){var[e,t]=(0,M.useState)("");const[a,n]=(0,M.useState)("");var i=[{key:"date",label:h(["sort.date-added"])},{key:"title",label:h(["sort.title"])},{key:"artist",label:h(["sort.artist"])},{key:"album",label:h(["sort.album"])},{key:"duration",label:h(["sort.duration"])}];const[l,o]=(0,M.useState)({...i[0],order:"ascending"}),[c,s]=(0,M.useState)("list");var u=[];"list"===c?u.push("artist"===l.key?{key:"artist",label:h(["artist"])}:{key:"title",label:h(["tracklist.header.title"])}):u.push({key:"title",label:h(["tracklist.header.title"])},{key:"artist",label:h(["artist"])}),u.push({key:"album",label:h(["tracklist.header.album"])},{key:"date",label:h(["tracklist.header.date-added"])});const d=(0,M.useMemo)(()=>{return e=r.tracks,""===(t=a)?e:e.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())||e.album.name.toLowerCase().includes(t.toLowerCase())||e.artists.some(e=>e.name.toLowerCase().includes(t.toLowerCase())));var e,t},[r.tracks,a]),m=(0,M.useMemo)(()=>[...function(e,r){switch(r.key){case"date":return e.sort((e,t)=>Tr(e.addedAt,t.addedAt,r.order));case"title":return e.sort((e,t)=>Tr(e.name,t.name,r.order));case"artist":return e.sort((e,t)=>Tr(e.artists.map(e=>e.name).join(", "),t.artists.map(e=>e.name).join(", "),r.order));case"album":return e.sort((e,t)=>Tr(e.album.name,t.album.name,r.order));case"duration":return e.sort((e,t)=>Tr(e.duration,t.duration,r.order));default:return e}}(d,l)],[d,l]);function f(a,n){o(e=>{let t,r;return r=n||"title"!==a||"descending"!==l.order||"compact"===c?n||"artist"!==a||"descending"!==l.order||"compact"===c?(t=a,e.key===a&&"ascending"===e.order?"descending":"ascending"):(t="title","ascending"):(t="artist","ascending"),{key:t,order:r}})}return M.default.createElement(M.default.Fragment,null,M.default.createElement("div",{className:"main-actionBar-ActionBar contentSpacing"},M.default.createElement("div",{className:"main-actionBar-ActionBarRow"},M.default.createElement("div",{className:"main-playButton-PlayButton"},M.default.createElement(gr,{size:"lg",onClick:()=>{wr(m.map(e=>e.backingTrack))}})),M.default.createElement("div",{className:da.controls},M.default.createElement(jr,{search:e,setSearch:t,setDebouncedSearch:n}),M.default.createElement(Vr,{sortOptions:i,selectedSortOption:l,setSelectedSortOption:e=>{f(e,!0)},displayTypes:["list","compact"],selectedDisplayType:c,setSelectedDisplayType:s})))),M.default.createElement(sr,{tracks:m,subtracks:[],gridLabel:h(["local-files"]),useTrackNumber:!1,onPlayTrack:e=>{kr(e,m.map(e=>e.backingTrack))},headers:u,onHeaderClicked:e=>{f(e,!1)},sortedHeader:l,getRowContent:e=>{var t=["compact"===c?M.default.createElement(p,{className:"main-trackList-rowTitle standalone-ellipsis-one-line",variant:"ballad",semanticColor:"textBase",key:e.uri},e.name):M.default.createElement(ea,{track:e,withArtists:!0,key:e.uri,onArtistClick:e=>{y(_,e)}})];return"compact"===c&&t.push(M.default.createElement(ua,{track:e,key:e.uri,onArtistClick:e=>{y(_,e)}})),t.push(M.default.createElement(Kr,{track:e,key:e.uri,onAlbumClick:e=>{y(Rt,e)}}),M.default.createElement(p,{variant:"mesto",semanticColor:"textSubdued",key:e.uri},e.addedAt?e.addedAt.toLocaleDateString():"")),t},displayType:c,getRowMenu:e=>M.default.createElement(Er,{track:e,onArtistClick:e=>{y(_,e)},onAlbumClick:e=>{y(Rt,e)}})}))}function fa(){var e=Array.from(window.localTracksService.getTracks().values());return A.default.createElement(A.default.Fragment,null,A.default.createElement(zt,{image:A.default.createElement("div",{className:ca["center-container"],style:{background:"linear-gradient(126deg, rgba(69,8,245,1) 0%, rgba(111,86,235,1) 27%, rgba(151,159,225,1) 67%, rgba(189,228,217,1) 100%)",borderRadius:"4px"}},A.default.createElement($r,{fill:"var(--spice-text)",size:100})),title:h(["local-files"]),titleFontSize:"6rem",metadata:A.default.createElement(A.default.Fragment,null,A.default.createElement(p,{variant:"mesto",className:"main-entityHeader-metaDataText"},h(["local-files.description"])),A.default.createElement(p,{variant:"mesto",className:"main-entityHeader-metaDataText"},h(["tracklist-header.songs-counter",1===e.length?"one":"other"],e.length.toFixed())))}),A.default.createElement(ma,{tracks:e}))}var pa={"stretch-container":"app-module__stretch-container___SIzsh_betterDlocalDfiles","center-container":"app-module__center-container___LG8O4_betterDlocalDfiles","full-size-container":"app-module__full-size-container___XoGtP_betterDlocalDfiles","pad-top":"app-module__pad-top___8OIp9_betterDlocalDfiles","card-grid":"app-module__card-grid___4mWTm_betterDlocalDfiles","main-card-card":"app-module__main-card-card___E9Zy2_betterDlocalDfiles","text-subdued":"app-module__text-subdued___7rYtR_betterDlocalDfiles","details-page-header":"app-module__details-page-header___2JiWt_betterDlocalDfiles",controls:"app-module__controls___ZDW-X_betterDlocalDfiles","flex-centered":"app-module__flex-centered___5gRmM_betterDlocalDfiles","limit-lines-2":"app-module__limit-lines-2___GyZCj_betterDlocalDfiles","text-full-centered":"app-module__text-full-centered___xI2eE_betterDlocalDfiles"};var ha=function(){var e=St(window.localTracksService.isReady$),t=St(window.localTracksService.processedAlbums$),r=St(window.localTracksService.albumCount$);(0,f.useEffect)(()=>{!async function(){await window.localTracksService.init(),await xt("better-local-files","2.0.8",{title:"New in v2.0.8",content:f.default.createElement("p",null,f.default.createElement("ul",null,Ct.map(e=>f.default.createElement("li",{key:e},e)))),isLarge:!0})}()},[]);const a=m().History,n=a.location;let i=f.default.createElement(f.default.Fragment,null);switch(n.pathname){case Lt:i=f.default.createElement(fa,null);break;case Rt:i=f.default.createElement(Nr,null);break;case Nt:i=f.default.createElement(Yr,null);break;case _:i=f.default.createElement(aa,null);break;case Tt:i=f.default.createElement(oa,null);break;default:a.replace(Lt)}var l=document.querySelector(".main-topBar-topbarContentWrapper");return f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:pa["full-size-container"]},e?f.default.createElement("div",{className:pa["stretch-container"]+" "+pa.padded},i):f.default.createElement("div",{className:pa["center-container"]+" "+pa.padded},f.default.createElement(pe,null),0===r&&f.default.createElement("p",null,"Processing tracks..."),0<r&&f.default.createElement("p",null,`Processing album ${t.toFixed()} of ${r.toFixed()}...`))),null!==l&&Spicetify.ReactDOM.createPortal(f.default.createElement(me,{onItemClicked:e=>{a.push(e.href)},items:Ot,activeItem:Ot.find(e=>e.href.startsWith(n.pathname))??Ot[0]}),l))},_a=t(a());return l=ee,G(H({},"__esModule",{value:!0}),l)})();const render=()=>betterDlocalDfiles.default();