var playlistDmaker=(()=>{var T,A=Object.create,R=Object.defineProperty,M=Object.getOwnPropertyDescriptor,D=Object.getOwnPropertyNames,F=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,e=(e,t)=>function(){return t||(0,e[D(e)[0]])((t={exports:{}}).exports,t),t.exports},j=(t,n,a,r)=>{if(n&&"object"==typeof n||"function"==typeof n)for(let e of D(n))V.call(t,e)||e===a||R(t,e,{get:()=>n[e],enumerable:!(r=M(n,e))||r.enumerable});return t},t=(e,t,n)=>(n=null!=e?A(F(e)):{},j(!t&&e&&e.__esModule?n:R(n,"default",{value:e,enumerable:!0}),e)),b=e({"external-global-plugin:react"(e,t){t.exports=Spicetify.React}}),U=e({"../../node_modules/spcr-whats-new/node_modules/semver/internal/debug.js"(e,t){var n="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};t.exports=n}}),H=e({"../../node_modules/spcr-whats-new/node_modules/semver/internal/constants.js"(e,t){var n=Number.MAX_SAFE_INTEGER||9007199254740991;t.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}}}),$=e({"../../node_modules/spcr-whats-new/node_modules/semver/internal/re.js"(e,t){var{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:a,MAX_LENGTH:r}=H(),i=U(),o=(e=t.exports={}).re=[],l=e.safeRe=[],s=e.src=[],u=e.t={},c=0,t="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",r],[t,a]],r=(e,t,n)=>{var a=(e=>{for(var[t,n]of d)e=e.split(t+"*").join(`${t}{0,${n}}`).split(t+"+").join(`${t}{1,${n}}`);return e})(t),r=c++;i(e,r,t),u[e]=r,s[r]=t,o[r]=new RegExp(t,n?"g":void 0),l[r]=new RegExp(a,n?"g":void 0)};r("NUMERICIDENTIFIER","0|[1-9]\\d*"),r("NUMERICIDENTIFIERLOOSE","\\d+"),r("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${t}*`),r("MAINVERSION",`(${s[u.NUMERICIDENTIFIER]})\\.(${s[u.NUMERICIDENTIFIER]})\\.(${s[u.NUMERICIDENTIFIER]})`),r("MAINVERSIONLOOSE",`(${s[u.NUMERICIDENTIFIERLOOSE]})\\.(${s[u.NUMERICIDENTIFIERLOOSE]})\\.(${s[u.NUMERICIDENTIFIERLOOSE]})`),r("PRERELEASEIDENTIFIER",`(?:${s[u.NUMERICIDENTIFIER]}|${s[u.NONNUMERICIDENTIFIER]})`),r("PRERELEASEIDENTIFIERLOOSE",`(?:${s[u.NUMERICIDENTIFIERLOOSE]}|${s[u.NONNUMERICIDENTIFIER]})`),r("PRERELEASE",`(?:-(${s[u.PRERELEASEIDENTIFIER]}(?:\\.${s[u.PRERELEASEIDENTIFIER]})*))`),r("PRERELEASELOOSE",`(?:-?(${s[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${s[u.PRERELEASEIDENTIFIERLOOSE]})*))`),r("BUILDIDENTIFIER",t+"+"),r("BUILD",`(?:\\+(${s[u.BUILDIDENTIFIER]}(?:\\.${s[u.BUILDIDENTIFIER]})*))`),r("FULLPLAIN",`v?${s[u.MAINVERSION]}${s[u.PRERELEASE]}?${s[u.BUILD]}?`),r("FULL",`^${s[u.FULLPLAIN]}$`),r("LOOSEPLAIN",`[v=\\s]*${s[u.MAINVERSIONLOOSE]}${s[u.PRERELEASELOOSE]}?${s[u.BUILD]}?`),r("LOOSE",`^${s[u.LOOSEPLAIN]}$`),r("GTLT","((?:<|>)?=?)"),r("XRANGEIDENTIFIERLOOSE",s[u.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*"),r("XRANGEIDENTIFIER",s[u.NUMERICIDENTIFIER]+"|x|X|\\*"),r("XRANGEPLAIN",`[v=\\s]*(${s[u.XRANGEIDENTIFIER]})(?:\\.(${s[u.XRANGEIDENTIFIER]})(?:\\.(${s[u.XRANGEIDENTIFIER]})(?:${s[u.PRERELEASE]})?${s[u.BUILD]}?)?)?`),r("XRANGEPLAINLOOSE",`[v=\\s]*(${s[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[u.XRANGEIDENTIFIERLOOSE]})(?:${s[u.PRERELEASELOOSE]})?${s[u.BUILD]}?)?)?`),r("XRANGE",`^${s[u.GTLT]}\\s*${s[u.XRANGEPLAIN]}$`),r("XRANGELOOSE",`^${s[u.GTLT]}\\s*${s[u.XRANGEPLAINLOOSE]}$`),r("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),r("COERCERTL",s[u.COERCE],!0),r("LONETILDE","(?:~>?)"),r("TILDETRIM",`(\\s*)${s[u.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",r("TILDE",`^${s[u.LONETILDE]}${s[u.XRANGEPLAIN]}$`),r("TILDELOOSE",`^${s[u.LONETILDE]}${s[u.XRANGEPLAINLOOSE]}$`),r("LONECARET","(?:\\^)"),r("CARETTRIM",`(\\s*)${s[u.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",r("CARET",`^${s[u.LONECARET]}${s[u.XRANGEPLAIN]}$`),r("CARETLOOSE",`^${s[u.LONECARET]}${s[u.XRANGEPLAINLOOSE]}$`),r("COMPARATORLOOSE",`^${s[u.GTLT]}\\s*(${s[u.LOOSEPLAIN]})$|^$`),r("COMPARATOR",`^${s[u.GTLT]}\\s*(${s[u.FULLPLAIN]})$|^$`),r("COMPARATORTRIM",`(\\s*)${s[u.GTLT]}\\s*(${s[u.LOOSEPLAIN]}|${s[u.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",r("HYPHENRANGE",`^\\s*(${s[u.XRANGEPLAIN]})\\s+-\\s+(${s[u.XRANGEPLAIN]})\\s*$`),r("HYPHENRANGELOOSE",`^\\s*(${s[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${s[u.XRANGEPLAINLOOSE]})\\s*$`),r("STAR","(<|>)?=?\\s*\\*"),r("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),r("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}}),Z=e({"../../node_modules/spcr-whats-new/node_modules/semver/internal/parse-options.js"(e,t){var n=Object.freeze({loose:!0}),a=Object.freeze({});t.exports=e=>e?"object"!=typeof e?n:e:a}}),W=e({"../../node_modules/spcr-whats-new/node_modules/semver/internal/identifiers.js"(e,t){var r=/^[0-9]+$/,n=(e,t)=>{var n=r.test(e),a=r.test(t);return n&&a&&(e=+e,t=+t),e===t?0:n&&!a||(!a||n)&&e<t?-1:1};t.exports={compareIdentifiers:n,rcompareIdentifiers:(e,t)=>n(t,e)}}}),K=e({"../../node_modules/spcr-whats-new/node_modules/semver/classes/semver.js"(e,t){var r=U(),{MAX_LENGTH:n,MAX_SAFE_INTEGER:a}=H(),{safeRe:i,t:o}=$(),l=Z(),s=W()["compareIdentifiers"],u=class{constructor(e,t){if(t=l(t),e instanceof u){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>n)throw new TypeError(`version is longer than ${n} characters`);r("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;t=e.trim().match(t.loose?i[o.LOOSE]:i[o.FULL]);if(!t)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+t[1],this.minor=+t[2],this.patch=+t[3],this.major>a||this.major<0)throw new TypeError("Invalid major version");if(this.minor>a||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>a||this.patch<0)throw new TypeError("Invalid patch version");t[4]?this.prerelease=t[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){var t=+e;if(0<=t&&t<a)return t}return e}):this.prerelease=[],this.build=t[5]?t[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.`+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version}toString(){return this.version}compare(e){if(r("SemVer.compare",this.version,this.options,e),!(e instanceof u)){if("string"==typeof e&&e===this.version)return 0;e=new u(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof u||(e=new u(e,this.options)),s(this.major,e.major)||s(this.minor,e.minor)||s(this.patch,e.patch)}comparePre(e){if(e instanceof u||(e=new u(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{var n=this.prerelease[t],a=e.prerelease[t];if(r("prerelease compare",t,n,a),void 0===n&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===n)return-1;if(n!==a)return s(n,a)}while(++t)}compareBuild(e){e instanceof u||(e=new u(e,this.options));let t=0;do{var n=this.build[t],a=e.build[t];if(r("prerelease compare",t,n,a),void 0===n&&void 0===a)return 0;if(void 0===a)return 1;if(void 0===n)return-1;if(n!==a)return s(n,a)}while(++t)}inc(e,t,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":var a=Number(n)?1:0;if(!t&&!1===n)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[a];else{let e=this.prerelease.length;for(;0<=--e;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);if(-1===e){if(t===this.prerelease.join(".")&&!1===n)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(a)}}if(t){let e=!1===n?[t]:[t,a];(0!==s(this.prerelease[0],t)||isNaN(this.prerelease[1]))&&(this.prerelease=e)}break;default:throw new Error("invalid increment argument: "+e)}return this.raw=this.format(),this.build.length&&(this.raw+="+"+this.build.join(".")),this}};t.exports=u}}),X=e({"../../node_modules/spcr-whats-new/node_modules/semver/functions/compare.js"(e,t){var a=K();t.exports=(e,t,n)=>new a(e,n).compare(new a(t,n))}}),Y=e({"../../node_modules/spcr-whats-new/node_modules/semver/functions/gt.js"(e,t){var a=X();t.exports=(e,t,n)=>0<a(e,t,n)}}),q=e({"external-global-plugin:react-dom"(e,t){t.exports=Spicetify.ReactDOM}}),G=e({"../../node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.development.js"(e){"use strict";function l(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var r="error",i=n,o=c.ReactDebugCurrentFrame.getStackAddendum();""!==o&&(e+="%s",i=i.concat([o])),(o=i.map(function(e){return String(e)})).unshift("Warning: "+e),Function.prototype.apply.call(console[r],console,o)}function s(e){var t=e.getSnapshot,e=e.value;try{var n=t();return!d(e,n)}catch(e){return 1}}var u,c,d,m,f,p,h,g,y,t;"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error),u=b(),c=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,d="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},m=u.useState,f=u.useEffect,p=u.useLayoutEffect,h=u.useDebugValue,y=g=!1,t=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),t=void 0!==u.useSyncExternalStore?u.useSyncExternalStore:!t?function(e,t,n){return t()}:function(e,t,n){g||void 0!==u.startTransition&&(g=!0,l("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var a=t(),r=(y||(r=t(),d(a,r))||(l("The result of getSnapshot should be cached to avoid an infinite loop"),y=!0),m({inst:{value:a,getSnapshot:t}})),i=r[0].inst,o=r[1];return p(function(){i.value=a,i.getSnapshot=t,s(i)&&o({inst:i})},[e,a,t]),f(function(){s(i)&&o({inst:i});return e(function(){s(i)&&o({inst:i})})},[e]),h(a),a},e.useSyncExternalStore=t,"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}}),J=e({"../../node_modules/use-sync-external-store/shim/index.js"(e,t){"use strict";t.exports=G()}}),Q=e({"../../node_modules/use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.development.js"(e){"use strict";var t,n,c,i,d,m,f,p;"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error),t=b(),n=J(),c="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=n.useSyncExternalStore,d=t.useRef,m=t.useEffect,f=t.useMemo,p=t.useDebugValue,e.useSyncExternalStoreWithSelector=function(e,n,o,l,s){var u;null===(a=d(null)).current?(u={hasValue:!1,value:null},a.current=u):u=a.current;var t=(a=f(function(){var a,r,i=!1,e=function(e){if(i)return t=r,c(a,e)||(n=l(e),void 0!==s&&s(t,n))?t:(a=e,r=n);i=!0;var t=l(a=e);if(void 0!==s&&u.hasValue){var n=u.value;if(s(n,t))return r=n}return r=t},t=void 0===o?null:o;return[function(){return e(n())},null===t?void 0:function(){return e(t())}]},[n,o,l,s]))[0],a=a[1],r=i(e,t,a);return m(function(){u.hasValue=!0,u.value=r},[r]),p(r),r},"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}}),n=e({"../../node_modules/use-sync-external-store/shim/with-selector.js"(e,t){"use strict";t.exports=Q()}}),ee=e({"../../node_modules/react-range/lib/types.js"(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Direction=void 0,e.Direction={Right:"to right",Left:"to left",Down:"to bottom",Up:"to top"}}}),ne=e({"../../node_modules/react-range/lib/utils.js"(s){"use strict";var y=s&&s.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var a,r=0,i=t.length;r<i;r++)!a&&r in t||((a=a||Array.prototype.slice.call(t,0,r))[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},a=(Object.defineProperty(s,"__esModule",{value:!0}),s.isIOS=s.useThumbOverlap=s.assertUnreachable=s.voidFn=s.getTrackBackground=s.replaceAt=s.schd=s.translate=s.getClosestThumbIndex=s.translateThumbs=s.getPaddingAndBorder=s.getMargin=s.checkInitialOverlap=s.checkValuesAgainstBoundaries=s.checkBoundaries=s.isVertical=s.relativeValue=s.normalizeValue=s.isStepDivisible=s.isTouchEvent=s.getStepDecimals=void 0,b()),o=ee();function l(e){return e===o.Direction.Up||e===o.Direction.Down}function r(e,t,n){e.style.transform="translate(".concat(t,"px, ").concat(n,"px)")}s.getStepDecimals=function(e){e=e.toString().split(".")[1];return e?e.length:0},s.isTouchEvent=function(e){return e.touches&&e.touches.length||e.changedTouches&&e.changedTouches.length},s.isStepDivisible=function(e,t,n){return t=Number(((t-e)/n).toFixed(8)),parseInt(t.toString(),10)===t},s.normalizeValue=function(e,t,n,a,r,i,o){var l=1e11;if(e=Math.round(e*l)/l,!i){var i=o[t-1],o=o[t+1];if(i&&e<i)return i;if(o&&o<e)return o}return a<e?a:e<n?n:(t=Math.floor(e*l-n*l)%Math.floor(r*l),i=Math.floor(e*l-Math.abs(t)),o=0==t?e:i/l,a=Math.abs(t/l)<r/2?o:o+r,n=(0,s.getStepDecimals)(r),parseFloat(a.toFixed(n)))},s.relativeValue=function(e,t,n){return(e-t)/(n-t)},s.isVertical=l,s.checkBoundaries=function(e,t,n){if(n<=t)throw new RangeError("min (".concat(t,") is equal/bigger than max (").concat(n,")"));if(e<t)throw new RangeError("value (".concat(e,") is smaller than min (").concat(t,")"));if(n<e)throw new RangeError("value (".concat(e,") is bigger than max (").concat(n,")"))},s.checkValuesAgainstBoundaries=function(e,t,n){return e<t?t:n<e?n:e},s.checkInitialOverlap=function(n){if(!(n.length<2||n.slice(1).every(function(e,t){return n[t]<=e})))throw new RangeError("values={[".concat(n,"]} needs to be sorted when allowOverlap={false}"))},s.getMargin=function(e){return e=window.getComputedStyle(e),{top:parseInt(e["margin-top"],10),bottom:parseInt(e["margin-bottom"],10),left:parseInt(e["margin-left"],10),right:parseInt(e["margin-right"],10)}},s.getPaddingAndBorder=function(e){return e=window.getComputedStyle(e),{top:parseInt(e["padding-top"],10)+parseInt(e["border-top-width"],10),bottom:parseInt(e["padding-bottom"],10)+parseInt(e["border-bottom-width"],10),left:parseInt(e["padding-left"],10)+parseInt(e["border-left-width"],10),right:parseInt(e["padding-right"],10)+parseInt(e["border-right-width"],10)}},s.translateThumbs=function(e,n,t){var a=t?-1:1;e.forEach(function(e,t){return r(e,a*n[t].x,n[t].y)})},s.getClosestThumbIndex=function(e,t,n,a){for(var r=0,i=u(e[0],t,n,a),o=1;o<e.length;o++){var l=u(e[o],t,n,a);l<i&&(i=l,r=o)}return r},s.translate=r;s.schd=function(n){var a,r=null;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];a=e,r=r||requestAnimationFrame(function(){r=null,n.apply(void 0,a)})}},s.replaceAt=function(e,t,n){return(e=e.slice(0))[t]=n,e},s.getTrackBackground=function(e){var t=e.values,a=e.colors,n=e.min,r=e.max,i=void 0===(i=e.direction)?o.Direction.Right:i;return(e=void 0!==(e=e.rtl)&&e)&&i===o.Direction.Right?i=o.Direction.Left:e&&o.Direction.Left&&(i=o.Direction.Right),e=t.slice(0).sort(function(e,t){return e-t}).map(function(e){return(e-n)/(r-n)*100}).reduce(function(e,t,n){return"".concat(e,", ").concat(a[n]," ").concat(t,"%, ").concat(a[n+1]," ").concat(t,"%")},""),"linear-gradient(".concat(i,", ").concat(a[0]," 0%").concat(e,", ").concat(a[a.length-1]," 100%)")},s.voidFn=function(){},s.assertUnreachable=function(e){throw new Error("Didn't expect to get here")};function v(e,t,o,l,s,u,c){function d(a){var r=f(o[a],l[a],s,u,c),i=t[a].x;t.forEach(function(e,t){var e=e.x,n=f(o[t],l[t],s,u,c);a!==t&&(e<=i&&i<=e+n||e<=i+r&&i+r<=e+n)&&!m.includes(t)&&(m.push(a),m.push(t),m=y(y([],m,!0),[a,t],!1),d(t))})}void 0===c&&(c=function(e){return e});var m=[];return d(e),Array.from(new Set(m.sort()))}var f=function(e,a,r,i,o){return void 0===o&&(o=function(e){return e}),Math.ceil(y([e],Array.from(e.children),!0).reduce(function(e,t){var n=Math.ceil(t.getBoundingClientRect().width);return t.innerText&&t.innerText.includes(r)&&0===t.childElementCount&&((t=t.cloneNode(!0)).innerHTML=o(a.toFixed(i)),t.style.visibility="hidden",document.body.appendChild(t),n=Math.ceil(t.getBoundingClientRect().width),document.body.removeChild(t)),e<n?n:e},e.getBoundingClientRect().width))};function u(e,t,n,a){var e=e.getBoundingClientRect(),r=e.left,i=e.top,o=e.width,e=e.height;return l(a)?Math.abs(n-(i+e/2)):Math.abs(t-(r+o/2))}s.useThumbOverlap=function(u,c,d,e,m,f){void 0===m&&(m=" - "),void 0===f&&(f=function(e){return e});var p=(0,s.getStepDecimals)(e=void 0===e?.1:e),e=(0,a.useState)({}),t=e[0],h=e[1],e=(0,a.useState)(f(c[d].toFixed(p))),n=e[0],g=e[1];return(0,a.useEffect)(function(){var e,r,t,n,a,i,o,l,s;!u||(s=u.getThumbs()).length<1||(e={},r=u.getOffsets(),t=v(d,r,s,c,m,p,f),n=f(c[d].toFixed(p)),t.length&&(a=t.reduce(function(e,t,n,a){return e.length?y(y([],e,!0),[r[a[n]].x],!1):[r[a[n]].x]},[]),Math.min.apply(Math,a)===r[d].x?(i=[],t.forEach(function(e){i.push(c[e].toFixed(p))}),n=Array.from(new Set(i.sort(function(e,t){return parseFloat(e)-parseFloat(t)}))).map(f).join(m),o=Math.min.apply(Math,a),l=Math.max.apply(Math,a),s=s[t[a.indexOf(l)]].getBoundingClientRect().width,e.left="".concat(Math.abs(o-(l+s))/2,"px"),e.transform="translate(-50%, 0)"):e.visibility="hidden"),g(n),h(e))},[u,c]),[n,t]};s.isIOS=function(){var e=(null==(e=navigator.userAgentData)?void 0:e.platform)||navigator.platform;return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(e)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}}}),ae=e({"../../node_modules/react-range/lib/Range.js"(e){"use strict";var a,t,n=e&&e.__extends||(a=function(e,t){return(a=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=e&&e.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&("get"in r?t.__esModule:!r.writable&&!r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,r)}:function(e,t,n,a){e[a=void 0===a?n:a]=t[n]}),i=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},p=e&&e.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var a,r=0,i=t.length;r<i;r++)!a&&r in t||((a=a||Array.prototype.slice.call(t,0,r))[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},l=(Object.defineProperty(e,"__esModule",{value:!0}),o(b())),_=ne(),x=ee(),s=["ArrowRight","ArrowUp","k","PageUp"],u=["ArrowLeft","ArrowDown","j","PageDown"],o=(t=l.Component,n(c,t),c.prototype.componentDidMount=function(){var t=this,e=this.props,n=e.values,a=e.min,r=e.step;this.resizeObserver=window.ResizeObserver?new window.ResizeObserver(this.onResize):{observe:function(){return window.addEventListener("resize",t.onResize)},unobserve:function(){return window.removeEventListener("resize",t.onResize)}},document.addEventListener("touchstart",this.onMouseOrTouchStart,{passive:!1}),document.addEventListener("mousedown",this.onMouseOrTouchStart,{passive:!1}),this.props.allowOverlap||(0,_.checkInitialOverlap)(this.props.values),this.props.values.forEach(function(e){return(0,_.checkBoundaries)(e,t.props.min,t.props.max)}),this.resizeObserver.observe(this.trackRef.current),(0,_.translateThumbs)(this.getThumbs(),this.getOffsets(),this.props.rtl),this.calculateMarkOffsets(),n.forEach(function(e){(0,_.isStepDivisible)(a,e,r)||console.warn("The `values` property is in conflict with the current `step`, `min`, and `max` properties. Please provide values that are accessible using the min, max, and step values.")})},c.prototype.componentDidUpdate=function(e,t){var n=this.props,a=n.max,r=n.min,i=n.step,o=n.values,n=n.rtl;e.max===a&&e.min===r&&e.step===i||this.updateMarkRefs(this.props),(0,_.translateThumbs)(this.getThumbs(),this.getOffsets(),n),e.max===a&&e.min===r&&e.step===i&&t.markOffsets.length===this.state.markOffsets.length||(this.calculateMarkOffsets(),o.forEach(function(e){(0,_.isStepDivisible)(r,e,i)||console.warn("The `values` property is in conflict with the current `step`, `min`, and `max` properties. Please provide values that are accessible using the min, max, and step values.")}))},c.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.onMouseOrTouchStart,{passive:!1}),document.removeEventListener("mousemove",this.schdOnMouseMove),document.removeEventListener("touchmove",this.schdOnTouchMove),document.removeEventListener("touchstart",this.onMouseOrTouchStart),document.removeEventListener("mouseup",this.schdOnEnd),document.removeEventListener("touchend",this.schdOnEnd),this.resizeObserver.unobserve(this.trackRef.current)},c.prototype.render=function(){var a=this,e=this.props,r=e.label,i=e.labelledBy,t=e.renderTrack,o=e.renderThumb,n=e.renderMark,l=void 0===n?function(){return null}:n,s=e.values,u=e.min,c=e.max,d=e.allowOverlap,m=e.disabled,n=this.state,e=n.draggedThumbIndex,f=n.thumbZIndexes,n=n.markOffsets;return t({props:{style:{transform:"scale(1)",cursor:-1<e?"grabbing":this.props.draggableTrack?(0,_.isVertical)(this.props.direction)?"ns-resize":"ew-resize":1!==s.length||m?"inherit":"pointer"},onMouseDown:m?_.voidFn:this.onMouseDownTrack,onTouchStart:m?_.voidFn:this.onTouchStartTrack,ref:this.trackRef},isDragged:-1<this.state.draggedThumbIndex,disabled:m,children:p(p([],n.map(function(e,t,n){return l({props:{style:a.props.direction===x.Direction.Left||a.props.direction===x.Direction.Right?{position:"absolute",left:"".concat(e[0],"px"),marginTop:"".concat(e[1],"px")}:{position:"absolute",top:"".concat(e[0],"px"),marginLeft:"".concat(e[1],"px")},key:"mark".concat(t),ref:a.markRefs[t]},index:t})}),!0),s.map(function(e,t){var n=a.state.draggedThumbIndex===t;return o({index:t,value:e,isDragged:n,props:{style:{position:"absolute",zIndex:f[t],cursor:m?"inherit":n?"grabbing":"grab",userSelect:"none",touchAction:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},key:t,tabIndex:m?void 0:0,"aria-valuemax":!d&&s[t+1]||c,"aria-valuemin":!d&&s[t-1]||u,"aria-valuenow":e,draggable:!1,ref:a.thumbRefs[t],"aria-label":r,"aria-labelledby":i,role:"slider",onKeyDown:m?_.voidFn:a.onKeyDown,onKeyUp:m?_.voidFn:a.onKeyUp}})}),!0)})},c.defaultProps={label:"Accessibility label",labelledBy:null,step:1,direction:x.Direction.Right,rtl:!1,disabled:!1,allowOverlap:!1,draggableTrack:!1,min:0,max:100},c);function c(e){var w=t.call(this,e)||this;if(w.trackRef=l.createRef(),w.thumbRefs=[],w.state={draggedTrackPos:[-1,-1],draggedThumbIndex:-1,thumbZIndexes:new Array(w.props.values.length).fill(0).map(function(e,t){return t}),isChanged:!1,markOffsets:[]},w.getOffsets=function(){var i,o,e=w.props,l=e.direction,s=e.values,u=e.min,c=e.max,e=w.trackRef.current;return e?(i=e.getBoundingClientRect(),o=(0,_.getPaddingAndBorder)(e),w.getThumbs().map(function(e,t){var n={x:0,y:0},a=e.getBoundingClientRect(),r=(0,_.getMargin)(e);switch(l){case x.Direction.Right:return n.x=-1*(r.left+o.left),n.y=-1*((a.height-i.height)/2+o.top),n.x+=i.width*(0,_.relativeValue)(s[t],u,c)-a.width/2,n;case x.Direction.Left:return n.x=-1*(r.right+o.right),n.y=-1*((a.height-i.height)/2+o.top),n.x+=i.width-i.width*(0,_.relativeValue)(s[t],u,c)-a.width/2,n;case x.Direction.Up:return n.x=-1*((a.width-i.width)/2+r.left+o.left),n.y=-o.left,n.y+=i.height-i.height*(0,_.relativeValue)(s[t],u,c)-a.height/2,n;case x.Direction.Down:return n.x=-1*((a.width-i.width)/2+r.left+o.left),n.y=-o.left,n.y+=i.height*(0,_.relativeValue)(s[t],u,c)-a.height/2,n;default:return(0,_.assertUnreachable)(l)}})):(console.warn("No track element found."),[])},w.getThumbs=function(){return w.trackRef&&w.trackRef.current?Array.from(w.trackRef.current.children).filter(function(e){return e.hasAttribute("aria-valuenow")}):(console.warn("No thumbs found in the track container. Did you forget to pass & spread the `props` param in renderTrack?"),[])},w.getTargetIndex=function(t){return w.getThumbs().findIndex(function(e){return e===t.target||e.contains(t.target)})},w.addTouchEvents=function(e){document.addEventListener("touchmove",w.schdOnTouchMove,{passive:!1}),document.addEventListener("touchend",w.schdOnEnd,{passive:!1}),document.addEventListener("touchcancel",w.schdOnEnd,{passive:!1})},w.addMouseEvents=function(e){document.addEventListener("mousemove",w.schdOnMouseMove),document.addEventListener("mouseup",w.schdOnEnd)},w.onMouseDownTrack=function(t){var e,n;0!==t.button||(0,_.isIOS)()||(t.persist(),t.preventDefault(),w.addMouseEvents(t.nativeEvent),1<w.props.values.length&&w.props.draggableTrack?w.thumbRefs.some(function(e){return null==(e=e.current)?void 0:e.contains(t.target)})||w.setState({draggedTrackPos:[t.clientX,t.clientY]},function(){return w.onMove(t.clientX,t.clientY)}):(n=(0,_.getClosestThumbIndex)(w.thumbRefs.map(function(e){return e.current}),t.clientX,t.clientY,w.props.direction),null!=(e=w.thumbRefs[n].current)&&e.focus(),w.setState({draggedThumbIndex:n},function(){return w.onMove(t.clientX,t.clientY)})))},w.onResize=function(){(0,_.translateThumbs)(w.getThumbs(),w.getOffsets(),w.props.rtl),w.calculateMarkOffsets()},w.onTouchStartTrack=function(t){var e,n;t.persist(),w.addTouchEvents(t.nativeEvent),1<w.props.values.length&&w.props.draggableTrack?w.thumbRefs.some(function(e){return null==(e=e.current)?void 0:e.contains(t.target)})||w.setState({draggedTrackPos:[t.touches[0].clientX,t.touches[0].clientY]},function(){return w.onMove(t.touches[0].clientX,t.touches[0].clientY)}):(n=(0,_.getClosestThumbIndex)(w.thumbRefs.map(function(e){return e.current}),t.touches[0].clientX,t.touches[0].clientY,w.props.direction),null!=(e=w.thumbRefs[n].current)&&e.focus(),w.setState({draggedThumbIndex:n},function(){return w.onMove(t.touches[0].clientX,t.touches[0].clientY)}))},w.onMouseOrTouchStart=function(e){var t,n;w.props.disabled||!(t=(0,_.isTouchEvent)(e))&&0!==e.button||-1===(n=w.getTargetIndex(e))||(t?w.addTouchEvents(e):w.addMouseEvents(e),w.setState({draggedThumbIndex:n,thumbZIndexes:w.state.thumbZIndexes.map(function(e,t){return t===n?Math.max.apply(Math,w.state.thumbZIndexes):e<=w.state.thumbZIndexes[n]?e:e-1})}))},w.onMouseMove=function(e){e.preventDefault(),w.onMove(e.clientX,e.clientY)},w.onTouchMove=function(e){e.preventDefault(),w.onMove(e.touches[0].clientX,e.touches[0].clientY)},w.onKeyDown=function(e){var t=w.props,n=t.values,a=t.onChange,r=t.step,i=t.rtl,t=t.direction,o=w.state.isChanged,l=w.getTargetIndex(e.nativeEvent),i=i||t===x.Direction.Left||t===x.Direction.Down?-1:1;-1!==l&&(s.includes(e.key)?(e.preventDefault(),w.setState({draggedThumbIndex:l,isChanged:!0}),a((0,_.replaceAt)(n,l,w.normalizeValue(n[l]+i*("PageUp"===e.key?10*r:r),l)))):u.includes(e.key)?(e.preventDefault(),w.setState({draggedThumbIndex:l,isChanged:!0}),a((0,_.replaceAt)(n,l,w.normalizeValue(n[l]-i*("PageDown"===e.key?10*r:r),l)))):"Tab"===e.key?w.setState({draggedThumbIndex:-1},function(){o&&w.fireOnFinalChange()}):o&&w.fireOnFinalChange())},w.onKeyUp=function(e){var t=w.state.isChanged;w.setState({draggedThumbIndex:-1},function(){t&&w.fireOnFinalChange()})},w.onMove=function(e,t){var n=w.state,a=n.draggedThumbIndex,n=n.draggedTrackPos,r=w.props,i=r.direction,o=r.min,l=r.max,s=r.onChange,u=r.values,c=r.step,r=r.rtl;if(-1===a&&-1===n[0]&&-1===n[1])return null;var d=w.trackRef.current;if(!d)return null;var m=d.getBoundingClientRect(),f=(0,_.isVertical)(i)?m.height:m.width;if(-1!==n[0]&&-1!==n[1]){var p=e-n[0],h=t-n[1],g=0;switch(i){case x.Direction.Right:case x.Direction.Left:g=p/f*(l-o);break;case x.Direction.Down:case x.Direction.Up:g=h/f*(l-o);break;default:(0,_.assertUnreachable)(i)}if(r&&(g*=-1),Math.abs(g)>=c/2){for(var y=0;y<w.thumbRefs.length;y++){if(u[y]===l&&1===Math.sign(g)||u[y]===o&&-1===Math.sign(g))return;var v=u[y]+g;l<v?g=l-u[y]:v<o&&(g=o-u[y])}for(var b=u.slice(0),y=0;y<w.thumbRefs.length;y++)b=(0,_.replaceAt)(b,y,w.normalizeValue(u[y]+g,y));w.setState({draggedTrackPos:[e,t]}),s(b)}}else{var E=0;switch(i){case x.Direction.Right:E=(e-m.left)/f*(l-o)+o;break;case x.Direction.Left:E=(f-(e-m.left))/f*(l-o)+o;break;case x.Direction.Down:E=(t-m.top)/f*(l-o)+o;break;case x.Direction.Up:E=(f-(t-m.top))/f*(l-o)+o;break;default:(0,_.assertUnreachable)(i)}r&&(E=l+o-E),Math.abs(u[a]-E)>=c/2&&s((0,_.replaceAt)(u,a,w.normalizeValue(E,a)))}},w.normalizeValue=function(e,t){var n=w.props,a=n.min,r=n.max,i=n.step,o=n.allowOverlap,n=n.values;return(0,_.normalizeValue)(e,t,a,r,i,o,n)},w.onEnd=function(e){if(e.preventDefault(),document.removeEventListener("mousemove",w.schdOnMouseMove),document.removeEventListener("touchmove",w.schdOnTouchMove),document.removeEventListener("mouseup",w.schdOnEnd),document.removeEventListener("touchend",w.schdOnEnd),document.removeEventListener("touchcancel",w.schdOnEnd),-1===w.state.draggedThumbIndex&&-1===w.state.draggedTrackPos[0]&&-1===w.state.draggedTrackPos[1])return null;w.setState({draggedThumbIndex:-1,draggedTrackPos:[-1,-1]},function(){w.fireOnFinalChange()})},w.fireOnFinalChange=function(){w.setState({isChanged:!1});var e=w.props,t=e.onFinalChange,e=e.values;t&&t(e)},w.updateMarkRefs=function(e){if(e.renderMark){w.numOfMarks=(e.max-e.min)/w.props.step,w.markRefs=[];for(var t=0;t<w.numOfMarks+1;t++)w.markRefs[t]=l.createRef()}else w.numOfMarks=void 0,w.markRefs=void 0},w.calculateMarkOffsets=function(){if(w.props.renderMark&&w.trackRef&&w.numOfMarks&&w.markRefs&&null!==w.trackRef.current){for(var e=window.getComputedStyle(w.trackRef.current),t=parseInt(e.width,10),n=parseInt(e.height,10),a=parseInt(e.paddingLeft,10),r=parseInt(e.paddingTop,10),i=[],o=0;o<w.numOfMarks+1;o++){var l,s=9999,u=9999;w.markRefs[o].current&&(s=(l=w.markRefs[o].current.getBoundingClientRect()).height,u=l.width),w.props.direction===x.Direction.Left||w.props.direction===x.Direction.Right?i.push([Math.round(t/w.numOfMarks*o+a-u/2),-Math.round((s-n)/2)]):i.push([Math.round(n/w.numOfMarks*o+r-s/2),-Math.round((u-t)/2)])}w.setState({markOffsets:i})}},0===e.step)throw new Error('"step" property should be a positive number');return w.schdOnMouseMove=(0,_.schd)(w.onMouseMove),w.schdOnTouchMove=(0,_.schd)(w.onTouchMove),w.schdOnEnd=(0,_.schd)(w.onEnd),w.thumbRefs=e.values.map(function(){return l.createRef()}),w.updateMarkRefs(e),w}e.default=o}}),re=e({"../../node_modules/react-range/lib/index.js"(e){"use strict";var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},t=(Object.defineProperty(e,"__esModule",{value:!0}),e.checkValuesAgainstBoundaries=e.relativeValue=e.useThumbOverlap=e.Direction=e.getTrackBackground=e.Range=void 0,t(ae())),n=(e.Range=t.default,ne()),a=(Object.defineProperty(e,"getTrackBackground",{enumerable:!0,get:function(){return n.getTrackBackground}}),Object.defineProperty(e,"useThumbOverlap",{enumerable:!0,get:function(){return n.useThumbOverlap}}),Object.defineProperty(e,"relativeValue",{enumerable:!0,get:function(){return n.relativeValue}}),Object.defineProperty(e,"checkValuesAgainstBoundaries",{enumerable:!0,get:function(){return n.checkValuesAgainstBoundaries}}),ee());Object.defineProperty(e,"Direction",{enumerable:!0,get:function(){return a.Direction}})}}),ie=e({"../../node_modules/react-is/cjs/react-is.development.js"(e){"use strict";function t(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:var n=e.type;switch(n){case d:case m:case o:case s:case l:case p:return n;default:var a=n&&n.$$typeof;switch(a){case c:case f:case y:case g:case u:return a;default:return t}}case i:return t}}}function n(e){return t(e)===m}var a,r,i,o,l,s,u,c,d,m,f,p,h,g,y,v,b,E,w,_,x,S,k,I,C,N,T,A,R,O,M;a="function"==typeof Symbol&&Symbol.for,r=a?Symbol.for("react.element"):60103,i=a?Symbol.for("react.portal"):60106,o=a?Symbol.for("react.fragment"):60107,l=a?Symbol.for("react.strict_mode"):60108,s=a?Symbol.for("react.profiler"):60114,u=a?Symbol.for("react.provider"):60109,c=a?Symbol.for("react.context"):60110,d=a?Symbol.for("react.async_mode"):60111,m=a?Symbol.for("react.concurrent_mode"):60111,f=a?Symbol.for("react.forward_ref"):60112,p=a?Symbol.for("react.suspense"):60113,h=a?Symbol.for("react.suspense_list"):60120,g=a?Symbol.for("react.memo"):60115,y=a?Symbol.for("react.lazy"):60116,v=a?Symbol.for("react.block"):60121,b=a?Symbol.for("react.fundamental"):60117,E=a?Symbol.for("react.responder"):60118,w=a?Symbol.for("react.scope"):60119,a=m,_=c,x=u,S=r,k=f,I=o,C=y,N=g,T=i,A=s,R=l,O=p,M=!1,e.AsyncMode=d,e.ConcurrentMode=a,e.ContextConsumer=_,e.ContextProvider=x,e.Element=S,e.ForwardRef=k,e.Fragment=I,e.Lazy=C,e.Memo=N,e.Portal=T,e.Profiler=A,e.StrictMode=R,e.Suspense=O,e.isAsyncMode=function(e){return M||(M=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),n(e)||t(e)===d},e.isConcurrentMode=n,e.isContextConsumer=function(e){return t(e)===c},e.isContextProvider=function(e){return t(e)===u},e.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},e.isForwardRef=function(e){return t(e)===f},e.isFragment=function(e){return t(e)===o},e.isLazy=function(e){return t(e)===y},e.isMemo=function(e){return t(e)===g},e.isPortal=function(e){return t(e)===i},e.isProfiler=function(e){return t(e)===s},e.isStrictMode=function(e){return t(e)===l},e.isSuspense=function(e){return t(e)===p},e.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===m||e===s||e===l||e===p||e===h||"object"==typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===g||e.$$typeof===u||e.$$typeof===c||e.$$typeof===f||e.$$typeof===b||e.$$typeof===E||e.$$typeof===w||e.$$typeof===v)},e.typeOf=t}}),oe=e({"../../node_modules/react-is/index.js"(e,t){"use strict";t.exports=ie()}}),le=e({"../../node_modules/object-assign/index.js"(e,t){"use strict";var s=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(Object.assign){var e=new String("abc");if(e[5]="de","5"!==Object.getOwnPropertyNames(e)[0]){for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var a,r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"===r.join(""))return a={},"abcdefghijklmnopqrst".split("").forEach(function(e){a[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")?1:void 0}}}catch(e){}}()?Object.assign:function(e,t){for(var n,a=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),r=1;r<arguments.length;r++){for(var i in n=Object(arguments[r]))u.call(n,i)&&(a[i]=n[i]);if(s)for(var o=s(n),l=0;l<o.length;l++)c.call(n,o[l])&&(a[o[l]]=n[o[l]])}return a}}}),se=e({"../../node_modules/prop-types/lib/ReactPropTypesSecret.js"(e,t){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}}),ue=e({"../../node_modules/prop-types/lib/has.js"(e,t){t.exports=Function.call.bind(Object.prototype.hasOwnProperty)}}),ce=e({"../../node_modules/prop-types/checkPropTypes.js"(e,t){"use strict";var s,u,c,d=function(){};function n(e,t,n,a,r){for(var i in e)if(c(e,i)){var o,l;try{if("function"!=typeof e[i])throw(l=Error((a||"React class")+": "+n+" type `"+i+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[i]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.")).name="Invariant Violation",l;o=e[i](t,i,a,n,null,s)}catch(e){o=e}!o||o instanceof Error||d((a||"React class")+": type specification of "+n+" `"+i+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof o+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),o instanceof Error&&!(o.message in u)&&(u[o.message]=!0,i=r?r():"",d("Failed "+n+" type: "+o.message+(null!=i?i:"")))}}s=se(),u={},c=ue(),d=function(e){e="Warning: "+e;"undefined"!=typeof console&&console.error(e);try{throw new Error(e)}catch(e){}},n.resetWarningCache=function(){u={}},t.exports=n}}),de=e({"../../node_modules/prop-types/factoryWithTypeCheckers.js"(e,t){"use strict";var u=oe(),g=le(),y=se(),v=ue(),a=ce(),b=function(){};function r(){return null}b=function(e){e="Warning: "+e;"undefined"!=typeof console&&console.error(e);try{throw new Error(e)}catch(e){}},t.exports=function(i,c){var o="function"==typeof Symbol&&Symbol.iterator,l="@@iterator";var d="<<anonymous>>",e={array:t("array"),bigint:t("bigint"),bool:t("boolean"),func:t("function"),number:t("number"),object:t("object"),string:t("string"),symbol:t("symbol"),any:n(r),arrayOf:function(s){return n(function(e,t,n,a,r){if("function"!=typeof s)return new m("Property `"+r+"` of component `"+n+"` has invalid PropType notation inside arrayOf.");var i=e[t];if(!Array.isArray(i))return new m("Invalid "+a+" `"+r+"` of type `"+p(i)+"` supplied to `"+n+"`, expected an array.");for(var o=0;o<i.length;o++){var l=s(i,o,n,a,r+"["+o+"]",y);if(l instanceof Error)return l}return null})},element:n(function(e,t,n,a,r){return e=e[t],i(e)?null:new m("Invalid "+a+" `"+r+"` of type `"+p(e)+"` supplied to `"+n+"`, expected a single ReactElement.")}),elementType:n(function(e,t,n,a,r){return e=e[t],u.isValidElementType(e)?null:new m("Invalid "+a+" `"+r+"` of type `"+p(e)+"` supplied to `"+n+"`, expected a single ReactElement type.")}),instanceOf:function(o){return n(function(e,t,n,a,r){var i;return e[t]instanceof o?null:(i=o.name||d,new m("Invalid "+a+" `"+r+"` of type `"+((a=e[t]).constructor&&a.constructor.name?a.constructor.name:d)+"` supplied to `"+n+"`, expected instance of `"+i+"`."))})},node:n(function(e,t,n,a,r){return s(e[t])?null:new m("Invalid "+a+" `"+r+"` supplied to `"+n+"`, expected a ReactNode.")}),objectOf:function(s){return n(function(e,t,n,a,r){if("function"!=typeof s)return new m("Property `"+r+"` of component `"+n+"` has invalid PropType notation inside objectOf.");var i,o=e[t];if("object"!==(e=p(o)))return new m("Invalid "+a+" `"+r+"` of type `"+e+"` supplied to `"+n+"`, expected an object.");for(i in o)if(v(o,i)){var l=s(o,i,n,a,r+"."+i,y);if(l instanceof Error)return l}return null})},oneOf:function(l){if(Array.isArray(l))return n(function(e,t,n,a,r){for(var i=e[t],o=0;o<l.length;o++)if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(i,l[o]))return null;e=JSON.stringify(l,function(e,t){return"symbol"===h(t)?String(t):t});return new m("Invalid "+a+" `"+r+"` of value `"+String(i)+"` supplied to `"+n+"`, expected one of "+e+".")});b(1<arguments.length?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array.");return r},oneOfType:function(s){if(!Array.isArray(s))return b("Invalid argument supplied to oneOfType, expected an instance of array."),r;for(var e=0;e<s.length;e++){var t=s[e];if("function"!=typeof t)return b("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+function(e){var t=h(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}(t)+" at index "+e+"."),r}return n(function(e,t,n,a,r){for(var i=[],o=0;o<s.length;o++){var l=(0,s[o])(e,t,n,a,r,y);if(null==l)return null;l.data&&v(l.data,"expectedType")&&i.push(l.data.expectedType)}return new m("Invalid "+a+" `"+r+"` supplied to `"+n+"`"+(0<i.length?", expected one of type ["+i.join(", ")+"]":"")+".")})},shape:function(s){return n(function(e,t,n,a,r){var i,o=e[t];if("object"!==(e=p(o)))return new m("Invalid "+a+" `"+r+"` of type `"+e+"` supplied to `"+n+"`, expected `object`.");for(i in s){var l=s[i];if("function"!=typeof l)return f(n,a,r,i,h(l));l=l(o,i,n,a,r+"."+i,y);if(l)return l}return null})},exact:function(u){return n(function(e,t,n,a,r){var i,o=e[t],l=p(o);if("object"!==l)return new m("Invalid "+a+" `"+r+"` of type `"+l+"` supplied to `"+n+"`, expected `object`.");for(i in g({},e[t],u)){var s=u[i];if(v(u,i)&&"function"!=typeof s)return f(n,a,r,i,h(s));if(!s)return new m("Invalid "+a+" `"+r+"` key `"+i+"` supplied to `"+n+"`.\nBad object: "+JSON.stringify(e[t],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(u),null,"  "));s=s(o,i,n,a,r+"."+i,y);if(s)return s}return null})}};function m(e,t){this.message=e,this.data=t&&"object"==typeof t?t:{},this.stack=""}function n(l){var s={},u=0;function e(e,t,n,a,r,i,o){if(a=a||d,i=i||n,o!==y){if(c)throw(o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types")).name="Invariant Violation",o;"undefined"!=typeof console&&!s[o=a+":"+n]&&u<3&&(b("You are manually calling a React.PropTypes validation function for the `"+i+"` prop on `"+a+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),s[o]=!0,u++)}return null==t[n]?e?null===t[n]?new m("The "+r+" `"+i+"` is marked as required in `"+a+"`, but its value is `null`."):new m("The "+r+" `"+i+"` is marked as required in `"+a+"`, but its value is `undefined`."):null:l(t,n,a,r,i)}var t=e.bind(null,!1);return t.isRequired=e.bind(null,!0),t}function t(o){return n(function(e,t,n,a,r,i){return p(e=e[t])!==o?new m("Invalid "+a+" `"+r+"` of type `"+h(e)+"` supplied to `"+n+"`, expected `"+o+"`.",{expectedType:o}):null})}function f(e,t,n,a,r){return new m((e||"React class")+": "+t+" type `"+n+"."+a+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+r+"`.")}function s(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(s);if(null!==e&&!i(e)){var t=function(e){if("function"==typeof(e=e&&(o&&e[o]||e[l])))return e}(e);if(!t)return!1;var n,a=t.call(e);if(t!==e.entries){for(;!(n=a.next()).done;)if(!s(n.value))return!1}else for(;!(n=a.next()).done;){var r=n.value;if(r&&!s(r[1]))return!1}}return!0;default:return!1}}function p(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":(e=e,"symbol"===t||e&&("Symbol"===e["@@toStringTag"]||"function"==typeof Symbol&&e instanceof Symbol)?"symbol":t)}function h(e){if(null==e)return""+e;var t=p(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}return m.prototype=Error.prototype,e.checkPropTypes=a,e.resetWarningCache=a.resetWarningCache,e.PropTypes=e}}}),me=e({"../../node_modules/prop-types/index.js"(e,t){var n=oe();t.exports=de()(n.isElement,!0)}}),fe=e({"../../node_modules/downshift/node_modules/react-is/cjs/react-is.development.js"(e){"use strict";function t(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:var n=e.type;switch(n){case o:case s:case l:case f:case p:return n;default:var a=n&&n.$$typeof;switch(a){case d:case c:case m:case g:case h:case u:return a;default:return t}}case i:return t}}}var r,i,o,l,s,u,c,d,m,f,p,h,g,n,a,y,v,b,E,w,_,x,S,k,I,C,N,T;r=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.server_context"),m=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),n=Symbol.for("react.offscreen"),a=Symbol.for("react.module.reference"),y=u,v=r,b=m,E=o,w=g,_=h,x=i,S=s,k=l,I=f,C=p,T=N=!1,e.ContextConsumer=c,e.ContextProvider=y,e.Element=v,e.ForwardRef=b,e.Fragment=E,e.Lazy=w,e.Memo=_,e.Portal=x,e.Profiler=S,e.StrictMode=k,e.Suspense=I,e.SuspenseList=C,e.isAsyncMode=function(e){return N||(N=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 18+.")),!1},e.isConcurrentMode=function(e){return T||(T=!0,console.warn("The ReactIs.isConcurrentMode() alias has been deprecated, and will be removed in React 18+.")),!1},e.isContextConsumer=function(e){return t(e)===c},e.isContextProvider=function(e){return t(e)===u},e.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===r},e.isForwardRef=function(e){return t(e)===m},e.isFragment=function(e){return t(e)===o},e.isLazy=function(e){return t(e)===g},e.isMemo=function(e){return t(e)===h},e.isPortal=function(e){return t(e)===i},e.isProfiler=function(e){return t(e)===s},e.isStrictMode=function(e){return t(e)===l},e.isSuspense=function(e){return t(e)===f},e.isSuspenseList=function(e){return t(e)===p},e.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===s||e===l||e===f||e===p||e===n||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===h||e.$$typeof===u||e.$$typeof===c||e.$$typeof===m||e.$$typeof===a||void 0!==e.getModuleId)},e.typeOf=t}}),e=e({"../../node_modules/downshift/node_modules/react-is/index.js"(e,t){"use strict";t.exports=fe()}}),pe={},he=pe,ge={default:()=>function(){return B0.default.createElement(j0,null)}};for(T in ge)R(he,T,{get:ge[T],enumerable:!0});var ye=t(b()),ve=t(Y()),be=t(q());var Ee=async function(t,n,e){for(;!Spicetify?.PopupModal||!Spicetify?.LocalStorage;)await new Promise(e=>setTimeout(e,100));var a,t=`spcr-whats-new_${t}-version`,r=Spicetify.LocalStorage.get(t)??"";try{(0,ve.default)(n,r)&&(Spicetify.LocalStorage.set(t,n),a={...e,content:function(e){var t=document.createElement("div"),n=(t.setAttribute("id","whats-new-content-wrapper"),document.createElement("style"));return n.textContent=`
      #whats-new-content-wrapper ul, #whats-new-content-wrapper ol {
         list-style: inherit;
         margin-left: 1em;
      }
   `,be.default.render(e,t),t.appendChild(n),t}(e.content)},Spicetify.PopupModal.display(a))}catch(e){Spicetify.LocalStorage.set(t,n)}},we="1.1.0",_e=["Added new sources (search and radio)","Fixed the deduplicate node","Fixed the sort node","Fixed a display issue in the create playlist modal"],xe=t(b()),Se=t(b()),ke=t(b()),Ie="TabBar-module__active___qFHnJ_playlistDmaker",Ce=t(b());function _(e){const{elementType:t="span",children:n,fontSize:a,style:r,...i}=e;let o;switch(t){case"h1":o=Spicetify.ReactComponent.TextComponent.h1;break;case"h2":o=Spicetify.ReactComponent.TextComponent.h2;break;case"h3":o=Spicetify.ReactComponent.TextComponent.h3;break;case"h4":o=Spicetify.ReactComponent.TextComponent.h4;break;case"h5":o=Spicetify.ReactComponent.TextComponent.h5;break;case"h6":o=Spicetify.ReactComponent.TextComponent.h6;break;case"li":o=Spicetify.ReactComponent.TextComponent.li;break;case"p":o=Spicetify.ReactComponent.TextComponent.p;break;case"small":o=Spicetify.ReactComponent.TextComponent.small;break;case"span":o=Spicetify.ReactComponent.TextComponent.span;break;default:o=Spicetify.ReactComponent.TextComponent}return Ce.default.createElement(o,{...i,style:{...r,fontSize:a,display:e.paddingBottom?"block":r?.display}},n)}function Ne(e){return ke.default.createElement("li",{"data-tab":e.item.key,onClick:()=>{e.onItemClicked(e.item)}},ke.default.createElement("button",{className:e.active?Ie:"",draggable:"false"},ke.default.createElement(_,{variant:"mestoBold"},e.item.label)))}var Te=t(b());function Ae(n){var e={width:n.size+"px"};return Te.default.createElement("li",{id:"more-button",style:e},Te.default.createElement("select",{className:"main-dropDown-dropDown",value:n.activeItem.key,disabled:!1,onChange:t=>{var e=n.items.find(e=>e.key===t.target.value);e&&n.onClick(e)}},n.items.map(e=>Te.default.createElement("option",{key:e.key,value:e.key},e.label))))}var Re={tabBar:"TabBar-module__tabBar___DxQjm_playlistDmaker",active:"TabBar-module__active___qFHnJ_playlistDmaker"};function Oe(n){const t=Se.default.useRef(null),[r,a]=(0,Se.useState)([]),[i,e]=(0,Se.useState)(0),[o,l]=(0,Se.useState)([]),[s,u]=(0,Se.useState)(0);return(0,Se.useEffect)(()=>{t.current&&e(t.current.clientWidth)},[n.windowSize]),(0,Se.useEffect)(()=>{var e;t.current&&(e=Array.from(t.current.children).filter(e=>"more-button"!==e.id).map(e=>e.clientWidth),a(e))},[n.items]),(0,Se.useEffect)(()=>{if(t.current)if(r.reduce((e,t)=>e+t,0)<=i)l([]);else{var e=Math.max(...r)+32;const a=[];let n=e;r.forEach((e,t)=>{i>=n+e?n+=e:a.push(t)}),l(a),u(e)}},[i,r]),Se.default.createElement("nav",{className:Re.tabBar},Se.default.createElement("ul",{ref:t},n.items.filter((e,t)=>!o.includes(t)).map(e=>Se.default.createElement(Ne,{key:e.key,item:e,active:n.activeItem.key===e.key,onItemClicked:n.onItemClicked})),o.length||0===r.length?Se.default.createElement(Ae,{items:n.items.filter((e,t)=>o.includes(t)||e.key===n.activeItem.key),activeItem:n.activeItem,onClick:n.onItemClicked,size:s}):null))}function Me(e){const t=document.querySelector(".Root__main-view .os-resize-observer-host, .Root__main-view .os-size-observer, .Root__main-view .main-view-container__scroll-node");if(!t)throw new Error("Could not find resize host");const[n,a]=(0,xe.useState)(t.clientWidth);return(0,xe.useEffect)(()=>{const e=new ResizeObserver(()=>{a(t.clientWidth)});return e.observe(t),()=>{e.disconnect()}},[t]),xe.default.createElement(Oe,{windowSize:n,items:e.items,activeItem:e.activeItem,onItemClicked:e.onItemClicked})}function y(){return Spicetify.Platform}var De=t(b()),ut=t(b(),1);function ct(n){if("string"==typeof n||"number"==typeof n)return""+n;let a="";if(Array.isArray(n))for(let e=0,t;e<n.length;e++)""!==(t=ct(n[e]))&&(a+=(a&&" ")+t);else for(var e in n)n[e]&&(a+=(a&&" ")+e);return a}var Y=t(b(),1),a=t(n(),1),Pe={},Le=e=>{let a;const r=new Set;var t=(e,t)=>{e="function"==typeof e?e(a):e;if(!Object.is(e,a)){const n=a;a=(null!=t?t:"object"!=typeof e||null===e)?e:Object.assign({},a,e),r.forEach(e=>e(a,n))}},n=()=>a,i={setState:t,getState:n,getInitialState:()=>o,subscribe:e=>(r.add(e),()=>r.delete(e)),destroy:()=>{"production"!==(Pe.env?Pe.env.MODE:void 0)&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}};const o=a=e(t,n,i);return i},Fe=e=>e?Le(e):Le,Ve=Y.default["useDebugValue"],je=a.default["useSyncExternalStoreWithSelector"],Be=e=>e;function ze(e,t=Be,n){e=je(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Ve(e),e}var Ue=(e,n)=>{const a=Fe(e);e=(e,t=n)=>ze(a,e,t);return Object.assign(e,a),e},He=(e,t)=>e?Ue(e,t):Ue;function $e(e,t){if(!Object.is(e,t)){if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(var[n,a]of e)if(!Object.is(a,t.get(n)))return!1}else if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1}else{var r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const o of r)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1}}return!0}var Ze={value:()=>{}};function We(){for(var e,t=0,n=arguments.length,a={};t<n;++t){if(!(e=arguments[t]+"")||e in a||/[\s.]/.test(e))throw new Error("illegal type: "+e);a[e]=[]}return new Ke(a)}function Ke(e){this._=e}function Xe(e,t,n){for(var a=0,r=e.length;a<r;++a)if(e[a].name===t){e[a]=Ze,e=e.slice(0,a).concat(e.slice(a+1));break}return null!=n&&e.push({name:t,value:n}),e}Ke.prototype=We.prototype={constructor:Ke,on:function(e,t){var n,a,r=this._,i=(a=r,(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(0<=n&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!a.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),o=-1,l=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<l;)if(n=(e=i[o]).type)r[n]=Xe(r[n],e.name,t);else if(null==t)for(n in r)r[n]=Xe(r[n],e.name,null);return this}for(;++o<l;)if(n=(n=(e=i[o]).type)&&function(e,t){for(var n,a=0,r=e.length;a<r;++a)if((n=e[a]).name===t)return n.value}(r[n],e.name))return n},copy:function(){var e,t={},n=this._;for(e in n)t[e]=n[e].slice();return new Ke(t)},call:function(e,t){if(0<(n=arguments.length-2))for(var n,a,r=new Array(n),i=0;i<n;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(a=this._[e]).length;i<n;++i)a[i].value.apply(t,r)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)}};var Ye=We,qe="http://www.w3.org/1999/xhtml",Ge={svg:"http://www.w3.org/2000/svg",xhtml:qe,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Je(e){var t=e+="",n=t.indexOf(":");return 0<=n&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),Ge.hasOwnProperty(t)?{space:Ge[t],local:e}:e}function Qe(e){e=Je(e);return(e.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===qe&&e.documentElement.namespaceURI===qe?e.createElement(n):e.createElementNS(t,n)}})(e)}function et(){}function tt(e){return null==e?et:function(){return this.querySelector(e)}}function nt(){return[]}function at(e){return null==e?nt:function(){return this.querySelectorAll(e)}}function rt(t){return function(){return null==(e=t.apply(this,arguments))?[]:Array.isArray(e)?e:Array.from(e);var e}}function it(e){return function(){return this.matches(e)}}function ot(t){return function(e){return e.matches(t)}}var lt=Array.prototype.find;function st(){return this.firstElementChild}var dt=Array.prototype.filter;function mt(){return Array.from(this.children)}function ft(e){return new Array(e.length)}function pt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function ht(e,t,n,a,r,i){for(var o,l=0,s=t.length,u=i.length;l<u;++l)(o=t[l])?(o.__data__=i[l],a[l]=o):n[l]=new pt(e,i[l]);for(;l<s;++l)(o=t[l])&&(r[l]=o)}function gt(e,t,n,a,r,i,o){for(var l,s,u=new Map,c=t.length,d=i.length,m=new Array(c),f=0;f<c;++f)(l=t[f])&&(m[f]=s=o.call(l,l.__data__,f,t)+"",u.has(s)?r[f]=l:u.set(s,l));for(f=0;f<d;++f)s=o.call(e,i[f],f,i)+"",(l=u.get(s))?((a[f]=l).__data__=i[f],u.delete(s)):n[f]=new pt(e,i[f]);for(f=0;f<c;++f)(l=t[f])&&u.get(m[f])===l&&(r[f]=l)}function yt(e){return e.__data__}function vt(e,t){return e<t?-1:t<e?1:t<=e?0:NaN}function bt(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Et(e,t){return e.style.getPropertyValue(t)||bt(e).getComputedStyle(e,null).getPropertyValue(t)}function wt(e){return e.trim().split(/^|\s+/)}function _t(e){return e.classList||new xt(e)}function xt(e){this._node=e,this._names=wt(e.getAttribute("class")||"")}function St(e,t){for(var n=_t(e),a=-1,r=t.length;++a<r;)n.add(t[a])}function kt(e,t){for(var n=_t(e),a=-1,r=t.length;++a<r;)n.remove(t[a])}function It(){this.textContent=""}function Ct(){this.innerHTML=""}function Nt(){this.nextSibling&&this.parentNode.appendChild(this)}function Tt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function At(){return null}function Rt(){var e=this.parentNode;e&&e.removeChild(this)}function Ot(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Mt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Dt(i){return function(){var e=this.__on;if(e){for(var t,n=0,a=-1,r=e.length;n<r;++n)t=e[n],i.type&&t.type!==i.type||t.name!==i.name?e[++a]=t:this.removeEventListener(t.type,t.listener,t.options);++a?e.length=a:delete this.__on}}}function Pt(o,l,s){return function(){function e(e){n.call(this,e,this.__data__)}var t,n,a=this.__on;n=l;if(a)for(var r=0,i=a.length;r<i;++r)if((t=a[r]).type===o.type&&t.name===o.name)return this.removeEventListener(t.type,t.listener,t.options),this.addEventListener(t.type,t.listener=e,t.options=s),void(t.value=l);this.addEventListener(o.type,e,s),t={type:o.type,name:o.name,value:l,listener:e,options:s},a?a.push(t):this.__on=[t]}}function Lt(e,t,n){var a=bt(e),r=a.CustomEvent;"function"==typeof r?r=new r(t,n):(r=a.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}pt.prototype={constructor:pt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},xt.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){e=this._names.indexOf(e);0<=e&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return 0<=this._names.indexOf(e)}};var Ft=[null];function Vt(e,t){this._groups=e,this._parents=t}function jt(){return new Vt([[document.documentElement]],Ft)}Vt.prototype=jt.prototype={constructor:Vt,select:function(e){"function"!=typeof e&&(e=tt(e));for(var t=this._groups,n=t.length,a=new Array(n),r=0;r<n;++r)for(var i,o,l=t[r],s=l.length,u=a[r]=new Array(s),c=0;c<s;++c)(i=l[c])&&(o=e.call(i,i.__data__,c,l))&&("__data__"in i&&(o.__data__=i.__data__),u[c]=o);return new Vt(a,this._parents)},selectAll:function(e){e=("function"==typeof e?rt:at)(e);for(var t=this._groups,n=t.length,a=[],r=[],i=0;i<n;++i)for(var o,l=t[i],s=l.length,u=0;u<s;++u)(o=l[u])&&(a.push(e.call(o,o.__data__,u,l)),r.push(o));return new Vt(a,r)},selectChild:function(e){return this.select(null==e?st:(t="function"==typeof e?e:ot(e),function(){return lt.call(this.children,t)}));var t},selectChildren:function(e){return this.selectAll(null==e?mt:(t="function"==typeof e?e:ot(e),function(){return dt.call(this.children,t)}));var t},filter:function(e){"function"!=typeof e&&(e=it(e));for(var t=this._groups,n=t.length,a=new Array(n),r=0;r<n;++r)for(var i,o=t[r],l=o.length,s=a[r]=[],u=0;u<l;++u)(i=o[u])&&e.call(i,i.__data__,u,o)&&s.push(i);return new Vt(a,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,yt);var n,a=t?gt:ht,r=this._parents,i=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var o=i.length,l=new Array(o),s=new Array(o),u=new Array(o),c=0;c<o;++c){var d=r[c],m=i[c],f=m.length,p="object"==typeof(p=e.call(d,d&&d.__data__,c,r))&&"length"in p?p:Array.from(p),h=p.length,g=s[c]=new Array(h),y=l[c]=new Array(h);a(d,m,g,y,u[c]=new Array(f),p,t);for(var v,b,E=0,w=0;E<h;++E)if(v=g[E]){for(w<=E&&(w=E+1);!(b=y[w])&&++w<h;);v._next=b||null}}return(l=new Vt(l,r))._enter=s,l._exit=u,l},enter:function(){return new Vt(this._enter||this._groups.map(ft),this._parents)},exit:function(){return new Vt(this._exit||this._groups.map(ft),this._parents)},join:function(e,t,n){var a=this.enter(),r=this,i=this.exit(),a="function"==typeof e?(a=e(a))&&a.selection():a.append(e+"");return null!=t&&(r=(r=t(r))&&r.selection()),null==n?i.remove():n(i),a&&r?a.merge(r).order():r},merge:function(e){for(var e=e.selection?e.selection():e,t=this._groups,n=e._groups,a=t.length,e=n.length,r=Math.min(a,e),i=new Array(a),o=0;o<r;++o)for(var l,s=t[o],u=n[o],c=s.length,d=i[o]=new Array(c),m=0;m<c;++m)(l=s[m]||u[m])&&(d[m]=l);for(;o<a;++o)i[o]=t[o];return new Vt(i,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var a,r=e[t],i=r.length-1,o=r[i];0<=--i;)(a=r[i])&&(o&&4^a.compareDocumentPosition(o)&&o.parentNode.insertBefore(a,o),o=a);return this},sort:function(n){function e(e,t){return e&&t?n(e.__data__,t.__data__):!e-!t}n=n||vt;for(var t=this._groups,a=t.length,r=new Array(a),i=0;i<a;++i){for(var o,l=t[i],s=l.length,u=r[i]=new Array(s),c=0;c<s;++c)(o=l[c])&&(u[c]=o);u.sort(e)}return new Vt(r,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var a=e[t],r=0,i=a.length;r<i;++r){var o=a[r];if(o)return o}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,a=t.length;n<a;++n)for(var r,i=t[n],o=0,l=i.length;o<l;++o)(r=i[o])&&e.call(r,r.__data__,o,i);return this},attr:function(e,t){var n,a=Je(e);return arguments.length<2?(n=this.node(),a.local?n.getAttributeNS(a.space,a.local):n.getAttribute(a)):this.each((null==t?a.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?a.local?function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}:function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}:a.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(a,t))},style:function(e,t,n){return 1<arguments.length?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(t,n,a){return function(){var e=n.apply(this,arguments);null==e?this.style.removeProperty(t):this.style.setProperty(t,e,a)}}:function(e,t,n){return function(){this.style.setProperty(e,t,n)}})(e,t,null==n?"":n)):Et(this.node(),e)},property:function(e,t){return 1<arguments.length?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var n=wt(e+"");if(arguments.length<2){for(var a=_t(this.node()),r=-1,i=n.length;++r<i;)if(!a.contains(n[r]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?St:kt)(this,e)}}:t?function(e){return function(){St(this,e)}}:function(e){return function(){kt(this,e)}})(n,t))},text:function(e){return arguments.length?this.each(null==e?It:("function"==typeof e?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Ct:("function"==typeof e?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(Nt)},lower:function(){return this.each(Tt)},append:function(e){var t="function"==typeof e?e:Qe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:Qe(e),a=null==t?At:"function"==typeof t?t:tt(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),a.apply(this,arguments)||null)})},remove:function(){return this.each(Rt)},clone:function(e){return this.select(e?Mt:Ot)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var a,r,i=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return 0<=n&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}),o=i.length;if(!(arguments.length<2)){for(l=t?Pt:Dt,a=0;a<o;++a)this.each(l(i[a],t,n));return this}var l=this.node().__on;if(l)for(var s,u=0,c=l.length;u<c;++u)for(a=0,s=l[u];a<o;++a)if((r=i[a]).type===s.type&&r.name===s.name)return s.value},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return Lt(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return Lt(this,e,t)}})(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var a,r=e[t],i=0,o=r.length;i<o;++i)(a=r[i])&&(yield a)}};Y=jt;function Bt(e){return"string"==typeof e?new Vt([[document.querySelector(e)]],[document.documentElement]):new Vt([[e]],Ft)}function zt(e,t){if(e=function(e){for(var t;t=e.sourceEvent;)e=t;return e}(e),t=void 0===t?e.currentTarget:t){var n=t.ownerSVGElement||t;if(n.createSVGPoint)return(n=n.createSVGPoint()).x=e.clientX,n.y=e.clientY,[(n=n.matrixTransform(t.getScreenCTM().inverse())).x,n.y];if(t.getBoundingClientRect)return n=t.getBoundingClientRect(),[e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop]}return[e.pageX,e.pageY]}var Ut={passive:!1},Ht={capture:!0,passive:!1};function $t(e){e.stopImmediatePropagation()}function Zt(e){e.preventDefault(),e.stopImmediatePropagation()}function Wt(e){var t=e.document.documentElement,e=Bt(e).on("dragstart.drag",Zt,Ht);"onselectstart"in t?e.on("selectstart.drag",Zt,Ht):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Kt(e,t){var n=e.document.documentElement,a=Bt(e).on("dragstart.drag",null);t&&(a.on("click.drag",Zt,Ht),setTimeout(function(){a.on("click.drag",null)},0)),"onselectstart"in n?a.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Xt=e=>()=>e;function Yt(e,{sourceEvent:t,subject:n,target:a,identifier:r,active:i,x:o,y:l,dx:s,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:s,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}function qt(e){return!e.ctrlKey&&!e.button}function Gt(){return this.parentNode}function Jt(e,t){return null==t?{x:e.x,y:e.y}:t}function Qt(){return navigator.maxTouchPoints||"ontouchstart"in this}function en(e,t,n){(e.prototype=t.prototype=n).constructor=e}function tn(e,t){var n,a=Object.create(e.prototype);for(n in t)a[n]=t[n];return a}function nn(){}Yt.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var a="\\s*([+-]?\\d+)\\s*",r="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",an="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rn=/^#([0-9a-f]{3,8})$/,on=new RegExp(`^rgb\\(${a},${a},${a}\\)$`),ln=new RegExp(`^rgb\\(${an},${an},${an}\\)$`),sn=new RegExp(`^rgba\\(${a},${a},${a},${r}\\)$`),un=new RegExp(`^rgba\\(${an},${an},${an},${r}\\)$`),cn=new RegExp(`^hsl\\(${r},${an},${an}\\)$`),dn=new RegExp(`^hsla\\(${r},${an},${an},${r}\\)$`),mn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function fn(){return this.rgb().formatHex()}function pn(){return this.rgb().formatRgb()}function hn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=rn.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?gn(t):3===n?new bn(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?yn(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?yn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=on.exec(e))?new bn(t[1],t[2],t[3],1):(t=ln.exec(e))?new bn(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=sn.exec(e))?yn(t[1],t[2],t[3],t[4]):(t=un.exec(e))?yn(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=cn.exec(e))?kn(t[1],t[2]/100,t[3]/100,1):(t=dn.exec(e))?kn(t[1],t[2]/100,t[3]/100,t[4]):mn.hasOwnProperty(e)?gn(mn[e]):"transparent"===e?new bn(NaN,NaN,NaN,0):null}function gn(e){return new bn(e>>16&255,e>>8&255,255&e,1)}function yn(e,t,n,a){return new bn(e=a<=0?t=n=NaN:e,t,n,a)}function vn(e,t,n,a){return 1===arguments.length?(r=(r=e)instanceof nn?r:hn(r))?new bn((r=r.rgb()).r,r.g,r.b,r.opacity):new bn:new bn(e,t,n,null==a?1:a);var r}function bn(e,t,n,a){this.r=+e,this.g=+t,this.b=+n,this.opacity=+a}function En(){return"#"+Sn(this.r)+Sn(this.g)+Sn(this.b)}function wn(){var e=_n(this.opacity);return(1===e?"rgb(":"rgba(")+xn(this.r)+`, ${xn(this.g)}, `+xn(this.b)+(1===e?")":`, ${e})`)}function _n(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function xn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Sn(e){return((e=xn(e))<16?"0":"")+e.toString(16)}function kn(e,t,n,a){return a<=0?e=t=n=NaN:n<=0||1<=n?e=t=NaN:t<=0&&(e=NaN),new Cn(e,t,n,a)}function In(e){var t,n,a,r,i,o,l,s;return e instanceof Cn?new Cn(e.h,e.s,e.l,e.opacity):(e=e instanceof nn?e:hn(e))?e instanceof Cn?e:(t=(e=e.rgb()).r/255,n=e.g/255,a=e.b/255,r=Math.min(t,n,a),o=NaN,s=((i=Math.max(t,n,a))+r)/2,(l=i-r)?(o=t===i?(n-a)/l+6*(n<a):n===i?(a-t)/l+2:(t-n)/l+4,l/=s<.5?i+r:2-i-r,o*=60):l=0<s&&s<1?0:o,new Cn(o,l,s,e.opacity)):new Cn}function Cn(e,t,n,a){this.h=+e,this.s=+t,this.l=+n,this.opacity=+a}function Nn(e){return(e=(e||0)%360)<0?e+360:e}function Tn(e){return Math.max(0,Math.min(1,e||0))}function An(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Rn(e,t,n,a,r){var i=e*e,o=i*e;return((1-3*e+3*i-o)*t+(4-6*i+3*o)*n+(1+3*e+3*i-3*o)*a+o*r)/6}en(nn,hn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:fn,formatHex:fn,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return In(this).formatHsl()},formatRgb:pn,toString:pn}),en(bn,vn,tn(nn,{brighter(e){return e=null==e?1/.7:Math.pow(1/.7,e),new bn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new bn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new bn(xn(this.r),xn(this.g),xn(this.b),_n(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:En,formatHex:En,formatHex8:function(){return"#"+Sn(this.r)+Sn(this.g)+Sn(this.b)+Sn(255*(isNaN(this.opacity)?1:this.opacity))},formatRgb:wn,toString:wn})),en(Cn,function(e,t,n,a){return 1===arguments.length?In(e):new Cn(e,t,n,null==a?1:a)},tn(nn,{brighter(e){return e=null==e?1/.7:Math.pow(1/.7,e),new Cn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new Cn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,t=n+(n<.5?n:1-n)*t,n=2*n-t;return new bn(An(240<=e?e-240:120+e,n,t),An(e,n,t),An(e<120?240+e:e-120,n,t),this.opacity)},clamp(){return new Cn(Nn(this.h),Tn(this.s),Tn(this.l),_n(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){var e=_n(this.opacity);return(1===e?"hsl(":"hsla(")+Nn(this.h)+`, ${100*Tn(this.s)}%, ${100*Tn(this.l)}%`+(1===e?")":`, ${e})`)}}));var On=e=>()=>e;function Mn(i){return 1==(i=+i)?Dn:function(e,t){return t-e?(n=e,a=t,r=i,n=Math.pow(n,r),a=Math.pow(a,r)-n,r=1/r,function(e){return Math.pow(n+e*a,r)}):On(isNaN(e)?t:e);var n,a,r}}function Dn(e,t){var n,a,r=t-e;return r?(n=e,a=r,function(e){return n+e*a}):On(isNaN(e)?t:e)}var Pn=function e(t){var o=Mn(t);function n(t,e){var n=o((t=vn(t)).r,(e=vn(e)).r),a=o(t.g,e.g),r=o(t.b,e.b),i=Dn(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=a(e),t.b=r(e),t.opacity=i(e),t+""}}return n.gamma=e,n}(1);function Ln(l){return function(e){for(var t,n=e.length,a=new Array(n),r=new Array(n),i=new Array(n),o=0;o<n;++o)t=vn(e[o]),a[o]=t.r||0,r[o]=t.g||0,i[o]=t.b||0;return a=l(a),r=l(r),i=l(i),t.opacity=1,function(e){return t.r=a(e),t.g=r(e),t.b=i(e),t+""}}}Ln(function(o){var l=o.length-1;return function(e){var t=e<=0?e=0:1<=e?l-(e=1):Math.floor(e*l),n=o[t],a=o[t+1],r=0<t?o[t-1]:2*n-a,i=t<l-1?o[t+2]:2*a-n;return Rn((e-t/l)*l,r,n,a,i)}}),Ln(function(o){var l=o.length;return function(e){var t=Math.floor(((e%=1)<0?++e:e)*l),n=o[(t+l-1)%l],a=o[t%l],r=o[(t+1)%l],i=o[(t+2)%l];return Rn((e-t/l)*l,n,a,r,i)}});function Fn(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}var Vn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jn=new RegExp(Vn.source,"g");var Bn,zn=180/Math.PI,Un={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Hn(e,t,n,a,r,i){var o,l,s;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(s=e*n+t*a)&&(n-=e*s,a-=t*s),(l=Math.sqrt(n*n+a*a))&&(n/=l,a/=l,s/=l),e*a<t*n&&(e=-e,t=-t,s=-s,o=-o),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*zn,skewX:Math.atan(s)*zn,scaleX:o,scaleY:l}}function $n(m,f,p,h){function g(e){return e.length?e.pop()+" ":""}return function(e,t){var n,a,r,i,o,l,s,u,c=[],d=[];return e=m(e),t=m(t),r=e.translateX,i=e.translateY,s=t.translateX,l=t.translateY,o=c,a=d,r!==s||i!==l?(n=o.push("translate(",null,f,null,p),a.push({i:n-4,x:Fn(r,s)},{i:n-2,x:Fn(i,l)})):(s||l)&&o.push("translate("+s+f+l+p),a=e.rotate,r=t.rotate,n=c,i=d,a!==r?(180<a-r?r+=360:180<r-a&&(a+=360),i.push({i:n.push(g(n)+"rotate(",null,h)-2,x:Fn(a,r)})):r&&n.push(g(n)+"rotate("+r+h),o=e.skewX,s=t.skewX,l=c,i=d,o!==s?i.push({i:l.push(g(l)+"skewX(",null,h)-2,x:Fn(o,s)}):s&&l.push(g(l)+"skewX("+s+h),a=e.scaleX,r=e.scaleY,i=t.scaleX,o=t.scaleY,l=c,s=d,a!==i||r!==o?(u=l.push(g(l)+"scale(",null,",",null,")"),s.push({i:u-4,x:Fn(a,i)},{i:u-2,x:Fn(r,o)})):1===i&&1===o||l.push(g(l)+"scale("+i+","+o+")"),e=t=null,function(e){for(var t,n=-1,a=d.length;++n<a;)c[(t=d[n]).i]=t.x(e);return c.join("")}}}var Zn=$n(function(e){return(e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"")).isIdentity?Un:Hn(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),Wn=$n(function(e){return null!=e&&((Bn=Bn||document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("transform",e),e=Bn.transform.baseVal.consolidate())?Hn((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Un},", ",")",")");function Kn(e){return((e=Math.exp(e))+1/e)/2}var Xn,Yn,qn=function n(d,m,f){function e(e,t){var a,r,i,o=e[0],l=e[1],s=e[2],e=t[0],n=t[1],t=t[2],u=e-o,c=n-l,e=u*u+c*c;return(t=e<1e-12?(i=Math.log(t/s)/d,function(e){return[o+e*u,l+e*c,s*Math.exp(d*e*i)]}):(a=Math.sqrt(e),n=(t*t-s*s+f*e)/(2*s*m*a),e=(t*t-s*s-f*e)/(2*t*m*a),r=Math.log(Math.sqrt(n*n+1)-n),i=(Math.log(Math.sqrt(e*e+1)-e)-r)/d,function(e){var e=e*i,t=Kn(r),n=s/(m*a)*(t*(n=d*e+r,((n=Math.exp(2*n))-1)/(n+1))-(n=r,((n=Math.exp(r))-1/n)/2));return[o+n*u,l+n*c,s*t/Kn(d*e+r)]})).duration=1e3*i*d/Math.SQRT2,t}return e.rho=function(e){var e=Math.max(.001,+e),t=e*e;return n(e,t,t*t)},e}(Math.SQRT2,2,4),Gn=0,Jn=0,Qn=0,ea=1e3,ta=0,na=0,aa=0,ra="object"==typeof performance&&performance.now?performance:Date,ia="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function oa(){return na||(ia(la),na=ra.now()+aa)}function la(){na=0}function sa(){this._call=this._time=this._next=null}function ua(e,t,n){var a=new sa;return a.restart(e,t,n),a}function ca(){na=(ta=ra.now())+aa,Gn=Jn=0;try{oa(),++Gn;for(var e,t=Xn;t;)0<=(e=na-t._time)&&t._call.call(void 0,e),t=t._next;--Gn}finally{for(var n,a,r=Xn,i=1/(Gn=0);r;)r=r._call?(i>r._time&&(i=r._time),(n=r)._next):(a=r._next,r._next=null,n?n._next=a:Xn=a);Yn=n,ma(i),na=0}}function da(){var e=ra.now(),t=e-ta;ea<t&&(aa-=t,ta=e)}function ma(e){Gn||(Jn=Jn&&clearTimeout(Jn),24<e-na?(e<1/0&&(Jn=setTimeout(ca,e-ra.now()-aa)),Qn=Qn&&clearInterval(Qn)):(Qn||(ta=ra.now(),Qn=setInterval(da,ea)),Gn=1,ia(ca)))}function fa(t,n,e){var a=new sa;return n=null==n?0:+n,a.restart(e=>{a.stop(),t(e+n)},n,e),a}sa.prototype=ua.prototype={constructor:sa,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?oa():+n)+(null==t?0:+t),this._next||Yn===this||(Yn?Yn._next=this:Xn=this,Yn=this),this._call=e,this._time=n,ma()},stop:function(){this._call&&(this._call=null,this._time=1/0,ma())}};var pa=Ye("start","end","cancel","interrupt"),ha=[],ga=0,ya=1,va=2,ba=3,Ea=4,wa=5,_a=6;function xa(e,t,n,a,r,i){var o,l,s,u,c,d=e.__transition;if(d){if(n in d)return}else e.__transition={};function m(e){var t,n,a,r;if(s.state!==ya)return p();for(t in c)if((r=c[t]).name===s.name){if(r.state===ba)return fa(m);r.state===Ea?(r.state=_a,r.timer.stop(),r.on.call("interrupt",o,o.__data__,r.index,r.group),delete c[t]):+t<l&&(r.state=_a,r.timer.stop(),r.on.call("cancel",o,o.__data__,r.index,r.group),delete c[t])}if(fa(function(){s.state===ba&&(s.state=Ea,s.timer.restart(f,s.delay,s.time),f(e))}),s.state=va,s.on.call("start",o,o.__data__,s.index,s.group),s.state===va){for(s.state=ba,u=new Array(a=s.tween.length),t=0,n=-1;t<a;++t)(r=s.tween[t].value.call(o,o.__data__,s.index,s.group))&&(u[++n]=r);u.length=n+1}}function f(e){for(var t=e<s.duration?s.ease.call(null,e/s.duration):(s.timer.restart(p),s.state=wa,1),n=-1,a=u.length;++n<a;)u[n].call(o,t);s.state===wa&&(s.on.call("end",o,o.__data__,s.index,s.group),p())}function p(){for(var e in s.state=_a,s.timer.stop(),delete c[l],c)return;delete o.__transition}o=e,l=n,s={name:t,index:a,group:r,on:pa,tween:ha,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:ga},((c=o.__transition)[l]=s).timer=ua(function(e){s.state=ya,s.timer.restart(m,s.delay,s.time),s.delay<=e&&m(e-s.delay)},0,s.time)}function Sa(e,t){e=Ia(e,t);if(e.state>ga)throw new Error("too late; already scheduled");return e}function ka(e,t){e=Ia(e,t);if(e.state>ba)throw new Error("too late; already running");return e}function Ia(e,t){e=e.__transition;if(e=e&&e[t])return e;throw new Error("transition not found")}function Ca(e,t){var n,a,r,i=e.__transition,o=!0;if(i){for(r in t=null==t?null:t+"",i)(n=i[r]).name!==t?o=!1:(a=n.state>va&&n.state<wa,n.state=_a,n.timer.stop(),n.on.call(a?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[r]);o&&delete e.__transition}}function Na(e,t,n){var a=e._id;return e.each(function(){var e=ka(this,a);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return Ia(e,a).value[t]}}function Ta(e,t){var n;return("number"==typeof t?Fn:t instanceof hn?Pn:(n=hn(t))?(t=n,Pn):function(e,a){var t,n,r,i,o,l=Vn.lastIndex=jn.lastIndex=0,s=-1,u=[],c=[];for(e+="",a+="";(t=Vn.exec(e))&&(n=jn.exec(a));)(r=n.index)>l&&(r=a.slice(l,r),u[s]?u[s]+=r:u[++s]=r),(t=t[0])===(n=n[0])?u[s]?u[s]+=n:u[++s]=n:(u[++s]=null,c.push({i:s,x:Fn(t,n)})),l=jn.lastIndex;return l<a.length&&(r=a.slice(l),u[s]?u[s]+=r:u[++s]=r),u.length<2?c[0]?(o=c[0].x,function(e){return o(e)+""}):(i=a,function(){return i}):(a=c.length,function(e){for(var t,n=0;n<a;++n)u[(t=c[n]).i]=t.x(e);return u.join("")})})(e,t)}function Aa(a,r){var i,o;function e(){var t,n,e=r.apply(this,arguments);return i=e!==o?(o=e)&&(t=a,n=e,function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}):i}return e._value=r,e}function Ra(a,r){var i,o;function e(){var t,n,e=r.apply(this,arguments);return i=e!==o?(o=e)&&(t=a,n=e,function(e){this.setAttribute(t,n.call(this,e))}):i}return e._value=r,e}var Oa=Y.prototype.constructor;function Ma(e){return function(){this.style.removeProperty(e)}}function Da(r,i,o){var l,s;function e(){var t,n,a,e=i.apply(this,arguments);return l=e!==s?(s=e)&&(t=r,n=e,a=o,function(e){this.style.setProperty(t,n.call(this,e),a)}):l}return e._value=i,e}function Pa(n){var a,r;function e(){var t,e=n.apply(this,arguments);return a=e!==r?(r=e)&&(t=e,function(e){this.textContent=t.call(this,e)}):a}return e._value=n,e}var La=0;function Fa(e,t,n,a){this._groups=e,this._parents=t,this._name=n,this._id=a}a=Y.prototype;Fa.prototype={constructor:Fa,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=tt(e));for(var a=this._groups,r=a.length,i=new Array(r),o=0;o<r;++o)for(var l,s,u=a[o],c=u.length,d=i[o]=new Array(c),m=0;m<c;++m)(l=u[m])&&(s=e.call(l,l.__data__,m,u))&&("__data__"in l&&(s.__data__=l.__data__),d[m]=s,xa(d[m],t,n,m,d,Ia(l,n)));return new Fa(i,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=at(e));for(var a=this._groups,r=a.length,i=[],o=[],l=0;l<r;++l)for(var s,u=a[l],c=u.length,d=0;d<c;++d)if(s=u[d]){for(var m,f=e.call(s,s.__data__,d,u),p=Ia(s,n),h=0,g=f.length;h<g;++h)(m=f[h])&&xa(m,t,n,h,f,p);i.push(f),o.push(s)}return new Fa(i,o,t,n)},selectChild:a.selectChild,selectChildren:a.selectChildren,filter:function(e){"function"!=typeof e&&(e=it(e));for(var t=this._groups,n=t.length,a=new Array(n),r=0;r<n;++r)for(var i,o=t[r],l=o.length,s=a[r]=[],u=0;u<l;++u)(i=o[u])&&e.call(i,i.__data__,u,o)&&s.push(i);return new Fa(a,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,a=t.length,e=n.length,r=Math.min(a,e),i=new Array(a),o=0;o<r;++o)for(var l,s=t[o],u=n[o],c=s.length,d=i[o]=new Array(c),m=0;m<c;++m)(l=s[m]||u[m])&&(d[m]=l);for(;o<a;++o)i[o]=t[o];return new Fa(i,this._parents,this._name,this._id)},selection:function(){return new Oa(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=++La,a=this._groups,r=a.length,i=0;i<r;++i)for(var o,l=a[i],s=l.length,u=0;u<s;++u)(o=l[u])&&xa(o,e,n,u,l,{time:(o=Ia(o,t)).time+o.delay+o.duration,delay:0,duration:o.duration,ease:o.ease});return new Fa(a,this._parents,e,n)},call:a.call,nodes:a.nodes,node:a.node,size:a.size,empty:a.empty,each:a.each,on:function(e,t){var n,a,r,i,o,l,s=this._id;return arguments.length<2?Ia(this.node(),s).on.on(e):this.each((n=s,r=t,l=((a=e)+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return!(e=0<=t?e.slice(0,t):e)||"start"===e})?Sa:ka,function(){var e=l(this,n),t=e.on;t!==i&&(o=(i=t).copy()).on(a,r),e.on=o}))},attr:function(e,t){var n=Je(e),a="transform"===n?Wn:Ta;return this.attrTween(e,"function"==typeof t?(n.local?function(a,r,i){var o,l,s;return function(){var e,t,n=i(this);if(null!=n)return(e=this.getAttributeNS(a.space,a.local))===(t=n+"")?null:e===o&&t===l?s:(l=t,s=r(o=e,n));this.removeAttributeNS(a.space,a.local)}}:function(a,r,i){var o,l,s;return function(){var e,t,n=i(this);if(null!=n)return(e=this.getAttribute(a))===(t=n+"")?null:e===o&&t===l?s:(l=t,s=r(o=e,n));this.removeAttribute(a)}})(n,a,Na(this,"attr."+e,t)):null==t?(n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}})(n):(n.local?function(t,n,a){var r,i,o=a+"";return function(){var e=this.getAttributeNS(t.space,t.local);return e===o?null:e===r?i:i=n(r=e,a)}}:function(t,n,a){var r,i,o=a+"";return function(){var e=this.getAttribute(t);return e===o?null:e===r?i:i=n(r=e,a)}})(n,a,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var a=Je(e);return this.tween(n,(a.local?Aa:Ra)(a,t))},style:function(e,t,n){var a,r,i,o,l,s,u,c,d,m,f,p,h,g,y,v,b,E,w,_,x,S,k,I,C,N="transform"==(e+="")?Zn:Ta;return null==t?this.styleTween(e,(x=e,S=N,function(){var e=Et(this,x),t=(this.style.removeProperty(x),Et(this,x));return e===t?null:e===k&&t===I?C:C=S(k=e,I=t)})).on("end.style."+e,Ma(e)):"function"==typeof t?this.styleTween(e,(v=N,b=Na(this,"style."+(y=e),t),function(){var e=Et(this,y),t=b(this),n=t+"";return null==t&&(this.style.removeProperty(y),n=t=Et(this,y)),e===n?null:e===E&&n===w?_:(w=n,_=v(E=e,t))})).each((u=this._id,g="end."+(h="style."+(c=e)),function(){var e=ka(this,u),t=e.on,n=null==e.value[h]?p=p||Ma(c):void 0;t===d&&f===n||(m=(d=t).copy()).on(g,f=n),e.on=m})):this.styleTween(e,(a=e,r=N,s=(i=t)+"",function(){var e=Et(this,a);return e===s?null:e===o?l:l=r(o=e,i)}),n).on("end.style."+e,null)},styleTween:function(e,t,n){var a="style."+(e+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(null==t)return this.tween(a,null);if("function"!=typeof t)throw new Error;return this.tween(a,Da(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?(n=Na(this,"text",e),function(){var e=n(this);this.textContent=null==e?"":e}):(t=null==e?"":e+"",function(){this.textContent=t}));var t,n},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,Pa(e))},remove:function(){return this.on("end.remove",(n=this._id,function(){var e,t=this.parentNode;for(e in this.__transition)if(+e!==n)return;t&&t.removeChild(this)}));var n},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var a,r=Ia(this.node(),n).tween,i=0,o=r.length;i<o;++i)if((a=r[i]).name===e)return a.value;return null}return this.each((null==t?function(r,i){var o,l;return function(){var e=ka(this,r),t=e.tween;if(t!==o)for(var n=0,a=(l=o=t).length;n<a;++n)if(l[n].name===i){(l=l.slice()).splice(n,1);break}e.tween=l}}:function(i,o,l){var s,u;if("function"!=typeof l)throw new Error;return function(){var e=ka(this,i),t=e.tween;if(t!==s){u=(s=t).slice();for(var n={name:o,value:l},a=0,r=u.length;a<r;++a)if(u[a].name===o){u[a]=n;break}a===r&&u.push(n)}e.tween=u}})(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){Sa(this,e).delay=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){Sa(this,e).delay=t}})(t,e)):Ia(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){ka(this,e).duration=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){ka(this,e).duration=t}})(t,e)):Ia(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){ka(this,e).ease=t}}(t,e)):Ia(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each((t=this._id,n=e,function(){var e=n.apply(this,arguments);if("function"!=typeof e)throw new Error;ka(this,t).ease=e}));var t,n},end:function(){var r,i,o=this,l=o._id,s=o.size();return new Promise(function(e,t){var n={value:t},a={value:function(){0==--s&&e()}};o.each(function(){var e=ka(this,l),t=e.on;t!==r&&((i=(r=t).copy())._.cancel.push(n),i._.interrupt.push(n),i._.end.push(a)),e.on=i}),0===s&&e()})},[Symbol.iterator]:a[Symbol.iterator]};var Va={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};Y.prototype.interrupt=function(e){return this.each(function(){Ca(this,e)})},Y.prototype.transition=function(e){var t,n;e=e instanceof Fa?(t=e._id,e._name):(t=++La,(n=Va).time=oa(),null==e?null:e+"");for(var a=this._groups,r=a.length,i=0;i<r;++i)for(var o,l=a[i],s=l.length,u=0;u<s;++u)(o=l[u])&&xa(o,e,t,u,l,n||function(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}(o,t));return new Fa(a,this._parents,e,t)};var ja=e=>()=>e;function Ba(e,{sourceEvent:t,target:n,transform:a,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:a,enumerable:!0,configurable:!0},_:{value:r}})}function za(e,t,n){this.k=e,this.x=t,this.y=n}za.prototype={constructor:za,scale:function(e){return 1===e?this:new za(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new za(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ua=new za(1,0,0);function Ha(e){e.stopImmediatePropagation()}function $a(e){e.preventDefault(),e.stopImmediatePropagation()}function Za(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function Wa(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function Ka(){return this.__zoom||Ua}function Xa(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Ya(){return navigator.maxTouchPoints||"ontouchstart"in this}function qa(e,t,n){var a=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],t=e.invertY(t[1][1])-n[1][1];return e.translate(a<r?(a+r)/2:Math.min(0,a)||Math.max(0,r),i<t?(i+t)/2:Math.min(0,i)||Math.max(0,t))}function Ga(){var u,c,s,d=Za,m=Wa,f=qa,o=Xa,t=Ya,l=[0,1/0],p=[[-1/0,-1/0],[1/0,1/0]],h=250,g=qn,n=Ye("start","zoom","end"),y=500,v=150,b=0,E=10;function w(e){e.property("__zoom",Ka).on("wheel.zoom",r,{passive:!1}).on("mousedown.zoom",i).on("dblclick.zoom",C).filter(t).on("touchstart.zoom",N).on("touchmove.zoom",T).on("touchend.zoom touchcancel.zoom",A).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function _(e,t){return(t=Math.max(l[0],Math.min(l[1],t)))===e.k?e:new za(t,e.x,e.y)}function x(e,t,n){var a=t[0]-n[0]*e.k,t=t[1]-n[1]*e.k;return a===e.x&&t===e.y?e:new za(e.k,a,t)}function S(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function k(e,n,s,u){e.on("start.zoom",function(){I(this,arguments).event(u).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(u).end()}).tween("zoom",function(){var e=arguments,a=I(this,e).event(u),t=m.apply(this,e),r=null==s?S(t):"function"==typeof s?s.apply(this,e):s,i=Math.max(t[1][0]-t[0][0],t[1][1]-t[0][1]),t=this.__zoom,o="function"==typeof n?n.apply(this,e):n,l=g(t.invert(r).concat(i/t.k),o.invert(r).concat(i/o.k));return function(e){var t,n;e=1===e?o:(t=l(e),new za(n=i/t[2],r[0]-t[0]*n,r[1]-t[1]*n)),a.zoom(null,e)}})}function I(e,t,n){return!n&&e.__zooming||new a(e,t)}function a(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=m.apply(e,t),this.taps=0}function r(e,...t){if(d.apply(this,arguments)){var n=I(this,t).event(e),a=this.__zoom,r=Math.max(l[0],Math.min(l[1],a.k*Math.pow(2,o.apply(this,arguments)))),i=zt(e);if(n.wheel)n.mouse[0][0]===i[0]&&n.mouse[0][1]===i[1]||(n.mouse[1]=a.invert(n.mouse[0]=i)),clearTimeout(n.wheel);else{if(a.k===r)return;n.mouse=[i,a.invert(i)],Ca(this),n.start()}$a(e),n.wheel=setTimeout(function(){n.wheel=null,n.end()},v),n.zoom("mouse",f(x(_(a,r),n.mouse[0],n.mouse[1]),n.extent,p))}}function i(e,...t){var a,r,n,i,o,l;!s&&d.apply(this,arguments)&&(a=e.currentTarget,r=I(this,t,!0).event(e),n=Bt(e.view).on("mousemove.zoom",function(e){{var t,n;$a(e),r.moved||(t=e.clientX-o,n=e.clientY-l,r.moved=b<t*t+n*n)}r.event(e).zoom("mouse",f(x(r.that.__zoom,r.mouse[0]=zt(e,a),r.mouse[1]),r.extent,p))},!0).on("mouseup.zoom",function(e){n.on("mousemove.zoom mouseup.zoom",null),Kt(e.view,r.moved),$a(e),r.event(e).end()},!0),i=zt(e,a),o=e.clientX,l=e.clientY,Wt(e.view),Ha(e),r.mouse=[i,this.__zoom.invert(i)],Ca(this),r.start())}function C(e,...t){var n,a,r,i;d.apply(this,arguments)&&(i=this.__zoom,n=zt(e.changedTouches?e.changedTouches[0]:e,this),a=i.invert(n),r=i.k*(e.shiftKey?.5:2),i=f(x(_(i,r),n,a),m.apply(this,t),p),$a(e),0<h?Bt(this).transition().duration(h).call(k,i,n,e):Bt(this).call(w.transform,i,n,e))}function N(e,...t){if(d.apply(this,arguments)){var n,a,r,i,o=e.touches,l=o.length,s=I(this,t,e.changedTouches.length===l).event(e);for(Ha(e),a=0;a<l;++a)i=[i=zt(r=o[a],this),this.__zoom.invert(i),r.identifier],s.touch0?s.touch1||s.touch0[2]===i[2]||(s.touch1=i,s.taps=0):(s.touch0=i,n=!0,s.taps=1+!!u);u=u&&clearTimeout(u),n&&(s.taps<2&&(c=i[0],u=setTimeout(function(){u=null},y)),Ca(this),s.start())}}function T(e,...t){if(this.__zooming){var n,a=I(this,t).event(e),r=e.changedTouches,i=r.length;for($a(e),n=0;n<i;++n)d=zt(c=r[n],this),a.touch0&&a.touch0[2]===c.identifier?a.touch0[0]=d:a.touch1&&a.touch1[2]===c.identifier&&(a.touch1[0]=d);if(c=a.that.__zoom,a.touch1)var t=a.touch0[0],e=a.touch0[1],o=a.touch1[0],l=a.touch1[1],s=(s=o[0]-t[0])*s+(s=o[1]-t[1])*s,u=(u=l[0]-e[0])*u+(u=l[1]-e[1])*u,c=_(c,Math.sqrt(s/u)),d=[(t[0]+o[0])/2,(t[1]+o[1])/2],s=[(e[0]+l[0])/2,(e[1]+l[1])/2];else{if(!a.touch0)return;d=a.touch0[0],s=a.touch0[1]}a.zoom("touch",f(x(c,d,s),a.extent,p))}}function A(e,...t){if(this.__zooming){var n,a,r,i=I(this,t).event(e),o=e.changedTouches,l=o.length;for(Ha(e),s&&clearTimeout(s),s=setTimeout(function(){s=null},y),n=0;n<l;++n)r=o[n],i.touch0&&i.touch0[2]===r.identifier?delete i.touch0:i.touch1&&i.touch1[2]===r.identifier&&delete i.touch1;i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0?i.touch0[1]=this.__zoom.invert(i.touch0[0]):(i.end(),2===i.taps&&(r=zt(r,this),Math.hypot(c[0]-r[0],c[1]-r[1])<E)&&(a=Bt(this).on("dblclick.zoom"))&&a.apply(this,arguments))}}return w.transform=function(e,t,n,a){var r=e.selection?e.selection():e;r.property("__zoom",Ka),e!==r?k(e,t,n,a):r.interrupt().each(function(){I(this,arguments).event(a).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},w.scaleBy=function(e,t,n,a){w.scaleTo(e,function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)},n,a)},w.scaleTo=function(e,i,o,t){w.transform(e,function(){var e=m.apply(this,arguments),t=this.__zoom,n=null==o?S(e):"function"==typeof o?o.apply(this,arguments):o,a=t.invert(n),r="function"==typeof i?i.apply(this,arguments):i;return f(x(_(t,r),n,a),e,p)},o,t)},w.translateBy=function(e,t,n,a){w.transform(e,function(){return f(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),m.apply(this,arguments),p)},null,a)},w.translateTo=function(e,a,r,i,t){w.transform(e,function(){var e=m.apply(this,arguments),t=this.__zoom,n=null==i?S(e):"function"==typeof i?i.apply(this,arguments):i;return f(Ua.translate(n[0],n[1]).scale(t.k).translate("function"==typeof a?-a.apply(this,arguments):-a,"function"==typeof r?-r.apply(this,arguments):-r),e,p)},i,t)},a.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this).emit("start"),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=Bt(this.that).datum();n.call(e,this.that,new Ba(e,{sourceEvent:this.sourceEvent,target:w,type:e,transform:this.that.__zoom,dispatch:n}),t)}},w.wheelDelta=function(e){return arguments.length?(o="function"==typeof e?e:ja(+e),w):o},w.filter=function(e){return arguments.length?(d="function"==typeof e?e:ja(!!e),w):d},w.touchable=function(e){return arguments.length?(t="function"==typeof e?e:ja(!!e),w):t},w.extent=function(e){return arguments.length?(m="function"==typeof e?e:ja([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),w):m},w.scaleExtent=function(e){return arguments.length?(l[0]=+e[0],l[1]=+e[1],w):[l[0],l[1]]},w.translateExtent=function(e){return arguments.length?(p[0][0]=+e[0][0],p[1][0]=+e[1][0],p[0][1]=+e[0][1],p[1][1]=+e[1][1],w):[[p[0][0],p[0][1]],[p[1][0],p[1][1]]]},w.constrain=function(e){return arguments.length?(f=e,w):f},w.duration=function(e){return arguments.length?(h=+e,w):h},w.interpolate=function(e){return arguments.length?(g=e,w):g},w.on=function(){var e=n.on.apply(n,arguments);return e===n?w:e},w.clickDistance=function(e){return arguments.length?(b=(e=+e)*e,w):Math.sqrt(b)},w.tapDistance=function(e){return arguments.length?(E=+e,w):E},w}t(q(),1);var Ja=(0,ut.createContext)(null),Qa=Ja.Provider,er={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},tr=er.error001();function nr(e,t){var n=(0,ut.useContext)(Ja);if(null===n)throw new Error(tr);return ze(n,e,t)}var ar=()=>{const e=(0,ut.useContext)(Ja);if(null===e)throw new Error(tr);return(0,ut.useMemo)(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},rr=e=>e.userSelectionActive?"none":"all";function ir({position:e,children:t,className:n,style:a,...r}){var i=nr(rr),e=(""+e).split("-");return ut.default.createElement("div",{className:ct(["react-flow__panel",n,...e]),style:{...a,pointerEvents:i},...r},t)}function or({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:ut.default.createElement(ir,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},ut.default.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}var lr=(0,ut.memo)(({x:e,y:t,label:n,labelStyle:a={},labelShowBg:r=!0,labelBgStyle:i={},labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:s,className:u,...c})=>{const d=(0,ut.useRef)(null),[m,f]=(0,ut.useState)({x:0,y:0,width:0,height:0});u=ct(["react-flow__edge-textwrapper",u]);return(0,ut.useEffect)(()=>{var e;d.current&&(e=d.current.getBBox(),f({x:e.x,y:e.y,width:e.width,height:e.height}))},[n]),void 0!==n&&n?ut.default.createElement("g",{transform:`translate(${e-m.width/2} ${t-m.height/2})`,className:u,visibility:m.width?"visible":"hidden",...c},r&&ut.default.createElement("rect",{width:m.width+2*o[0],x:-o[0],y:-o[1],height:m.height+2*o[1],className:"react-flow__edge-textbg",style:i,rx:l,ry:l}),ut.default.createElement("text",{className:"react-flow__edge-text",y:m.height/2,dy:"0.3em",ref:d,style:a},n),s):null}),sr=e=>({width:e.offsetWidth,height:e.offsetHeight}),ur=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),cr=(e={x:0,y:0},t)=>({x:ur(e.x,t[0][0],t[1][0]),y:ur(e.y,t[0][1],t[1][1])}),dr=(e,t,n)=>e<t?ur(Math.abs(e-t),1,50)/50:n<e?-ur(Math.abs(e-n),1,50)/50:0,mr=(e,t)=>{return[20*dr(e.x,35,t.width-35),20*dr(e.y,35,t.height-35)]},fr=e=>e.getRootNode?.()||window?.document,pr=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),hr=({x:e,y:t,width:n,height:a})=>({x:e,y:t,x2:e+n,y2:t+a}),gr=({x:e,y:t,x2:n,y2:a})=>({x:e,y:t,width:n-e,height:a-t}),yr=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),vr=(e,t)=>gr(pr(hr(e),hr(t))),br=(e,t)=>{var n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),e=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*e)},Er=e=>wr(e.width)&&wr(e.height)&&wr(e.x)&&wr(e.y),wr=e=>!isNaN(e)&&isFinite(e),_r=Symbol.for("internals"),xr=["Enter"," ","Escape"],Sr=(e,t)=>{console.warn(`[React Flow]: ${t} Help: https://reactflow.dev/error#`+e)},kr=e=>"nativeEvent"in e;function Ir(e){e=(kr(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(e?.nodeName)||e?.hasAttribute("contenteditable")||!!e?.closest(".nokey")}var Cr,Nr,Tr,Ar,O,Rr=e=>"clientX"in e,Or=(e,t)=>{var n=Rr(e),a=(n?e:e.touches?.[0]).clientX,n=(n?e:e.touches?.[0]).clientY;return{x:a-(t?.left??0),y:n-(t?.top??0)}},Mr=()=>"undefined"!=typeof navigator&&0<=navigator?.userAgent?.indexOf("Mac"),Dr=({id:e,path:t,labelX:n,labelY:a,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:s,labelBgBorderRadius:u,style:c,markerEnd:d,markerStart:m,interactionWidth:f=20})=>ut.default.createElement(ut.default.Fragment,null,ut.default.createElement("path",{id:e,style:c,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:d,markerStart:m}),f&&ut.default.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:f,className:"react-flow__edge-interaction"}),r&&wr(n)&&wr(a)?ut.default.createElement(lr,{x:n,y:a,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:s,labelBgBorderRadius:u}):null);function Pr(n,a,r){return void 0===r?r:e=>{var t=a().edges.find(e=>e.id===n);t&&r(e,{...t})}}function Lr({sourceX:e,sourceY:t,targetX:n,targetY:a}){var r=Math.abs(n-e)/2,e=n<e?n+r:n-r,n=Math.abs(a-t)/2;return[e,a<t?a+n:a-n,r,n]}function Fr({sourceX:e,sourceY:t,targetX:n,targetY:a,sourceControlX:r,sourceControlY:i,targetControlX:o,targetControlY:l}){r=.125*e+.375*r+.375*o+.125*n,o=.125*t+.375*i+.375*l+.125*a;return[r,o,Math.abs(r-e),Math.abs(o-t)]}function Vr({pos:e,x1:t,y1:n,x2:a,y2:r}){return e===O.Left||e===O.Right?[.5*(t+a),n]:[t,.5*(n+r)]}function jr({sourceX:e,sourceY:t,sourcePosition:n=O.Bottom,targetX:a,targetY:r,targetPosition:i=O.Top}){var[n,o]=Vr({pos:n,x1:e,y1:t,x2:a,y2:r}),[i,l]=Vr({pos:i,x1:a,y1:r,x2:e,y2:t}),[s,u,c,d]=Fr({sourceX:e,sourceY:t,targetX:a,targetY:r,sourceControlX:n,sourceControlY:o,targetControlX:i,targetControlY:l});return[`M${e},${t} C${n},${o} ${i},${l} ${a},`+r,s,u,c,d]}Dr.displayName="BaseEdge",(an=Cr=Cr||{}).Strict="strict",an.Loose="loose",(r=Nr=Nr||{}).Free="free",r.Vertical="vertical",r.Horizontal="horizontal",(a=Tr=Tr||{}).Partial="partial",a.Full="full",(Y=Ar=Ar||{}).Bezier="default",Y.Straight="straight",Y.Step="step",Y.SmoothStep="smoothstep",Y.SimpleBezier="simplebezier",(an=i=i||{}).Arrow="arrow",an.ArrowClosed="arrowclosed",(r=O=O||{}).Left="left",r.Top="top",r.Right="right",r.Bottom="bottom";var Br=(0,ut.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:a,sourcePosition:r=O.Bottom,targetPosition:i=O.Top,label:o,labelStyle:l,labelShowBg:s,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:m,markerEnd:f,markerStart:p,interactionWidth:h})=>{var[e,t,r]=jr({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:a,targetPosition:i});return ut.default.createElement(Dr,{path:e,labelX:t,labelY:r,label:o,labelStyle:l,labelShowBg:s,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:m,markerEnd:f,markerStart:p,interactionWidth:h})}),zr=(Br.displayName="SimpleBezierEdge",{[O.Left]:{x:-1,y:0},[O.Right]:{x:1,y:0},[O.Top]:{x:0,y:-1},[O.Bottom]:{x:0,y:1}}),Ur=({source:e,sourcePosition:t=O.Bottom,target:n})=>t===O.Left||t===O.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Hr=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function $r({sourceX:e,sourceY:t,sourcePosition:n=O.Bottom,targetX:a,targetY:r,targetPosition:i=O.Top,borderRadius:o=5,centerX:l,centerY:s,offset:u=20}){const[c,d,m,f,p]=function({source:e,sourcePosition:t=O.Bottom,target:n,targetPosition:a=O.Top,center:r,offset:i}){var o=zr[t],l=zr[a],s={x:e.x+o.x*i,y:e.y+o.y*i},u={x:n.x+l.x*i,y:n.y+l.y*i},c=0!==(d=Ur({source:s,sourcePosition:t,target:u})).x?"x":"y",d=d[c];let m=[],f,p;var h={x:0,y:0},g={x:0,y:0},[y,v,b,E]=Lr({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});return o[c]*l[c]==-1?(f=r.x??y,p=r.y??v,y=[{x:f,y:s.y},{x:f,y:u.y}],r=[{x:s.x,y:p},{x:u.x,y:p}],m=o[c]===d?"x"==c?y:r:"x"==c?r:y):(v=[{x:s.x,y:u.y}],r=[{x:u.x,y:s.y}],m="x"==c?o.x===d?r:v:o.y===d?v:r,t===a&&(y=Math.abs(e[c]-n[c]))<=i&&(i=Math.min(i-1,i-y),o[c]===d?h[c]=(s[c]>e[c]?-1:1)*i:g[c]=(u[c]>n[c]?-1:1)*i),t!==a&&(d=o[c]===l[y="x"==c?"y":"x"],i=u[y]<s[y],t=s[y]<u[y],1===o[c]&&(!d&&i||d&&t)||1!==o[c]&&(!d&&t||d&&i))&&(m="x"==c?v:r),a={x:s.x+h.x,y:s.y+h.y},l={x:u.x+g.x,y:u.y+g.y},y=Math.max(Math.abs(a.x-m[0].x),Math.abs(l.x-m[0].x)),o=Math.max(Math.abs(a.y-m[0].y),Math.abs(l.y-m[0].y)),p=o<=y?(f=(a.x+l.x)/2,m[0].y):(f=m[0].x,(a.y+l.y)/2)),[t=[e,{x:s.x+h.x,y:s.y+h.y},...m,{x:u.x+g.x,y:u.y+g.y},n],f,p,b,E]}({source:{x:e,y:t},sourcePosition:n,target:{x:a,y:r},targetPosition:i,center:{x:l,y:s},offset:u});return[c.reduce((e,t,n)=>{let a="";return e+=a=0<n&&n<c.length-1?function(e,t,n,a){var r,a=Math.min(Hr(e,t)/2,Hr(t,n)/2,a),{x:t,y:i}=t;return e.x===t&&t===n.x||e.y===i&&i===n.y?`L${t} `+i:e.y===i?`L ${t+a*(e.x<n.x?-1:1)},${i}Q ${t},${i} ${t},`+(i+a*(e.y<n.y?1:-1)):(r=e.x<n.x?1:-1,`L ${t},${i+a*(e.y<n.y?-1:1)}Q ${t},${i} ${t+a*r},`+i)}(c[n-1],t,c[n+1],o):(0===n?"M":"L")+t.x+" "+t.y},""),d,m,f,p]}var Zr=(0,ut.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:a,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:s,labelBgBorderRadius:u,style:c,sourcePosition:d=O.Bottom,targetPosition:m=O.Top,markerEnd:f,markerStart:p,pathOptions:h,interactionWidth:g})=>{var[e,t,d]=$r({sourceX:e,sourceY:t,sourcePosition:d,targetX:n,targetY:a,targetPosition:m,borderRadius:h?.borderRadius,offset:h?.offset});return ut.default.createElement(Dr,{path:e,labelX:t,labelY:d,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:s,labelBgBorderRadius:u,style:c,markerEnd:f,markerStart:p,interactionWidth:g})}),Wr=(Zr.displayName="SmoothStepEdge",(0,ut.memo)(e=>ut.default.createElement(Zr,{...e,pathOptions:(0,ut.useMemo)(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])})));Wr.displayName="StepEdge";var Kr=(0,ut.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:a,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:s,labelBgBorderRadius:u,style:c,markerEnd:d,markerStart:m,interactionWidth:f})=>{var[e,t,n]=function({sourceX:e,sourceY:t,targetX:n,targetY:a}){var[r,i,o,l]=Lr({sourceX:e,sourceY:t,targetX:n,targetY:a});return[`M ${e},${t}L ${n},`+a,r,i,o,l]}({sourceX:e,sourceY:t,targetX:n,targetY:a});return ut.default.createElement(Dr,{path:e,labelX:t,labelY:n,label:r,labelStyle:i,labelShowBg:o,labelBgStyle:l,labelBgPadding:s,labelBgBorderRadius:u,style:c,markerEnd:d,markerStart:m,interactionWidth:f})});function Xr(e,t){return 0<=e?.5*e:25*t*Math.sqrt(-e)}function Yr({pos:e,x1:t,y1:n,x2:a,y2:r,c:i}){switch(e){case O.Left:return[t-Xr(t-a,i),n];case O.Right:return[t+Xr(a-t,i),n];case O.Top:return[t,n-Xr(n-r,i)];case O.Bottom:return[t,n+Xr(r-n,i)]}}function qr({sourceX:e,sourceY:t,sourcePosition:n=O.Bottom,targetX:a,targetY:r,targetPosition:i=O.Top,curvature:o=.25}){var[n,l]=Yr({pos:n,x1:e,y1:t,x2:a,y2:r,c:o}),[i,o]=Yr({pos:i,x1:a,y1:r,x2:e,y2:t,c:o}),[s,u,c,d]=Fr({sourceX:e,sourceY:t,targetX:a,targetY:r,sourceControlX:n,sourceControlY:l,targetControlX:i,targetControlY:o});return[`M${e},${t} C${n},${l} ${i},${o} ${a},`+r,s,u,c,d]}Kr.displayName="StraightEdge";var Gr=(0,ut.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:a,sourcePosition:r=O.Bottom,targetPosition:i=O.Top,label:o,labelStyle:l,labelShowBg:s,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:m,markerEnd:f,markerStart:p,pathOptions:h,interactionWidth:g})=>{var[e,t,r]=qr({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:a,targetPosition:i,curvature:h?.curvature});return ut.default.createElement(Dr,{path:e,labelX:t,labelY:r,label:o,labelStyle:l,labelShowBg:s,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:m,markerEnd:f,markerStart:p,interactionWidth:g})}),Jr=(Gr.displayName="BezierEdge",(0,ut.createContext)(null)),Qr=Jr.Provider,ei=(Jr.Consumer,e=>"id"in e&&"source"in e&&"target"in e),ti=e=>"id"in e&&!("source"in e)&&!("target"in e),ni=(t,e,n)=>{if(!ti(t))return[];const a=n.filter(e=>e.source===t.id).map(e=>e.target);return e.filter(e=>a.includes(e.id))},ai=(t,e,n)=>{if(!ti(t))return[];const a=n.filter(e=>e.target===t.id).map(e=>e.source);return e.filter(e=>a.includes(e.id))},ri=({source:e,sourceHandle:t,target:n,targetHandle:a})=>`reactflow__edge-${e}${t||""}-`+n+(a||""),ii=(t,e)=>{return void 0===t?"":"string"==typeof t?t:(e?e+"__":"")+Object.keys(t).sort().map(e=>e+"="+t[e]).join("&")},oi=(t,e)=>e.some(e=>!(e.source!==t.source||e.target!==t.target||e.sourceHandle!==t.sourceHandle&&(e.sourceHandle||t.sourceHandle)||e.targetHandle!==t.targetHandle&&(e.targetHandle||t.targetHandle))),li=(e,t)=>{if(!e.source||!e.target)return Sr("006",er.error006()),t;let n;return n=ei(e)?{...e}:{...e,id:ri(e)},oi(n,t)?t:t.concat(n)},si=({x:e,y:t},[n,a,r],i,[o,l])=>{e={x:(e-n)/r,y:(t-a)/r};return i?{x:o*Math.round(e.x/o),y:l*Math.round(e.y/l)}:e},ui=({x:e,y:t},[n,a,r])=>({x:e*r+n,y:t*r+a}),ci=(e,t=[0,0])=>{var n,a;return e?(n=(e.width??0)*t[0],t=(e.height??0)*t[1],{...a={x:e.position.x-n,y:e.position.y-t},positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-t}:a}):{x:0,y:0,positionAbsolute:{x:0,y:0}}},di=(e,r=[0,0])=>{return 0===e.length?{x:0,y:0,width:0,height:0}:(e=e.reduce((e,t)=>{var{x:n,y:a}=ci(t,r).positionAbsolute;return pr(e,hr({x:n,y:a,width:t.width||0,height:t.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0}),gr(e))},mi=(e,t,[n,a,r]=[0,0,1],i=!1,o=!1,l=[0,0])=>{const s={x:(t.x-n)/r,y:(t.y-a)/r,width:t.width/r,height:t.height/r},u=[];return e.forEach(e=>{var{width:t,height:n,selectable:a=!0,hidden:r=!1}=e;if(o&&!a||r)return!1;a=ci(e,l).positionAbsolute,r={x:a.x,y:a.y,width:t||0,height:n||0},a=br(s,r);(void 0===t||void 0===n||null===t||null===n||i&&0<a||(t||0)*(n||0)<=a||e.dragging)&&u.push(e)}),u},fi=(e,t)=>{const n=e.map(e=>e.id);return t.filter(e=>n.includes(e.source)||n.includes(e.target))},pi=(e,t,n,a,r,i=.1)=>{var o=t/(e.width*(1+i)),i=n/(e.height*(1+i)),o=Math.min(o,i),i=ur(o,a,r);return{x:t/2-(e.x+e.width/2)*i,y:n/2-(e.y+e.height/2)*i,zoom:i}},hi=(e,t=0)=>e.transition().duration(t);function gi(n,e,a,r){return(e[a]||[]).reduce((e,t)=>(`${n.id}-${t.id}-`+a!==r&&e.push({id:t.id||null,type:a,nodeId:n.id,x:(n.positionAbsolute?.x??0)+t.x+t.width/2,y:(n.positionAbsolute?.y??0)+t.y+t.height/2}),e),[])}var yi={source:null,target:null,sourceHandle:null,targetHandle:null},vi=()=>({handleDomNode:null,isValid:!1,connection:yi,endHandle:null});function bi(e,t,n,a,r,i,o){var l,s,u,c,d,r="target"===r,o=o.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),e={...vi(),handleDomNode:o};return o&&(l=Ei(void 0,o),s=o.getAttribute("data-nodeid"),u=o.getAttribute("data-handleid"),c=o.classList.contains("connectable"),o=o.classList.contains("connectableend"),e.connection=d={source:r?s:n,sourceHandle:r?u:a,target:r?n:s,targetHandle:r?a:u},c&&o)&&(t===Cr.Strict?r&&"source"===l||!r&&"target"===l:s!==n||u!==a)&&(e.endHandle={nodeId:s,handleId:u,type:l},e.isValid=i(d)),e}function Ei(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function wi(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function _i({event:e,handleId:u,nodeId:c,onConnect:t,isTarget:d,getState:m,setState:f,isValidConnection:p,edgeUpdaterType:n,onReconnectEnd:h}){const g=fr(e.target),{connectionMode:y,domNode:a,autoPanOnConnect:v,connectionRadius:b,onConnectStart:E,panBy:w,getNodes:_,cancelConnection:x}=m();let S=0,k;var I,C,N,{x:T,y:A}=Or(e),T=g?.elementFromPoint(T,A),A=Ei(n,T);const R=a?.getBoundingClientRect();if(R&&A){let a,r=Or(e,R),i=!1,o=null,l=!1,s=null;({nodes:T,nodeId:I,handleId:C,handleType:N}=[{nodes:_(),nodeId:c,handleId:u,handleType:A}][0]);const D=T.reduce((n,a)=>{if(a[_r]){var r=a[_r]["handleBounds"];let e=[],t=[];r&&(e=gi(a,r,"source",I+`-${C}-`+N),t=gi(a,r,"target",I+`-${C}-`+N)),n.push(...e,...t)}return n},[]);const P=()=>{var e,t;v&&([e,t]=mr(r,R),w({x:e,y:t}),S=requestAnimationFrame(P))};function O(e){var t=m()["transform"],{handle:e,validHandleResult:n}=(r=Or(e,R),function(e,t,a,r,n,i){var{x:e,y:o}=Or(e);if(t=t.elementsFromPoint(e,o).find(e=>e.classList.contains("react-flow__handle"))){const d=t.getAttribute("data-nodeid");if(d){const m=Ei(void 0,t),f=t.getAttribute("data-handleid");e=i({nodeId:d,id:f,type:m});if(e)return o=n.find(e=>e.nodeId===d&&e.type===m&&e.id===f),{handle:{id:f,type:m,nodeId:d,x:o?.x||a.x,y:o?.y||a.y},validHandleResult:e}}}let l=[],s=1/0;if(n.forEach(e=>{var t,n=Math.sqrt((e.x-a.x)**2+(e.y-a.y)**2);n<=r&&(t=i(e),n<=s)&&(n<s?l=[{handle:e,validHandleResult:t}]:n===s&&l.push({handle:e,validHandleResult:t}),s=n)}),!l.length)return{handle:null,validHandleResult:vi()};if(1===l.length)return l[0];const u=l.some(({validHandleResult:e})=>e.isValid),c=l.some(({handle:e})=>"target"===e.type);return l.find(({handle:e,validHandleResult:t})=>c?"target"===e.type:!u||t.isValid)||l[0]}(e,g,si(r,t,!1,[1,1]),b,D,e=>bi(e,y,c,u,d?"target":"source",p,g)));if(k=e,i||(P(),i=!0),s=n.handleDomNode,o=n.connection,l=n.isValid,f({connectionPosition:k&&l?ui({x:k.x,y:k.y},t):r,connectionStatus:function(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}(!!k,l),connectionEndHandle:n.endHandle}),!k&&!l&&!s)return wi(a);o.source!==o.target&&s&&(wi(a),(a=s).classList.add("connecting","react-flow__handle-connecting"),s.classList.toggle("valid",l),s.classList.toggle("react-flow__handle-valid",l))}function M(e){(k||s)&&o&&l&&t?.(o),m().onConnectEnd?.(e),n&&h?.(e),wi(a),x(),cancelAnimationFrame(S),i=!1,l=!1,o=null,s=null,g.removeEventListener("mousemove",O),g.removeEventListener("mouseup",M),g.removeEventListener("touchmove",O),g.removeEventListener("touchend",M)}f({connectionPosition:r,connectionStatus:null,connectionNodeId:c,connectionHandleId:u,connectionHandleType:A,connectionStartHandle:{nodeId:c,handleId:u,type:A},connectionEndHandle:null}),E?.(e,{nodeId:c,handleId:u,handleType:A}),g.addEventListener("mousemove",O),g.addEventListener("mouseup",M),g.addEventListener("touchmove",O),g.addEventListener("touchend",M)}}var xi=()=>!0,Si=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),a=(0,ut.forwardRef)(({type:l="source",position:e=O.Top,isValidConnection:s,isConnectable:t=!0,isConnectableStart:u=!0,isConnectableEnd:n=!0,id:a,onConnect:r,children:i,className:o,onMouseDown:c,onTouchStart:d,...m},f)=>{const p=a||null,h="target"===l,g=ar(),y=(0,ut.useContext)(Jr);var v,b,E,{connectOnClick:a,noPanClassName:w}=nr(Si,$e),{connecting:_,clickConnecting:x}=nr((v=y,b=p,E=l,e=>{var{connectionStartHandle:e,connectionEndHandle:t,connectionClickStartHandle:n}=e;return{connecting:e?.nodeId===v&&e?.handleId===b&&e?.type===E||t?.nodeId===v&&t?.handleId===b&&t?.type===E,clickConnecting:n?.nodeId===v&&n?.handleId===b&&n?.type===E}}),$e);y||g.getState().onError?.("010",er.error010());const S=e=>{var{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:a}=g.getState(),t={...t,...e};a&&({edges:e,setEdges:a}=g.getState(),a(li(t,e))),n?.(t),r?.(t)};var k=e=>{var t;y&&(t=Rr(e),u&&(t&&0===e.button||!t)&&_i({event:e,handleId:p,nodeId:y,onConnect:S,isTarget:h,getState:g.getState,setState:g.setState,isValidConnection:s||g.getState().isValidConnection||xi}),(t?c:d)?.(e))};return ut.default.createElement("div",{"data-handleid":p,"data-nodeid":y,"data-handlepos":e,"data-id":`${y}-${p}-`+l,className:ct(["react-flow__handle","react-flow__handle-"+e,"nodrag",w,o,{source:!h,target:h,connectable:t,connectablestart:u,connectableend:n,connecting:x,connectionindicator:t&&(u&&!_||n&&_)}]),onMouseDown:k,onTouchStart:k,onClick:a?e=>{var t,{onClickConnectStart:n,onClickConnectEnd:a,connectionClickStartHandle:r,connectionMode:i,isValidConnection:o}=g.getState();y&&(r||u)&&(r?(t=fr(e.target),o=s||o||xi,{connection:i,isValid:r}=bi({nodeId:y,id:p,type:l},i,r.nodeId,r.handleId||null,r.type,o,t),r&&S(i),a?.(e),g.setState({connectionClickStartHandle:null})):(n?.(e,{nodeId:y,handleId:p,handleType:l}),g.setState({connectionClickStartHandle:{nodeId:y,type:l,handleId:p}})))}:void 0,ref:f,...m},i)}),v=(a.displayName="Handle",(0,ut.memo)(a)),Y=({data:e,isConnectable:t,targetPosition:n=O.Top,sourcePosition:a=O.Bottom})=>ut.default.createElement(ut.default.Fragment,null,ut.default.createElement(v,{type:"target",position:n,isConnectable:t}),e?.label,ut.default.createElement(v,{type:"source",position:a,isConnectable:t})),ki=(Y.displayName="DefaultNode",(0,ut.memo)(Y)),an=({data:e,isConnectable:t,sourcePosition:n=O.Bottom})=>ut.default.createElement(ut.default.Fragment,null,e?.label,ut.default.createElement(v,{type:"source",position:n,isConnectable:t})),Ii=(an.displayName="InputNode",(0,ut.memo)(an)),r=({data:e,isConnectable:t,targetPosition:n=O.Top})=>ut.default.createElement(ut.default.Fragment,null,ut.default.createElement(v,{type:"target",position:n,isConnectable:t}),e?.label),Ci=(r.displayName="OutputNode",(0,ut.memo)(r)),Ni=()=>null,Ti=(Ni.displayName="GroupNode",e=>({selectedNodes:e.getNodes().filter(e=>e.selected),selectedEdges:e.edges.filter(e=>e.selected).map(e=>({...e}))})),Ai=e=>e.id;function Ri(e,t){return $e(e.selectedNodes.map(Ai),t.selectedNodes.map(Ai))&&$e(e.selectedEdges.map(Ai),t.selectedEdges.map(Ai))}var Oi=(0,ut.memo)(({onSelectionChange:e})=>{const n=ar(),{selectedNodes:a,selectedEdges:r}=nr(Ti,Ri);return(0,ut.useEffect)(()=>{const t={nodes:a,edges:r};e?.(t),n.getState().onSelectionChange.forEach(e=>e(t))},[a,r,e]),null}),Mi=(Oi.displayName="SelectionListener",e=>!!e.onSelectionChange);function Di({onSelectionChange:e}){var t=nr(Mi);return e||t?ut.default.createElement(Oi,{onSelectionChange:e}):null}var Pi=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Li(e,t){(0,ut.useEffect)(()=>{void 0!==e&&t(e)},[e])}function te(e,t,n){(0,ut.useEffect)(()=>{void 0!==t&&n({[e]:t})},[t])}var Fi=({nodes:e,edges:t,defaultNodes:n,defaultEdges:a,onConnect:r,onConnectStart:i,onConnectEnd:o,onClickConnectStart:l,onClickConnectEnd:s,nodesDraggable:u,nodesConnectable:c,nodesFocusable:d,edgesFocusable:m,edgesUpdatable:f,elevateNodesOnSelect:p,minZoom:h,maxZoom:g,nodeExtent:y,onNodesChange:v,onEdgesChange:b,elementsSelectable:E,connectionMode:w,snapGrid:_,snapToGrid:x,translateExtent:S,connectOnClick:k,defaultEdgeOptions:I,fitView:C,fitViewOptions:N,onNodesDelete:T,onEdgesDelete:A,onNodeDrag:R,onNodeDragStart:O,onNodeDragStop:M,onSelectionDrag:D,onSelectionDragStart:L,onSelectionDragStop:F,noPanClassName:V,nodeOrigin:j,rfId:B,autoPanOnConnect:z,autoPanOnNodeDrag:U,onError:H,connectionRadius:$,isValidConnection:Z,nodeDragThreshold:W})=>{const{setNodes:K,setEdges:X,setDefaultNodesAndEdges:Y,setMinZoom:q,setMaxZoom:G,setTranslateExtent:J,setNodeExtent:Q,reset:ee}=nr(Pi,$e);var P=ar();return(0,ut.useEffect)(()=>{var e=a?.map(e=>({...e,...I}));return Y(n,e),()=>{ee()}},[]),te("defaultEdgeOptions",I,P.setState),te("connectionMode",w,P.setState),te("onConnect",r,P.setState),te("onConnectStart",i,P.setState),te("onConnectEnd",o,P.setState),te("onClickConnectStart",l,P.setState),te("onClickConnectEnd",s,P.setState),te("nodesDraggable",u,P.setState),te("nodesConnectable",c,P.setState),te("nodesFocusable",d,P.setState),te("edgesFocusable",m,P.setState),te("edgesUpdatable",f,P.setState),te("elementsSelectable",E,P.setState),te("elevateNodesOnSelect",p,P.setState),te("snapToGrid",x,P.setState),te("snapGrid",_,P.setState),te("onNodesChange",v,P.setState),te("onEdgesChange",b,P.setState),te("connectOnClick",k,P.setState),te("fitViewOnInit",C,P.setState),te("fitViewOnInitOptions",N,P.setState),te("onNodesDelete",T,P.setState),te("onEdgesDelete",A,P.setState),te("onNodeDrag",R,P.setState),te("onNodeDragStart",O,P.setState),te("onNodeDragStop",M,P.setState),te("onSelectionDrag",D,P.setState),te("onSelectionDragStart",L,P.setState),te("onSelectionDragStop",F,P.setState),te("noPanClassName",V,P.setState),te("nodeOrigin",j,P.setState),te("rfId",B,P.setState),te("autoPanOnConnect",z,P.setState),te("autoPanOnNodeDrag",U,P.setState),te("onError",H,P.setState),te("connectionRadius",$,P.setState),te("isValidConnection",Z,P.setState),te("nodeDragThreshold",W,P.setState),Li(e,K),Li(t,X),Li(h,q),Li(g,G),Li(S,J),Li(y,Q),null},Vi={display:"none"},ji={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Bi="react-flow__node-desc",zi="react-flow__edge-desc",Ui="react-flow__aria-live",Hi=e=>e.ariaLiveMessage;function $i({rfId:e}){var t=nr(Hi);return ut.default.createElement("div",{id:Ui+"-"+e,"aria-live":"assertive","aria-atomic":"true",style:ji},t)}function Zi({rfId:e,disableKeyboardA11y:t}){return ut.default.createElement(ut.default.Fragment,null,ut.default.createElement("div",{id:Bi+"-"+e,style:Vi},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),ut.default.createElement("div",{id:zi+"-"+e,style:Vi},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&ut.default.createElement($i,{rfId:e}))}var Wi=(i=null,o={actInsideInputWithModifier:!0})=>{const[e,l]=(0,ut.useState)(!1),s=(0,ut.useRef)(!1),u=(0,ut.useRef)(new Set([])),[c,d]=(0,ut.useMemo)(()=>{var e,t;return null!==i?(t=(e=(Array.isArray(i)?i:[i]).filter(e=>"string"==typeof e).map(e=>e.split("+"))).reduce((e,t)=>e.concat(...t),[]),[e,t]):[[],[]]},[i]);return(0,ut.useEffect)(()=>{var e="undefined"!=typeof document?document:null;const t=o?.target||e;if(null!==i){const n=e=>{if(s.current=e.ctrlKey||e.metaKey||e.shiftKey,(!s.current||s.current&&!o.actInsideInputWithModifier)&&Ir(e))return!1;var t=Xi(e.code,d);u.current.add(e[t]),Ki(c,u.current,!1)&&(e.preventDefault(),l(!0))},a=e=>{if((!s.current||s.current&&!o.actInsideInputWithModifier)&&Ir(e))return!1;var t=Xi(e.code,d);Ki(c,u.current,!0)?(l(!1),u.current.clear()):u.current.delete(e[t]),"Meta"===e.key&&u.current.clear(),s.current=!1},r=()=>{u.current.clear(),l(!1)};return t?.addEventListener("keydown",n),t?.addEventListener("keyup",a),window.addEventListener("blur",r),()=>{t?.removeEventListener("keydown",n),t?.removeEventListener("keyup",a),window.removeEventListener("blur",r)}}},[i,l]),e};function Ki(e,t,n){return e.filter(e=>n||e.length===t.size).some(e=>e.every(e=>t.has(e)))}function Xi(e,t){return t.includes(e)?"code":"key"}function Yi(r,i,o){r.forEach(e=>{var t,n,a=e.parentNode||e.parentId;if(a&&!r.has(a))throw new Error(`Parent node ${a} not found`);(a||o?.[e.id])&&({x:a,y:t,z:n}=function e(t,n,a,r){var i,t=t.parentNode||t.parentId;return t?(t=n.get(t),i=ci(t,r),e(t,n,{x:(a.x??0)+i.x,y:(a.y??0)+i.y,z:(t[_r]?.z??0)>(a.z??0)?t[_r]?.z??0:a.z??0},r)):a}(e,r,{...e.position,z:e[_r]?.z??0},i),e.positionAbsolute={x:a,y:t},e[_r].z=n,o?.[e.id])&&(e[_r].isParent=!0)})}function qi(e,i,t,n){const o=new Map,l={},s=n?1e3:0;return e.forEach(e=>{var t=(wr(e.zIndex)?e.zIndex:0)+(e.selected?s:0),n=i.get(e.id),a={...e,positionAbsolute:{x:e.position.x,y:e.position.y}},r=e.parentNode||e.parentId,r=(r&&(l[r]=!0),n?.type&&n?.type!==e.type);Object.defineProperty(a,_r,{enumerable:!1,value:{handleBounds:r?void 0:n?.[_r]?.handleBounds,z:t}}),o.set(e.id,a)}),Yi(o,t,l),o}function Gi(e,n={}){var{getNodes:e,width:t,height:a,minZoom:r,maxZoom:i,d3Zoom:o,d3Selection:l,fitViewOnInitDone:s,fitViewOnInit:u,nodeOrigin:c}=e(),s=n.initial&&!s&&u;if(o&&l&&(s||!n.initial)){var u=e().filter(t=>{var e=n.includeHiddenNodes?t.width&&t.height:!t.hidden;return n.nodes?.length?e&&n.nodes.some(e=>e.id===t.id):e}),s=u.every(e=>e.width&&e.height);if(0<u.length&&s)return e=di(u,c),{x:s,y:u,zoom:c}=pi(e,t,a,n.minZoom??r,n.maxZoom??i,n.padding??.1),e=Ua.translate(s,u).scale(c),"number"==typeof n.duration&&0<n.duration?o.transform(hi(l,n.duration),e):o.transform(l,e),!0}return!1}function Ji({changedNodes:e,changedEdges:t,get:n,set:a}){var r,i,{nodeInternals:n,edges:o,onNodesChange:l,onEdgesChange:s,hasDefaultNodes:u,hasDefaultEdges:c}=n();e?.length&&(u&&a({nodeInternals:(r=n,e.forEach(e=>{var t=r.get(e.id);t&&r.set(t.id,{...t,[_r]:t[_r],selected:e.selected})}),new Map(r))}),l?.(e)),t?.length&&(c&&a({edges:(i=t,o.map(t=>{var e=i.find(e=>e.id===t.id);return e&&(t.selected=e.selected),t}))}),s?.(t))}var a=()=>{},Qi={zoomIn:a,zoomOut:a,zoomTo:a,getZoom:()=>1,setViewport:a,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:a,fitBounds:a,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},eo=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),to=()=>{const o=ar(),{d3Zoom:l,d3Selection:s}=nr(eo,$e);return(0,ut.useMemo)(()=>s&&l?{zoomIn:e=>l.scaleBy(hi(s,e?.duration),1.2),zoomOut:e=>l.scaleBy(hi(s,e?.duration),1/1.2),zoomTo:(e,t)=>l.scaleTo(hi(s,t?.duration),e),getZoom:()=>o.getState().transform[2],setViewport:(e,t)=>{var[n,a,r]=o.getState().transform,n=Ua.translate(e.x??n,e.y??a).scale(e.zoom??r);l.transform(hi(s,t?.duration),n)},getViewport:()=>{var[e,t,n]=o.getState().transform;return{x:e,y:t,zoom:n}},fitView:e=>Gi(o.getState,e),setCenter:(e,t,n)=>{var{width:a,height:r,maxZoom:i}=o.getState(),i=void 0!==n?.zoom?n.zoom:i,a=Ua.translate(a/2-e*i,r/2-t*i).scale(i);l.transform(hi(s,n?.duration),a)},fitBounds:(e,t)=>{var{width:n,height:a,minZoom:r,maxZoom:i}=o.getState(),{x:e,y:n,zoom:a}=pi(e,n,a,r,i,t?.padding??.1),r=Ua.translate(e,n).scale(a);l.transform(hi(s,t?.duration),r)},project:e=>{var{transform:t,snapToGrid:n,snapGrid:a}=o.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),si(e,t,n,a)},screenToFlowPosition:e=>{var t,{transform:n,snapToGrid:a,snapGrid:r,domNode:i}=o.getState();return i?({x:i,y:t}=i.getBoundingClientRect(),i={x:e.x-i,y:e.y-t},si(i,n,a,r)):e},flowToScreenPosition:e=>{var t,{transform:n,domNode:a}=o.getState();return a?({x:a,y:t}=a.getBoundingClientRect(),{x:(n=ui(e,n)).x+a,y:n.y+t}):e},viewportInitialized:!0}:Qi,[l,s])};function no(){const e=to(),h=ar(),t=(0,ut.useCallback)(()=>h.getState().getNodes().map(e=>({...e})),[]),n=(0,ut.useCallback)(e=>h.getState().nodeInternals.get(e),[]),a=(0,ut.useCallback)(()=>{var{edges:e=[]}=h.getState();return e.map(e=>({...e}))},[]),r=(0,ut.useCallback)(t=>{var{edges:e=[]}=h.getState();return e.find(e=>e.id===t)},[]),i=(0,ut.useCallback)(e=>{var{getNodes:t,setNodes:n,hasDefaultNodes:a,onNodesChange:r}=h.getState(),t=t(),e="function"==typeof e?e(t):e;a?n(e):r&&r(0===e.length?t.map(e=>({type:"remove",id:e.id})):e.map(e=>({item:e,type:"reset"})))},[]),o=(0,ut.useCallback)(e=>{var{edges:t=[],setEdges:n,hasDefaultEdges:a,onEdgesChange:r}=h.getState(),e="function"==typeof e?e(t):e;a?n(e):r&&r(0===e.length?t.map(e=>({type:"remove",id:e.id})):e.map(e=>({item:e,type:"reset"})))},[]),l=(0,ut.useCallback)(e=>{var e=Array.isArray(e)?e:[e],{getNodes:t,setNodes:n,hasDefaultNodes:a,onNodesChange:r}=h.getState();a?n([...t(),...e]):r&&r(e.map(e=>({item:e,type:"add"})))},[]),s=(0,ut.useCallback)(e=>{var e=Array.isArray(e)?e:[e],{edges:t=[],setEdges:n,hasDefaultEdges:a,onEdgesChange:r}=h.getState();a?n([...t,...e]):r&&r(e.map(e=>({item:e,type:"add"})))},[]),u=(0,ut.useCallback)(()=>{var{getNodes:e,edges:t=[],transform:n}=h.getState(),[n,a,r]=n;return{nodes:e().map(e=>({...e})),edges:t.map(e=>({...e})),viewport:{x:n,y:a,zoom:r}}},[]),c=(0,ut.useCallback)(({nodes:e,edges:t})=>{const{nodeInternals:n,getNodes:a,edges:r,hasDefaultNodes:i,hasDefaultEdges:o,onNodesDelete:l,onEdgesDelete:s,onNodesChange:u,onEdgesChange:c}=h.getState(),d=(e||[]).map(e=>e.id),m=(t||[]).map(e=>e.id);var e=a().reduce((e,t)=>{const n=t.parentNode||t.parentId;var a=!d.includes(t.id)&&n&&e.find(e=>e.id===n);return("boolean"!=typeof t.deletable||t.deletable)&&(d.includes(t.id)||a)&&e.push(t),e},[]),t=r.filter(e=>"boolean"!=typeof e.deletable||e.deletable),f=t.filter(e=>m.includes(e.id));if(e||f){t=fi(e,t),f=[...f,...t];const p=f.reduce((e,t)=>(e.includes(t.id)||e.push(t.id),e),[]);(o||i)&&(o&&h.setState({edges:r.filter(e=>!p.includes(e.id))}),i)&&(e.forEach(e=>{n.delete(e.id)}),h.setState({nodeInternals:new Map(n)})),0<p.length&&(s?.(f),c)&&c(p.map(e=>({id:e,type:"remove"}))),0<e.length&&(l?.(e),u)&&(t=e.map(e=>({id:e.id,type:"remove"})),u(t))}},[]),d=(0,ut.useCallback)(e=>{var t=Er(e),n=t?null:h.getState().nodeInternals.get(e.id);return t||n?[t?e:yr(n),n,t]:[null,null,t]},[]),m=(0,ut.useCallback)((e,t=!0,n)=>{const[a,r,i]=d(e);return a?(n||h.getState().getNodes()).filter(e=>{return!!(i||e.id!==r.id&&e.positionAbsolute)&&(e=yr(e),e=br(e,a),t&&0<e||e>=a.width*a.height)}):[]},[]),f=(0,ut.useCallback)((e,t,n=!0)=>{var[e]=d(e);return!!e&&(t=br(e,t),n&&0<t||t>=e.width*e.height)},[]);return(0,ut.useMemo)(()=>({...e,getNodes:t,getNode:n,getEdges:a,getEdge:r,setNodes:i,setEdges:o,addNodes:l,addEdges:s,toObject:u,deleteElements:c,getIntersectingNodes:m,isNodeIntersecting:f}),[e,t,n,a,r,i,o,l,s,u,c,m,f])}var ao={actInsideInputWithModifier:!1};var ro={position:"absolute",width:"100%",height:"100%",top:0,left:0},io=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,oo=e=>({x:e.x,y:e.y,zoom:e.k}),lo=(e,t)=>e.target.closest("."+t),so=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),uo=e=>{var t=e.ctrlKey&&Mr()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t},co=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),mo=({onMove:u,onMoveStart:c,onMoveEnd:d,onPaneContextMenu:a,zoomOnScroll:r=!0,zoomOnPinch:m=!0,panOnScroll:i=!1,panOnScrollSpeed:f=.5,panOnScrollMode:p=Nr.Free,zoomOnDoubleClick:o=!0,elementsSelectable:e,panOnDrag:l=!0,defaultViewport:s,translateExtent:h,minZoom:g,maxZoom:y,zoomActivationKeyCode:t,preventScrolling:n=!0,children:v,noWheelClassName:b,noPanClassName:L})=>{const E=(0,ut.useRef)(),w=ar(),_=(0,ut.useRef)(!1),x=(0,ut.useRef)(!1),S=(0,ut.useRef)(null),k=(0,ut.useRef)({x:0,y:0,zoom:0}),{d3Zoom:I,d3Selection:C,d3ZoomHandler:N,userSelectionActive:T}=nr(co,$e),A=Wi(t),R=(0,ut.useRef)(0),O=(0,ut.useRef)(!1),M=(0,ut.useRef)();{var D=S;const P=ar();(0,ut.useEffect)(()=>{let e;const t=()=>{var e;D.current&&(0!==(e=sr(D.current)).height&&0!==e.width||P.getState().onError?.("004",er.error004()),P.setState({width:e.width||500,height:e.height||500}))};return t(),window.addEventListener("resize",t),D.current&&(e=new ResizeObserver(()=>t())).observe(D.current),()=>{window.removeEventListener("resize",t),e&&D.current&&e.unobserve(D.current)}},[])}return(0,ut.useEffect)(()=>{var e,t,n,a;S.current&&(n=S.current.getBoundingClientRect(),e=Ga().scaleExtent([g,y]).translateExtent(h),t=Bt(S.current).call(e),a=Ua.translate(s.x,s.y).scale(ur(s.zoom,g,y)),n=[[0,0],[n.width,n.height]],a=e.constrain()(a,n,h),e.transform(t,a),e.wheelDelta(uo),w.setState({d3Zoom:e,d3Selection:t,d3ZoomHandler:t.on("wheel.zoom"),transform:[a.x,a.y,a.k],domNode:S.current.closest(".react-flow")}))},[]),(0,ut.useEffect)(()=>{C&&I&&(!i||A||T?void 0!==N&&C.on("wheel.zoom",function(e,t){if(!n&&"wheel"===e.type&&!e.ctrlKey||lo(e,b))return null;e.preventDefault(),N.call(this,e,t)},{passive:!1}):C.on("wheel.zoom",n=>{if(lo(n,b))return!1;n.preventDefault(),n.stopImmediatePropagation();var e,a=C.property("__zoom").k||1;if(n.ctrlKey&&m)e=zt(n),r=uo(n),r=a*Math.pow(2,r),I.scaleTo(C,r,e,n);else{var r=1===n.deltaMode?20:1;let e=p===Nr.Vertical?0:n.deltaX*r,t=p===Nr.Horizontal?0:n.deltaY*r;!Mr()&&n.shiftKey&&p!==Nr.Vertical&&(e=n.deltaY*r,t=0),I.translateBy(C,-e/a*f,-t/a*f,{internal:!0});const i=oo(C.property("__zoom")),{onViewportChangeStart:o,onViewportChange:l,onViewportChangeEnd:s}=w.getState();clearTimeout(M.current),O.current||(O.current=!0,c?.(n,i),o?.(i)),O.current&&(u?.(n,i),l?.(i),M.current=setTimeout(()=>{d?.(n,i),s?.(i),O.current=!1},150))}},{passive:!1}))},[T,i,p,C,I,N,A,m,n,b,c,u,d]),(0,ut.useEffect)(()=>{I&&I.on("start",e=>{if(!e.sourceEvent||e.sourceEvent.internal)return null;R.current=e.sourceEvent?.button;var t=w.getState()["onViewportChangeStart"],n=oo(e.transform);_.current=!0,k.current=n,"mousedown"===e.sourceEvent?.type&&w.setState({paneDragging:!0}),t?.(n),c?.(e.sourceEvent,n)})},[I,c]),(0,ut.useEffect)(()=>{I&&(T&&!_.current?I.on("zoom",null):T||I.on("zoom",e=>{var t,n=w.getState()["onViewportChange"];w.setState({transform:[e.transform.x,e.transform.y,e.transform.k]}),x.current=!(!a||!so(l,R.current??0)),!u&&!n||e.sourceEvent?.internal||(t=oo(e.transform),n?.(t),u?.(e.sourceEvent,t))}))},[T,I,u,l,a]),(0,ut.useEffect)(()=>{I&&I.on("end",e=>{if(!e.sourceEvent||e.sourceEvent.internal)return null;const t=w.getState()["onViewportChangeEnd"];if(_.current=!1,w.setState({paneDragging:!1}),a&&so(l,R.current??0)&&!x.current&&a(e.sourceEvent),x.current=!1,(d||t)&&io(k.current,e.transform)){const n=oo(e.transform);k.current=n,clearTimeout(E.current),E.current=setTimeout(()=>{t?.(n),d?.(e.sourceEvent,n)},i?150:0)}})},[I,i,l,d,a]),(0,ut.useEffect)(()=>{I&&I.filter(e=>{var t,n=A||r,a=m&&e.ctrlKey;return!(!(!0===l||Array.isArray(l)&&l.includes(1))||1!==e.button||"mousedown"!==e.type||!lo(e,"react-flow__node")&&!lo(e,"react-flow__edge"))||!!(l||n||i||o||m)&&!T&&!(!o&&"dblclick"===e.type||lo(e,b)&&"wheel"===e.type||lo(e,L)&&("wheel"!==e.type||i&&"wheel"===e.type&&!A)||!m&&e.ctrlKey&&"wheel"===e.type||!(n||i||a||"wheel"!==e.type)||!(l||"mousedown"!==e.type&&"touchstart"!==e.type)||Array.isArray(l)&&!l.includes(e.button)&&"mousedown"===e.type||(t=Array.isArray(l)&&l.includes(e.button)||!e.button||e.button<=1,e.ctrlKey&&"wheel"!==e.type))&&t})},[T,I,r,m,i,o,l,e,A]),ut.default.createElement("div",{className:"react-flow__renderer",ref:S,style:ro},v)},fo=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function po(){var{userSelectionActive:e,userSelectionRect:t}=nr(fo,$e);return e&&t?ut.default.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function ho(e,t){const n=t.parentNode||t.parentId;var a,r,e=e.find(e=>e.id===n);e&&(a=t.position.x+t.width-e.width,r=t.position.y+t.height-e.height,0<a||0<r||t.position.x<0||t.position.y<0)&&(e.style={...e.style},e.style.width=e.style.width??e.width,e.style.height=e.style.height??e.height,0<a&&(e.style.width+=a),0<r&&(e.style.height+=r),t.position.x<0&&(a=Math.abs(t.position.x),e.position.x=e.position.x-a,e.style.width+=a,t.position.x=0),t.position.y<0&&(r=Math.abs(t.position.y),e.position.y=e.position.y-r,e.style.height+=r,t.position.y=0),e.width=e.style.width,e.height=e.style.height)}function go(i,e){var t;return i.some(e=>"reset"===e.type)?i.filter(e=>"reset"===e.type).map(e=>e.item):(t=i.filter(e=>"add"===e.type).map(e=>e.item),e.reduce((e,t)=>{var n=i.filter(e=>e.id===t.id);if(0===n.length)e.push(t);else{var a={...t};for(const r of n)if(r)switch(r.type){case"select":a.selected=r.selected;break;case"position":void 0!==r.position&&(a.position=r.position),void 0!==r.positionAbsolute&&(a.positionAbsolute=r.positionAbsolute),void 0!==r.dragging&&(a.dragging=r.dragging),a.expandParent&&ho(e,a);break;case"dimensions":void 0!==r.dimensions&&(a.width=r.dimensions.width,a.height=r.dimensions.height),void 0!==r.updateStyle&&(a.style={...a.style||{},...r.dimensions}),"boolean"==typeof r.resizing&&(a.resizing=r.resizing),a.expandParent&&ho(e,a);break;case"remove":return e}e.push(a)}return e},t))}function yo(e,t){return go(e,t)}function vo(e,t){return go(e,t)}var bo=(e,t)=>({id:e,type:"select",selected:t});function Eo(e,a){return e.reduce((e,t)=>{var n=a.includes(t.id);return!t.selected&&n?(t.selected=!0,e.push(bo(t.id,!0))):t.selected&&!n&&(t.selected=!1,e.push(bo(t.id,!1))),e},[])}var wo=(t,n)=>e=>{e.target===n.current&&t?.(e)},_o=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),xo=(0,ut.memo)(({isSelecting:d,selectionMode:m=Tr.Full,panOnDrag:t,onSelectionStart:r,onSelectionEnd:n,onPaneClick:a,onPaneContextMenu:i,onPaneScroll:o,onPaneMouseEnter:e,onPaneMouseMove:l,onPaneMouseLeave:s,children:u})=>{const c=(0,ut.useRef)(null),f=ar(),p=(0,ut.useRef)(0),h=(0,ut.useRef)(0),g=(0,ut.useRef)(),{userSelectionActive:y,elementsSelectable:v,dragging:b}=nr(_o,$e),E=()=>{f.setState({userSelectionActive:!1,userSelectionRect:null}),p.current=0,h.current=0},w=e=>{a?.(e),f.getState().resetSelectedElements(),f.setState({nodesSelectionActive:!1})};var _=o?e=>o(e):void 0,x=v&&(d||y);return ut.default.createElement("div",{className:ct(["react-flow__pane",{dragging:b,selection:d}]),onClick:x?void 0:wo(w,c),onContextMenu:wo(e=>{Array.isArray(t)&&t?.includes(2)?e.preventDefault():i?.(e)},c),onWheel:wo(_,c),onMouseEnter:x?void 0:e,onMouseDown:x?e=>{var t,{resetSelectedElements:n,domNode:a}=f.getState();g.current=a?.getBoundingClientRect(),v&&d&&0===e.button&&e.target===c.current&&g.current&&({x:a,y:t}=Or(e,g.current),n(),f.setState({userSelectionRect:{width:0,height:0,startX:a,startY:t,x:a,y:t}}),r?.(e))}:void 0,onMouseMove:x?e=>{var t,n,{userSelectionRect:a,nodeInternals:r,edges:i,transform:o,onNodesChange:l,onEdgesChange:s,nodeOrigin:u,getNodes:c}=f.getState();d&&g.current&&a&&(f.setState({userSelectionActive:!0,nodesSelectionActive:!1}),e=Or(e,g.current),t=a.startX??0,n=a.startY??0,a={...a,x:e.x<t?e.x:t,y:e.y<n?e.y:n,width:Math.abs(e.x-t),height:Math.abs(e.y-n)},t=c(),e=mi(r,a,o,m===Tr.Partial,!0,u),n=fi(e,i).map(e=>e.id),c=e.map(e=>e.id),p.current!==c.length&&(p.current=c.length,(r=Eo(t,c)).length)&&l?.(r),h.current!==n.length&&(h.current=n.length,(o=Eo(i,n)).length)&&s?.(o),f.setState({userSelectionRect:a}))}:l,onMouseUp:x?e=>{var t;0===e.button&&(t=f.getState()["userSelectionRect"],!y&&t&&e.target===c.current&&w(e),f.setState({nodesSelectionActive:0<p.current}),E(),n?.(e))}:void 0,onMouseLeave:x?e=>{y&&(f.setState({nodesSelectionActive:0<p.current}),n?.(e)),E()}:s,ref:c,style:ro},u,ut.default.createElement(po,null))});function So(e,t,n){let a=e;do{if(a?.matches(t))return!0;if(a===n.current)return!1}while(a=a.parentElement);return!1}function ko(t,n,a,r){return Array.from(t.values()).filter(e=>(e.selected||e.id===r)&&(!e.parentNode||e.parentId||!function e(t,n){t=t.parentNode||t.parentId;return!!t&&!!(t=n.get(t))&&(!!t.selected||e(t,n))}(e,t))&&(e.draggable||n&&void 0===e.draggable)).map(e=>({id:e.id,position:e.position||{x:0,y:0},positionAbsolute:e.positionAbsolute||{x:0,y:0},distance:{x:a.x-(e.positionAbsolute?.x??0),y:a.y-(e.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:e.extent,parentNode:e.parentNode||e.parentId,parentId:e.parentNode||e.parentId,width:e.width,height:e.height,expandParent:e.expandParent}))}function Io(e,t,n,a,r=[0,0],i){var o=(a=(o=e).extent||a)&&"parent"!==a?[a[0],[a[1][0]-(o.width||0),a[1][1]-(o.height||0)]]:a;let l=o;var s,u,a=e.parentNode||e.parentId;"parent"!==e.extent||e.expandParent?e.extent&&a&&"parent"!==e.extent&&(s=n.get(a),{x:s,y:u}=ci(s,r).positionAbsolute,l=[[e.extent[0][0]+s,e.extent[0][1]+u],[e.extent[1][0]+s,e.extent[1][1]+u]]):l=a&&e.width&&e.height?(s=n.get(a),{x:u,y:d}=ci(s,r).positionAbsolute,s&&wr(u)&&wr(d)&&wr(s.width)&&wr(s.height)?[[u+e.width*r[0],d+e.height*r[1]],[u+s.width-e.width+e.width*r[0],d+s.height-e.height+e.height*r[1]]]:l):(i?.("005",er.error005()),o);let c={x:0,y:0};a&&(u=n.get(a),c=ci(u,r).positionAbsolute);var d=l&&"parent"!==l?cr(t,l):t;return{position:{x:d.x-c.x,y:d.y-c.y},positionAbsolute:d}}function Co({nodeId:t,dragItems:e,nodeInternals:n}){e=e.map(e=>{return{...n.get(e.id),position:e.position,positionAbsolute:e.positionAbsolute}});return[t?e.find(e=>e.id===t):e[0],e]}xo.displayName="Pane";var No=(e,t,n,a)=>{e=t.querySelectorAll(e);if(!e||!e.length)return null;e=Array.from(e);const r=t.getBoundingClientRect(),i={x:r.width*a[0],y:r.height*a[1]};return e.map(e=>{var t=e.getBoundingClientRect();return{id:e.getAttribute("data-handleid"),position:e.getAttribute("data-handlepos"),x:(t.left-r.left-i.x)/n,y:(t.top-r.top-i.y)/n,...sr(e)}})};function To(n,a,r){return void 0===r?r:e=>{var t=a().nodeInternals.get(n);t&&r(e,{...t})}}function Ao({id:e,store:t,unselect:n=!1,nodeRef:a}){var{addSelectedNodes:r,unselectNodesAndEdges:i,multiSelectionActive:o,nodeInternals:l,onError:s}=t.getState(),l=l.get(e);l?(t.setState({nodesSelectionActive:!1}),l.selected?(n||l.selected&&o)&&(i({nodes:[l],edges:[]}),requestAnimationFrame(()=>a?.current?.blur())):r([e])):s?.("012",er.error012(e))}function Ro(a){return(e,t,n)=>a?.(e,n)}function Oo({nodeRef:k,disabled:I=!1,noDragClassName:C,handleSelector:N,nodeId:T,isSelectable:A,selectNodesOnDrag:R}){const O=ar(),[e,M]=(0,ut.useState)(!1),D=(0,ut.useRef)([]),P=(0,ut.useRef)({x:null,y:null}),L=(0,ut.useRef)(0),F=(0,ut.useRef)(null),V=(0,ut.useRef)({x:0,y:0}),j=(0,ut.useRef)(null),B=(0,ut.useRef)(!1),z=(0,ut.useRef)(!1),U=(0,ut.useRef)(!1),H=function(){const i=ar();return(0,ut.useCallback)(({sourceEvent:e})=>{var{transform:t,snapGrid:n,snapToGrid:a}=i.getState(),r=(e.touches?e.touches[0]:e).clientX,e=(e.touches?e.touches[0]:e).clientY,r={x:(r-t[0])/t[2],y:(e-t[1])/t[2]};return{xSnapped:a?n[0]*Math.round(r.x/n[0]):r.x,ySnapped:a?n[1]*Math.round(r.y/n[1]):r.y,...r}},[])}();return(0,ut.useEffect)(()=>{if(k?.current){const w=Bt(k.current),_=({x:a,y:r})=>{const{nodeInternals:i,onNodeDrag:e,onSelectionDrag:t,updateNodePositions:n,nodeExtent:o,snapGrid:l,snapToGrid:s,nodeOrigin:u,onError:c}=O.getState();let d=!(P.current={x:a,y:r}),m={x:0,y:0,x2:0,y2:0};var f,p,h;1<D.current.length&&o&&(f=di(D.current,u),m=hr(f)),D.current=D.current.map(e=>{var t={x:a-e.distance.x,y:r-e.distance.y},n=(s&&(t.x=l[0]*Math.round(t.x/l[0]),t.y=l[1]*Math.round(t.y/l[1])),[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]),t=(1<D.current.length&&o&&!e.extent&&(n[0][0]=e.positionAbsolute.x-m.x+o[0][0],n[1][0]=e.positionAbsolute.x+(e.width??0)-m.x2+o[1][0],n[0][1]=e.positionAbsolute.y-m.y+o[0][1],n[1][1]=e.positionAbsolute.y+(e.height??0)-m.y2+o[1][1]),Io(e,t,i,n,u,c));return d=d||e.position.x!==t.position.x||e.position.y!==t.position.y,e.position=t.position,e.positionAbsolute=t.positionAbsolute,e}),d&&(n(D.current,!0,!0),M(!0),f=T?e:Ro(t))&&j.current&&([p,h]=Co({nodeId:T,dragItems:D.current,nodeInternals:i}),f(j.current,p,h))},x=()=>{var e,t,n,a;F.current&&([e,t]=mr(V.current,F.current),0===e&&0===t||({transform:n,panBy:a}=O.getState(),P.current.x=(P.current.x??0)-e/n[2],P.current.y=(P.current.y??0)-t/n[2],a({x:e,y:t})&&_(P.current)),L.current=requestAnimationFrame(x))},S=e=>{var{nodeInternals:t,multiSelectionActive:n,nodesDraggable:a,unselectNodesAndEdges:r,onNodeDragStart:i,onSelectionDragStart:o}=O.getState(),i=(z.current=!0,T?i:Ro(o)),o=(R&&A||n||!T||t.get(T)?.selected||r(),T&&A&&R&&Ao({id:T,store:O,nodeRef:k}),H(e));P.current=o,D.current=ko(t,a,o,T),i&&D.current&&([n,r]=Co({nodeId:T,dragItems:D.current,nodeInternals:t}),i(e.sourceEvent,n,r))};var e;if(!I)return m=qt,f=Gt,g=Jt,p=Qt,y={},v=Ye("start","drag","end"),E=b=0,h.filter=function(e){return arguments.length?(m="function"==typeof e?e:Xt(!!e),h):m},h.container=function(e){return arguments.length?(f="function"==typeof e?e:Xt(e),h):f},h.subject=function(e){return arguments.length?(g="function"==typeof e?e:Xt(e),h):g},h.touchable=function(e){return arguments.length?(p="function"==typeof e?e:Xt(!!e),h):p},h.on=function(){var e=v.on.apply(v,arguments);return e===v?h:e},h.clickDistance=function(e){return arguments.length?(E=(e=+e)*e,h):Math.sqrt(E)},e=h.on("start",e=>{var{domNode:t,nodeDragThreshold:n}=O.getState(),n=(0===n&&S(e),U.current=!1,H(e));P.current=n,F.current=t?.getBoundingClientRect()||null,V.current=Or(e.sourceEvent,F.current)}).on("drag",e=>{var t,n=H(e),{autoPanOnNodeDrag:a,nodeDragThreshold:r}=O.getState();"touchmove"===e.sourceEvent.type&&1<e.sourceEvent.touches.length&&(U.current=!0),U.current||(!B.current&&z.current&&a&&(B.current=!0,x()),z.current||(a=n.xSnapped-(P?.current?.x??0),t=n.ySnapped-(P?.current?.y??0),r<Math.sqrt(a*a+t*t)&&S(e)),(P.current.x!==n.xSnapped||P.current.y!==n.ySnapped)&&D.current&&z.current&&(j.current=e.sourceEvent,V.current=Or(e.sourceEvent,F.current),_(n)))}).on("end",e=>{var t,n,a,r;z.current&&!U.current&&(M(!1),B.current=!1,z.current=!1,cancelAnimationFrame(L.current),D.current)&&({updateNodePositions:r,nodeInternals:t,onNodeDragStop:n,onSelectionDragStop:a}=O.getState(),n=T?n:Ro(a),r(D.current,!1,!1),n)&&([a,r]=Co({nodeId:T,dragItems:D.current,nodeInternals:t}),n(e.sourceEvent,a,r))}).filter(e=>{var t=e.target;return!e.button&&(!C||!So(t,"."+C,k))&&(!N||So(t,N,k))}),w.call(e),()=>{w.on(".drag",null)};w.on(".drag",null)}function h(e){e.on("mousedown.drag",t).filter(p).on("touchstart.drag",r).on("touchmove.drag",i,Ut).on("touchend.drag touchcancel.drag",o).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function t(e,t){!d&&m.call(this,e,t)&&(t=l(this,f.call(this,e,t),e,t,"mouse"))&&(Bt(e.view).on("mousemove.drag",n,Ht).on("mouseup.drag",a,Ht),Wt(e.view),$t(e),c=!1,s=e.clientX,u=e.clientY,t("start",e))}function n(e){var t,n;Zt(e),c||(t=e.clientX-s,n=e.clientY-u,c=E<t*t+n*n),y.mouse("drag",e)}function a(e){Bt(e.view).on("mousemove.drag mouseup.drag",null),Kt(e.view,c),Zt(e),y.mouse("end",e)}function r(e,t){if(m.call(this,e,t))for(var n,a=e.changedTouches,r=f.call(this,e,t),i=a.length,o=0;o<i;++o)(n=l(this,r,e,t,a[o].identifier,a[o]))&&($t(e),n("start",e,a[o]))}function i(e){for(var t,n=e.changedTouches,a=n.length,r=0;r<a;++r)(t=y[n[r].identifier])&&(Zt(e),t("drag",e,n[r]))}function o(e){var t,n,a=e.changedTouches,r=a.length;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),t=0;t<r;++t)(n=y[a[t].identifier])&&($t(e),n("end",e,a[t]))}function l(o,l,e,s,u,t){var c,d,m,f=v.copy(),p=zt(t||e,l);if(null!=(m=g.call(o,new Yt("beforestart",{sourceEvent:e,target:h,identifier:u,active:b,x:p[0],y:p[1],dx:0,dy:0,dispatch:f}),s)))return c=m.x-p[0]||0,d=m.y-p[1]||0,function e(t,n,a){var r,i=p;switch(t){case"start":y[u]=e,r=b++;break;case"end":delete y[u],--b;case"drag":p=zt(a||n,l),r=b}f.call(t,o,new Yt(t,{sourceEvent:n,subject:m,target:h,identifier:u,active:r,x:p[0]+c,y:p[1]+d,dx:p[0]-i[0],dy:p[1]-i[1],dispatch:f}),s)}}var s,u,c,d,m,f,g,p,y,v,b,E},[k,I,C,N,A,O,T,R,H]),e}function Mo(){const h=ar();return(0,ut.useCallback)(e=>{const{nodeInternals:a,nodeExtent:r,updateNodePositions:t,getNodes:n,snapToGrid:i,snapGrid:o,onError:l,nodesDraggable:s}=h.getState();var u=n().filter(e=>e.selected&&(e.draggable||s&&void 0===e.draggable)),c=i?o[0]:5,d=i?o[1]:5,m=e.isShiftPressed?4:1;const f=e.x*c*m,p=e.y*d*m;c=u.map(e=>{var t,n;return e.positionAbsolute&&(t={x:e.positionAbsolute.x+f,y:e.positionAbsolute.y+p},{positionAbsolute:t,position:n}=(i&&(t.x=o[0]*Math.round(t.x/o[0]),t.y=o[1]*Math.round(t.y/o[1])),Io(e,t,a,r,void 0,l)),e.position=n,e.positionAbsolute=t),e});t(c,!0,!1)},[])}var Do={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Po=H=>{var e=({id:a,type:r,data:e,xPos:n,yPos:i,xPosOrigin:t,yPosOrigin:o,selected:l,onClick:s,onMouseEnter:u,onMouseMove:c,onMouseLeave:d,onContextMenu:m,onDoubleClick:f,style:p,className:h,isDraggable:g,isSelectable:y,isConnectable:L,isFocusable:v,selectNodesOnDrag:b,sourcePosition:E,targetPosition:w,hidden:_,resizeObserver:x,dragHandle:S,zIndex:k,isParent:F,noDragClassName:I,noPanClassName:V,initialized:C,disableKeyboardA11y:N,ariaLabel:j,rfId:B,hasHandleBounds:T})=>{const A=ar(),R=(0,ut.useRef)(null),O=(0,ut.useRef)(null),M=(0,ut.useRef)(E),D=(0,ut.useRef)(w),P=(0,ut.useRef)(r);var z=y||g||s||u||c||d;const U=Mo();u=To(a,A.getState,u),c=To(a,A.getState,c),d=To(a,A.getState,d),m=To(a,A.getState,m),f=To(a,A.getState,f),(0,ut.useEffect)(()=>()=>{O.current&&(x?.unobserve(O.current),O.current=null)},[]),(0,ut.useEffect)(()=>{var e;R.current&&!_&&(e=R.current,C&&T&&O.current===e||(O.current&&x?.unobserve(O.current),x?.observe(e),O.current=e))},[_,C,T]),(0,ut.useEffect)(()=>{var e=P.current!==r,t=M.current!==E,n=D.current!==w;R.current&&(e||t||n)&&(e&&(P.current=r),t&&(M.current=E),n&&(D.current=w),A.getState().updateNodeDimensions([{id:a,nodeElement:R.current,forceUpdate:!0}]))},[a,r,E,w]),I=Oo({nodeRef:R,disabled:_||!g,noDragClassName:I,handleSelector:S,nodeId:a,isSelectable:y,selectNodesOnDrag:b});return _?null:ut.default.createElement("div",{className:ct(["react-flow__node","react-flow__node-"+r,{[V]:g},h,{selected:l,selectable:y,parent:F,dragging:I}]),ref:R,style:{zIndex:k,transform:`translate(${t}px,${o}px)`,pointerEvents:z?"all":"none",visibility:C?"visible":"hidden",...p},"data-id":a,"data-testid":"rf__node-"+a,onMouseEnter:u,onMouseMove:c,onMouseLeave:d,onContextMenu:m,onClick:e=>{var t=A.getState()["nodeDragThreshold"];y&&(!b||!g||0<t)&&Ao({id:a,store:A,nodeRef:R}),s&&(t=A.getState().nodeInternals.get(a))&&s(e,{...t})},onDoubleClick:f,onKeyDown:v?e=>{var t;Ir(e)||N||(xr.includes(e.key)&&y?(t="Escape"===e.key,Ao({id:a,store:A,unselect:t,nodeRef:R})):g&&l&&Object.prototype.hasOwnProperty.call(Do,e.key)&&(A.setState({ariaLiveMessage:`Moved selected node ${e.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~n}, y: `+~~i}),U({x:Do[e.key].x,y:Do[e.key].y,isShiftPressed:e.shiftKey})))}:void 0,tabIndex:v?0:void 0,role:v?"button":void 0,"aria-describedby":N?void 0:Bi+"-"+B,"aria-label":j},ut.default.createElement(Qr,{value:a},ut.default.createElement(H,{id:a,data:e,type:r,xPos:n,yPos:i,selected:l,isConnectable:L,sourcePosition:E,targetPosition:w,dragging:I,dragHandle:S,zIndex:k})))};return e.displayName="NodeWrapper",(0,ut.memo)(e)},Lo=e=>{var t=e.getNodes().filter(e=>e.selected);return{...di(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};var Fo=(0,ut.memo)(function({onSelectionContextMenu:n,noPanClassName:e,disableKeyboardA11y:t}){const a=ar();var{width:r,height:i,x:o,y:l,transformString:s,userSelectionActive:u}=nr(Lo,$e);const c=Mo(),d=(0,ut.useRef)(null);return(0,ut.useEffect)(()=>{t||d.current?.focus({preventScroll:!0})},[t]),Oo({nodeRef:d}),!u&&r&&i?(u=n?e=>{var t=a.getState().getNodes().filter(e=>e.selected);n(e,t)}:void 0,ut.default.createElement("div",{className:ct(["react-flow__nodesselection","react-flow__container",e]),style:{transform:s}},ut.default.createElement("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:u,tabIndex:t?void 0:-1,onKeyDown:t?void 0:e=>{Object.prototype.hasOwnProperty.call(Do,e.key)&&c({x:Do[e.key].x,y:Do[e.key].y,isShiftPressed:e.shiftKey})},style:{width:r,height:i,top:l,left:o}}))):null}),Vo=e=>e.nodesSelectionActive,Y=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:a,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:o,deleteKeyCode:l,onMove:s,onMoveStart:u,onMoveEnd:c,selectionKeyCode:d,selectionOnDrag:m,selectionMode:f,onSelectionStart:p,onSelectionEnd:h,multiSelectionKeyCode:g,panActivationKeyCode:y,zoomActivationKeyCode:v,elementsSelectable:b,zoomOnScroll:E,zoomOnPinch:w,panOnScroll:_,panOnScrollSpeed:x,panOnScrollMode:S,zoomOnDoubleClick:k,panOnDrag:I,defaultViewport:C,translateExtent:N,minZoom:T,maxZoom:A,preventScrolling:L,onSelectionContextMenu:F,noWheelClassName:V,noPanClassName:R,disableKeyboardA11y:j})=>{var B=nr(Vo),d=Wi(d),y=Wi(y),I=y||I,y=y||_,_=d||m&&!0!==I;{var{deleteKeyCode:m,multiSelectionKeyCode:l}={deleteKeyCode:l,multiSelectionKeyCode:g};const O=ar(),M=no()["deleteElements"],D=Wi(m,ao),P=Wi(l);(0,ut.useEffect)(()=>{var e,t;D&&({edges:t,getNodes:e}=O.getState(),e=e().filter(e=>e.selected),t=t.filter(e=>e.selected),M({nodes:e,edges:t}),O.setState({nodesSelectionActive:!1}))},[D]),(0,ut.useEffect)(()=>{O.setState({multiSelectionActive:P})},[P])}return ut.default.createElement(mo,{onMove:s,onMoveStart:u,onMoveEnd:c,onPaneContextMenu:i,elementsSelectable:b,zoomOnScroll:E,zoomOnPinch:w,panOnScroll:y,panOnScrollSpeed:x,panOnScrollMode:S,zoomOnDoubleClick:k,panOnDrag:!d&&I,defaultViewport:C,translateExtent:N,minZoom:T,maxZoom:A,zoomActivationKeyCode:v,preventScrolling:L,noWheelClassName:V,noPanClassName:R},ut.default.createElement(xo,{onSelectionStart:p,onSelectionEnd:h,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:a,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:o,panOnDrag:I,isSelecting:!!_,selectionMode:f},e,B&&ut.default.createElement(Fo,{onSelectionContextMenu:F,noPanClassName:R,disableKeyboardA11y:j})))},jo=(Y.displayName="FlowRenderer",(0,ut.memo)(Y));function Bo(n){var e={input:Po(n.input||Ii),default:Po(n.default||ki),output:Po(n.output||Ci),group:Po(n.group||Ni)},t=Object.keys(n).filter(e=>!["input","default","output","group"].includes(e)).reduce((e,t)=>(e[t]=Po(n[t]||ki),e),{});return{...e,...t}}var zo=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),an=p=>{const{nodesDraggable:h,nodesConnectable:g,nodesFocusable:y,elementsSelectable:v,updateNodeDimensions:t,onError:b}=nr(zo,$e);n=p.onlyRenderVisibleElements;var n,e=nr((0,ut.useCallback)(e=>n?mi(e.nodeInternals,{x:0,y:0,width:e.width,height:e.height},e.transform,!0):e.getNodes(),[n]));const a=(0,ut.useRef)(),E=(0,ut.useMemo)(()=>{var e;return"undefined"==typeof ResizeObserver?null:(e=new ResizeObserver(e=>{e=e.map(e=>({id:e.target.getAttribute("data-id"),nodeElement:e.target,forceUpdate:!0}));t(e)}),a.current=e)},[]);return(0,ut.useEffect)(()=>()=>{a?.current?.disconnect()},[]),ut.default.createElement("div",{className:"react-flow__nodes",style:ro},e.map(e=>{let t=e.type||"default";p.nodeTypes[t]||(b?.("003",er.error003(t)),t="default");var n,a,r,i,o=p.nodeTypes[t]||p.nodeTypes.default,l=!!(e.draggable||h&&void 0===e.draggable),s=!!(e.selectable||v&&void 0===e.selectable),u=!!(e.connectable||g&&void 0===e.connectable),c=!!(e.focusable||y&&void 0===e.focusable),d=p.nodeExtent?cr(e.positionAbsolute,p.nodeExtent):e.positionAbsolute,m=d?.x??0,d=d?.y??0,f=({x:f,y:n,width:a,height:r,origin:i}=[{x:m,y:d,width:e.width??0,height:e.height??0,origin:p.nodeOrigin}][0],!a||!r||i[0]<0||i[1]<0||1<i[0]||1<i[1]?{x:f,y:n}:{x:f-a*i[0],y:n-r*i[1]});return ut.default.createElement(o,{key:e.id,id:e.id,className:e.className,style:e.style,type:t,data:e.data,sourcePosition:e.sourcePosition||O.Bottom,targetPosition:e.targetPosition||O.Top,hidden:e.hidden,xPos:m,yPos:d,xPosOrigin:f.x,yPosOrigin:f.y,selectNodesOnDrag:p.selectNodesOnDrag,onClick:p.onNodeClick,onMouseEnter:p.onNodeMouseEnter,onMouseMove:p.onNodeMouseMove,onMouseLeave:p.onNodeMouseLeave,onContextMenu:p.onNodeContextMenu,onDoubleClick:p.onNodeDoubleClick,selected:!!e.selected,isDraggable:l,isSelectable:s,isConnectable:u,isFocusable:c,resizeObserver:E,dragHandle:e.dragHandle,zIndex:e[_r]?.z??0,isParent:!!e[_r]?.isParent,noDragClassName:p.noDragClassName,noPanClassName:p.noPanClassName,initialized:!!e.width&&!!e.height,rfId:p.rfId,disableKeyboardA11y:p.disableKeyboardA11y,ariaLabel:e.ariaLabel,hasHandleBounds:!!e[_r]?.handleBounds})}))},Uo=(an.displayName="NodeRenderer",(0,ut.memo)(an)),Ho="react-flow__edgeupdater",$o=({position:e,centerX:t,centerY:n,radius:a=10,onMouseDown:r,onMouseEnter:i,onMouseOut:o,type:l})=>{return ut.default.createElement("circle",{onMouseDown:r,onMouseEnter:i,onMouseOut:o,className:ct([Ho,Ho+"-"+l]),cx:(r=t,i=a,(o=e)===O.Left?r-i:o===O.Right?r+i:r),cy:(l=n,t=a,(o=e)===O.Top?l-t:o===O.Bottom?l+t:l),r:a,stroke:"transparent",fill:"transparent"})},Zo=()=>!0,Wo=ee=>{var e=({id:s,className:e,type:t,data:L,onClick:i,onEdgeDoubleClick:n,selected:a,animated:r,label:F,labelStyle:V,labelShowBg:j,labelBgStyle:B,labelBgPadding:z,labelBgBorderRadius:U,style:H,source:u,target:c,sourceX:o,sourceY:l,targetX:d,targetY:m,sourcePosition:f,targetPosition:p,elementsSelectable:h,hidden:g,sourceHandleId:y,targetHandleId:v,onContextMenu:b,onMouseEnter:E,onMouseMove:w,onMouseLeave:_,reconnectRadius:x,onReconnect:$,onReconnectStart:Z,onReconnectEnd:W,markerEnd:S,markerStart:k,rfId:I,ariaLabel:C,isFocusable:N,isReconnectable:T,pathOptions:K,interactionWidth:X,disableKeyboardA11y:Y})=>{const A=(0,ut.useRef)(null),[q,R]=(0,ut.useState)(!1),[G,O]=(0,ut.useState)(!1),M=ar();var J=(0,ut.useMemo)(()=>`url('#${ii(k,I)}')`,[k,I]),Q=(0,ut.useMemo)(()=>`url('#${ii(S,I)}')`,[S,I]);if(g)return null;g=Pr(s,M.getState,n),n=Pr(s,M.getState,b),b=Pr(s,M.getState,E),E=Pr(s,M.getState,w),w=Pr(s,M.getState,_);const D=(e,t)=>{if(0===e.button){var{edges:n,isValidConnection:a}=M.getState(),r=t?c:u,i=(t?v:y)||null;const o=t?"target":"source";a=a||Zo;const l=n.find(e=>e.id===s);O(!0),Z?.(e,l,o);_i({event:e,handleId:i,nodeId:r,onConnect:e=>$?.(l,e),isTarget:t,getState:M.getState,setState:M.setState,isValidConnection:a,edgeUpdaterType:o,onReconnectEnd:e=>{O(!1),W?.(e,l,o)}})}};var _=()=>R(!0),P=()=>R(!1);return ut.default.createElement("g",{className:ct(["react-flow__edge","react-flow__edge-"+t,e,{selected:a,animated:r,inactive:!h&&!i,updating:q}]),onClick:e=>{var{edges:t,addSelectedEdges:n,unselectNodesAndEdges:a,multiSelectionActive:r}=M.getState(),t=t.find(e=>e.id===s);t&&(h&&(M.setState({nodesSelectionActive:!1}),t.selected&&r?(a({nodes:[],edges:[t]}),A.current?.blur()):n([s])),i)&&i(e,t)},onDoubleClick:g,onContextMenu:n,onMouseEnter:b,onMouseMove:E,onMouseLeave:w,onKeyDown:N?e=>{var t,n,a;!Y&&xr.includes(e.key)&&h&&({unselectNodesAndEdges:t,addSelectedEdges:n,edges:a}=M.getState(),"Escape"===e.key?(A.current?.blur(),t({edges:[a.find(e=>e.id===s)]})):n([s]))}:void 0,tabIndex:N?0:void 0,role:N?"button":"img","data-testid":"rf__edge-"+s,"aria-label":null===C?void 0:C||`Edge from ${u} to `+c,"aria-describedby":N?zi+"-"+I:void 0,ref:A},!G&&ut.default.createElement(ee,{id:s,source:u,target:c,selected:a,animated:r,label:F,labelStyle:V,labelShowBg:j,labelBgStyle:B,labelBgPadding:z,labelBgBorderRadius:U,data:L,style:H,sourceX:o,sourceY:l,targetX:d,targetY:m,sourcePosition:f,targetPosition:p,sourceHandleId:y,targetHandleId:v,markerStart:J,markerEnd:Q,pathOptions:K,interactionWidth:X}),T&&ut.default.createElement(ut.default.Fragment,null,("source"===T||!0===T)&&ut.default.createElement($o,{position:f,centerX:o,centerY:l,radius:x,onMouseDown:e=>D(e,!0),onMouseEnter:_,onMouseOut:P,type:"source"}),("target"===T||!0===T)&&ut.default.createElement($o,{position:p,centerX:d,centerY:m,radius:x,onMouseDown:e=>D(e,!1),onMouseEnter:_,onMouseOut:P,type:"target"})))};return e.displayName="EdgeWrapper",(0,ut.memo)(e)};function Ko(n){var e={default:Wo(n.default||Gr),straight:Wo(n.bezier||Kr),step:Wo(n.step||Wr),smoothstep:Wo(n.step||Zr),simplebezier:Wo(n.simplebezier||Br)},t=Object.keys(n).filter(e=>!["default","bezier"].includes(e)).reduce((e,t)=>(e[t]=Wo(n[t]||Gr),e),{});return{...e,...t}}function Xo(e,t,n=null){var a=(n?.x||0)+t.x,r=(n?.y||0)+t.y,i=n?.width||t.width,o=n?.height||t.height;switch(e){case O.Top:return{x:a+i/2,y:r};case O.Right:return{x:a+i,y:r+o/2};case O.Bottom:return{x:a+i/2,y:r+o};case O.Left:return{x:a,y:r+o/2}}}function Yo(e,t){return e?1!==e.length&&t?t&&e.find(e=>e.id===t)||null:e[0]:null}function qo(e){var t=e?.[_r]?.handleBounds||null,n=t&&e?.width&&e?.height&&void 0!==e?.positionAbsolute?.x&&void 0!==e?.positionAbsolute?.y;return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!n]}var Go=[{level:0,isMaxLevel:!0,edges:[]}];function Jo(e,c,t){var n=nr((0,ut.useCallback)(u=>e?u.edges.filter(e=>{var t,n,a,r,i,o,l,s=c.get(e.source),e=c.get(e.target);return s?.width&&s?.height&&e?.width&&e?.height&&({sourcePos:s,targetPos:e,sourceWidth:t,sourceHeight:n,targetWidth:a,targetHeight:r,width:i,height:o,transform:l}=[{sourcePos:s.positionAbsolute||{x:0,y:0},targetPos:e.positionAbsolute||{x:0,y:0},sourceWidth:s.width,sourceHeight:s.height,targetWidth:e.width,targetHeight:e.height,width:u.width,height:u.height,transform:u.transform}][0],(t={x:Math.min(s.x,e.x),y:Math.min(s.y,e.y),x2:Math.max(s.x+t,e.x+a),y2:Math.max(s.y+n,e.y+r)}).x===t.x2&&(t.x2+=1),t.y===t.y2&&(t.y2+=1),a=hr({x:(0-l[0])/l[2],y:(0-l[1])/l[2],width:i/l[2],height:o/l[2]}),s=Math.max(0,Math.min(a.x2,t.x2)-Math.max(a.x,t.x)),n=Math.max(0,Math.min(a.y2,t.y2)-Math.max(a.y,t.y)),0<Math.ceil(s*n))}):u.edges,[e,c]));{var[n,s,u=!1]=[n,c,t];let l=-1;return n=n.reduce((e,t)=>{var n,a,r,i=wr(t.zIndex);let o=i?t.zIndex:0;return u&&(n=s.get(t.target),r=s.get(t.source),a=t.selected||n?.selected||r?.selected,r=Math.max(r?.[_r]?.z||0,n?.[_r]?.z||0,1e3),o=(i?t.zIndex:0)+(a?r:0)),e[o]?e[o].push(t):e[o]=[t],l=o>l?o:l,e},{}),0===(n=Object.entries(n).map(([e,t])=>{e=+e;return{edges:t,level:e,isMaxLevel:e===l}})).length?Go:n}}var Qo={[i.Arrow]:({color:e="none",strokeWidth:t=1})=>ut.default.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),[i.ArrowClosed]:({color:e="none",strokeWidth:t=1})=>ut.default.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})};var el=({id:e,type:t,color:n,width:a=12.5,height:r=12.5,markerUnits:i="strokeWidth",strokeWidth:o,orient:l="auto-start-reverse"})=>{t=function(e){const t=ar();return(0,ut.useMemo)(()=>{return Object.prototype.hasOwnProperty.call(Qo,e)?Qo[e]:(t.getState().onError?.("009",er.error009(e)),null)},[e])}(t);return t?ut.default.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:""+a,markerHeight:""+r,viewBox:"-10 -10 20 20",markerUnits:i,orient:l,refX:"0",refY:"0"},ut.default.createElement(t,{color:n,strokeWidth:o})):null},r=({defaultColor:e,rfId:t})=>{var r,i,e=nr((0,ut.useCallback)(({defaultColor:r,rfId:i}=[{defaultColor:e,rfId:t}][0],e=>{const a=[];return e.edges.reduce((n,e)=>([e.markerStart,e.markerEnd].forEach(e=>{var t;e&&"object"==typeof e&&(t=ii(e,i),a.includes(t)||(n.push({id:t,color:e.color||r,...e}),a.push(t)))}),n),[]).sort((e,t)=>e.id.localeCompare(t.id))}),[e,t]),(e,n)=>!(e.length!==n.length||e.some((e,t)=>e.id!==n[t].id)));return ut.default.createElement("defs",null,e.map(e=>ut.default.createElement(el,{id:e.id,key:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient})))},tl=(r.displayName="MarkerDefinitions",(0,ut.memo)(r)),nl=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),a=({defaultMarkerColor:a,onlyRenderVisibleElements:e,elevateEdgesOnSelect:t,rfId:m,edgeTypes:f,noPanClassName:p,onEdgeContextMenu:h,onEdgeMouseEnter:g,onEdgeMouseMove:y,onEdgeMouseLeave:v,onEdgeClick:b,onEdgeDoubleClick:E,onReconnect:w,onReconnectStart:_,onReconnectEnd:x,reconnectRadius:S,children:n,disableKeyboardA11y:k})=>{const{edgesFocusable:I,edgesUpdatable:C,elementsSelectable:N,width:r,height:i,connectionMode:T,nodeInternals:A,onError:R}=nr(nl,$e);e=Jo(e,A,t);return r?ut.default.createElement(ut.default.Fragment,null,e.map(({level:e,edges:t,isMaxLevel:n})=>ut.default.createElement("svg",{key:e,style:{zIndex:e},width:r,height:i,className:"react-flow__edges react-flow__container"},n&&ut.default.createElement(tl,{defaultColor:a,rfId:m}),ut.default.createElement("g",null,t.map(e=>{var[t,n,a]=qo(A.get(e.source)),[r,i,o]=qo(A.get(e.target));if(!a||!o)return null;let l=e.type||"default";f[l]||(R?.("011",er.error011(l)),l="default");var s,a=f[l]||f.default,o=T===Cr.Strict?i.target:(i.target??[]).concat(i.source??[]),i=Yo(n.source,e.sourceHandle),n=Yo(o,e.targetHandle),o=i?.position||O.Bottom,u=n?.position||O.Top,c=!!(e.focusable||I&&void 0===e.focusable),d=e.reconnectable||e.updatable,d=void 0!==w&&(d||C&&void 0===d);return i&&n?({sourceX:t,sourceY:r,targetX:n,targetY:s}=((e,t,n,a,r,i)=>{n=Xo(n,e,t),e=Xo(i,a,r);return{sourceX:n.x,sourceY:n.y,targetX:e.x,targetY:e.y}})(t,i,o,r,n,u),ut.default.createElement(a,{key:e.id,id:e.id,className:ct([e.className,p]),type:l,data:e.data,selected:!!e.selected,animated:!!e.animated,hidden:!!e.hidden,label:e.label,labelStyle:e.labelStyle,labelShowBg:e.labelShowBg,labelBgStyle:e.labelBgStyle,labelBgPadding:e.labelBgPadding,labelBgBorderRadius:e.labelBgBorderRadius,style:e.style,source:e.source,target:e.target,sourceHandleId:e.sourceHandle,targetHandleId:e.targetHandle,markerEnd:e.markerEnd,markerStart:e.markerStart,sourceX:t,sourceY:r,targetX:n,targetY:s,sourcePosition:o,targetPosition:u,elementsSelectable:N,onContextMenu:h,onMouseEnter:g,onMouseMove:y,onMouseLeave:v,onClick:b,onEdgeDoubleClick:E,onReconnect:w,onReconnectStart:_,onReconnectEnd:x,reconnectRadius:S,rfId:m,ariaLabel:e.ariaLabel,isFocusable:c,isReconnectable:d,pathOptions:"pathOptions"in e?e.pathOptions:void 0,interactionWidth:e.interactionWidth,disableKeyboardA11y:k})):(R?.("008",er.error008(i,e)),null)})))),n):null},al=(a.displayName="EdgeRenderer",(0,ut.memo)(a)),rl=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function il({children:e}){var t=nr(rl);return ut.default.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}var ol={[O.Left]:O.Right,[O.Right]:O.Left,[O.Top]:O.Bottom,[O.Bottom]:O.Top},ll=({nodeId:t,handleType:e,style:n,type:a=Ar.Bezier,CustomComponent:r,connectionStatus:i})=>{const{fromNode:o,handleId:l,toX:s,toY:u,connectionMode:c}=nr((0,ut.useCallback)(e=>({fromNode:e.nodeInternals.get(t),handleId:e.connectionHandleId,toX:(e.connectionPosition.x-e.transform[0])/e.transform[2],toY:(e.connectionPosition.y-e.transform[1])/e.transform[2],connectionMode:e.connectionMode}),[t]),$e);var d=o?.[_r]?.handleBounds;let m=d?.[e];if(c===Cr.Loose&&(m=m||d?.["source"===e?"target":"source"]),!o||!m)return null;var d=l?m.find(e=>e.id===l):m[0],e=d?d.x+d.width/2:(o.width??0)/2,f=d?d.y+d.height/2:o.height??0,e=(o.positionAbsolute?.x??0)+e,f=(o.positionAbsolute?.y??0)+f,p=d?.position,h=p?ol[p]:null;if(!p||!h)return null;if(r)return ut.default.createElement(r,{connectionLineType:a,connectionLineStyle:n,fromNode:o,fromHandle:d,fromX:e,fromY:f,toX:s,toY:u,fromPosition:p,toPosition:h,connectionStatus:i});let g="";r={sourceX:e,sourceY:f,sourcePosition:p,targetX:s,targetY:u,targetPosition:h};return a===Ar.Bezier?[g]=qr(r):a===Ar.Step?[g]=$r({...r,borderRadius:0}):a===Ar.SmoothStep?[g]=$r(r):a===Ar.SimpleBezier?[g]=jr(r):g=`M${e},${f} ${s},`+u,ut.default.createElement("path",{d:g,fill:"none",className:"react-flow__connection-path",style:n})},sl=(ll.displayName="ConnectionLine",e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height}));function ul({containerStyle:e,style:t,type:n,component:a}){var{nodeId:r,handleType:i,nodesConnectable:o,width:l,height:s,connectionStatus:u}=nr(sl,$e);return r&&i&&l&&o?ut.default.createElement("svg",{style:e,width:l,height:s,className:"react-flow__edges react-flow__connectionline react-flow__container"},ut.default.createElement("g",{className:ct(["react-flow__connection",u])},ut.default.createElement(ll,{nodeId:r,handleType:i,style:t,type:n,CustomComponent:a,connectionStatus:u}))):null}function cl(t,n){const a=(0,ut.useRef)(null),r=ar();return(0,ut.useMemo)(()=>{var e=Object.keys(t);return $e(a.current,e)&&r.getState().onError?.("002",er.error002()),a.current=e,n(t)},[t])}var Y=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:a,onMoveEnd:r,onInit:i,onNodeClick:o,onEdgeClick:l,onNodeDoubleClick:s,onEdgeDoubleClick:u,onNodeMouseEnter:c,onNodeMouseMove:d,onNodeMouseLeave:m,onNodeContextMenu:f,onSelectionContextMenu:p,onSelectionStart:h,onSelectionEnd:g,connectionLineType:y,connectionLineStyle:v,connectionLineComponent:b,connectionLineContainerStyle:E,selectionKeyCode:w,selectionOnDrag:_,selectionMode:x,multiSelectionKeyCode:S,panActivationKeyCode:k,zoomActivationKeyCode:I,deleteKeyCode:C,onlyRenderVisibleElements:N,elementsSelectable:L,selectNodesOnDrag:F,defaultViewport:V,translateExtent:j,minZoom:B,maxZoom:z,preventScrolling:U,defaultMarkerColor:H,zoomOnScroll:$,zoomOnPinch:Z,panOnScroll:W,panOnScrollSpeed:K,panOnScrollMode:X,zoomOnDoubleClick:Y,panOnDrag:q,onPaneClick:G,onPaneMouseEnter:J,onPaneMouseMove:Q,onPaneMouseLeave:ee,onPaneScroll:te,onPaneContextMenu:ne,onEdgeContextMenu:ae,onEdgeMouseEnter:re,onEdgeMouseMove:ie,onEdgeMouseLeave:oe,onReconnect:le,onReconnectStart:se,onReconnectEnd:ue,reconnectRadius:ce,noDragClassName:T,noWheelClassName:de,noPanClassName:A,elevateEdgesOnSelect:me,disableKeyboardA11y:R,nodeOrigin:fe,nodeExtent:pe,rfId:O})=>{e=cl(e,Bo),t=cl(t,Ko);{var M=i;const D=no(),P=(0,ut.useRef)(!1);(0,ut.useEffect)(()=>{!P.current&&D.viewportInitialized&&M&&(setTimeout(()=>M(D),1),P.current=!0)},[M,D.viewportInitialized])}return ut.default.createElement(jo,{onPaneClick:G,onPaneMouseEnter:J,onPaneMouseMove:Q,onPaneMouseLeave:ee,onPaneContextMenu:ne,onPaneScroll:te,deleteKeyCode:C,selectionKeyCode:w,selectionOnDrag:_,selectionMode:x,onSelectionStart:h,onSelectionEnd:g,multiSelectionKeyCode:S,panActivationKeyCode:k,zoomActivationKeyCode:I,elementsSelectable:L,onMove:n,onMoveStart:a,onMoveEnd:r,zoomOnScroll:$,zoomOnPinch:Z,zoomOnDoubleClick:Y,panOnScroll:W,panOnScrollSpeed:K,panOnScrollMode:X,panOnDrag:q,defaultViewport:V,translateExtent:j,minZoom:B,maxZoom:z,onSelectionContextMenu:p,preventScrolling:U,noDragClassName:T,noWheelClassName:de,noPanClassName:A,disableKeyboardA11y:R},ut.default.createElement(il,null,ut.default.createElement(al,{edgeTypes:t,onEdgeClick:l,onEdgeDoubleClick:u,onlyRenderVisibleElements:N,onEdgeContextMenu:ae,onEdgeMouseEnter:re,onEdgeMouseMove:ie,onEdgeMouseLeave:oe,onReconnect:le,onReconnectStart:se,onReconnectEnd:ue,reconnectRadius:ce,defaultMarkerColor:H,noPanClassName:A,elevateEdgesOnSelect:!!me,disableKeyboardA11y:R,rfId:O},ut.default.createElement(ul,{style:v,type:y,component:b,containerStyle:E})),ut.default.createElement("div",{className:"react-flow__edgelabel-renderer"}),ut.default.createElement(Uo,{nodeTypes:e,onNodeClick:o,onNodeDoubleClick:s,onNodeMouseEnter:c,onNodeMouseMove:d,onNodeMouseLeave:m,onNodeContextMenu:f,selectNodesOnDrag:F,onlyRenderVisibleElements:N,noPanClassName:A,noDragClassName:T,disableKeyboardA11y:R,nodeOrigin:fe,nodeExtent:pe,rfId:O})))},dl=(Y.displayName="GraphView",(0,ut.memo)(Y)),ml=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],fl={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:ml,nodeExtent:ml,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Cr.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Sr,isValidConnection:void 0},pl=({children:e})=>{var t=(0,ut.useRef)(null);return t.current||(t.current=He((c,d)=>({...fl,setNodes:e=>{var{nodeInternals:t,nodeOrigin:n,elevateNodesOnSelect:a}=d();c({nodeInternals:qi(e,t,n,a)})},getNodes:()=>Array.from(d().nodeInternals.values()),setEdges:e=>{const{defaultEdgeOptions:t={}}=d();c({edges:e.map(e=>({...t,...e}))})},setDefaultNodesAndEdges:(e,t)=>{var n=void 0!==e,a=void 0!==t,e=n?qi(e,new Map,d().nodeOrigin,d().elevateNodesOnSelect):new Map;c({nodeInternals:e,edges:a?t:[],hasDefaultNodes:n,hasDefaultEdges:a})},updateNodeDimensions:e=>{const{onNodesChange:t,nodeInternals:r,fitViewOnInit:n,fitViewOnInitDone:a,fitViewOnInitOptions:i,domNode:o,nodeOrigin:l}=d();var s=o?.querySelector(".react-flow__viewport");if(s){s=window.getComputedStyle(s);const u=new window.DOMMatrixReadOnly(s.transform)["m22"];s=e.reduce((e,t)=>{var n,a=r.get(t.id);return a?.hidden?r.set(a.id,{...a,[_r]:{...a[_r],handleBounds:void 0}}):a&&(n=sr(t.nodeElement)).width&&n.height&&(a.width!==n.width||a.height!==n.height||t.forceUpdate)&&(r.set(a.id,{...a,[_r]:{...a[_r],handleBounds:{source:No(".source",t.nodeElement,u,l),target:No(".target",t.nodeElement,u,l)}},...n}),e.push({id:a.id,type:"dimensions",dimensions:n})),e},[]),e=(Yi(r,l),a||n&&!a&&Gi(d,{initial:!0,...i}));c({nodeInternals:new Map(r),fitViewOnInitDone:e}),0<s?.length&&t?.(s)}},updateNodePositions:(e,n=!0,a=!1)=>{var t=d()["triggerNodeChanges"];t(e.map(e=>{var t={id:e.id,type:"position",dragging:a};return n&&(t.positionAbsolute=e.positionAbsolute,t.position=e.position),t}))},triggerNodeChanges:e=>{var{onNodesChange:t,nodeInternals:n,hasDefaultNodes:a,nodeOrigin:r,getNodes:i,elevateNodesOnSelect:o}=d();e?.length&&(a&&(a=qi(yo(e,i()),n,r,o),c({nodeInternals:a})),t?.(e))},addSelectedNodes:e=>{var{multiSelectionActive:t,edges:n,getNodes:a}=d();let r,i=null;t?r=e.map(e=>bo(e,!0)):(r=Eo(a(),e),i=Eo(n,[])),Ji({changedNodes:r,changedEdges:i,get:d,set:c})},addSelectedEdges:e=>{var{multiSelectionActive:t,edges:n,getNodes:a}=d();let r,i=null;t?r=e.map(e=>bo(e,!0)):(r=Eo(n,e),i=Eo(a(),[])),Ji({changedNodes:i,changedEdges:r,get:d,set:c})},unselectNodesAndEdges:({nodes:e,edges:t}={})=>{var{edges:n,getNodes:a}=d(),t=t||n;Ji({changedNodes:(e||a()).map(e=>(e.selected=!1,bo(e.id,!1))),changedEdges:t.map(e=>bo(e.id,!1)),get:d,set:c})},setMinZoom:e=>{var{d3Zoom:t,maxZoom:n}=d();t?.scaleExtent([e,n]),c({minZoom:e})},setMaxZoom:e=>{var{d3Zoom:t,minZoom:n}=d();t?.scaleExtent([n,e]),c({maxZoom:e})},setTranslateExtent:e=>{d().d3Zoom?.translateExtent(e),c({translateExtent:e})},resetSelectedElements:()=>{var{edges:e,getNodes:t}=d();Ji({changedNodes:t().filter(e=>e.selected).map(e=>bo(e.id,!1)),changedEdges:e.filter(e=>e.selected).map(e=>bo(e.id,!1)),get:d,set:c})},setNodeExtent:t=>{var e=d()["nodeInternals"];e.forEach(e=>{e.positionAbsolute=cr(e.position,t)}),c({nodeExtent:t,nodeInternals:new Map(e)})},panBy:e=>{var{transform:t,width:n,height:a,d3Zoom:r,d3Selection:i,translateExtent:o}=d();return!(!r||!i||!e.x&&!e.y)&&(e=Ua.translate(t[0]+e.x,t[1]+e.y).scale(t[2]),n=[[0,0],[n,a]],a=r?.constrain()(e,n,o),r.transform(i,a),t[0]!==a.x||t[1]!==a.y||t[2]!==a.k)},cancelConnection:()=>c({connectionNodeId:fl.connectionNodeId,connectionHandleId:fl.connectionHandleId,connectionHandleType:fl.connectionHandleType,connectionStatus:fl.connectionStatus,connectionStartHandle:fl.connectionStartHandle,connectionEndHandle:fl.connectionEndHandle}),reset:()=>c({...fl})}),Object.is)),ut.default.createElement(Qa,{value:t.current},e)},hl=(pl.displayName="ReactFlowProvider",({children:e})=>{return(0,ut.useContext)(Ja)?ut.default.createElement(ut.default.Fragment,null,e):ut.default.createElement(pl,null,e)}),gl=(hl.displayName="ReactFlowWrapper",{input:Ii,default:ki,output:Ci,group:Ni}),yl={default:Gr,straight:Kr,step:Wr,smoothstep:Zr,simplebezier:Br},vl=[0,0],bl=[15,15],El={x:0,y:0,zoom:1},wl={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},_l=(0,ut.forwardRef)(({nodes:e,edges:t,defaultNodes:n,defaultEdges:a,className:r,nodeTypes:i=gl,edgeTypes:o=yl,onNodeClick:l,onEdgeClick:s,onInit:u,onMove:c,onMoveStart:d,onMoveEnd:m,onConnect:f,onConnectStart:p,onConnectEnd:h,onClickConnectStart:g,onClickConnectEnd:y,onNodeMouseEnter:v,onNodeMouseMove:b,onNodeMouseLeave:E,onNodeContextMenu:w,onNodeDoubleClick:_,onNodeDragStart:x,onNodeDrag:S,onNodeDragStop:k,onNodesDelete:I,onEdgesDelete:L,onSelectionChange:F,onSelectionDragStart:V,onSelectionDrag:j,onSelectionDragStop:B,onSelectionContextMenu:z,onSelectionStart:U,onSelectionEnd:H,connectionMode:$=Cr.Strict,connectionLineType:Z=Ar.Bezier,connectionLineStyle:W,connectionLineComponent:K,connectionLineContainerStyle:X,deleteKeyCode:Y="Backspace",selectionKeyCode:q="Shift",selectionOnDrag:G=!1,selectionMode:J=Tr.Full,panActivationKeyCode:Q="Space",multiSelectionKeyCode:ee=Mr()?"Meta":"Control",zoomActivationKeyCode:te=Mr()?"Meta":"Control",snapToGrid:ne=!1,snapGrid:ae=bl,onlyRenderVisibleElements:re=!1,selectNodesOnDrag:ie=!0,nodesDraggable:oe,nodesConnectable:le,nodesFocusable:se,nodeOrigin:C=vl,edgesFocusable:ue,edgesUpdatable:ce,elementsSelectable:de,defaultViewport:me=El,minZoom:N=.5,maxZoom:T=2,translateExtent:A=ml,preventScrolling:fe=!0,nodeExtent:R,defaultMarkerColor:pe="#b1b1b7",zoomOnScroll:he=!0,zoomOnPinch:ge=!0,panOnScroll:ye=!1,panOnScrollSpeed:ve=.5,panOnScrollMode:be=Nr.Free,zoomOnDoubleClick:Ee=!0,panOnDrag:we=!0,onPaneClick:_e,onPaneMouseEnter:xe,onPaneMouseMove:Se,onPaneMouseLeave:ke,onPaneScroll:Ie,onPaneContextMenu:Ce,children:Ne,onEdgeContextMenu:Te,onEdgeDoubleClick:Ae,onEdgeMouseEnter:Re,onEdgeMouseMove:Oe,onEdgeMouseLeave:Me,onEdgeUpdate:De,onEdgeUpdateStart:Pe,onEdgeUpdateEnd:Le,onReconnect:Fe,onReconnectStart:Ve,onReconnectEnd:je,reconnectRadius:Be=10,edgeUpdaterRadius:ze=10,onNodesChange:Ue,onEdgesChange:He,noDragClassName:$e="nodrag",noWheelClassName:Ze="nowheel",noPanClassName:O="nopan",fitView:We=!1,fitViewOptions:Ke,connectOnClick:Xe=!0,attributionPosition:Ye,proOptions:qe,defaultEdgeOptions:Ge,elevateNodesOnSelect:Je=!0,elevateEdgesOnSelect:Qe=!1,disableKeyboardA11y:M=!1,autoPanOnConnect:et=!0,autoPanOnNodeDrag:tt=!0,connectionRadius:nt=20,isValidConnection:at,onError:rt,style:it,id:D,nodeDragThreshold:ot,...lt},st)=>{var P=D||"1";return ut.default.createElement("div",{...lt,style:{...it,...wl},ref:st,className:ct(["react-flow",r]),"data-testid":"rf__wrapper",id:D},ut.default.createElement(hl,null,ut.default.createElement(dl,{onInit:u,onMove:c,onMoveStart:d,onMoveEnd:m,onNodeClick:l,onEdgeClick:s,onNodeMouseEnter:v,onNodeMouseMove:b,onNodeMouseLeave:E,onNodeContextMenu:w,onNodeDoubleClick:_,nodeTypes:i,edgeTypes:o,connectionLineType:Z,connectionLineStyle:W,connectionLineComponent:K,connectionLineContainerStyle:X,selectionKeyCode:q,selectionOnDrag:G,selectionMode:J,deleteKeyCode:Y,multiSelectionKeyCode:ee,panActivationKeyCode:Q,zoomActivationKeyCode:te,onlyRenderVisibleElements:re,selectNodesOnDrag:ie,defaultViewport:me,translateExtent:A,minZoom:N,maxZoom:T,preventScrolling:fe,zoomOnScroll:he,zoomOnPinch:ge,zoomOnDoubleClick:Ee,panOnScroll:ye,panOnScrollSpeed:ve,panOnScrollMode:be,panOnDrag:we,onPaneClick:_e,onPaneMouseEnter:xe,onPaneMouseMove:Se,onPaneMouseLeave:ke,onPaneScroll:Ie,onPaneContextMenu:Ce,onSelectionContextMenu:z,onSelectionStart:U,onSelectionEnd:H,onEdgeContextMenu:Te,onEdgeDoubleClick:Ae,onEdgeMouseEnter:Re,onEdgeMouseMove:Oe,onEdgeMouseLeave:Me,onReconnect:Fe??De,onReconnectStart:Ve??Pe,onReconnectEnd:je??Le,reconnectRadius:Be??ze,defaultMarkerColor:pe,noDragClassName:$e,noWheelClassName:Ze,noPanClassName:O,elevateEdgesOnSelect:Qe,rfId:P,disableKeyboardA11y:M,nodeOrigin:C,nodeExtent:R}),ut.default.createElement(Fi,{nodes:e,edges:t,defaultNodes:n,defaultEdges:a,onConnect:f,onConnectStart:p,onConnectEnd:h,onClickConnectStart:g,onClickConnectEnd:y,nodesDraggable:oe,nodesConnectable:le,nodesFocusable:se,edgesFocusable:ue,edgesUpdatable:ce,elementsSelectable:de,elevateNodesOnSelect:Je,minZoom:N,maxZoom:T,nodeExtent:R,onNodesChange:Ue,onEdgesChange:He,snapToGrid:ne,snapGrid:ae,connectionMode:$,translateExtent:A,connectOnClick:Xe,defaultEdgeOptions:Ge,fitView:We,fitViewOptions:Ke,onNodesDelete:I,onEdgesDelete:L,onNodeDragStart:x,onNodeDrag:S,onNodeDragStop:k,onSelectionDrag:j,onSelectionDragStart:V,onSelectionDragStop:B,noPanClassName:O,nodeOrigin:C,rfId:P,autoPanOnConnect:et,autoPanOnNodeDrag:tt,onError:rt,connectionRadius:nt,isValidConnection:at,nodeDragThreshold:ot}),ut.default.createElement(Di,{onSelectionChange:F}),Ne,ut.default.createElement(or,{proOptions:qe,position:Ye}),ut.default.createElement(Zi,{rfId:P,disableKeyboardA11y:M})))});function xl(a){return e=>{const[t,n]=(0,ut.useState)(e);e=(0,ut.useCallback)(t=>n(e=>a(t,e)),[]);return[t,n,e]}}_l.displayName="ReactFlow";xl(yo),xl(vo);var Sl=t(b(),1),an=({id:t,x:e,y:n,width:a,height:r,style:i,color:o,strokeColor:l,strokeWidth:s,className:u,borderRadius:c,shapeRendering:d,onClick:m,selected:f})=>{var{background:i,backgroundColor:p}=i||{},o=o||i||p;return Sl.default.createElement("rect",{className:ct(["react-flow__minimap-node",{selected:f},u]),x:e,y:n,rx:c,ry:c,width:a,height:r,fill:o,stroke:l,strokeWidth:s,shapeRendering:d,onClick:m?e=>m(e,t):void 0})},kl=(an.displayName="MiniMapNode",(0,Sl.memo)(an)),Il=e=>e.nodeOrigin,Cl=e=>e.getNodes().filter(e=>!e.hidden&&e.width&&e.height),Nl=e=>e instanceof Function?e:()=>e;var Tl=(0,Sl.memo)(function({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:a=5,nodeStrokeWidth:r=2,nodeComponent:i=kl,onClick:o}){var l=nr(Cl,$e);const s=nr(Il),u=Nl(t),c=Nl(e),d=Nl(n),m="undefined"==typeof window||window.chrome?"crispEdges":"geometricPrecision";return Sl.default.createElement(Sl.default.Fragment,null,l.map(e=>{var{x:t,y:n}=ci(e,s).positionAbsolute;return Sl.default.createElement(i,{key:e.id,x:t,y:n,width:e.width,height:e.height,style:e.style,selected:e.selected,className:d(e),color:u(e),borderRadius:a,strokeColor:c(e),strokeWidth:r,shapeRendering:m,onClick:o,id:e.id})}))}),Al=e=>{var t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:0<t.length?vr(di(t,e.nodeOrigin),n):n,rfId:e.rfId}};function Rl({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:a="#e2e2e2",nodeClassName:r="",nodeBorderRadius:i=5,nodeStrokeWidth:o=2,nodeComponent:l,maskColor:s="rgb(240, 240, 240, 0.6)",maskStrokeColor:u="none",maskStrokeWidth:c=1,position:d="bottom-right",onClick:m,onNodeClick:f,pannable:p=!1,zoomable:h=!1,ariaLabel:g="React Flow mini map",inversePan:y=!1,zoomStep:v=10,offsetScale:b=5}){const E=ar(),w=(0,Sl.useRef)(null);var{boundingRect:_,viewBB:x,rfId:S}=nr(Al,$e),k=e?.width??200,I=e?.height??150,C=_.width/k,N=_.height/I,C=Math.max(C,N),N=C*k,T=C*I,b=b*C,A=_.x-(N-_.width)/2-b,_=_.y-(T-_.height)/2-b,N=N+2*b,T=T+2*b,S="react-flow__minimap-desc-"+S;const R=(0,Sl.useRef)(0);R.current=C,(0,Sl.useEffect)(()=>{if(w.current){const t=Bt(w.current);var e=Ga().on("zoom",p?e=>{var t,{transform:n,d3Selection:a,d3Zoom:r,translateExtent:i,width:o,height:l}=E.getState();"mousemove"===e.sourceEvent.type&&a&&r&&(t=R.current*Math.max(1,n[2])*(y?-1:1),e={x:n[0]-e.sourceEvent.movementX*t,y:n[1]-e.sourceEvent.movementY*t},t=[[0,0],[o,l]],o=Ua.translate(e.x,e.y).scale(n[2]),l=r.constrain()(o,t,i),r.transform(a,l))}:null).on("zoom.wheel",h?e=>{var{transform:t,d3Selection:n,d3Zoom:a}=E.getState();"wheel"===e.sourceEvent.type&&n&&a&&(e=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*v,t=t[2]*Math.pow(2,e),a.scaleTo(n,t))}:null);return t.call(e),()=>{t.on("zoom",null)}}},[p,h,y,v]);var C=m?e=>{var t=zt(e);m(e,{x:t[0],y:t[1]})}:void 0,O=f?(e,t)=>{t=E.getState().nodeInternals.get(t);f(e,t)}:void 0;return Sl.default.createElement(ir,{position:d,style:e,className:ct(["react-flow__minimap",t]),"data-testid":"rf__minimap"},Sl.default.createElement("svg",{width:k,height:I,viewBox:A+` ${_} ${N} `+T,role:"img","aria-labelledby":S,ref:w,onClick:C},g&&Sl.default.createElement("title",{id:S},g),Sl.default.createElement(Tl,{onClick:O,nodeColor:a,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:r,nodeStrokeWidth:o,nodeComponent:l}),Sl.default.createElement("path",{className:"react-flow__minimap-mask",d:`M${A-b},${_-b}h${N+2*b}v${T+2*b}h${-N-2*b}z
        M${x.x},${x.y}h${x.width}v${x.height}h${-x.width}z`,fill:s,fillRule:"evenodd",stroke:u,strokeWidth:c,pointerEvents:"none"})))}Rl.displayName="MiniMap";var Ol=(0,Sl.memo)(Rl),Ml=t(b(),1);function Dl(){return Ml.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},Ml.default.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Pl(){return Ml.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},Ml.default.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Ll(){return Ml.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},Ml.default.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Fl(){return Ml.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},Ml.default.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Vl(){return Ml.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},Ml.default.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}var jl,Bl=({children:e,className:t,...n})=>Ml.default.createElement("button",{type:"button",className:ct(["react-flow__controls-button",t]),...n},e),zl=(Bl.displayName="ControlButton",e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom})),i=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:a=!0,fitViewOptions:r,onZoomIn:i,onZoomOut:o,onFitView:l,onInteractiveChange:s,className:u,children:c,position:d="bottom-left"})=>{const m=ar(),[f,p]=(0,Ml.useState)(!1),{isInteractive:h,minZoomReached:g,maxZoomReached:y}=nr(zl,$e),{zoomIn:v,zoomOut:b,fitView:E}=no();return(0,Ml.useEffect)(()=>{p(!0)},[]),f?Ml.default.createElement(ir,{className:ct(["react-flow__controls",u]),position:d,style:e,"data-testid":"rf__controls"},t&&Ml.default.createElement(Ml.default.Fragment,null,Ml.default.createElement(Bl,{onClick:()=>{v(),i?.()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y},Ml.default.createElement(Dl,null)),Ml.default.createElement(Bl,{onClick:()=>{b(),o?.()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:g},Ml.default.createElement(Pl,null))),n&&Ml.default.createElement(Bl,{className:"react-flow__controls-fitview",onClick:()=>{E(r),l?.()},title:"fit view","aria-label":"fit view"},Ml.default.createElement(Ll,null)),a&&Ml.default.createElement(Bl,{className:"react-flow__controls-interactive",onClick:()=>{m.setState({nodesDraggable:!h,nodesConnectable:!h,elementsSelectable:!h}),s?.(!h)},title:"toggle interactivity","aria-label":"toggle interactivity"},h?Ml.default.createElement(Vl,null):Ml.default.createElement(Fl,null)),c):null},Ul=(i.displayName="Controls",(0,Ml.memo)(i)),Hl=t(b(),1);function $l({color:e,dimensions:t,lineWidth:n}){return Hl.default.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H`+t[0]})}function Zl({color:e,radius:t}){return Hl.default.createElement("circle",{cx:t,cy:t,r:t,fill:e})}(r=jl=jl||{}).Lines="lines",r.Dots="dots",r.Cross="cross";var Wl={[jl.Dots]:"#91919a",[jl.Lines]:"#eee",[jl.Cross]:"#e2e2e2"},Kl={[jl.Dots]:1,[jl.Lines]:1,[jl.Cross]:6},Xl=e=>({transform:e.transform,patternId:"pattern-"+e.rfId});function Yl({id:e,variant:t=jl.Dots,gap:n=20,size:a,lineWidth:r=1,offset:i=2,color:o,style:l,className:s}){var u=(0,Hl.useRef)(null),{transform:c,patternId:d}=nr(Xl,$e),o=o||Wl[t],a=a||Kl[t],m=t===jl.Dots,t=t===jl.Cross,n=Array.isArray(n)?n:[n,n],n=[n[0]*c[2]||1,n[1]*c[2]||1],a=a*c[2],t=t?[a,a]:n,f=m?[a/i,a/i]:[t[0]/i,t[1]/i];return Hl.default.createElement("svg",{className:ct(["react-flow__background",s]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},Hl.default.createElement("pattern",{id:d+e,x:c[0]%n[0],y:c[1]%n[1],width:n[0],height:n[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${f[0]},-${f[1]})`},m?Hl.default.createElement(Zl,{color:o,radius:a/i}):Hl.default.createElement($l,{dimensions:t,color:o,lineWidth:r})),Hl.default.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${d+e})`}))}Yl.displayName="Background";var ql=(0,Hl.memo)(Yl);t(b(),1),t(q(),1);var Gl=t(b(),1).default["useRef"];function Jl(t){const n=Gl();return e=>{e=t(e);return function(e,t){if(Object.is(e,t))return 1;if("object"==typeof e&&null!==e&&"object"==typeof t&&null!==t){if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return;for(var[n,a]of e)if(!Object.is(a,t.get(n)))return;return 1}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return;for(const i of e)if(!t.has(i))return;return 1}var r=Object.keys(e);if(r.length===Object.keys(t).length){for(const o of r)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return;return 1}}}(n.current,e)?n.current:n.current=e}}var Ql=t(b(),1),es=e=>"checkbox"===e.type,ts=e=>e instanceof Date,ns=e=>null==e,as=e=>"object"==typeof e,rs=e=>!ns(e)&&!Array.isArray(e)&&as(e)&&!ts(e),is=e=>rs(e)&&e.target?es(e.target)?e.target.checked:e.target.value:e,os=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,ls=(e,t)=>e.has(os(t)),ss="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function us(e){let t;var n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(ss&&(e instanceof Blob||e instanceof FileList)||!n&&!rs(e))return e;if(t=n?[]:{},n||(e=>{e=e.constructor&&e.constructor.prototype;return rs(e)&&e.hasOwnProperty("isPrototypeOf")})(e))for(const a in e)e.hasOwnProperty(a)&&(t[a]=us(e[a]));else t=e}return t}var cs=e=>Array.isArray(e)?e.filter(Boolean):[],ds=e=>void 0===e,B=(e,t,n)=>{var a;return t&&rs(e)?(a=cs(t.split(/[,[\].]+?/)).reduce((e,t)=>ns(e)?e:e[t],e),ds(a)||a===e?ds(e[t])?n:e[t]:a):n},ms=e=>"boolean"==typeof e,fs=e=>/^\w*$/.test(e),ps=e=>cs(e.replace(/["|']|\]/g,"").split(/\.|\[/)),z=(t,e,n)=>{let a=-1;for(var r=fs(e)?[e]:ps(e),i=r.length,o=i-1;++a<i;){var l,s=r[a];let e=n;if(a!==o&&(l=t[s],e=rs(l)||Array.isArray(l)?l:isNaN(+r[a+1])?{}:[]),"__proto__"===s)return;t[s]=e,t=t[s]}return t},hs="blur",gs="focusout",ys="change",vs={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},bs={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Es=Ql.default.createContext(null),ws=()=>Ql.default.useContext(Es),_s=(t,n,a,r=!0)=>{var e={defaultValues:n._defaultValues};for(const i in t)Object.defineProperty(e,i,{get:()=>{var e=i;return n._proxyFormState[e]!==vs.all&&(n._proxyFormState[e]=!r||vs.all),a&&(a[e]=!0),t[e]}});return e},xs=e=>rs(e)&&!Object.keys(e).length,Ss=(e,t,n,a)=>{n(e);const{name:r,...i}=e;return xs(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(e=>t[e]===(!a||vs.all))},ks=e=>Array.isArray(e)?e:[e],Is=(e,t,n)=>!e||!t||e===t||ks(e).some(e=>e&&(n?e===t:e.startsWith(t)||t.startsWith(e)));function Cs(t){const n=Ql.default.useRef(t);n.current=t,Ql.default.useEffect(()=>{const e=!t.disabled&&n.current.subject&&n.current.subject.subscribe({next:n.current.next});return()=>{e&&e.unsubscribe()}},[t.disabled])}var Ns=e=>"string"==typeof e,Ts=(e,t,n,a,r)=>Ns(e)?(a&&t.watch.add(e),B(n,e,r)):Array.isArray(e)?e.map(e=>(a&&t.watch.add(e),B(n,e))):(a&&(t.watchAll=!0),n);function As(e){var t=ws();const{control:n=t.control,name:a,defaultValue:r,disabled:i,exact:o}=e||{},l=Ql.default.useRef(a),[s,u]=(l.current=a,Cs({disabled:i,subject:n._subjects.values,next:e=>{Is(l.current,e.name,o)&&u(us(Ts(l.current,n._names,e.values||n._formValues,!1,r)))}}),Ql.default.useState(n._getWatch(a,r)));return Ql.default.useEffect(()=>n._removeUnmounted()),s}function Rs(e){var t=ws();const{name:a,disabled:n,control:r=t.control,shouldUnregister:i}=e,o=ls(r._names.array,a);t=As({control:r,name:a,defaultValue:B(r._formValues,a,B(r._defaultValues,a,e.defaultValue)),exact:!0});const l=function(e){var t=ws();const{control:n=t.control,disabled:a,name:r,exact:i}=e||{},[o,l]=Ql.default.useState(n._formState),s=Ql.default.useRef(!0),u=Ql.default.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),c=Ql.default.useRef(r);return c.current=r,Cs({disabled:a,next:e=>s.current&&Is(c.current,e.name,i)&&Ss(e,u.current,n._updateFormState)&&l({...n._formState,...e}),subject:n._subjects.state}),Ql.default.useEffect(()=>(s.current=!0,u.current.isValid&&n._updateValid(!0),()=>{s.current=!1}),[n]),_s(o,n,u.current,!1)}({control:r,name:a}),s=Ql.default.useRef(r.register(a,{...e.rules,value:t,...ms(e.disabled)?{disabled:e.disabled}:{}}));return Ql.default.useEffect(()=>{const e=r._options.shouldUnregister||i,t=(e,t)=>{e=B(r._fields,e);e&&e._f&&(e._f.mount=t)};var n;return t(a,!0),e&&(n=us(B(r._options.defaultValues,a)),z(r._defaultValues,a,n),ds(B(r._formValues,a)))&&z(r._formValues,a,n),()=>{(o?e&&!r._state.action:e)?r.unregister(a):t(a,!1)}},[a,r,o,i]),Ql.default.useEffect(()=>{B(r._fields,a)&&r._updateDisabledField({disabled:n,fields:r._fields,name:a,value:B(r._fields,a)._f.value})},[n,a,r]),{field:{name:a,value:t,...ms(n)||l.disabled?{disabled:l.disabled||n}:{},onChange:Ql.default.useCallback(e=>s.current.onChange({target:{value:is(e),name:a},type:ys}),[a]),onBlur:Ql.default.useCallback(()=>s.current.onBlur({target:{value:B(r._formValues,a),name:a},type:hs}),[a,r]),ref:t=>{var e=B(r._fields,a);e&&t&&(e._f.ref={focus:()=>t.focus(),select:()=>t.select(),setCustomValidity:e=>t.setCustomValidity(e),reportValidity:()=>t.reportValidity()})}},formState:l,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!B(l.errors,a)},isDirty:{enumerable:!0,get:()=>!!B(l.dirtyFields,a)},isTouched:{enumerable:!0,get:()=>!!B(l.touchedFields,a)},isValidating:{enumerable:!0,get:()=>!!B(l.validatingFields,a)},error:{enumerable:!0,get:()=>B(l.errors,a)}})}}var Os=e=>e.render(Rs(e)),Ms=(e,t,n,a,r)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[a]:r||!0}}:{},Ds=e=>({isOnSubmit:!e||e===vs.onSubmit,isOnBlur:e===vs.onBlur,isOnChange:e===vs.onChange,isOnAll:e===vs.all,isOnTouch:e===vs.onTouched}),Ps=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(e=>t.startsWith(e)&&/^\.\w+/.test(t.slice(e.length)))),Ls=(e,t,n,a)=>{for(const i of n||Object.keys(e)){var r=B(e,i);if(r){const{_f:o,...l}=r;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],i)&&!a)break;if(o.ref&&t(o.ref,o.name)&&!a)break;Ls(l,t)}else rs(l)&&Ls(l,t)}}},Fs=e=>"file"===e.type,Vs=e=>"function"==typeof e,js=e=>{return!!ss&&e instanceof((e=e?e.ownerDocument:0)&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},Bs=e=>Ns(e),zs=e=>"radio"===e.type,Us=e=>e instanceof RegExp,Hs={value:!1,isValid:!1},$s={value:!0,isValid:!0},Zs=e=>{var t;return Array.isArray(e)?1<e.length?{value:t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value),isValid:!!t.length}:e[0].checked&&!e[0].disabled?!e[0].attributes||ds(e[0].attributes.value)||ds(e[0].value)||""===e[0].value?$s:{value:e[0].value,isValid:!0}:Hs:Hs},Ws={isValid:!1,value:null},Ks=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,Ws):Ws;function Xs(e,t,n="validate"){if(Bs(e)||Array.isArray(e)&&e.every(Bs)||ms(e)&&!e)return{type:n,message:Bs(e)?e:"",ref:t}}var Ys=e=>rs(e)&&!Us(e)?e:{value:e,message:""},qs=async(n,t,a,r,e)=>{const{ref:i,refs:o,required:l,maxLength:s,minLength:u,min:c,max:d,pattern:m,validate:f,name:p,valueAsNumber:h,mount:g,disabled:y}=n._f;var v=B(t,p);if(!g||y)return{};const b=o?o[0]:i;var E=e=>{r&&b.reportValidity&&(b.setCustomValidity(!ms(e)&&e||""),b.reportValidity())};const w={};var n=zs(i),_=es(i),x=n||_,S=(h||Fs(i))&&ds(i.value)&&ds(v)||js(i)&&""===i.value||""===v||Array.isArray(v)&&!v.length;const k=Ms.bind(null,p,a,w);var I=(e,t,n,a=bs.maxLength,r=bs.minLength)=>{t=e?t:n;w[p]={type:e?a:r,message:t,ref:i,...k(e?a:r,t)}};if(e?!Array.isArray(v)||!v.length:l&&(!x&&(S||ns(v))||ms(v)&&!v||_&&!Zs(o).isValid||n&&!Ks(o).isValid)){var{value:x,message:_}=Bs(l)?{value:!!l,message:l}:Ys(l);if(x&&(w[p]={type:bs.required,message:_,ref:b,...k(bs.required,_)},!a))return E(_),w}if(!(S||ns(c)&&ns(d))){let e,t;n=Ys(d),x=Ys(c);if(ns(v)||isNaN(v)?(_=i.valueAsDate||new Date(v),C=e=>new Date((new Date).toDateString()+" "+e),T="time"==i.type,N="week"==i.type,Ns(n.value)&&v&&(e=T?C(v)>C(n.value):N?v>n.value:_>new Date(n.value)),Ns(x.value)&&v&&(t=T?C(v)<C(x.value):N?v<x.value:_<new Date(x.value))):(T=i.valueAsNumber||v&&+v,ns(n.value)||(e=T>n.value),ns(x.value)||(t=T<x.value)),(e||t)&&(I(!!e,n.message,x.message,bs.max,bs.min),!a))return E(w[p].message),w}if((s||u)&&!S&&(Ns(v)||e&&Array.isArray(v))){var C=Ys(s),N=Ys(u),_=!ns(C.value)&&v.length>+C.value,T=!ns(N.value)&&v.length<+N.value;if((_||T)&&(I(_,C.message,N.message),!a))return E(w[p].message),w}if(m&&!S&&Ns(v)){var{value:n,message:x}=Ys(m);if(Us(n)&&!v.match(n)&&(w[p]={type:bs.pattern,message:x,ref:i,...k(bs.pattern,x)},!a))return E(x),w}if(f)if(Vs(f)){e=Xs(await f(v,t),b);if(e&&(w[p]={...e,...k(bs.validate,e.message)},!a))return E(e.message),w}else if(rs(f)){let e={};for(const R in f){if(!xs(e)&&!a)break;var A=Xs(await f[R](v,t),b,R);A&&(e={...A,...k(R,A.message)},E(A.message),a)&&(w[p]=e)}if(!xs(e)&&(w[p]={ref:b,...e},!a))return w}return E(!0),w};function Gs(e,t){var t=Array.isArray(t)?t:fs(t)?[t]:ps(t),n=1===t.length?e:function(e,t){var n=t.slice(0,-1).length;let a=0;for(;a<n;)e=ds(e)?a++:e[t[a++]];return e}(e,t),a=t.length-1,r=t[a];return n&&delete n[r],0!=a&&(rs(n)&&xs(n)||Array.isArray(n)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!ds(e[t]))return;return 1}(n))&&Gs(e,t.slice(0,-1)),e}var Js=()=>{let n=[];return{get observers(){return n},next:e=>{for(const t of n)t.next&&t.next(e)},subscribe:t=>(n.push(t),{unsubscribe:()=>{n=n.filter(e=>e!==t)}}),unsubscribe:()=>{n=[]}}},Qs=e=>ns(e)||!as(e);function eu(e,t){if(Qs(e)||Qs(t))return e===t;if(ts(e)&&ts(t))return e.getTime()===t.getTime();var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(const o of n){var r=e[o];if(!a.includes(o))return!1;if("ref"!==o){var i=t[o];if(ts(r)&&ts(i)||rs(r)&&rs(i)||Array.isArray(r)&&Array.isArray(i)?!eu(r,i):r!==i)return!1}}return!0}var tu=e=>"select-multiple"===e.type,nu=e=>js(e)&&e.isConnected,au=e=>{for(const t in e)if(Vs(e[t]))return!0;return!1};function ru(e,t={}){var n=Array.isArray(e);if(rs(e)||n)for(const a in e)Array.isArray(e[a])||rs(e[a])&&!au(e[a])?(t[a]=Array.isArray(e[a])?[]:{},ru(e[a],t[a])):ns(e[a])||(t[a]=!0);return t}var iu=(e,t)=>function e(t,n,a){var r=Array.isArray(t);if(rs(t)||r)for(const i in t)Array.isArray(t[i])||rs(t[i])&&!au(t[i])?ds(n)||Qs(a[i])?a[i]=Array.isArray(t[i])?ru(t[i],[]):{...ru(t[i])}:e(t[i],ns(n)?{}:n[i],a[i]):a[i]=!eu(t[i],n[i]);return a}(e,t,ru(t)),ou=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:a})=>ds(e)?e:t?""===e?NaN:e&&+e:n&&Ns(e)?new Date(e):a?a(e):e;function lu(e){var t=e.ref;if(e.refs?!e.refs.every(e=>e.disabled):!t.disabled)return Fs(t)?t.files:zs(t)?Ks(e.refs).value:tu(t)?[...t.selectedOptions].map(({value:e})=>e):es(t)?Zs(e.refs).value:ou((ds(t.value)?e.ref:t).value,e)}var su=e=>ds(e)?e:Us(e)?e.source:rs(e)?Us(e.value)?e.value.source:e.value:e;function uu(e,t,n){var a=B(e,n);if(a||fs(n))return{error:a,name:n};for(var r=n.split(".");r.length;){var i=r.join("."),o=B(t,i),l=B(e,i);if(o&&!Array.isArray(o)&&n!==i)return{name:n};if(l&&l.type)return{name:i,error:l};r.pop()}return{name:n}}var cu={mode:vs.onSubmit,reValidateMode:vs.onChange,shouldFocusError:!0};function du(u={}){let h={...cu,...u},g={submitCount:0,isDirty:!1,isLoading:Vs(h.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:h.errors||{},disabled:h.disabled||!1},y={},c=(rs(h.defaultValues)||rs(h.values))&&us(h.defaultValues||h.values)||{},v=h.shouldUnregister?{}:us(c),b={action:!1,mount:!1,watch:!1},E={mount:new Set,unMount:new Set,array:new Set,watch:new Set},w,l=0;const _={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},x={values:Js(),array:Js(),state:Js()},L=Ds(h.mode),F=Ds(h.reValidateMode),S=h.criteriaMode===vs.all,k=async e=>{(_.isValid||e)&&(e=h.resolver?xs((await N()).errors):await T(y,!0))!==g.isValid&&x.state.next({isValid:e})},I=(e,t)=>{(_.isValidating||_.validatingFields)&&((e||Array.from(E.mount)).forEach(e=>{e&&(t?z(g.validatingFields,e,t):Gs(g.validatingFields,e))}),x.state.next({validatingFields:g.validatingFields,isValidating:!xs(g.validatingFields)}))};const o=(e,t,n,a)=>{var r=B(y,e);r&&(n=B(v,e,ds(n)?B(c,e):n),ds(n)||a&&a.defaultChecked||t?z(v,e,t?n:lu(r._f)):s(e,n),b.mount)&&k()},C=(e,t,n,a,r)=>{let i=!1,o=!1;var l={name:e},s=!!(B(y,e)&&B(y,e)._f&&B(y,e)._f.disabled);return n&&!a||(_.isDirty&&(o=g.isDirty,g.isDirty=l.isDirty=d(),i=o!==l.isDirty),a=s||eu(B(c,e),t),o=!(s||!B(g.dirtyFields,e)),a||s?Gs(g.dirtyFields,e):z(g.dirtyFields,e,!0),l.dirtyFields=g.dirtyFields,i=i||_.dirtyFields&&o!==!a),n&&!(t=B(g.touchedFields,e))&&(z(g.touchedFields,e,n),l.touchedFields=g.touchedFields,i=i||_.touchedFields&&t!==n),i&&r&&x.state.next(l),i?l:{}},V=(n,e,a,t)=>{var r,i=B(g.errors,n),o=_.isValid&&ms(e)&&g.isValid!==e;u.delayError&&a?(w=(r=()=>{return e=n,t=a,z(g.errors,e,t),void x.state.next({errors:g.errors});var e,t},e=>{clearTimeout(l),l=setTimeout(r,e)}))(u.delayError):(clearTimeout(l),w=null,a?z(g.errors,n,a):Gs(g.errors,n)),(a?eu(i,a):!i)&&xs(t)&&!o||(i={...t,...o&&ms(e)?{isValid:e}:{},errors:g.errors,name:n},g={...g,...i},x.state.next(i))},N=async e=>{I(e,!0);var t=await h.resolver(v,h.context,((e,t,n,a)=>{var r={};for(const o of e){var i=B(t,o);i&&z(r,o,i._f)}return{criteriaMode:n,names:[...e],fields:r,shouldUseNativeValidation:a}})(e||E.mount,y,h.criteriaMode,h.shouldUseNativeValidation));return I(e),t},T=async(e,t,n={valid:!0})=>{for(const s in e){var a=e[s];if(a){const{_f:u,...c}=a;if(u){var r=E.array.has(u.name),a=(I([s],!0),await qs(a,v,S,h.shouldUseNativeValidation&&!t,r));if(I([s]),a[u.name]&&(n.valid=!1,t))break;t||(B(a,u.name)?r?(r=g.errors,i=a,o=u.name,l=void 0,l=ks(B(r,o)),z(l,"root",i[o]),z(r,o,l)):z(g.errors,u.name,a[u.name]):Gs(g.errors,u.name))}c&&await T(c,t,n)}}var i,o,l;return n.valid};const d=(e,t)=>(e&&t&&z(v,e,t),!eu(n(),c)),a=(e,t,n)=>Ts(e,E,{...b.mount?v:ds(t)?c:Ns(e)?{[e]:t}:t},n,t);const s=(e,t,n={})=>{var a=B(y,e);let r=t;a&&(a=a._f)&&(a.disabled||z(v,e,ou(t,a)),r=js(a.ref)&&ns(t)?"":t,tu(a.ref)?[...a.ref.options].forEach(e=>e.selected=r.includes(e.value)):a.refs?es(a.ref)?1<a.refs.length?a.refs.forEach(t=>(!t.defaultChecked||!t.disabled)&&(t.checked=Array.isArray(r)?!!r.find(e=>e===t.value):r===t.value)):a.refs[0]&&(a.refs[0].checked=!!r):a.refs.forEach(e=>e.checked=e.value===r):Fs(a.ref)?a.ref.value="":(a.ref.value=r,a.ref.type||x.values.next({name:e,values:{...v}}))),(n.shouldDirty||n.shouldTouch)&&C(e,r,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&A(e)},m=(e,t,n)=>{for(const o in t){var a=t[o],r=e+"."+o,i=B(y,r);(!E.array.has(e)&&Qs(a)&&(!i||i._f)||ts(a)?s:m)(r,a,n)}},f=(e,t,n={})=>{var a=B(y,e),r=E.array.has(e),t=us(t);z(v,e,t),r?(x.array.next({name:e,values:{...v}}),(_.isDirty||_.dirtyFields)&&n.shouldDirty&&x.state.next({name:e,dirtyFields:iu(c,v),isDirty:d(e,t)})):(!a||a._f||ns(t)?s:m)(e,t,n),Ps(e,E)&&x.state.next({...g}),x.values.next({name:b.mount?e:void 0,values:{...v}})},t=async n=>{b.mount=!0;const a=n.target;let r=a.name,i=!0;const o=B(y,r);var l=e=>{i=Number.isNaN(e)||e===B(v,r,e)};if(o){let e,t;var s,u=a.type?lu(o._f):is(n),c=n.type===hs||n.type===gs,d=!((s=o._f).mount&&(s.required||s.min||s.max||s.maxLength||s.minLength||s.pattern||s.validate)||h.resolver||B(g.errors,r)||o._f.deps)||(s=c,d=B(g.touchedFields,r),m=g.isSubmitted,f=F,!(p=L).isOnAll&&(!m&&p.isOnTouch?!(d||s):(m?f:p).isOnBlur?!s:!(m?f:p).isOnChange||s)),m=Ps(r,E,c),f=(z(v,r,u),c?(o._f.onBlur&&o._f.onBlur(n),w&&w(0)):o._f.onChange&&o._f.onChange(n),C(r,u,c,!1)),p=!xs(f)||m;if(c||x.values.next({name:r,type:n.type,values:{...v}}),d)return _.isValid&&k(),p&&x.state.next({name:r,...m?{}:f});!c&&m&&x.state.next({...g}),h.resolver?(s=(await N([r]))["errors"],l(u),i&&(n=uu(g.errors,y,r),c=uu(s,y,n.name||r),e=c.error,r=c.name,t=xs(s))):(I([r],!0),e=(await qs(o,v,S,h.shouldUseNativeValidation))[r],I([r]),l(u),i&&(e?t=!1:_.isValid&&(t=await T(y,!0)))),i&&(o._f.deps&&A(o._f.deps),V(r,t,e,f))}},p=(e,t)=>{if(B(g.errors,t)&&e.focus)return e.focus(),1},A=async(e,t={})=>{let n,a;var r=ks(e);if(h.resolver){const i=await(async e=>{var t=(await N(e))["errors"];if(e)for(const a of e){var n=B(t,a);n?z(g.errors,a,n):Gs(g.errors,a)}else g.errors=t;return t})(ds(e)?e:r);n=xs(i),a=e?!r.some(e=>B(i,e)):n}else e?((a=(await Promise.all(r.map(async e=>{var t=B(y,e);return T(t&&t._f?{[e]:t}:t)}))).every(Boolean))||g.isValid)&&k():a=n=await T(y);return x.state.next({...!Ns(e)||_.isValid&&n!==g.isValid?{}:{name:e},...h.resolver||!e?{isValid:n}:{},errors:g.errors}),t.shouldFocus&&!a&&Ls(y,p,e?r:E.mount),a},n=e=>{const t={...b.mount?v:c};return ds(e)?t:Ns(e)?B(t,e):e.map(e=>B(t,e))};var e=(e,t)=>({invalid:!!B((t||g).errors,e),isDirty:!!B((t||g).dirtyFields,e),error:B((t||g).errors,e),isValidating:!!B(g.validatingFields,e),isTouched:!!B((t||g).touchedFields,e)}),r=(e,t,n)=>{var a=(B(y,e,{_f:{}})._f||{}).ref;const{ref:r,message:i,type:o,...l}=B(g.errors,e)||{};z(g.errors,e,{...l,...t,ref:a}),x.state.next({name:e,errors:g.errors,isValid:!1}),n&&n.shouldFocus&&a&&a.focus&&a.focus()};const i=(e,t={})=>{for(const n of e?ks(e):E.mount)E.mount.delete(n),E.array.delete(n),t.keepValue||(Gs(y,n),Gs(v,n)),t.keepError||Gs(g.errors,n),t.keepDirty||Gs(g.dirtyFields,n),t.keepTouched||Gs(g.touchedFields,n),t.keepIsValidating||Gs(g.validatingFields,n),h.shouldUnregister||t.keepDefaultValue||Gs(c,n);x.values.next({values:{...v}}),x.state.next({...g,...t.keepDirty?{isDirty:d()}:{}}),t.keepIsValid||k()},R=({disabled:e,name:t,field:n,fields:a,value:r})=>{(ms(e)&&b.mount||e)&&(e=e?void 0:ds(r)?lu((n||B(a,t))._f):r,z(v,t,e),C(t,e,!1,!1,!0))},O=(a,r={})=>{let i=B(y,a);var e=ms(r.disabled);return z(y,a,{...i||{},_f:{...i&&i._f?i._f:{ref:{name:a}},name:a,mount:!0,...r}}),E.mount.add(a),i?R({field:i,disabled:r.disabled,name:a,value:r.value}):o(a,!0,r.value),{...e?{disabled:r.disabled}:{},...h.progressive?{required:!!r.required,min:su(r.min),max:su(r.max),minLength:su(r.minLength),maxLength:su(r.maxLength),pattern:su(r.pattern)}:{},name:a,onChange:t,onBlur:t,ref:e=>{if(e){O(a,r),i=B(y,a);const n=ds(e.value)&&e.querySelectorAll&&e.querySelectorAll("input,select,textarea")[0]||e;e=n;var e=zs(e)||es(e),t=i._f.refs||[];(e?t.find(e=>e===n):n===i._f.ref)||(z(y,a,{_f:{...i._f,...e?{refs:[...t.filter(nu),n,...Array.isArray(B(c,a))?[{}]:[]],ref:{type:n.type,name:a}}:{ref:n}}}),o(a,!1,void 0,n))}else(i=B(y,a,{}))._f&&(i._f.mount=!1),!h.shouldUnregister&&!r.shouldUnregister||ls(E.array,a)&&b.action||E.unMount.add(a)}}},M=()=>h.shouldFocusError&&Ls(y,p,E.mount);var D=(i,o)=>async e=>{let t=void 0,n=(e&&(e.preventDefault&&e.preventDefault(),e.persist)&&e.persist(),us(v));var a,r;if(x.state.next({isSubmitting:!0}),h.resolver?({errors:a,values:r}=await N(),g.errors=a,n=r):await T(y),Gs(g.errors,"root"),xs(g.errors)){x.state.next({errors:{}});try{await i(n,e)}catch(e){t=e}}else o&&await o({...g.errors},e),M(),setTimeout(M);if(x.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:xs(g.errors)&&!t,submitCount:g.submitCount+1,errors:g.errors}),t)throw t};const P=(e,t={})=>{var n=e?us(e):c,a=us(n),r=xs(e),i=r?c:a;if(t.keepDefaultValues||(c=n),!t.keepValues){if(t.keepDirtyValues)for(const l of E.mount)B(g.dirtyFields,l)?z(i,l,B(v,l)):f(l,B(i,l));else{if(ss&&ds(e))for(const s of E.mount){var o=B(y,s);if(o&&o._f){o=Array.isArray(o._f.refs)?o._f.refs[0]:o._f.ref;if(js(o)){o=o.closest("form");if(o){o.reset();break}}}}y={}}v=u.shouldUnregister?t.keepDefaultValues?us(c):{}:us(i),x.array.next({values:{...i}}),x.values.next({values:{...i}})}E={mount:t.keepDirtyValues?E.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},b.mount=!_.isValid||!!t.keepIsValid||!!t.keepDirtyValues,b.watch=!!u.shouldUnregister,x.state.next({submitCount:t.keepSubmitCount?g.submitCount:0,isDirty:!r&&(t.keepDirty?g.isDirty:!(!t.keepDefaultValues||eu(e,c))),isSubmitted:!!t.keepIsSubmitted&&g.isSubmitted,dirtyFields:r?{}:t.keepDirtyValues?t.keepDefaultValues&&v?iu(c,v):g.dirtyFields:t.keepDefaultValues&&e?iu(c,e):t.keepDirty?g.dirtyFields:{},touchedFields:t.keepTouched?g.touchedFields:{},errors:t.keepErrors?g.errors:{},isSubmitSuccessful:!!t.keepIsSubmitSuccessful&&g.isSubmitSuccessful,isSubmitting:!1})},j=(e,t)=>P(Vs(e)?e(v):e,t);return{control:{register:O,unregister:i,getFieldState:e,handleSubmit:D,setError:r,_executeSchema:N,_getWatch:a,_getDirty:d,_updateValid:k,_removeUnmounted:()=>{for(const t of E.unMount){var e=B(y,t);e&&(e._f.refs?e._f.refs.every(e=>!nu(e)):!nu(e._f.ref))&&i(t)}E.unMount=new Set},_updateFieldArray:(e,t=[],n,a,r=!0,i=!0)=>{var o,l;a&&n?(b.action=!0,i&&Array.isArray(B(y,e))&&(o=n(B(y,e),a.argA,a.argB),r)&&z(y,e,o),i&&Array.isArray(B(g.errors,e))&&(o=n(B(g.errors,e),a.argA,a.argB),r&&z(g.errors,e,o),o=g.errors,cs(B(o,l=e)).length||Gs(o,l)),_.touchedFields&&i&&Array.isArray(B(g.touchedFields,e))&&(l=n(B(g.touchedFields,e),a.argA,a.argB),r)&&z(g.touchedFields,e,l),_.dirtyFields&&(g.dirtyFields=iu(c,v)),x.state.next({name:e,isDirty:d(e,t),dirtyFields:g.dirtyFields,errors:g.errors,isValid:g.isValid})):z(v,e,t)},_updateDisabledField:R,_getFieldArray:e=>cs(B(b.mount?v:c,e,u.shouldUnregister?B(c,e,[]):[])),_reset:P,_resetDefaultValues:()=>Vs(h.defaultValues)&&h.defaultValues().then(e=>{j(e,h.resetOptions),x.state.next({isLoading:!1})}),_updateFormState:e=>{g={...g,...e}},_disableForm:a=>{ms(a)&&(x.state.next({disabled:a}),Ls(y,(e,t)=>{const n=B(y,t);n&&(e.disabled=n._f.disabled||a,Array.isArray(n._f.refs))&&n._f.refs.forEach(e=>{e.disabled=n._f.disabled||a})},0,!1))},_subjects:x,_proxyFormState:_,_setErrors:e=>{g.errors=e,x.state.next({errors:g.errors,isValid:!1})},get _fields(){return y},get _formValues(){return v},get _state(){return b},set _state(e){b=e},get _defaultValues(){return c},get _names(){return E},set _names(e){E=e},get _formState(){return g},set _formState(e){g=e},get _options(){return h},set _options(e){h={...h,...e}}},trigger:A,register:O,handleSubmit:D,watch:(t,n)=>Vs(t)?x.values.subscribe({next:e=>t(a(void 0,n),e)}):a(t,n,!0),setValue:f,getValues:n,reset:j,resetField:(e,t={})=>{B(y,e)&&(ds(t.defaultValue)?f(e,us(B(c,e))):(f(e,t.defaultValue),z(c,e,us(t.defaultValue))),t.keepTouched||Gs(g.touchedFields,e),t.keepDirty||(Gs(g.dirtyFields,e),g.isDirty=t.defaultValue?d(e,us(B(c,e))):d()),t.keepError||(Gs(g.errors,e),_.isValid&&k()),x.state.next({...g}))},clearErrors:e=>{e&&ks(e).forEach(e=>Gs(g.errors,e)),x.state.next({errors:e?g.errors:{}})},unregister:i,setError:r,setFocus:(e,t={})=>{var e=B(y,e),e=e&&e._f;e&&(e=e.refs?e.refs[0]:e.ref).focus&&(e.focus(),t.shouldSelect)&&e.select()},getFieldState:e}}function mu(e={}){var t=Ql.default.useRef();const n=Ql.default.useRef(),[a,r]=Ql.default.useState({isDirty:!1,isValidating:!1,isLoading:Vs(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:Vs(e.defaultValues)?void 0:e.defaultValues}),i=(t.current||(t.current={...du(e),formState:a}),t.current.control);return i._options=e,Cs({subject:i._subjects.state,next:e=>{Ss(e,i._proxyFormState,i._updateFormState,!0)&&r({...i._formState})}}),Ql.default.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),Ql.default.useEffect(()=>{var e;i._proxyFormState.isDirty&&(e=i._getDirty())!==a.isDirty&&i._subjects.state.next({isDirty:e})},[i,a.isDirty]),Ql.default.useEffect(()=>{e.values&&!eu(e.values,n.current)?(i._reset(e.values,i._options.resetOptions),n.current=e.values,r(e=>({...e}))):i._resetDefaultValues()},[e.values,i]),Ql.default.useEffect(()=>{e.errors&&i._setErrors(e.errors)},[e.errors,i]),Ql.default.useEffect(()=>{i._state.mount||(i._updateValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),Ql.default.useEffect(()=>{e.shouldUnregister&&i._subjects.values.next({values:i._getWatch()})},[e.shouldUnregister,i]),t.current.formState=_s(a,i),t.current}for(var fu,pu=(e,t,n)=>{e&&"reportValidity"in e&&(n=B(n,t),e.setCustomValidity(n&&n.message||""),e.reportValidity())},hu=(t,e)=>{for(const a in e.fields){var n=e.fields[a];n&&n.ref&&"reportValidity"in n.ref?pu(n.ref,a,t):n.refs&&n.refs.forEach(e=>pu(e,a,t))}},gu=(e,t)=>{t.shouldUseNativeValidation&&hu(e,t);var n={};for(const i in e){var a,r=B(t.fields,i),r=Object.assign(e[i]||{},{ref:r&&r.ref});((e,t)=>e.some(e=>e.startsWith(t+".")))(t.names||Object.keys(e),i)?(a=Object.assign({},B(n,i)),z(a,"root",r),z(n,i,a)):z(n,i,r)}return n},yu=function(t,e){for(var n={};t.length;){var a,r=t[0],i=r.code,o=r.message,l=r.path.join(".");n[l]||("unionErrors"in r?(a=r.unionErrors[0].errors[0],n[l]={message:a.message,type:a.code}):n[l]={message:o,type:i}),"unionErrors"in r&&r.unionErrors.forEach(function(e){return e.errors.forEach(function(e){return t.push(e)})}),e&&(o=(a=n[l].types)&&a[r.code],n[l]=Ms(l,e,n,i,o?[].concat(o,r.message):r.message)),t.shift()}return n},vu=function(r,i,o){return void 0===o&&(o={}),function(n,e,a){try{return Promise.resolve(function(t){try{var e=Promise.resolve(r["sync"===o.mode?"parse":"parseAsync"](n,i)).then(function(e){return a.shouldUseNativeValidation&&hu({},a),{errors:{},values:o.raw?n:e}})}catch(e){return t(e)}return e&&e.then?e.then(void 0,t):e}(function(e){if(Array.isArray(null==e?void 0:e.errors))return{values:{},errors:gu(yu(e.errors,!a.shouldUseNativeValidation&&"all"===a.criteriaMode),a)};throw e}))}catch(e){return Promise.reject(e)}}},bu=t(b()),Eu=[],wu=0;wu<256;++wu)Eu.push((wu+256).toString(16).slice(1));var _u=new Uint8Array(16);var xu={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};var Su=function(e,t,n){if(xu.randomUUID&&!t&&!e)return xu.randomUUID();var a=(e=e||{}).random||(e.rng||function(){if(fu=fu||"undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto))return fu(_u);throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported")})();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){n=n||0;for(var r=0;r<16;++r)t[n+r]=a[r];return t}return(Eu[a[(e=0)+0]]+Eu[a[e+1]]+Eu[a[e+2]]+Eu[a[e+3]]+"-"+Eu[a[e+4]]+Eu[a[e+5]]+"-"+Eu[a[e+6]]+Eu[a[e+7]]+"-"+Eu[a[e+8]]+Eu[a[e+9]]+"-"+Eu[a[e+10]]+Eu[a[e+11]]+Eu[a[e+12]]+Eu[a[e+13]]+Eu[a[e+14]]+Eu[a[e+15]]).toLowerCase()},a=t(b(),1),Y=t(n(),1),ku={},Iu=a.default["useDebugValue"],Cu=Y.default["useSyncExternalStoreWithSelector"],Nu=!1,Tu=e=>e;var d,Au,Ru,Ou=e=>{"production"!==(ku.env?ku.env.MODE:void 0)&&"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const a="function"==typeof e?Fe(e):e;e=(e,t)=>{return[e,t=Tu,n]=[a,e,t],"production"!==(ku.env?ku.env.MODE:void 0)&&n&&!Nu&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Nu=!0),e=Cu(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n),Iu(e),e;var n};return Object.assign(e,a),e},an=e=>e?Ou(e):Ou,Mu="https://api.spotify.com/v1";function Du(e=!1){let t=y().RequestBuilder.build().withHost(Mu);return t=e?t.withoutMarket():t}function Pu(e){var t=e._base62Id;if(t)return t;if(e.id)return e.id;throw new Error("URI does not have an ID")}(Au=d=d||{}).assertEqual=e=>e,Au.assertIs=function(e){},Au.assertNever=function(e){throw new Error},Au.arrayToEnum=e=>{var t={};for(const n of e)t[n]=n;return t},Au.getValidEnumValues=t=>{var e={};for(const n of Au.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]))e[n]=t[n];return Au.objectValues(e)},Au.objectValues=t=>Au.objectKeys(t).map(function(e){return t[e]}),Au.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{var t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},Au.find=(e,t)=>{for(const n of e)if(t(n))return n},Au.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,Au.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},Au.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(Ru||(Ru={})).mergeShapes=(e,t)=>({...e,...t});var g=d.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Lu=e=>{switch(typeof e){case"undefined":return g.undefined;case"string":return g.string;case"number":return isNaN(e)?g.nan:g.number;case"boolean":return g.boolean;case"function":return g.function;case"bigint":return g.bigint;case"symbol":return g.symbol;case"object":return Array.isArray(e)?g.array:null===e?g.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?g.promise:"undefined"!=typeof Map&&e instanceof Map?g.map:"undefined"!=typeof Set&&e instanceof Set?g.set:"undefined"!=typeof Date&&e instanceof Date?g.date:g.object;default:return g.unknown}},E=d.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Fu=class extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};var t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const r=e||function(e){return e.message},i={_errors:[]},t=e=>{for(const a of e.issues)if("invalid_union"===a.code)a.unionErrors.map(t);else if("invalid_return_type"===a.code)t(a.returnTypeError);else if("invalid_arguments"===a.code)t(a.argumentsError);else if(0===a.path.length)i._errors.push(r(a));else{let e=i,t=0;for(;t<a.path.length;){var n=a.path[t];t===a.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(r(a))):e[n]=e[n]||{_errors:[]},e=e[n],t++}}};return t(this),i}static assert(e){if(!(e instanceof Fu))throw new Error("Not a ZodError: "+e)}toString(){return this.message}get message(){return JSON.stringify(this.issues,d.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){var t={},n=[];for(const a of this.issues)(0<a.path.length?(t[a.path[0]]=t[a.path[0]]||[],t[a.path[0]]):n).push(e(a));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}},Vu=(Fu.create=e=>{return new Fu(e)},(e,t)=>{let n;switch(e.code){case E.invalid_type:n=e.received===g.undefined?"Required":`Expected ${e.expected}, received `+e.received;break;case E.invalid_literal:n="Invalid literal value, expected "+JSON.stringify(e.expected,d.jsonStringifyReplacer);break;case E.unrecognized_keys:n="Unrecognized key(s) in object: "+d.joinValues(e.keys,", ");break;case E.invalid_union:n="Invalid input";break;case E.invalid_union_discriminator:n="Invalid discriminator value. Expected "+d.joinValues(e.options);break;case E.invalid_enum_value:n=`Invalid enum value. Expected ${d.joinValues(e.options)}, received '${e.received}'`;break;case E.invalid_arguments:n="Invalid function arguments";break;case E.invalid_return_type:n="Invalid function return type";break;case E.invalid_date:n="Invalid date";break;case E.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=n+" at one or more positions greater than or equal to "+e.validation.position)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:d.assertNever(e.validation):n="regex"!==e.validation?"Invalid "+e.validation:"Invalid";break;case E.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?"Number must be "+(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ")+e.minimum:"date"===e.type?"Date must be "+(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ")+new Date(Number(e.minimum)):"Invalid input";break;case E.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} `+e.maximum:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} `+e.maximum:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} `+new Date(Number(e.maximum)):"Invalid input";break;case E.custom:n="Invalid input";break;case E.invalid_intersection_types:n="Intersection results could not be merged";break;case E.not_multiple_of:n="Number must be a multiple of "+e.multipleOf;break;case E.not_finite:n="Number must be finite";break;default:n=t.defaultError,d.assertNever(e)}return{message:n}}),ju=Vu;function Bu(){return ju}var zu=e=>{var{data:t,path:e,errorMaps:n,issueData:a}=e,e=[...e,...a.path||[]],r={...a,path:e};if(void 0!==a.message)return{...a,path:e,message:a.message};let i="";for(const o of n.filter(e=>!!e).slice().reverse())i=o(r,{data:t,defaultError:i}).message;return{...a,path:e,message:i}};function w(e,t){var n=ju,t=zu({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===Vu?void 0:Vu].filter(e=>!!e)});e.common.issues.push(t)}var o,Uu=class{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){var n=[];for(const a of t){if("aborted"===a.status)return x;"dirty"===a.status&&e.dirty(),n.push(a.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){var n=[];for(const i of t){var a=await i.key,r=await i.value;n.push({key:a,value:r})}return Uu.mergeObjectSync(e,n)}static mergeObjectSync(e,t){var n={};for(const i of t){var{key:a,value:r}=i;if("aborted"===a.status)return x;if("aborted"===r.status)return x;"dirty"===a.status&&e.dirty(),"dirty"===r.status&&e.dirty(),"__proto__"===a.value||void 0===r.value&&!i.alwaysSet||(n[a.value]=r.value)}return{status:e.value,value:n}}},x=Object.freeze({status:"aborted"}),Hu=e=>({status:"dirty",value:e}),$u=e=>({status:"valid",value:e}),Zu=e=>"aborted"===e.status,Wu=e=>"dirty"===e.status,Ku=e=>"valid"===e.status,Xu=e=>"undefined"!=typeof Promise&&e instanceof Promise;function Yu(e,t,n,a){if("a"===n&&!a)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e===t&&a:t.has(e))return"m"===n?a:"a"===n?a.call(e):a?a.value:t.get(e);throw new TypeError("Cannot read private member from an object whose class did not declare it")}function qu(e,t,n,a,r){if("m"===a)throw new TypeError("Private method is not writable");if("a"===a&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===a?r.call(e,n):r?r.value=n:t.set(e,n)}(i=o=o||{}).errToObj=e=>"string"==typeof e?{message:e}:e||{},i.toString=e=>"string"==typeof e?e:null==e?void 0:e.message;var Gu=class{constructor(e,t,n,a){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Ju=(t,e)=>{if(Ku(e))return{success:!0,data:e.value};if(t.common.issues.length)return{success:!1,get error(){var e;return this._error||(e=new Fu(t.common.issues),this._error=e),this._error}};throw new Error("Validation failed but no issues detected.")};function l(r){if(!r)return{};const{errorMap:e,invalid_type_error:i,required_error:o,description:t}=r;if(e&&(i||o))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:t}:{errorMap:(e,t)=>{var n,a=r["message"];return"invalid_enum_value"===e.code?{message:null!=a?a:t.defaultError}:void 0===t.data?{message:null!=(n=null!=a?a:o)?n:t.defaultError}:"invalid_type"!==e.code?{message:t.defaultError}:{message:null!=(n=null!=a?a:i)?n:t.defaultError}},description:t}}var Qu,s=class{get description(){return this._def.description}_getType(e){return Lu(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Lu(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Uu,ctx:{common:e.parent.common,data:e.data,parsedType:Lu(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){e=this._parse(e);if(Xu(e))throw new Error("Synchronous parse encountered promise.");return e}_parseAsync(e){e=this._parse(e);return Promise.resolve(e)}parse(e,t){e=this.safeParse(e,t);if(e.success)return e.data;throw e.error}safeParse(e,t){var n={common:{issues:[],async:null!=(n=null==t?void 0:t.async)&&n,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Lu(e)},t=this._parseSync({data:e,path:n.path,parent:n});return Ju(n,t)}"~validate"(e){const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Lu(e)};if(!this["~standard"].async)try{var n=this._parseSync({data:e,path:[],parent:t});return Ku(n)?{value:n.value}:{issues:t.common.issues}}catch(e){null!=(n=null==(n=null==e?void 0:e.message)?void 0:n.toLowerCase())&&n.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>Ku(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){e=await this.safeParseAsync(e,t);if(e.success)return e.data;throw e.error}async safeParseAsync(e,t){t={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Lu(e)},e=this._parse({data:e,path:t.path,parent:t}),e=await(Xu(e)?e:Promise.resolve(e));return Ju(t,e)}refine(r,i){return this._refinement((t,n)=>{var e=r(t);const a=()=>{return n.addIssue({code:E.custom,...(e=t,"string"==typeof i||void 0===i?{message:i}:"function"==typeof i?i(e):i)});var e};return"undefined"!=typeof Promise&&e instanceof Promise?e.then(e=>!!e||(a(),!1)):!!e||(a(),!1)})}refinement(n,a){return this._refinement((e,t)=>!!n(e)||(t.addIssue("function"==typeof a?a(e,t):a),!1))}_refinement(e){return new nd({schema:this,typeName:u.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return ad.create(this,this._def)}nullable(){return rd.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Pc.create(this)}promise(){return td.create(this,this._def)}or(e){return Vc.create([this,e],this._def)}and(e){return Uc.create(this,e,this._def)}transform(e){return new nd({...l(this._def),schema:this,typeName:u.ZodEffects,effect:{type:"transform",transform:e}})}default(e){var t="function"==typeof e?e:()=>e;return new id({...l(this._def),innerType:this,defaultValue:t,typeName:u.ZodDefault})}brand(){return new sd({typeName:u.ZodBranded,type:this,...l(this._def)})}catch(e){var t="function"==typeof e?e:()=>e;return new od({...l(this._def),innerType:this,catchValue:t,typeName:u.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return ud.create(this,e)}readonly(){return cd.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},ec=/^c[^\s-]{8,}$/i,tc=/^[0-9a-z]+$/,nc=/^[0-9A-HJKMNP-TV-Z]{26}$/i,ac=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,rc=/^[a-z0-9_-]{21}$/i,ic=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,oc=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,lc=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,sc=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,uc=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,cc=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,dc=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,mc=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,fc=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,pc="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",hc=new RegExp(`^${pc}$`);function gc(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t+="(\\.\\d+)?"),t}function yc(e){return new RegExp(`^${gc(e)}$`)}function vc(e){var t=pc+"T"+gc(e),n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t+=`(${n.join("|")})`,new RegExp(`^${t}$`)}function bc(e,t){return("v4"===t||!t)&&sc.test(e)||!("v6"!==t&&t||!cc.test(e))}function Ec(e,t){if(ic.test(e))try{var[n]=e.split("."),a=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),r=JSON.parse(atob(a));return"object"==typeof r&&null!==r?!(!r.typ||!r.alg||t&&r.alg!==t):void 0}catch(e){}}function wc(e,t){return("v4"===t||!t)&&uc.test(e)||!("v6"!==t&&t||!dc.test(e))}var _c=class extends s{_parse(t){var e;if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==g.string)return w(e=this._getOrReturnCtx(t),{code:E.invalid_type,expected:g.string,received:e.parsedType}),x;var n=new Uu;let a=void 0;for(const o of this._def.checks)if("min"===o.kind)t.data.length<o.value&&(w(a=this._getOrReturnCtx(t,a),{code:E.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if("max"===o.kind)t.data.length>o.value&&(w(a=this._getOrReturnCtx(t,a),{code:E.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if("length"===o.kind){var r=t.data.length>o.value,i=t.data.length<o.value;(r||i)&&(a=this._getOrReturnCtx(t,a),r?w(a,{code:E.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):i&&w(a,{code:E.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if("email"===o.kind)lc.test(t.data)||(w(a=this._getOrReturnCtx(t,a),{validation:"email",code:E.invalid_string,message:o.message}),n.dirty());else if("emoji"===o.kind)(Qu=Qu||new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")).test(t.data)||(w(a=this._getOrReturnCtx(t,a),{validation:"emoji",code:E.invalid_string,message:o.message}),n.dirty());else if("uuid"===o.kind)ac.test(t.data)||(w(a=this._getOrReturnCtx(t,a),{validation:"uuid",code:E.invalid_string,message:o.message}),n.dirty());else if("nanoid"===o.kind)rc.test(t.data)||(w(a=this._getOrReturnCtx(t,a),{validation:"nanoid",code:E.invalid_string,message:o.message}),n.dirty());else if("cuid"===o.kind)ec.test(t.data)||(w(a=this._getOrReturnCtx(t,a),{validation:"cuid",code:E.invalid_string,message:o.message}),n.dirty());else if("cuid2"===o.kind)tc.test(t.data)||(w(a=this._getOrReturnCtx(t,a),{validation:"cuid2",code:E.invalid_string,message:o.message}),n.dirty());else if("ulid"===o.kind)nc.test(t.data)||(w(a=this._getOrReturnCtx(t,a),{validation:"ulid",code:E.invalid_string,message:o.message}),n.dirty());else if("url"===o.kind)try{new URL(t.data)}catch(e){w(a=this._getOrReturnCtx(t,a),{validation:"url",code:E.invalid_string,message:o.message}),n.dirty()}else"regex"===o.kind?(o.regex.lastIndex=0,o.regex.test(t.data)||(w(a=this._getOrReturnCtx(t,a),{validation:"regex",code:E.invalid_string,message:o.message}),n.dirty())):"trim"===o.kind?t.data=t.data.trim():"includes"===o.kind?t.data.includes(o.value,o.position)||(w(a=this._getOrReturnCtx(t,a),{code:E.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):"toLowerCase"===o.kind?t.data=t.data.toLowerCase():"toUpperCase"===o.kind?t.data=t.data.toUpperCase():"startsWith"===o.kind?t.data.startsWith(o.value)||(w(a=this._getOrReturnCtx(t,a),{code:E.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):"endsWith"===o.kind?t.data.endsWith(o.value)||(w(a=this._getOrReturnCtx(t,a),{code:E.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):"datetime"===o.kind?vc(o).test(t.data)||(w(a=this._getOrReturnCtx(t,a),{code:E.invalid_string,validation:"datetime",message:o.message}),n.dirty()):"date"===o.kind?hc.test(t.data)||(w(a=this._getOrReturnCtx(t,a),{code:E.invalid_string,validation:"date",message:o.message}),n.dirty()):"time"===o.kind?yc(o).test(t.data)||(w(a=this._getOrReturnCtx(t,a),{code:E.invalid_string,validation:"time",message:o.message}),n.dirty()):"duration"===o.kind?oc.test(t.data)||(w(a=this._getOrReturnCtx(t,a),{validation:"duration",code:E.invalid_string,message:o.message}),n.dirty()):"ip"===o.kind?bc(t.data,o.version)||(w(a=this._getOrReturnCtx(t,a),{validation:"ip",code:E.invalid_string,message:o.message}),n.dirty()):"jwt"===o.kind?Ec(t.data,o.alg)||(w(a=this._getOrReturnCtx(t,a),{validation:"jwt",code:E.invalid_string,message:o.message}),n.dirty()):"cidr"===o.kind?wc(t.data,o.version)||(w(a=this._getOrReturnCtx(t,a),{validation:"cidr",code:E.invalid_string,message:o.message}),n.dirty()):"base64"===o.kind?mc.test(t.data)||(w(a=this._getOrReturnCtx(t,a),{validation:"base64",code:E.invalid_string,message:o.message}),n.dirty()):"base64url"===o.kind?fc.test(t.data)||(w(a=this._getOrReturnCtx(t,a),{validation:"base64url",code:E.invalid_string,message:o.message}),n.dirty()):d.assertNever(o);return{status:n.value,value:t.data}}_regex(t,e,n){return this.refinement(e=>t.test(e),{validation:e,code:E.invalid_string,...o.errToObj(n)})}_addCheck(e){return new _c({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...o.errToObj(e)})}url(e){return this._addCheck({kind:"url",...o.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...o.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...o.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...o.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...o.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...o.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...o.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...o.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...o.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...o.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...o.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...o.errToObj(e)})}datetime(e){var t;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!=(t=null==e?void 0:e.offset)&&t,local:null!=(t=null==e?void 0:e.local)&&t,...o.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...o.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...o.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...o.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...o.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...o.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...o.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...o.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...o.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...o.errToObj(t)})}nonempty(e){return this.min(1,o.errToObj(e))}trim(){return new _c({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new _c({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new _c({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}};function xc(e,t){var n=(e.toString().split(".")[1]||"").length,a=(t.toString().split(".")[1]||"").length,n=a<n?n:a;return parseInt(e.toFixed(n).replace(".",""))%parseInt(t.toFixed(n).replace(".",""))/Math.pow(10,n)}_c.create=e=>{var t;return new _c({checks:[],typeName:u.ZodString,coerce:null!=(t=null==e?void 0:e.coerce)&&t,...l(e)})};var Sc=class extends s{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){var t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==g.number)return w(t=this._getOrReturnCtx(e),{code:E.invalid_type,expected:g.number,received:t.parsedType}),x;let n=void 0;var a=new Uu;for(const r of this._def.checks)"int"===r.kind?d.isInteger(e.data)||(w(n=this._getOrReturnCtx(e,n),{code:E.invalid_type,expected:"integer",received:"float",message:r.message}),a.dirty()):"min"===r.kind?(r.inclusive?e.data<r.value:e.data<=r.value)&&(w(n=this._getOrReturnCtx(e,n),{code:E.too_small,minimum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),a.dirty()):"max"===r.kind?(r.inclusive?e.data>r.value:e.data>=r.value)&&(w(n=this._getOrReturnCtx(e,n),{code:E.too_big,maximum:r.value,type:"number",inclusive:r.inclusive,exact:!1,message:r.message}),a.dirty()):"multipleOf"===r.kind?0!==xc(e.data,r.value)&&(w(n=this._getOrReturnCtx(e,n),{code:E.not_multiple_of,multipleOf:r.value,message:r.message}),a.dirty()):"finite"===r.kind?Number.isFinite(e.data)||(w(n=this._getOrReturnCtx(e,n),{code:E.not_finite,message:r.message}),a.dirty()):d.assertNever(r);return{status:a.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,o.toString(t))}gt(e,t){return this.setLimit("min",e,!1,o.toString(t))}lte(e,t){return this.setLimit("max",e,!0,o.toString(t))}lt(e,t){return this.setLimit("max",e,!1,o.toString(t))}setLimit(e,t,n,a){return new Sc({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:o.toString(a)}]})}_addCheck(e){return new Sc({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:o.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:o.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:o.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:o.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:o.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:o.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:o.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:o.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:o.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&d.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}},kc=(Sc.create=e=>new Sc({checks:[],typeName:u.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...l(e)}),class extends s{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch(e){return this._getInvalidInput(t)}if(this._getType(t)!==g.bigint)return this._getInvalidInput(t);let e=void 0;var n=new Uu;for(const a of this._def.checks)"min"===a.kind?(a.inclusive?t.data<a.value:t.data<=a.value)&&(w(e=this._getOrReturnCtx(t,e),{code:E.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty()):"max"===a.kind?(a.inclusive?t.data>a.value:t.data>=a.value)&&(w(e=this._getOrReturnCtx(t,e),{code:E.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty()):"multipleOf"===a.kind?t.data%a.value!==BigInt(0)&&(w(e=this._getOrReturnCtx(t,e),{code:E.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):d.assertNever(a);return{status:n.value,value:t.data}}_getInvalidInput(e){e=this._getOrReturnCtx(e);return w(e,{code:E.invalid_type,expected:g.bigint,received:e.parsedType}),x}gte(e,t){return this.setLimit("min",e,!0,o.toString(t))}gt(e,t){return this.setLimit("min",e,!1,o.toString(t))}lte(e,t){return this.setLimit("max",e,!0,o.toString(t))}lt(e,t){return this.setLimit("max",e,!1,o.toString(t))}setLimit(e,t,n,a){return new kc({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:o.toString(a)}]})}_addCheck(e){return new kc({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:o.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:o.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:o.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:o.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:o.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}),Ic=(kc.create=e=>{var t;return new kc({checks:[],typeName:u.ZodBigInt,coerce:null!=(t=null==e?void 0:e.coerce)&&t,...l(e)})},class extends s{_parse(e){var t;return this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==g.boolean?(w(t=this._getOrReturnCtx(e),{code:E.invalid_type,expected:g.boolean,received:t.parsedType}),x):$u(e.data)}}),Cc=(Ic.create=e=>new Ic({typeName:u.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...l(e)}),class extends s{_parse(e){var t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==g.date)return w(t=this._getOrReturnCtx(e),{code:E.invalid_type,expected:g.date,received:t.parsedType}),x;if(isNaN(e.data.getTime()))return w(this._getOrReturnCtx(e),{code:E.invalid_date}),x;var n=new Uu;let a=void 0;for(const r of this._def.checks)"min"===r.kind?e.data.getTime()<r.value&&(w(a=this._getOrReturnCtx(e,a),{code:E.too_small,message:r.message,inclusive:!0,exact:!1,minimum:r.value,type:"date"}),n.dirty()):"max"===r.kind?e.data.getTime()>r.value&&(w(a=this._getOrReturnCtx(e,a),{code:E.too_big,message:r.message,inclusive:!0,exact:!1,maximum:r.value,type:"date"}),n.dirty()):d.assertNever(r);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Cc({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:o.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:o.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}),Nc=(Cc.create=e=>new Cc({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:u.ZodDate,...l(e)}),class extends s{_parse(e){var t;return this._getType(e)!==g.symbol?(w(t=this._getOrReturnCtx(e),{code:E.invalid_type,expected:g.symbol,received:t.parsedType}),x):$u(e.data)}}),Tc=(Nc.create=e=>new Nc({typeName:u.ZodSymbol,...l(e)}),class extends s{_parse(e){var t;return this._getType(e)!==g.undefined?(w(t=this._getOrReturnCtx(e),{code:E.invalid_type,expected:g.undefined,received:t.parsedType}),x):$u(e.data)}}),Ac=(Tc.create=e=>new Tc({typeName:u.ZodUndefined,...l(e)}),class extends s{_parse(e){var t;return this._getType(e)!==g.null?(w(t=this._getOrReturnCtx(e),{code:E.invalid_type,expected:g.null,received:t.parsedType}),x):$u(e.data)}}),Rc=(Ac.create=e=>new Ac({typeName:u.ZodNull,...l(e)}),class extends s{constructor(){super(...arguments),this._any=!0}_parse(e){return $u(e.data)}}),Oc=(Rc.create=e=>new Rc({typeName:u.ZodAny,...l(e)}),class extends s{constructor(){super(...arguments),this._unknown=!0}_parse(e){return $u(e.data)}}),Mc=(Oc.create=e=>new Oc({typeName:u.ZodUnknown,...l(e)}),class extends s{_parse(e){e=this._getOrReturnCtx(e);return w(e,{code:E.invalid_type,expected:g.never,received:e.parsedType}),x}}),Dc=(Mc.create=e=>new Mc({typeName:u.ZodNever,...l(e)}),class extends s{_parse(e){var t;return this._getType(e)!==g.undefined?(w(t=this._getOrReturnCtx(e),{code:E.invalid_type,expected:g.void,received:t.parsedType}),x):$u(e.data)}}),Pc=(Dc.create=e=>new Dc({typeName:u.ZodVoid,...l(e)}),class extends s{_parse(e){const{ctx:n,status:t}=this._processInputParams(e),a=this._def;var r;return n.parsedType!==g.array?(w(n,{code:E.invalid_type,expected:g.array,received:n.parsedType}),x):(null!==a.exactLength&&(e=n.data.length>a.exactLength.value,r=n.data.length<a.exactLength.value,e||r)&&(w(n,{code:e?E.too_big:E.too_small,minimum:r?a.exactLength.value:void 0,maximum:e?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),t.dirty()),null!==a.minLength&&n.data.length<a.minLength.value&&(w(n,{code:E.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),t.dirty()),null!==a.maxLength&&n.data.length>a.maxLength.value&&(w(n,{code:E.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),t.dirty()),n.common.async?Promise.all([...n.data].map((e,t)=>a.type._parseAsync(new Gu(n,e,n.path,t)))).then(e=>Uu.mergeArray(t,e)):(r=[...n.data].map((e,t)=>a.type._parseSync(new Gu(n,e,n.path,t))),Uu.mergeArray(t,r)))}get element(){return this._def.type}min(e,t){return new Pc({...this._def,minLength:{value:e,message:o.toString(t)}})}max(e,t){return new Pc({...this._def,maxLength:{value:e,message:o.toString(t)}})}length(e,t){return new Pc({...this._def,exactLength:{value:e,message:o.toString(t)}})}nonempty(e){return this.min(1,e)}});function Lc(e){if(e instanceof Fc){const n={};for(const a in e.shape){var t=e.shape[a];n[a]=ad.create(Lc(t))}return new Fc({...e._def,shape:()=>n})}return e instanceof Pc?new Pc({...e._def,type:Lc(e.element)}):e instanceof ad?ad.create(Lc(e.unwrap())):e instanceof rd?rd.create(Lc(e.unwrap())):e instanceof Hc?Hc.create(e.items.map(e=>Lc(e))):e}Pc.create=(e,t)=>new Pc({type:e,minLength:null,maxLength:null,exactLength:null,typeName:u.ZodArray,...l(t)});var Fc=class extends s{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){var e,t;return null!==this._cached?this._cached:(e=this._def.shape(),t=d.objectKeys(e),this._cached={shape:e,keys:t})}_parse(e){if(this._getType(e)!==g.object)return w(u=this._getOrReturnCtx(e),{code:E.invalid_type,expected:g.object,received:u.parsedType}),x;const{status:t,ctx:n}=this._processInputParams(e);var{shape:a,keys:r}=this._getCached(),i=[];if(!(this._def.catchall instanceof Mc&&"strip"===this._def.unknownKeys))for(const m in n.data)r.includes(m)||i.push(m);const o=[];for(const f of r){var l=a[f],s=n.data[f];o.push({key:{status:"valid",value:f},value:l._parse(new Gu(n,s,n.path,f)),alwaysSet:f in n.data})}if(this._def.catchall instanceof Mc){var u=this._def.unknownKeys;if("passthrough"===u)for(const p of i)o.push({key:{status:"valid",value:p},value:{status:"valid",value:n.data[p]}});else if("strict"===u)0<i.length&&(w(n,{code:E.unrecognized_keys,keys:i}),t.dirty());else if("strip"!==u)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{var c=this._def.catchall;for(const h of i){var d=n.data[h];o.push({key:{status:"valid",value:h},value:c._parse(new Gu(n,d,n.path,h)),alwaysSet:h in n.data})}}return n.common.async?Promise.resolve().then(async()=>{var e=[];for(const a of o){var t=await a.key,n=await a.value;e.push({key:t,value:n,alwaysSet:a.alwaysSet})}return e}).then(e=>Uu.mergeObjectSync(t,e)):Uu.mergeObjectSync(t,o)}get shape(){return this._def.shape()}strict(r){return o.errToObj,new Fc({...this._def,unknownKeys:"strict",...void 0!==r?{errorMap:(e,t)=>{var n,a=null!=(n=null==(n=(a=this._def).errorMap)?void 0:n.call(a,e,t).message)?n:t.defaultError;return"unrecognized_keys"===e.code?{message:null!=(n=o.errToObj(r).message)?n:a}:{message:a}}}:{}})}strip(){return new Fc({...this._def,unknownKeys:"strip"})}passthrough(){return new Fc({...this._def,unknownKeys:"passthrough"})}extend(e){return new Fc({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Fc({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:u.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Fc({...this._def,catchall:e})}pick(t){const n={};return d.objectKeys(t).forEach(e=>{t[e]&&this.shape[e]&&(n[e]=this.shape[e])}),new Fc({...this._def,shape:()=>n})}omit(t){const n={};return d.objectKeys(this.shape).forEach(e=>{t[e]||(n[e]=this.shape[e])}),new Fc({...this._def,shape:()=>n})}deepPartial(){return Lc(this)}partial(n){const a={};return d.objectKeys(this.shape).forEach(e=>{var t=this.shape[e];n&&!n[e]?a[e]=t:a[e]=t.optional()}),new Fc({...this._def,shape:()=>a})}required(e){const n={};return d.objectKeys(this.shape).forEach(t=>{if(e&&!e[t])n[t]=this.shape[t];else{let e=this.shape[t];for(;e instanceof ad;)e=e._def.innerType;n[t]=e}}),new Fc({...this._def,shape:()=>n})}keyof(){return qc(d.objectKeys(this.shape))}},Vc=(Fc.create=(e,t)=>new Fc({shape:()=>e,unknownKeys:"strip",catchall:Mc.create(),typeName:u.ZodObject,...l(t)}),Fc.strictCreate=(e,t)=>new Fc({shape:()=>e,unknownKeys:"strict",catchall:Mc.create(),typeName:u.ZodObject,...l(t)}),Fc.lazycreate=(e,t)=>new Fc({shape:e,unknownKeys:"strip",catchall:Mc.create(),typeName:u.ZodObject,...l(t)}),class extends s{_parse(t){const a=this._processInputParams(t)["ctx"];t=this._def.options;if(a.common.async)return Promise.all(t.map(async e=>{var t={...a,common:{...a.common,issues:[]},parent:null};return{result:await e._parseAsync({data:a.data,path:a.path,parent:t}),ctx:t}})).then(function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const n of e)if("dirty"===n.result.status)return a.common.issues.push(...n.ctx.common.issues),n.result;return e=e.map(e=>new Fu(e.ctx.common.issues)),w(a,{code:E.invalid_union,unionErrors:e}),x});{let e=void 0;var n=[];for(const o of t){var r={...a,common:{...a.common,issues:[]},parent:null},i=o._parseSync({data:a.data,path:a.path,parent:r});if("valid"===i.status)return i;"dirty"===i.status&&(e=e||{result:i,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}return e?(a.common.issues.push(...e.ctx.common.issues),e.result):(t=n.map(e=>new Fu(e)),w(a,{code:E.invalid_union,unionErrors:t}),x)}}get options(){return this._def.options}}),jc=(Vc.create=(e,t)=>new Vc({options:e,typeName:u.ZodUnion,...l(t)}),e=>e instanceof Xc?jc(e.schema):e instanceof nd?jc(e.innerType()):e instanceof Yc?[e.value]:e instanceof Gc?e.options:e instanceof Qc?d.objectValues(e.enum):e instanceof id?jc(e._def.innerType):e instanceof Tc?[void 0]:e instanceof Ac?[null]:e instanceof ad?[void 0,...jc(e.unwrap())]:e instanceof rd?[null,...jc(e.unwrap())]:e instanceof sd||e instanceof cd?jc(e.unwrap()):e instanceof od?jc(e._def.innerType):[]),Bc=class extends s{_parse(e){var t,n,e=this._processInputParams(e)["ctx"];return e.parsedType!==g.object?(w(e,{code:E.invalid_type,expected:g.object,received:e.parsedType}),x):(t=this.discriminator,n=e.data[t],(n=this.optionsMap.get(n))?e.common.async?n._parseAsync({data:e.data,path:e.path,parent:e}):n._parseSync({data:e.data,path:e.path,parent:e}):(w(e,{code:E.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[t]}),x))}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){var a=new Map;for(const i of t){var r=jc(i.shape[e]);if(!r.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of r){if(a.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value `+String(o));a.set(o,i)}}return new Bc({typeName:u.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:a,...l(n)})}};function zc(t,n){var e=Lu(t),a=Lu(n);if(t===n)return{valid:!0,data:t};if(e===g.object&&a===g.object){const u=d.objectKeys(n);var r=d.objectKeys(t).filter(e=>-1!==u.indexOf(e)),i={...t,...n};for(const c of r){var o=zc(t[c],n[c]);if(!o.valid)return{valid:!1};i[c]=o.data}return{valid:!0,data:i}}if(e!==g.array||a!==g.array)return e===g.date&&a===g.date&&+t==+n?{valid:!0,data:t}:{valid:!1};if(t.length!==n.length)return{valid:!1};var l=[];for(let e=0;e<t.length;e++){var s=zc(t[e],n[e]);if(!s.valid)return{valid:!1};l.push(s.data)}return{valid:!0,data:l}}var Uc=class extends s{_parse(e){const{status:a,ctx:r}=this._processInputParams(e),n=(e,t)=>{var n;return Zu(e)||Zu(t)?x:(n=zc(e.value,t.value)).valid?((Wu(e)||Wu(t))&&a.dirty(),{status:a.value,value:n.data}):(w(r,{code:E.invalid_intersection_types}),x)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>n(e,t)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}},Hc=(Uc.create=(e,t,n)=>new Uc({left:e,right:t,typeName:u.ZodIntersection,...l(n)}),class extends s{_parse(e){const{status:t,ctx:a}=this._processInputParams(e);return a.parsedType!==g.array?(w(a,{code:E.invalid_type,expected:g.array,received:a.parsedType}),x):a.data.length<this._def.items.length?(w(a,{code:E.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),x):(!this._def.rest&&a.data.length>this._def.items.length&&(w(a,{code:E.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty()),e=[...a.data].map((e,t)=>{var n=this._def.items[t]||this._def.rest;return n?n._parse(new Gu(a,e,a.path,t)):null}).filter(e=>!!e),a.common.async?Promise.all(e).then(e=>Uu.mergeArray(t,e)):Uu.mergeArray(t,e))}get items(){return this._def.items}rest(e){return new Hc({...this._def,rest:e})}}),$c=(Hc.create=(e,t)=>{if(Array.isArray(e))return new Hc({items:e,typeName:u.ZodTuple,rest:null,...l(t)});throw new Error("You must pass an array of schemas to z.tuple([ ... ])")},class extends s{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){var{status:e,ctx:t}=this._processInputParams(e);if(t.parsedType!==g.object)return w(t,{code:E.invalid_type,expected:g.object,received:t.parsedType}),x;var n=[],a=this._def.keyType,r=this._def.valueType;for(const i in t.data)n.push({key:a._parse(new Gu(t,i,t.path,i)),value:r._parse(new Gu(t,t.data[i],t.path,i)),alwaysSet:i in t.data});return t.common.async?Uu.mergeObjectAsync(e,n):Uu.mergeObjectSync(e,n)}get element(){return this._def.valueType}static create(e,t,n){return new $c(t instanceof s?{keyType:e,valueType:t,typeName:u.ZodRecord,...l(n)}:{keyType:_c.create(),valueType:e,typeName:u.ZodRecord,...l(t)})}}),Zc=class extends s{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:a,ctx:r}=this._processInputParams(e);if(r.parsedType!==g.map)return w(r,{code:E.invalid_type,expected:g.map,received:r.parsedType}),x;const i=this._def.keyType,o=this._def.valueType,l=[...r.data.entries()].map(([e,t],n)=>({key:i._parse(new Gu(r,e,r.path,[n,"key"])),value:o._parse(new Gu(r,t,r.path,[n,"value"]))}));if(r.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const n of l){var e=await n.key,t=await n.value;if("aborted"===e.status||"aborted"===t.status)return x;"dirty"!==e.status&&"dirty"!==t.status||a.dirty(),u.set(e.value,t.value)}return{status:a.value,value:u}})}var t=new Map;for(const c of l){var n=c.key,s=c.value;if("aborted"===n.status||"aborted"===s.status)return x;"dirty"!==n.status&&"dirty"!==s.status||a.dirty(),t.set(n.value,s.value)}return{status:a.value,value:t}}},Wc=(Zc.create=(e,t,n)=>new Zc({valueType:t,keyType:e,typeName:u.ZodMap,...l(n)}),class extends s{_parse(e){const{status:a,ctx:n}=this._processInputParams(e);if(n.parsedType!==g.set)return w(n,{code:E.invalid_type,expected:g.set,received:n.parsedType}),x;e=this._def;null!==e.minSize&&n.data.size<e.minSize.value&&(w(n,{code:E.too_small,minimum:e.minSize.value,type:"set",inclusive:!0,exact:!1,message:e.minSize.message}),a.dirty()),null!==e.maxSize&&n.data.size>e.maxSize.value&&(w(n,{code:E.too_big,maximum:e.maxSize.value,type:"set",inclusive:!0,exact:!1,message:e.maxSize.message}),a.dirty());const r=this._def.valueType;function t(e){var t=new Set;for(const n of e){if("aborted"===n.status)return x;"dirty"===n.status&&a.dirty(),t.add(n.value)}return{status:a.value,value:t}}e=[...n.data.values()].map((e,t)=>r._parse(new Gu(n,e,n.path,t)));return n.common.async?Promise.all(e).then(e=>t(e)):t(e)}min(e,t){return new Wc({...this._def,minSize:{value:e,message:o.toString(t)}})}max(e,t){return new Wc({...this._def,maxSize:{value:e,message:o.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}),Kc=(Wc.create=(e,t)=>new Wc({valueType:e,minSize:null,maxSize:null,typeName:u.ZodSet,...l(t)}),class extends s{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const n=this._processInputParams(e)["ctx"];if(n.parsedType!==g.function)return w(n,{code:E.invalid_type,expected:g.function,received:n.parsedType}),x;function r(e,t){return zu({data:e,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Bu(),Vu].filter(e=>!!e),issueData:{code:E.invalid_arguments,argumentsError:t}})}function i(e,t){return zu({data:e,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Bu(),Vu].filter(e=>!!e),issueData:{code:E.invalid_return_type,returnTypeError:t}})}const o={errorMap:n.common.contextualErrorMap},l=n.data;if(this._def.returns instanceof td){const s=this;return $u(async function(...t){const n=new Fu([]);var e=await s._def.args.parseAsync(t,o).catch(e=>{throw n.addIssue(r(t,e)),n});const a=await Reflect.apply(l,this,e);return await s._def.returns._def.type.parseAsync(a,o).catch(e=>{throw n.addIssue(i(a,e)),n})})}{const a=this;return $u(function(...e){var t=a._def.args.safeParse(e,o);if(!t.success)throw new Fu([r(e,t.error)]);e=Reflect.apply(l,this,t.data),t=a._def.returns.safeParse(e,o);if(t.success)return t.data;throw new Fu([i(e,t.error)])})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Kc({...this._def,args:Hc.create(e).rest(Oc.create())})}returns(e){return new Kc({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new Kc({args:e||Hc.create([]).rest(Oc.create()),returns:t||Oc.create(),typeName:u.ZodFunction,...l(n)})}}),Xc=class extends s{get schema(){return this._def.getter()}_parse(e){e=this._processInputParams(e).ctx;return this._def.getter()._parse({data:e.data,path:e.path,parent:e})}},Yc=(Xc.create=(e,t)=>new Xc({getter:e,typeName:u.ZodLazy,...l(t)}),class extends s{_parse(e){var t;return e.data!==this._def.value?(w(t=this._getOrReturnCtx(e),{received:t.data,code:E.invalid_literal,expected:this._def.value}),x):{status:"valid",value:e.data}}get value(){return this._def.value}});function qc(e,t){return new Gc({values:e,typeName:u.ZodEnum,...l(t)})}Yc.create=(e,t)=>new Yc({value:e,typeName:u.ZodLiteral,...l(t)});var Gc=class extends s{constructor(){super(...arguments),Jc.set(this,void 0)}_parse(e){var t,n;return"string"!=typeof e.data?(n=this._getOrReturnCtx(e),t=this._def.values,w(n,{expected:d.joinValues(t),received:n.parsedType,code:E.invalid_type}),x):(Yu(this,Jc,"f")||qu(this,Jc,new Set(this._def.values),"f"),Yu(this,Jc,"f").has(e.data)?$u(e.data):(t=this._getOrReturnCtx(e),n=this._def.values,w(t,{received:t.data,code:E.invalid_enum_value,options:n}),x))}get options(){return this._def.values}get enum(){var e={};for(const t of this._def.values)e[t]=t;return e}get Values(){var e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){var e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Gc.create(e,{...this._def,...t})}exclude(t,e=this._def){return Gc.create(this.options.filter(e=>!t.includes(e)),{...this._def,...e})}},Jc=new WeakMap,Qc=(Gc.create=qc,class extends s{constructor(){super(...arguments),ed.set(this,void 0)}_parse(e){var t,n=d.getValidEnumValues(this._def.values),a=this._getOrReturnCtx(e);return a.parsedType!==g.string&&a.parsedType!==g.number?(t=d.objectValues(n),w(a,{expected:d.joinValues(t),received:a.parsedType,code:E.invalid_type}),x):(Yu(this,ed,"f")||qu(this,ed,new Set(d.getValidEnumValues(this._def.values)),"f"),Yu(this,ed,"f").has(e.data)?$u(e.data):(t=d.objectValues(n),w(a,{received:a.data,code:E.invalid_enum_value,options:t}),x))}get enum(){return this._def.values}}),ed=new WeakMap,td=(Qc.create=(e,t)=>new Qc({values:e,typeName:u.ZodNativeEnum,...l(t)}),class extends s{unwrap(){return this._def.type}_parse(e){const t=this._processInputParams(e)["ctx"];return t.parsedType!==g.promise&&!1===t.common.async?(w(t,{code:E.invalid_type,expected:g.promise,received:t.parsedType}),x):(e=t.parsedType===g.promise?t.data:Promise.resolve(t.data),$u(e.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}),nd=(td.create=(e,t)=>new td({type:e,typeName:u.ZodPromise,...l(t)}),class extends s{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===u.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),a=this._def.effect||null,r={addIssue:e=>{w(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(r.addIssue=r.addIssue.bind(r),"preprocess"===a.type)return e=a.transform(n.data,r),n.common.async?Promise.resolve(e).then(async e=>{return"aborted"===t.value||"aborted"===(e=await this._def.schema._parseAsync({data:e,path:n.path,parent:n})).status?x:"dirty"===e.status||"dirty"===t.value?Hu(e.value):e}):"aborted"===t.value||"aborted"===(e=this._def.schema._parseSync({data:e,path:n.path,parent:n})).status?x:"dirty"===e.status||"dirty"===t.value?Hu(e.value):e;if("refinement"===a.type){const i=e=>{var t=a.refinement(e,r);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};return!1===n.common.async?"aborted"===(e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n})).status?x:("dirty"===e.status&&t.dirty(),i(e.value),{status:t.value,value:e.value}):this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(e=>"aborted"===e.status?x:("dirty"===e.status&&t.dirty(),i(e.value).then(()=>({status:t.value,value:e.value}))))}if("transform"===a.type){if(!1!==n.common.async)return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(e=>Ku(e)?Promise.resolve(a.transform(e.value,r)).then(e=>({status:t.value,value:e})):e);e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Ku(e))return e;e=a.transform(e.value,r);if(e instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:e}}d.assertNever(a)}}),ad=(nd.create=(e,t,n)=>new nd({schema:e,typeName:u.ZodEffects,effect:t,...l(n)}),nd.createWithPreprocess=(e,t,n)=>new nd({schema:t,effect:{type:"preprocess",transform:e},typeName:u.ZodEffects,...l(n)}),class extends s{_parse(e){return this._getType(e)===g.undefined?$u(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}),rd=(ad.create=(e,t)=>new ad({innerType:e,typeName:u.ZodOptional,...l(t)}),class extends s{_parse(e){return this._getType(e)===g.null?$u(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}),id=(rd.create=(e,t)=>new rd({innerType:e,typeName:u.ZodNullable,...l(t)}),class extends s{_parse(e){e=this._processInputParams(e).ctx;let t=e.data;return e.parsedType===g.undefined&&(t=this._def.defaultValue()),this._def.innerType._parse({data:t,path:e.path,parent:e})}removeDefault(){return this._def.innerType}}),od=(id.create=(e,t)=>new id({innerType:e,typeName:u.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...l(t)}),class extends s{_parse(e){e=this._processInputParams(e).ctx;const t={...e,common:{...e.common,issues:[]}};e=this._def.innerType._parse({data:t.data,path:t.path,parent:{...t}});return Xu(e)?e.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new Fu(t.common.issues)},input:t.data})})):{status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new Fu(t.common.issues)},input:t.data})}}removeCatch(){return this._def.innerType}}),ld=(od.create=(e,t)=>new od({innerType:e,typeName:u.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...l(t)}),class extends s{_parse(e){var t;return this._getType(e)!==g.nan?(w(t=this._getOrReturnCtx(e),{code:E.invalid_type,expected:g.nan,received:t.parsedType}),x):{status:"valid",value:e.data}}}),r=(ld.create=e=>new ld({typeName:u.ZodNaN,...l(e)}),Symbol("zod_brand")),sd=class extends s{_parse(e){var e=this._processInputParams(e)["ctx"],t=e.data;return this._def.type._parse({data:t,path:e.path,parent:e})}unwrap(){return this._def.type}},ud=class extends s{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);return n.common.async?(async()=>{var e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?x:"dirty"===e.status?(t.dirty(),Hu(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})():"aborted"===(e=this._def.in._parseSync({data:n.data,path:n.path,parent:n})).status?x:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}static create(e,t){return new ud({in:e,out:t,typeName:u.ZodPipeline})}},cd=class extends s{_parse(e){e=this._def.innerType._parse(e);const t=e=>(Ku(e)&&(e.value=Object.freeze(e.value)),e);return Xu(e)?e.then(e=>t(e)):t(e)}unwrap(){return this._def.innerType}};function dd(a,r={},i){return a?Rc.create().superRefine((e,t)=>{var n;a(e)||(n=null==(n=null!=(n=(e="function"==typeof r?r(e):"string"==typeof r?{message:r}:r).fatal)?n:i)||n,t.addIssue({code:"custom",..."string"==typeof e?{message:e}:e,fatal:n}))}):Rc.create()}cd.create=(e,t)=>new cd({innerType:e,typeName:u.ZodReadonly,...l(t)});var u,q={object:Fc.lazycreate},md=((n=u=u||{}).ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly",_c.create),fd=Sc.create,a=kc.create,pd=Ic.create,Y=Cc.create,i=Pc.create,n=Fc.create,hd=Fc.strictCreate,gd=Vc.create,yd=Bc.create,vd=Uc.create,bd=Hc.create,Ed=$c.create,wd=Wc.create,_d=Kc.create,xd=Xc.create,Sd=Yc.create,kd=Gc.create,Id=Qc.create,Cd=td.create,Nd=nd.create,Td=ad.create,Ad=rd.create,Rd=nd.createWithPreprocess,Od=ud.create,r=Object.freeze({__proto__:null,defaultErrorMap:Vu,setErrorMap:function(e){ju=e},getErrorMap:Bu,makeIssue:zu,EMPTY_PATH:[],addIssueToContext:w,ParseStatus:Uu,INVALID:x,DIRTY:Hu,OK:$u,isAborted:Zu,isDirty:Wu,isValid:Ku,isAsync:Xu,get util(){return d},get objectUtil(){return Ru},ZodParsedType:g,getParsedType:Lu,ZodType:s,datetimeRegex:vc,ZodString:_c,ZodNumber:Sc,ZodBigInt:kc,ZodBoolean:Ic,ZodDate:Cc,ZodSymbol:Nc,ZodUndefined:Tc,ZodNull:Ac,ZodAny:Rc,ZodUnknown:Oc,ZodNever:Mc,ZodVoid:Dc,ZodArray:Pc,ZodObject:Fc,ZodUnion:Vc,ZodDiscriminatedUnion:Bc,ZodIntersection:Uc,ZodTuple:Hc,ZodRecord:$c,ZodMap:Zc,ZodSet:Wc,ZodFunction:Kc,ZodLazy:Xc,ZodLiteral:Yc,ZodEnum:Gc,ZodNativeEnum:Qc,ZodPromise:td,ZodEffects:nd,ZodTransformer:nd,ZodOptional:ad,ZodNullable:rd,ZodDefault:id,ZodCatch:od,ZodNaN:ld,BRAND:r,ZodBranded:sd,ZodPipeline:ud,ZodReadonly:cd,custom:dd,Schema:s,ZodSchema:s,late:q,get ZodFirstPartyTypeKind(){return u},coerce:{string:e=>_c.create({...e,coerce:!0}),number:e=>Sc.create({...e,coerce:!0}),boolean:e=>Ic.create({...e,coerce:!0}),bigint:e=>kc.create({...e,coerce:!0}),date:e=>Cc.create({...e,coerce:!0})},any:Rc.create,array:i,bigint:a,boolean:pd,date:Y,discriminatedUnion:yd,effect:Nd,enum:kd,function:_d,instanceof:(t,e={message:"Input not instance of "+t.name})=>dd(e=>e instanceof t,e),intersection:vd,lazy:xd,literal:Sd,map:Zc.create,nan:ld.create,nativeEnum:Id,never:Mc.create,null:Ac.create,nullable:Ad,number:fd,object:n,oboolean:()=>pd().optional(),onumber:()=>fd().optional(),optional:Td,ostring:()=>md().optional(),pipeline:Od,preprocess:Rd,promise:Cd,record:Ed,set:wd,strictObject:hd,string:md,symbol:Nc.create,transformer:Nd,tuple:bd,undefined:Tc.create,union:gd,unknown:Oc.create,void:Dc.create,NEVER:x,ZodIssueCode:E,quotelessJson:e=>{return JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:")},ZodError:Fu}),Md=r.object({uri:r.string().nonempty({message:"Artist URI is required"}).refine(e=>Spicetify.URI.isArtist(e),{message:"Invalid artist URI"})}).strict().readonly();var Dd=50,Pd=r.object({uris:r.array(r.string()).nonempty().max(Dd).refine(e=>e.every(e=>Spicetify.URI.isArtist(e)),{message:"Invalid artist URIs"})}).strict().readonly();var Ld=r.object({uris:r.array(r.string()).nonempty().max(100).refine(e=>e.every(e=>Spicetify.URI.isTrack(e)),{message:"Invalid tracks URIs"})}).strict().readonly();function Fd(t,n){var a=[];for(let e=0;e<t.length;e+=n)a.push(t.slice(e,e+n));return a}function Vd(e,a){return e.filter((t,e,n)=>e===n.findIndex(e=>a(e)===a(t)))}async function jd(t){await new Promise(e=>setTimeout(e,t))}var q="playlist-maker",Bd=q+":workflows",zd=q+":artist-genres";function Ud(){return JSON.parse(Spicetify.LocalStorage.get(Bd)??"[]")}function Hd(){var e=JSON.parse(Spicetify.LocalStorage.get(zd)??"[]");return new Map(e)}function $d(e,t){return{value:e,expiry:(new Date).getTime()+t}}var Zd=15552e6;async function Wd(e){var t;for(const r of Fd(e.filter(e=>!Spicetify.URI.isLocalTrack(e.uri)),100)){t={uris:r.map(e=>e.uri)},Ld.parse(t);var n=await(await Du().withPath("/audio-features").withEndpointIdentifier("/audio-features").withQueryParameters({ids:t.uris.map(e=>Pu(Spicetify.URI.fromString(e))).join(",")}).send()).body.audio_features;for(const i of r){var a=n.find(e=>null!==e&&e.uri===i.uri);a&&(i.audioFeatures=a)}await jd(20)}}async function Kd(){var e=y().LibraryAPI,t=(await e.getTracks()).unfilteredTotalLength,e=(await e.getTracks({limit:t,offset:0})).items.filter(e=>!Spicetify.URI.isLocalTrack(e.uri));const n=function(e){var t,n,a=new Date;for([t,n]of e.entries())n.expiry<a.getTime()&&e.delete(t);return e}(Hd());let a=Vd(e.flatMap(e=>e.artists),e=>e.uri);a=a.filter(e=>!n.has(e.uri)),console.log(`Getting genres for ${a.length.toFixed()} artists`);var r=[];for(const l of Fd(a,Dd)){i={uris:l.map(e=>e.uri)},Pd.parse(i);var i=await(await Du().withPath("/artists").withEndpointIdentifier("/artists").withQueryParameters({ids:i.uris.map(e=>Pu(Spicetify.URI.fromString(e))).join(",")}).send()).body.artists;r.push(...i),await jd(20)}for(const s of r)n.set(s.uri,$d(s.genres,Zd));for(const u of a.filter(e=>!n.has(e.uri))){o={uri:u.uri},Md.parse(o),o=Pu(Spicetify.URI.fromString(o.uri));var o=await(await Du().withPath("/artists/"+o).withEndpointIdentifier("/artists/{id}").send()).body;console.log(`Artist ${u.name} is now `+o.name),n.set(u.uri,$d(o.genres,Zd))}return t=n,Spicetify.LocalStorage.set(zd,JSON.stringify(Array.from(t))),new Map(Array.from(n).map(([e,t])=>[e,t.value]))}var i=r.object({isExecuting:r.literal(!0).optional()}).strict(),a=class{constructor(e,t,n){this.currentNodeId=e,this.sourceNodeIds=t,this.data=n}updateNodeData=nf.getState().updateNodeData;resultCache=null;async getResults(e){e=await this.getInputs(e);return this.setExecuting(!0),null===this.resultCache&&(this.resultCache=await this.getResultsInternal(e)),this.setExecuting(void 0),this.resultCache}async getInputs(e){var t=[];for(const a of this.sourceNodeIds){var n=e[a];if(!n)throw new Error(`Processor for node ${a} not found`);t.push(...await n.getResults(e))}return t}setExecuting(e){this.updateNodeData(this.currentNodeId,{isExecuting:e})}},Xd=r.object({range:r.object({min:r.number().min(0).max(1),max:r.number().min(0).max(1)})}).merge(i).strict(),Yd=class extends a{async getResultsInternal(e){await Wd(e.filter(e=>void 0===e.audioFeatures));e=e.filter(e=>void 0!==e.audioFeatures&&e.audioFeatures.acousticness>this.data.range.min&&e.audioFeatures.acousticness<this.data.range.max);return e}},qd=r.object({range:r.object({min:r.number().min(0).max(1),max:r.number().min(0).max(1)})}).merge(i).strict(),Gd=class extends a{async getResultsInternal(e){await Wd(e.filter(e=>void 0===e.audioFeatures));e=e.filter(e=>void 0!==e.audioFeatures&&e.audioFeatures.danceability>this.data.range.min&&e.audioFeatures.danceability<this.data.range.max);return e}},Jd=r.object({range:r.object({min:r.number().min(0).max(1),max:r.number().min(0).max(1)})}).merge(i).strict(),Qd=class extends a{async getResultsInternal(e){await Wd(e.filter(e=>void 0===e.audioFeatures));e=e.filter(e=>void 0!==e.audioFeatures&&e.audioFeatures.energy>this.data.range.min&&e.audioFeatures.energy<this.data.range.max);return e}},em=r.object({range:r.object({min:r.number().min(0).max(1),max:r.number().min(0).max(1)})}).merge(i).strict(),tm=class extends a{async getResultsInternal(e){await Wd(e.filter(e=>void 0===e.audioFeatures));e=e.filter(e=>void 0!==e.audioFeatures&&e.audioFeatures.instrumentalness>this.data.range.min&&e.audioFeatures.instrumentalness<this.data.range.max);return e}},nm=class{constructor(e){this.track=e}get uri(){return this.backingTrack.uri}get name(){return this.backingTrack.name}get addedAt(){return nm.isInternalTrack(this.backingTrack)?void 0===this.backingTrack.addedAt?null:this.backingTrack.addedAt instanceof Date?this.backingTrack.addedAt:new Date(this.backingTrack.addedAt):new Date(0)}get duration(){return nm.isInternalTrack(this.backingTrack)?this.backingTrack.duration.milliseconds:nm.isApiTrack(this.backingTrack)?this.backingTrack.duration_ms:0}get trackNumber(){return nm.isInternalTrack(this.backingTrack)?this.backingTrack.trackNumber:nm.isApiTrack(this.backingTrack)?this.backingTrack.track_number:0}get artists(){return this.backingTrack.artists}get album(){return this.backingTrack.album}get backingTrack(){return this.track}get source(){return this.track.source}get isPlayable(){return nm.isInternalTrack(this.backingTrack)?this.backingTrack.isPlayable:!!nm.isApiTrack(this.backingTrack)&&(this.backingTrack.is_playable??!1)}static isInternalTrack(e){return"duration"in e}static isApiTrack(e){return"duration_ms"in e}},am=r.object({isPlayable:r.boolean()}).merge(i).strict(),rm=class extends a{async getResultsInternal(e){e=e.filter(e=>new nm(e).isPlayable===this.data.isPlayable);return Promise.resolve(e)}},im=r.object({range:r.object({min:r.number().min(0).max(1),max:r.number().min(0).max(1)})}).merge(i).strict(),om=class extends a{async getResultsInternal(e){await Wd(e.filter(e=>void 0===e.audioFeatures));e=e.filter(e=>void 0!==e.audioFeatures&&e.audioFeatures.liveness>this.data.range.min&&e.audioFeatures.liveness<this.data.range.max);return e}},lm=r.object({range:r.object({min:r.number().min(-60).max(10),max:r.number().min(-60).max(10)})}).merge(i).strict(),sm=class extends a{async getResultsInternal(e){await Wd(e.filter(e=>void 0===e.audioFeatures));e=e.filter(e=>void 0!==e.audioFeatures&&e.audioFeatures.loudness>this.data.range.min&&e.audioFeatures.loudness<this.data.range.max);return e}},um=r.object({mode:r.union([r.literal("0"),r.literal("1")])}).merge(i).strict(),cm=class extends a{async getResultsInternal(e){await Wd(e.filter(e=>void 0===e.audioFeatures));e=e.filter(e=>void 0!==e.audioFeatures&&e.audioFeatures.mode===+this.data.mode);return e}},dm=r.object({range:r.object({min:r.number().min(0).max(1),max:r.number().min(0).max(1)})}).merge(i).strict(),mm=class extends a{async getResultsInternal(e){await Wd(e.filter(e=>void 0===e.audioFeatures));e=e.filter(e=>void 0!==e.audioFeatures&&e.audioFeatures.speechiness>this.data.range.min&&e.audioFeatures.speechiness<this.data.range.max);return e}},fm=r.object({range:r.object({min:r.number().min(0).max(1e3),max:r.number().min(0).max(1e3)})}).merge(i).strict(),pm=class extends a{async getResultsInternal(e){await Wd(e.filter(e=>void 0===e.audioFeatures));e=e.filter(e=>void 0!==e.audioFeatures&&e.audioFeatures.tempo>this.data.range.min&&e.audioFeatures.tempo<this.data.range.max);return e}},hm=r.object({range:r.object({min:r.number().min(0).max(1),max:r.number().min(0).max(1)})}).merge(i).strict(),gm=class extends a{async getResultsInternal(e){await Wd(e.filter(e=>void 0===e.audioFeatures));e=e.filter(e=>void 0!==e.audioFeatures&&e.audioFeatures.valence>this.data.range.min&&e.audioFeatures.valence<this.data.range.max);return e}},ym=class extends a{getResultsInternal(e){var t=new Set,n=[];for(const r of e){var a=r.artists.map(e=>e.name).join(","),a=r.name.toLowerCase()+"-"+a.toLowerCase();t.has(a)||(n.push(r),t.add(a))}return Promise.resolve(n)}},vm=class extends a{async getResultsInternal(t){for(let e=t.length-1;0<e;e--){var n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return Promise.resolve(t)}},bm=r.object({property:r.enum(["album","artist","name","source","duration"]),order:r.enum(["asc","desc"])}).merge(i).strict(),Em={album:e=>e.album.name,artist:e=>e.artists.map(e=>e.name).join(", "),name:e=>e.name,source:e=>e.source,duration:e=>e.duration},wm=class extends a{async getResultsInternal(e){const{property:n,order:a}=this.data;e=e.toSorted((e,t)=>{e=this.getPropertyValue(e,n),t=this.getPropertyValue(t,n);return e<t?"asc"===a?-1:1:t<e?"asc"===a?1:-1:0});return Promise.resolve(e)}getPropertyValue(e,t){return Em[t](new nm(e))}},_m=class extends a{getResultsInternal(e){return Promise.resolve(e)}};async function xm(e,t){var{data:e,errors:t}=await Spicetify.GraphQL.Request(e,t);if(t)throw new Error(t.map(e=>e.message).join("\n"));return e}var Sm=r.object({uri:r.string().nonempty().refine(e=>Spicetify.URI.isAlbum(e),{message:"Invalid album URI"}),offset:r.number().nonnegative().int(),limit:r.number().nonnegative().int().max(100),locale:r.string().nonempty()}).strict().readonly();async function km(e){Sm.parse(e);var t=Spicetify.GraphQL.Definitions["getAlbum"];return xm(t,e)}var Im=r.object({uri:r.string().nonempty({message:"Album URI is required"}).refine(e=>Spicetify.URI.isAlbum(e),{message:"Invalid album URI"}),offset:r.number().nonnegative().int().optional(),limit:r.number().nonnegative().int().max(100).optional(),onlyLiked:r.boolean()}).merge(i).strict(),Cm=class extends a{async getResultsInternal(){const{offset:e=0,limit:t=100,uri:n,onlyLiked:a}=this.data,r=await km({uri:n,offset:e,limit:t,locale:Spicetify.Locale.getLocale()});let i=r.albumUnion.tracksV2.items.map(e=>e.track);return(i=a?i.filter(e=>e.saved):i).map(e=>({uri:e.uri,name:e.name,artists:e.artists.items.map(e=>({uri:e.uri,name:e.profile.name})),album:{uri:n,name:r.albumUnion.name,images:r.albumUnion.coverArt.sources.map(e=>({url:e.url}))},duration:{milliseconds:e.duration.totalMilliseconds},trackNumber:e.trackNumber,isPlayable:e.playability.playable})).map(e=>({...e,source:"Album"}))}},Nm=r.object({uri:r.string().nonempty().refine(e=>Spicetify.URI.isAlbum(e),{message:"Invalid album URI"}),offset:r.number().nonnegative().int(),limit:r.number().nonnegative().int().max(100)}).strict().readonly();async function Tm(e){Nm.parse(e);var t=Spicetify.GraphQL.Definitions["getAlbumNameAndTracks"];return xm(t,e)}var Am=r.object({uri:r.string().nonempty().refine(e=>Spicetify.URI.isAlbum(e),{message:"Invalid album URI"}),offset:r.number().nonnegative().int(),limit:r.number().nonnegative().int().max(100)}).strict().readonly();async function Rm(e){Am.parse(e);var t=Spicetify.GraphQL.Definitions["queryAlbumTracks"];return xm(t,e)}var Om=r.object({uri:r.string().nonempty().refine(e=>Spicetify.URI.isArtist(e),{message:"Invalid artist URI"}),locale:r.string().nonempty()}).strict().readonly();async function Mm(e){Om.parse(e);var t=Spicetify.GraphQL.Definitions["queryArtistOverview"];return xm(t,e)}var Dm=r.object({uri:r.string().nonempty({message:"Artist URI is required"}).refine(e=>Spicetify.URI.isArtist(e),{message:"Invalid artist URI"}),trackType:r.enum(["liked","top","discography","latest"])}).merge(i).strict(),Pm=class extends a{async getResultsInternal(){var{uri:e,trackType:t}=this.data;return"liked"===t?this.getLikedTracks(e):"top"===t?this.getTopTracks(e):"latest"===t?this.getLatestReleaseTracks(e):this.getAllTracks(e)}async getLikedTracks(e){return(await y().LibraryAPI.getTracks({limit:5e4,offset:0,uri:e})).items.map(e=>({...e,source:"Artist"}))}async getTopTracks(e){var e=await Mm({uri:e,locale:Spicetify.Locale.getLocale()}),t=[];for(const l of e.artistUnion.discography.popularReleasesAlbums.items)t.push(...await this.getTracksFromRelease(l));var n=e.artistUnion.discography.topTracks.items,a=new Map,r=[];for(const s of this.getAllReleasesFromOverview(e))a.set(s.uri,s.name);for(const u of n){var i,o=u.track.albumOfTrack.uri;a.has(o)||(i=await Tm({uri:o,limit:0,offset:0}),a.set(o,i.albumUnion.name)),i=a.get(o),r.push(this.getTrackFromTopTrack(u,i))}return[...r,...t]}async getLatestReleaseTracks(e){e=(await Mm({uri:e,locale:Spicetify.Locale.getLocale()})).artistUnion.discography.latest;return this.getTracksFromRelease(e)}async getAllTracks(t){var e=await Mm({uri:t,locale:Spicetify.Locale.getLocale()}),n=[];for(const o of e.artistUnion.discography.albums.items.map(e=>e.releases.items).flat())n.push(...await this.getTracksFromRelease(o));var a=[];for(const l of e.artistUnion.discography.compilations.items.map(e=>e.releases.items).flat()){var r=await this.getTracksFromRelease(l);a.push(...r.filter(e=>e.artists.some(e=>e.uri===t)))}var i=[];for(const s of e.artistUnion.discography.singles.items.map(e=>e.releases.items).flat())i.push(...await this.getTracksFromRelease(s));return[...n,...a,...i]}async getTracksFromRelease(t){return(await Rm({uri:t.uri,offset:0,limit:100})).albumUnion.tracksV2.items.map(e=>({uri:e.track.uri,name:e.track.name,album:{uri:t.uri,name:t.name,images:t.coverArt.sources},artists:e.track.artists.items.map(e=>({uri:e.uri,name:e.profile.name})),duration:{milliseconds:e.track.duration.totalMilliseconds},isPlayable:e.track.playability.playable,trackNumber:e.track.trackNumber,addedAt:void 0})).map(e=>({...e,source:"Artist"}))}getTrackFromTopTrack(e,t){return{...{uri:e.track.uri,name:e.track.name,album:{uri:e.track.albumOfTrack.uri,name:t,images:e.track.albumOfTrack.coverArt.sources.map(e=>({url:e.url}))},artists:e.track.artists.items.map(e=>({uri:e.uri,name:e.profile.name})),duration:{milliseconds:e.track.duration.totalMilliseconds},isPlayable:e.track.playability.playable,trackNumber:0,addedAt:void 0},source:"Artist"}}getAllReleasesFromOverview(e){var t=[];return t.push(...e.artistUnion.discography.albums.items.map(e=>e.releases.items).flat()),t.push(...e.artistUnion.discography.compilations.items.map(e=>e.releases.items).flat()),t.push(...e.artistUnion.discography.singles.items.map(e=>e.releases.items).flat()),t}},Lm=r.object({offset:r.number().nonnegative().int().optional(),limit:r.number().nonnegative().int().max(5e4).optional(),filter:r.string().optional(),sortField:r.enum(["ADDED_AT","ALBUM_NAME","NAME","ARTIST_NAME"]),sortOrder:r.enum(["DESC","ASC"]),genres:r.array(r.string())}).merge(i).strict(),Fm=class extends a{async getResultsInternal(){var e=y().LibraryAPI,{offset:t,filter:n,sortField:a,sortOrder:r,genres:i}=this.data;let o=this.data.limit,l=((void 0===o||0<i.length)&&(o=(await e.getTracks()).unfilteredTotalLength),(await e.getTracks({limit:o,offset:t,filters:n?[n]:void 0,sort:{field:a,order:r}})).items);return(l=0<i.length?this.filterTracksByGenres(l,new Set(i),this.data.limit):l).map(e=>({...e,source:"Liked songs"}))}filterTracksByGenres(e,t,n){var a=[],e=e.filter(e=>!Spicetify.URI.isLocalTrack(e.uri));const r=Hd();for(const i of e)i.artists.flatMap(e=>r.get(e.uri)?.value??[]).some(e=>t.has(e))&&a.push(i);return void 0!==n?a.slice(0,n):a}},Vm=r.object({filter:r.string().optional(),sortField:r.enum(["ALBUM","TITLE","ARTIST","DURATION","ADDED_AT"]).or(r.literal("NO_SORT")),sortOrder:r.enum(["DESC","ASC"])}).merge(i).strict(),jm=class extends a{async getResultsInternal(){var e=y().LocalFilesAPI,{filter:t,sortField:n,sortOrder:a}=this.data;return(await e.getTracks("NO_SORT"===n?void 0:{field:n,order:a},t)).map(e=>({...e,source:"Local tracks"}))}},Y=["TITLE","ADDED_AT","ADDED_BY","ALBUM","ARTIST","DURATION","SHOW_NAME","PUBLISH_DATE"],yd=["DESC","ASC"],Bm=r.object({playlistUri:r.string().nonempty({message:"Playlist URI is required"}).refine(e=>Spicetify.URI.isPlaylistV1OrV2(e),{message:"Invalid playlist URI"}),offset:r.number().nonnegative().int().optional(),limit:r.number().nonnegative().int().max(5e4).optional(),filter:r.string().optional(),sortField:r.enum(Y).or(r.literal("NO_SORT")),sortOrder:r.enum(yd),onlyMine:r.boolean()}).merge(i).strict(),zm=class extends a{async getResultsInternal(){var e=this.data.playlistUri,t=y().PlaylistAPI,{offset:n,limit:a,filter:r,sortField:i,sortOrder:o}=this.data;const l=await t.getPlaylist(e,{},{limit:a,offset:n,filter:r,sort:"NO_SORT"===i?void 0:{field:i,order:o}});return l.contents.items.map(e=>({...e,source:l.metadata.name}))}};async function Um(e){if(!(Spicetify.URI.isTrack(e)||Spicetify.URI.isArtist(e)||Spicetify.URI.isAlbum(e)))throw new Error("The source URI must be a track, artist or album URI.");e=await y().RequestBuilder.build().withHost("https://spclient.wg.spotify.com/inspiredby-mix/v2").withPath("/seed_to_playlist/"+e).withEndpointIdentifier("/seed_to_playlist/{uri}").withQueryParameters({"response-format":"json"}).withoutMarket().send();if(200!==e.status)throw new Error("Failed to get the radio playlist.");return e.body.mediaItems[0].uri}var Hm=r.object({uri:r.string().nonempty({message:"URI is required"}).refine(e=>Spicetify.URI.isTrack(e)||Spicetify.URI.isArtist(e)||Spicetify.URI.isAlbum(e),{message:"Invalid URI type"}),offset:r.number().nonnegative().int().optional(),limit:r.number().nonnegative().int().max(5e4).optional(),sortField:r.enum(Y).or(r.literal("NO_SORT")),sortOrder:r.enum(yd)}).merge(i).strict(),$m=class extends a{async getResultsInternal(){var e=this.data["uri"],e=await Um(e);if(!Spicetify.URI.isPlaylistV1OrV2(e))throw new Error("Could not get radio playlist URI");var t=y().PlaylistAPI,{offset:n,limit:a,sortField:r,sortOrder:i}=this.data;const o=await t.getPlaylist(e,{},{limit:a,offset:n,sort:"NO_SORT"===r?void 0:{field:r,order:i}});return o.contents.items.map(e=>({...e,source:o.metadata.name}))}},Zm=r.object({timeRange:r.enum(["short_term","medium_term","long_term"]).optional(),offset:r.number().nonnegative().int().optional(),limit:r.number().nonnegative().int().max(50).optional()}).strict().readonly();async function Wm(e){return Zm.parse(e),(await Du().withPath("/me/top/tracks").withEndpointIdentifier("/me/top/tracks").withQueryParameters({time_range:e.timeRange,limit:e.limit?.toString(),offset:e.offset?.toString()}).send()).body}r.object({uri:r.string().nonempty({message:"Album URI is required"}).refine(e=>Spicetify.URI.isAlbum(e),{message:"Invalid album URI"})}).strict().readonly(),r.object({uris:r.array(r.string()).nonempty().max(20).refine(e=>e.every(e=>Spicetify.URI.isAlbum(e)),{message:"Invalid album URIs"})}).strict().readonly(),r.object({uri:r.string().nonempty({message:"Episode URI is required"}).refine(e=>Spicetify.URI.isEpisode(e),{message:"Invalid episode URI"})}).strict().readonly(),r.object({uris:r.array(r.string()).nonempty().max(50).refine(e=>e.every(e=>Spicetify.URI.isEpisode(e)),{message:"Invalid episode URIs"})}).strict().readonly(),r.object({uri:r.string().nonempty({message:"Playlist URI is required"}).refine(e=>Spicetify.URI.isPlaylistV1OrV2(e),{message:"Invalid playlist URI"})}).strict().readonly(),r.object({uri:r.string().nonempty({message:"Show URI is required"}).refine(e=>Spicetify.URI.isShow(e),{message:"Invalid show URI"})}).strict().readonly(),r.object({uris:r.array(r.string()).nonempty().max(20).refine(e=>e.every(e=>Spicetify.URI.isShow(e)),{message:"Invalid show URIs"})}).strict().readonly();var Km=r.object({uri:r.string().nonempty({message:"Track URI is required"}).refine(e=>Spicetify.URI.isTrack(e),{message:"Invalid track URI"}),withoutMarket:r.boolean().optional()}).strict().readonly();r.object({uris:r.array(r.string()).nonempty().max(50).refine(e=>e.every(e=>Spicetify.URI.isTrack(e)),{message:"Invalid tracks URIs"})}).strict().readonly();async function Xm(e,t,n,a){var r=[];let i=null,o=t,l=void 0!==a&&a<=n?a:n;for(;null!==(i=await e(o,l))&&(void 0===a&&(a=i.total),r.push(...i.items),o+=l,l=Math.min(n,a-r.length),null!==i.next)&&r.length<a;);return r}var Ym=r.object({timeRange:r.enum(["short_term","medium_term","long_term"]),offset:r.number().nonnegative().int().optional(),limit:r.number().nonnegative().int().max(1e3).optional()}).merge(i).strict(),qm=class extends a{async getResultsInternal(){const{offset:e=0,limit:t,timeRange:n}=this.data;return(await Xm(async(e,t)=>Wm({timeRange:n,limit:t,offset:e}),e,50,t)).map(e=>({...e,is_playable:e.is_playable??!0,source:"Top tracks"}))}},Gm={libraryPlaylistSource:()=>{return{playlistUri:"",offset:void 0,filter:void 0,limit:void 0,sortField:"NO_SORT",sortOrder:"ASC",isExecuting:void 0,onlyMine:!1}},searchPlaylistSource:()=>{return{playlistUri:"",offset:void 0,filter:void 0,limit:void 0,sortField:"NO_SORT",sortOrder:"ASC",isExecuting:void 0,onlyMine:!1}},acousticness:()=>{return{range:{min:0,max:1},isExecuting:void 0}},danceability:()=>{return{range:{min:0,max:1},isExecuting:void 0}},energy:()=>{return{range:{min:0,max:1},isExecuting:void 0}},instrumentalness:()=>{return{range:{min:0,max:1},isExecuting:void 0}},isPlayable:()=>{return{isPlayable:!0,isExecuting:void 0}},liveness:()=>{return{range:{min:0,max:1},isExecuting:void 0}},loudness:()=>{return{range:{min:-60,max:10},isExecuting:void 0}},speechiness:()=>{return{range:{min:0,max:1},isExecuting:void 0}},tempo:()=>{return{range:{min:0,max:1e3},isExecuting:void 0}},valence:()=>{return{range:{min:0,max:1},isExecuting:void 0}},sort:()=>{return{order:"asc",property:"name",isExecuting:void 0}},libraryAlbumSource:()=>{return{uri:"",limit:void 0,offset:void 0,onlyLiked:!1,isExecuting:void 0}},searchAlbumSource:()=>{return{uri:"",limit:void 0,offset:void 0,onlyLiked:!1,isExecuting:void 0}},likedSongsSource:()=>{return{filter:void 0,offset:void 0,limit:void 0,sortField:"ADDED_AT",sortOrder:"DESC",genres:[],isExecuting:void 0}},localTracksSource:()=>{return{filter:void 0,sortField:"DURATION",sortOrder:"DESC",isExecuting:void 0}},topTracksSource:()=>{return{timeRange:"short_term",offset:void 0,limit:void 0,isExecuting:void 0}},mode:()=>{return{mode:"1",isExecuting:void 0}},shuffle:()=>({isExecuting:void 0}),deduplicate:()=>({isExecuting:void 0}),result:()=>({isExecuting:void 0}),libraryArtistSource:()=>{return{uri:"",isExecuting:void 0,trackType:"liked"}},searchArtistSource:()=>{return{uri:"",isExecuting:void 0,trackType:"liked"}},radioAlbumSource:()=>{return{uri:"",sortField:"NO_SORT",sortOrder:"ASC",limit:void 0,offset:void 0,isExecuting:void 0}},radioArtistSource:()=>{return{uri:"",sortField:"NO_SORT",sortOrder:"ASC",limit:void 0,offset:void 0,isExecuting:void 0}},radioTrackSource:()=>{return{uri:"",sortField:"NO_SORT",sortOrder:"ASC",limit:void 0,offset:void 0,isExecuting:void 0}}},Jm=e=>Gm[e](),Qm={likedSongsSource:(e,t)=>new Fm(e.id,[],e.data),localTracksSource:(e,t)=>new jm(e.id,[],e.data),libraryPlaylistSource:(e,t)=>new zm(e.id,[],e.data),searchPlaylistSource:(e,t)=>new zm(e.id,[],e.data),topTracksSource:(e,t)=>new qm(e.id,[],e.data),libraryAlbumSource:(e,t)=>new Cm(e.id,[],e.data),searchAlbumSource:(e,t)=>new Cm(e.id,[],e.data),libraryArtistSource:(e,t)=>new Pm(e.id,[],e.data),searchArtistSource:(e,t)=>new Pm(e.id,[],e.data),deduplicate:(e,t)=>new ym(e.id,t.map(e=>e.id),e.data),isPlayable:(e,t)=>new rm(e.id,t.map(e=>e.id),e.data),acousticness:(e,t)=>new Yd(e.id,t.map(e=>e.id),e.data),shuffle:(e,t)=>new vm(e.id,t.map(e=>e.id),e.data),result:(e,t)=>new _m(e.id,t.map(e=>e.id),e.data),sort:(e,t)=>new wm(e.id,t.map(e=>e.id),e.data),danceability:(e,t)=>new Gd(e.id,t.map(e=>e.id),e.data),energy:(e,t)=>new Qd(e.id,t.map(e=>e.id),e.data),instrumentalness:(e,t)=>new tm(e.id,t.map(e=>e.id),e.data),liveness:(e,t)=>new om(e.id,t.map(e=>e.id),e.data),loudness:(e,t)=>new sm(e.id,t.map(e=>e.id),e.data),speechiness:(e,t)=>new mm(e.id,t.map(e=>e.id),e.data),valence:(e,t)=>new gm(e.id,t.map(e=>e.id),e.data),tempo:(e,t)=>new pm(e.id,t.map(e=>e.id),e.data),mode:(e,t)=>new cm(e.id,t.map(e=>e.id),e.data),radioAlbumSource:(e,t)=>new $m(e.id,[],e.data),radioArtistSource:(e,t)=>new $m(e.id,[],e.data),radioTrackSource:(e,t)=>new $m(e.id,[],e.data)};function ef(e){return"remove"===e.type}var tf=an((r,i)=>({reactFlowInstance:null,nodes:[],edges:[],result:[],workflowId:Su(),workflowName:"My workflow",hasPendingChanges:!1,anyExecuting:!1,setReactFlowInstance:e=>{r({reactFlowInstance:e})},onNodesChange:e=>{r({nodes:yo(e,i().nodes)}),e.some(e=>{return"position"===(t=e).type&&void 0!==t.position||ef(e);var t})&&r({hasPendingChanges:!0})},onEdgesChange:e=>{r({edges:vo(e,i().edges)}),e.some(e=>ef(e))&&r({hasPendingChanges:!0})},onConnect:e=>{r({edges:li(e,i().edges),hasPendingChanges:!0})},addNode:(e,t)=>{t={id:Su(),type:e,position:t,data:Jm(e)};r({nodes:i().nodes.concat(t),hasPendingChanges:!0})},updateNodeData:(t,n)=>{r({nodes:i().nodes.map(e=>e.id===t?{...e,data:{...e.data,...n}}:e),hasPendingChanges:!0}),r({anyExecuting:i().nodes.some(e=>!0===e.data.isExecuting)})},setResult:e=>{r({result:e})},setWorkflowName:e=>{r({workflowName:e,hasPendingChanges:!0})},resetState:()=>{r({nodes:[],edges:[],result:[],workflowId:Su(),workflowName:"My workflow",hasPendingChanges:!1})},onWorkflowSaved:()=>{r({hasPendingChanges:!1})},loadWorkflow:e=>{var{x:t=0,y:n=0,zoom:a=1}=e.viewport;i().reactFlowInstance?.setViewport({x:t,y:n,zoom:a}),r({nodes:e.nodes,edges:e.edges,hasPendingChanges:!1,workflowId:e.id,workflowName:e.name})},nodeFormValidationCallbacks:new Map,addValidationCallback:(e,t)=>{r({nodeFormValidationCallbacks:new Map(i().nodeFormValidationCallbacks).set(e,t)})},removeValidationCallback:e=>{var t=new Map(i().nodeFormValidationCallbacks);t.delete(e),r({nodeFormValidationCallbacks:t})},getNodes:()=>i().nodes,getEdges:()=>i().edges})),nf=tf;function af(t,e,n,a){const{updateNodeData:r,anyExecuting:i,addValidationCallback:o,removeValidationCallback:l}=nf(Jl(e=>({updateNodeData:e.updateNodeData,anyExecuting:e.anyExecuting,addValidationCallback:e.addValidationCallback,removeValidationCallback:e.removeValidationCallback})));var s=(0,bu.useCallback)(e=>{r(t,e)},[t,r]);const{formState:{errors:u},trigger:c,control:d,getValues:m,setError:f}=mu({mode:"onChange",disabled:i,defaultValues:n,values:e,resolver:vu(a)});return(0,bu.useEffect)(()=>(o(t,async()=>c()),()=>{l(t)}),[t,o,l,c]),{errors:u,getValues:m,control:d,setError:f,updateNodeField:s}}var rf=t(b()),of=t(b()),lf=t(re());function sf(r){const{min:i,max:o,step:l}=r;return of.default.createElement("div",null,of.default.createElement(Os,{name:"range",control:r.control,render:({field:{onChange:t,value:n,ref:e},formState:{disabled:a}})=>of.default.createElement("div",{className:"flex flex-wrap justify-center"},of.default.createElement(lf.Range,{values:[n.min,n.max],step:l,min:i,max:o,rtl:!1,onChange:e=>{e={min:e[0],max:e[1]};t(e),r.onChange(e)},disabled:a,ref:e,renderTrack:({props:e,children:t})=>of.default.createElement("div",{onMouseDown:e.onMouseDown,onTouchStart:e.onTouchStart,style:{...e.style,height:"36px",display:"flex",width:"200px"}},of.default.createElement("div",{ref:e.ref,style:{height:"5px",width:"100%",borderRadius:"4px",background:(0,lf.getTrackBackground)({values:[n.min,n.max],colors:a?["var(--spice-tab-active)","var(--spice-button-disabled)","var(--spice-tab-active)"]:["var(--spice-tab-active)","var(--spice-button)","var(--spice-tab-active)"],min:i,max:o,rtl:!1}),alignSelf:"center"}},t)),renderThumb:({index:e,props:t})=>of.default.createElement("div",{...t,key:t.key,style:{...t.style,height:"14px",width:"14px",borderRadius:"7px",backgroundColor:a?"var(--spice-subtext)":"var(--spice-text)",display:"flex",justifyContent:"center",alignItems:"center"}},of.default.createElement("div",{style:{position:"absolute",bottom:"-28px",color:"var(--spice-text)",fontSize:"small",fontWeight:"bold",padding:"4px",borderRadius:"4px"}},[n.min,n.max][e]))}))}))}var uf=t(b());function S(e){return uf.default.createElement("div",{className:Spicetify.classnames("bg-spice-main-elevated rounded-sm text-base",e.isExecuting?"!outline-spice-button rounded-md !outline-2 !outline-solid":"",!e.isExecuting&&e.isSelected?"!outline-spice-button-transparent rounded-md !outline-2 !outline-solid":"",e.classname)},e.children)}var cf=t(b());function df(e){return cf.default.createElement("div",{className:Spicetify.classnames("nowheel nodrag flex cursor-default flex-col gap-1 !p-2",e.className)},e.children)}var mf=t(b());function ff(e){return mf.default.createElement("div",{className:"rounded-t-sm border-t !px-2 !py-0.5",style:{backgroundColor:e.backgroundColor,color:e.textColor}},mf.default.createElement(_,{paddingBottom:"0",weight:"bold"},e.label))}function pf(){return mf.default.createElement(ff,{label:"Source",backgroundColor:"cornflowerblue",textColor:"black"})}function hf(){return mf.default.createElement(ff,{label:"Processing",backgroundColor:"greenyellow",textColor:"black"})}function gf(){return mf.default.createElement(ff,{label:"Filter",backgroundColor:"violet",textColor:"black"})}var yf=t(b()),vf=(...e)=>e.filter((e,t,n)=>Boolean(e)&&n.indexOf(e)===t).join(" "),bf=t(b()),Ef={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},wf=(0,bf.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:r="",children:i,iconNode:o,...l},s)=>(0,bf.createElement)("svg",{ref:s,...Ef,width:t,height:t,stroke:e,strokeWidth:a?24*Number(n)/Number(t):n,className:vf("lucide",r),...l},[...o.map(([e,t])=>(0,bf.createElement)(e,t)),...Array.isArray(i)?i:[i]])),kd=(a,r)=>{var e=(0,yf.forwardRef)(({className:e,...t},n)=>(0,yf.createElement)(wf,{ref:n,iconNode:r,className:vf("lucide-"+a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),e),...t}));return e.displayName=""+a,e},_f=kd("ArrowRightFromLine",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M21 12H7",key:"13ipq5"}],["path",{d:"m15 18 6-6-6-6",key:"6tx3qv"}]]),xf=kd("BadgePlus",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["line",{x1:"12",x2:"12",y1:"8",y2:"16",key:"10p56q"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),Sf=kd("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),kf=kd("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),If=kd("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Cf=kd("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]),Nf=kd("Import",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m8 11 4 4 4-4",key:"1dohi6"}],["path",{d:"M8 5H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-4",key:"1ywtjm"}]]),Tf=kd("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),Af=kd("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]),Rf=kd("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),Of=kd("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Mf=kd("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),Df=kd("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Pf=t(b());function Lf(e){return Pf.default.createElement("div",{className:"!mb-2 flex items-center gap-2"},Pf.default.createElement(_,{elementType:"p",weight:"bold",paddingBottom:"0"},e.title),e.tooltip&&Pf.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:e.tooltip,showDelay:100},Pf.default.createElement(If,{size:14,strokeWidth:1.5,className:"cursor-help"})))}var Ff=t(b());var Vf=t(b());var jf=t(b());var Bf=t(b()),zf=t(b());function Uf(o){return zf.default.createElement(Os,{control:o.control,name:o.name,render:({field:{onChange:t,onBlur:e,value:n,name:a,ref:r},formState:{disabled:i}})=>zf.default.createElement("input",{type:"checkbox",onChange:e=>{e=e.target.checked;t(e),o.onChange(e)},onBlur:e,value:n,name:a,disabled:i,ref:r})})}var Hf=t(b()),$f=t(b()),Zf=t(b());function Wf(e){return Zf.default.createElement(Zf.default.Fragment,null,e.error&&Zf.default.createElement("div",null,Zf.default.createElement(_,{elementType:"small",semanticColor:"textNegative"},e.error.message)))}function k(e){return $f.default.createElement("label",{className:"flex flex-row items-start justify-between gap-5"},$f.default.createElement("div",{className:"flex items-center gap-1"},$f.default.createElement(_,{elementType:"small"},e.label),e.tooltip&&$f.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:e.tooltip,showDelay:100},$f.default.createElement(If,{size:12,strokeWidth:1.5,className:"cursor-help"}))),$f.default.createElement("div",{className:"w-[200px]"},e.children,$f.default.createElement(Wf,{error:e.error})))}function Kf(e){return Hf.default.createElement(k,{label:e.label,error:e.error,tooltip:e.tooltip},Hf.default.createElement("div",{className:"flex justify-end"},e.children))}var Xf=t(b());var Yf=t(b());var qf=t(b()),Gf=t(b());function Jf(n){return Gf.default.createElement("select",{className:"main-dropDown-dropDown",name:n.name,disabled:n.disabled,value:n.selectedValue,onChange:t=>{var e=n.items.find(e=>e.value===t.target.value);e&&n.onItemClicked(e)},onBlur:n.onBlur,ref:n.ref},!n.selectedValue&&Gf.default.createElement("option",{value:n.selectedValue,disabled:!0,selected:!0},n.selectLabel),n.items.map(e=>Gf.default.createElement("option",{key:e.value,value:e.value},e.label)))}var Qf=t(b());function ep(o){return Qf.default.createElement(Os,{name:o.name,control:o.control,render:({field:{onChange:t,onBlur:e,value:n,name:a,ref:r},formState:{disabled:i}})=>Qf.default.createElement(Jf,{selectLabel:o.label,selectedValue:n,items:o.items,onItemClicked:e=>{t(e.value),o.onChange&&o.onChange(e.value)},onBlur:e,name:a,disabled:i,ref:r})})}var tp=[{label:"Major",value:"1"},{label:"Minor",value:"0"}];var np=t(b());var ap=t(b());var rp=t(b());var ip=t(b());var op=t(b());var lp=t(b()),sp=[{value:"album",label:"Album"},{value:"artist",label:"Artist"},{value:"name",label:"Name"},{value:"source",label:"Source"},{value:"duration",label:"Duration"}],up=[{value:"asc",label:"Ascending"},{value:"desc",label:"Descending"}];var cp=t(b());var dp=t(b()),mp=t(b(),1);function fp(e,l,t){const s=(0,mp.useRef)(null),u=(0,mp.useRef)(0),c=(0,mp.useRef)(null),d=(0,mp.useRef)([]),m=(0,mp.useRef)(),f=(0,mp.useRef)(),p=(0,mp.useRef)(e),h=(0,mp.useRef)(!0),g=(p.current=e,"undefined"!=typeof window),y=!l&&0!==l&&g;if("function"!=typeof e)throw new TypeError("Expected a function");l=+l||0;const v=!!(t=t||{}).leading,b=!("trailing"in t&&!t.trailing),E="maxWait"in t,w="debounceOnServer"in t&&!!t.debounceOnServer,_=E?Math.max(+t.maxWait||0,l):null;return(0,mp.useEffect)(()=>(h.current=!0,()=>{h.current=!1}),[]),(0,mp.useMemo)(()=>{const a=e=>{var t=d.current,n=m.current;return d.current=m.current=null,u.current=e,f.current=p.current.apply(n,t)},r=(e,t)=>{y&&cancelAnimationFrame(c.current),c.current=y?requestAnimationFrame(e):setTimeout(e,t)},i=e=>{var t;return!!h.current&&(t=e-s.current,!s.current||l<=t||t<0||E&&e-u.current>=_)},n=e=>(c.current=null,b&&d.current?a(e):(d.current=m.current=null,f.current)),o=()=>{var e,t=Date.now();if(i(t))return n(t);h.current&&(e=l-(t-s.current),t=E?Math.min(e,_-(t-u.current)):e,r(o,t))},e=(...e)=>{if(g||w){var t=Date.now(),n=i(t);if(d.current=e,m.current=this,s.current=t,n){if(!c.current&&h.current)return u.current=s.current,r(o,l),v?a(s.current):f.current;if(E)return r(o,l),a(s.current)}return c.current||r(o,l),f.current}};return e.cancel=()=>{c.current&&(y?cancelAnimationFrame:clearTimeout)(c.current),u.current=0,d.current=s.current=m.current=c.current=null},e.isPending=()=>!!c.current,e.flush=()=>c.current?n(Date.now()):f.current,e},[v,E,l,_,b,y,g,w])}function pp(n,a,r,t){const[e,i]=(0,dp.useState)(null),[o,l]=(0,dp.useState)(""),[s,u]=(0,dp.useState)([]),c=fp(e=>{a(e).then(e=>{u(e)}).catch(e=>{console.error("Failed to fetch items",e)})},200);const d=(0,dp.useCallback)((e,t,n)=>{i(e),l(t),u(n)},[]);var m=(0,dp.useCallback)(async e=>{var t;""===e?(t=await a(""),d(null,"",t)):null===(t=await n(e))?d(null,"",[]):d(t,r(t),[t])},[n,a,r,d]);return{selectedItem:e,onItemSelected:e=>{t(e),i(e),l(r(e))},items:s,inputValue:o,onInputChanged:e=>{l(e),c(e)},resetSelection:()=>{t(null),i(null),l("")},syncInputWithSelectedItem:()=>{l(e?r(e):"")},onSelectedIdChanged:m}}var hp=t(b()),gp=t(b());function yp(e,t){if(null==e)return{};var n,a={};for(n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;a[n]=e[n]}return a}function P(){return(P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,a=arguments[t];for(n in a)!{}.hasOwnProperty.call(a,n)||(e[n]=a[n])}return e}).apply(null,arguments)}function vp(e,t){return(vp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var c=t(me()),L=t(b()),bp=t(e()),Ep=e=>"object"==typeof e&&null!=e&&1===e.nodeType,wp=(e,t)=>(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e,_p=(e,t)=>{var n;return(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth)&&(n=getComputedStyle(e,null),wp(n.overflowY,t)||wp(n.overflowX,t)||!!(t=(e=>{if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}})(n=e))&&(t.clientHeight<n.scrollHeight||t.clientWidth<n.scrollWidth))},xp=(e,t,n,a,r,i,o,l)=>i<e&&t<o||e<i&&o<t?0:i<=e&&l<=n||t<=o&&n<=l?i-e-a:t<o&&l<n||i<e&&n<l?o-t+r:0,Sp=e=>{var t=e.parentElement;return null==t?e.getRootNode().host||null:t},kp=function(){return(kp=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Ip=0;function Cp(e){return"function"==typeof e?e:Np}function Np(){}function Tp(e,t){e&&((e,t)=>{if("undefined"==typeof document)return[];const{scrollMode:L,block:a,inline:r,boundary:n,skipOverflowHiddenElements:F}=t,V="function"==typeof n?n:e=>e!==n;if(!Ep(e))throw new TypeError("Invalid target");var i=document.scrollingElement||document.documentElement,o=[];let l=e;for(;Ep(l)&&V(l);){if((l=Sp(l))===i){o.push(l);break}null!=l&&l===document.body&&_p(l)&&!_p(document.documentElement)||null!=l&&_p(l,F)&&o.push(l)}var s=null!=(t=null==(t=window.visualViewport)?void 0:t.width)?t:innerWidth,u=null!=(t=null==(t=window.visualViewport)?void 0:t.height)?t:innerHeight,{scrollX:c,scrollY:d}=window,{height:m,width:f,top:p,right:h,bottom:g,left:y}=e.getBoundingClientRect(),{top:e,right:t,bottom:j,left:B}=(t=window.getComputedStyle(e),{top:parseFloat(t.scrollMarginTop)||0,right:parseFloat(t.scrollMarginRight)||0,bottom:parseFloat(t.scrollMarginBottom)||0,left:parseFloat(t.scrollMarginLeft)||0});let v="start"===a||"nearest"===a?p-e:"end"===a?g+j:p+m/2-e+j,b="center"===r?y+f/2-B+t:"end"===r?h+t:y-B;var E=[];for(let n=0;n<o.length;n++){var w=o[n],{height:_,width:x,top:S,right:k,bottom:I,left:C}=w.getBoundingClientRect();if("if-needed"===L&&0<=p&&0<=y&&g<=u&&h<=s&&(w===i&&!_p(w)||S<=p&&g<=I&&C<=y&&h<=k))return E;var N=getComputedStyle(w),T=parseInt(N.borderLeftWidth,10),A=parseInt(N.borderTopWidth,10),R=parseInt(N.borderRightWidth,10),N=parseInt(N.borderBottomWidth,10);let e=0,t=0;var O="offsetWidth"in w?w.offsetWidth-w.clientWidth-T-R:0,M="offsetHeight"in w?w.offsetHeight-w.clientHeight-A-N:0,D=!("offsetWidth"in w)||0===w.offsetWidth?0:x/w.offsetWidth,P=!("offsetHeight"in w)||0===w.offsetHeight?0:_/w.offsetHeight;i===w?(e="start"===a?v:"end"===a?v-u:"nearest"===a?xp(d,d+u,u,A,N,d+v,d+v+m,m):v-u/2,t="start"===r?b:"center"===r?b-s/2:"end"===r?b-s:xp(c,c+s,s,T,R,c+b,c+b+f,f),e=Math.max(0,e+d),t=Math.max(0,t+c)):(e="start"===a?v-S-A:"end"===a?v-I+N+M:"nearest"===a?xp(S,I,_,A,N+M,v,v+m,m):v-(S+_/2)+M/2,t="start"===r?b-C-T:"center"===r?b-(C+x/2)+O/2:"end"===r?b-k+R+O:xp(C,k,x,T,R+O,b,b+f,f),{scrollLeft:I,scrollTop:A}=w,e=0==P?0:Math.max(0,Math.min(A+e/P,w.scrollHeight-_/P+M)),t=0==D?0:Math.max(0,Math.min(I+t/D,w.scrollWidth-x/D+O)),v+=A-e,b+=I-t),E.push({el:w,top:e,left:t})}return E})(e,{boundary:t,block:"nearest",scrollMode:"if-needed"}).forEach(function(e){var t=e.el,n=e.top,e=e.left;t.scrollTop=n,t.scrollLeft=e})}function Ap(e,t,n){return e===t||t instanceof n.Node&&e.contains&&e.contains(t)}function Rp(a,r){var i;function o(){i&&clearTimeout(i)}function e(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o(),i=setTimeout(function(){i=null,a.apply(void 0,t)},r)}return e.cancel=o,e}function Op(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];return r.some(function(e){return e&&e.apply(void 0,[t].concat(n)),t.preventDownshiftDefault||t.hasOwnProperty("nativeEvent")&&t.nativeEvent.preventDownshiftDefault})}}function Mp(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(t){n.forEach(function(e){"function"==typeof e?e(t):e&&(e.current=t)})}}function Dp(){return String(Ip++)}function Pp(e){var t=e.isOpen,n=e.resultCount,e=e.previousResultCount;return t?n?n!==e?n+" result"+(1===n?" is":"s are")+" available, use up and down arrow keys to navigate. Press Enter key to select.":"":"No results are available.":""}function Lp(e,t){return!(e=Array.isArray(e)?e[0]:e)&&t?t:e}function Fp(e){return"string"==typeof e.type}function Vp(e){return e.props}var jp=["highlightedIndex","inputValue","isOpen","selectedItem","type"];function Bp(t){void 0===t&&(t={});var n={};return jp.forEach(function(e){t.hasOwnProperty(e)&&(n[e]=t[e])}),n}function zp(n,a){return n&&a?Object.keys(n).reduce(function(e,t){return e[t]=(Up(a,t)?a:n)[t],e},{}):n}function Up(e,t){return void 0!==e[t]}function Hp(e){var t=e.key,e=e.keyCode;return 37<=e&&e<=40&&0!==t.indexOf("Arrow")?"Arrow"+t:t}function $p(e,t,n,a,r){void 0===r&&(r=!1);var i,o,l=n.length;return 0===l?-1:(o=l-1,(i=(e="number"!=typeof e||e<0||o<e?0<t?-1:1+o:e)+t)<0?i=r?o:0:o<i&&(i=r?0:o),-1===(o=Zp(i,t<0,n,a,r))?l<=e?-1:e:o)}function Zp(e,t,n,a,r){void 0===r&&(r=!1);var i=n.length;if(t){for(var o=e;0<=o;o--)if(!a(n[o],o))return o}else for(var l=e;l<i;l++)if(!a(n[l],l))return l;return r?Zp(t?i-1:0,t,n,a):-1}function Wp(t,e,n,a){return void 0===a&&(a=!0),n&&e.some(function(e){return e&&(Ap(e,t,n)||a&&Ap(e,n.document.activeElement,n))})}var Kp=Np,Kp=function(e,t,n){var a="This prop should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled Downshift element for the lifetime of the component. More info: https://github.com/downshift-js/downshift#control-props";Object.keys(e).forEach(function(e){void 0!==t[e]&&void 0===n[e]?console.error('downshift: A component has changed the controlled prop "'+e+'" to be uncontrolled. '+a):void 0===t[e]&&void 0!==n[e]&&console.error('downshift: A component has changed the uncontrolled prop "'+e+'" to be controlled. '+a)})},Xp=Rp(function(e){Yp(e).textContent=""},500);function Yp(e){var t=e.getElementById("a11y-status-message");return t||((t=e.createElement("div")).setAttribute("id","a11y-status-message"),t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-relevant","additions text"),Object.assign(t.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),e.body.appendChild(t)),t}function qp(e,t){e&&t&&(Yp(t).textContent=e,Xp(t))}var Gp="__autocomplete_unknown__",Jp="__autocomplete_mouseup__",Qp="__autocomplete_item_mouseenter__",eh="__autocomplete_keydown_arrow_up__",th="__autocomplete_keydown_arrow_down__",nh="__autocomplete_keydown_escape__",ah="__autocomplete_keydown_enter__",rh="__autocomplete_keydown_home__",ih="__autocomplete_keydown_end__",oh="__autocomplete_click_item__",lh="__autocomplete_blur_input__",sh="__autocomplete_change_input__",uh="__autocomplete_keydown_space_button__",ch="__autocomplete_click_button__",dh="__autocomplete_blur_button__",mh="__autocomplete_controlled_prop_updated_selected_item__",fh="__autocomplete_touchend__",ph=Object.freeze({__proto__:null,blurButton:dh,blurInput:lh,changeInput:sh,clickButton:ch,clickItem:oh,controlledPropUpdatedSelectedItem:mh,itemMouseEnter:Qp,keyDownArrowDown:th,keyDownArrowUp:eh,keyDownEnd:ih,keyDownEnter:ah,keyDownEscape:nh,keyDownHome:rh,keyDownSpaceButton:uh,mouseUp:Jp,touchEnd:fh,unknown:Gp}),hh=["refKey","ref"],gh=["onClick","onPress","onKeyDown","onKeyUp","onBlur"],yh=["onKeyDown","onBlur","onChange","onInput","onChangeText"],vh=["refKey","ref"],bh=["onMouseMove","onMouseDown","onClick","onPress","index","item"];function Eh(e,t){t=t.refKey;e||console.error('downshift: The ref prop "'+t+'" from getMenuProps was not applied correctly on your menu element.')}var wh={highlightedIndex:-1,isOpen:!(function(){var e=function(o){function e(e){var c=o.call(this,e)||this,e=(c.id=c.props.id||"downshift-"+Dp(),c.menuId=c.props.menuId||c.id+"-menu",c.labelId=c.props.labelId||c.id+"-label",c.inputId=c.props.inputId||c.id+"-input",c.getItemId=c.props.getItemId||function(e){return c.id+"-item-"+e},c.items=[],c.itemCount=null,c.previousResultCount=0,c.timeoutIds=[],c.internalSetTimeout=function(e,t){var n=setTimeout(function(){c.timeoutIds=c.timeoutIds.filter(function(e){return e!==n}),e()},t);c.timeoutIds.push(n)},c.setItemCount=function(e){c.itemCount=e},c.unsetItemCount=function(){c.itemCount=null},c.isItemDisabled=function(e,t){t=c.getItemNodeFromIndex(t);return t&&t.hasAttribute("disabled")},c.setHighlightedIndex=function(e,t){void 0===e&&(e=c.props.defaultHighlightedIndex),t=Bp(t=void 0===t?{}:t),c.internalSetState(P({highlightedIndex:e},t))},c.clearSelection=function(e){c.internalSetState({selectedItem:null,inputValue:"",highlightedIndex:c.props.defaultHighlightedIndex,isOpen:c.props.defaultIsOpen},e)},c.selectItem=function(e,t,n){t=Bp(t),c.internalSetState(P({isOpen:c.props.defaultIsOpen,highlightedIndex:c.props.defaultHighlightedIndex,selectedItem:e,inputValue:c.props.itemToString(e)},t),n)},c.selectItemAtIndex=function(e,t,n){e=c.items[e];null!=e&&c.selectItem(e,t,n)},c.selectHighlightedItem=function(e,t){return c.selectItemAtIndex(c.getState().highlightedIndex,e,t)},c.internalSetState=function(e,t){var r,i,o={},l="function"==typeof e;return!l&&e.hasOwnProperty("inputValue")&&c.props.onInputValueChange(e.inputValue,P({},c.getStateAndHelpers(),e)),c.setState(function(t){t=c.getState(t);var n=l?e(t):e,n=c.props.stateReducer(t,n),a=(r=n.hasOwnProperty("selectedItem"),{});return r&&n.selectedItem!==t.selectedItem&&(i=n.selectedItem),n.type||(n.type=Gp),Object.keys(n).forEach(function(e){t[e]!==n[e]&&(o[e]=n[e]),"type"===e||(n[e],Up(c.props,e))||(a[e]=n[e])}),l&&n.hasOwnProperty("inputValue")&&c.props.onInputValueChange(n.inputValue,P({},c.getStateAndHelpers(),n)),a},function(){Cp(t)(),1<Object.keys(o).length&&c.props.onStateChange(o,c.getStateAndHelpers()),r&&c.props.onSelect(e.selectedItem,c.getStateAndHelpers()),void 0!==i&&c.props.onChange(i,c.getStateAndHelpers()),c.props.onUserAction(o,c.getStateAndHelpers())})},c.rootRef=function(e){return c._rootNode=e},c.getRootProps=function(e,t){var n,e=void 0===e?{}:e,a=e.refKey,a=void 0===a?"ref":a,r=e.ref,e=yp(e,hh),t=(void 0===t?{}:t).suppressRefError,t=void 0!==t&&t;c.getRootProps.called=!0,c.getRootProps.refKey=a,c.getRootProps.suppressRefError=t;t=c.getState().isOpen;return P(((n={})[a]=Mp(r,c.rootRef),n.role="combobox",n["aria-expanded"]=t,n["aria-haspopup"]="listbox",n["aria-owns"]=t?c.menuId:void 0,n["aria-labelledby"]=c.labelId,n),e)},c.keyDownHandlers={ArrowDown:function(e){var t=this;e.preventDefault(),this.getState().isOpen?(e=e.shiftKey?5:1,this.moveHighlightedIndex(e,{type:th})):this.internalSetState({isOpen:!0,type:th},function(){var e=t.getItemCount();0<e&&(e=$p(t.getState().highlightedIndex,1,{length:e},t.isItemDisabled,!0),t.setHighlightedIndex(e,{type:th}))})},ArrowUp:function(e){var t=this;e.preventDefault(),this.getState().isOpen?(e=e.shiftKey?-5:-1,this.moveHighlightedIndex(e,{type:eh})):this.internalSetState({isOpen:!0,type:eh},function(){var e=t.getItemCount();0<e&&(e=$p(t.getState().highlightedIndex,-1,{length:e},t.isItemDisabled,!0),t.setHighlightedIndex(e,{type:eh}))})},Enter:function(e){var t,n;229!==e.which&&(n=(t=this.getState()).isOpen,t=t.highlightedIndex,n)&&null!=t&&(e.preventDefault(),n=this.items[t],e=this.getItemNodeFromIndex(t),null==n||e&&e.hasAttribute("disabled")||this.selectHighlightedItem({type:ah}))},Escape:function(e){e.preventDefault(),this.reset(P({type:nh},!this.state.isOpen&&{selectedItem:null,inputValue:""}))}},c.buttonKeyDownHandlers=P({},c.keyDownHandlers,{" ":function(e){e.preventDefault(),this.toggleMenu({type:uh})}}),c.inputKeyDownHandlers=P({},c.keyDownHandlers,{Home:function(e){var t=this.getState().isOpen;t&&(e.preventDefault(),(e=this.getItemCount())<=0||!t||(t=Zp(0,!1,{length:e},this.isItemDisabled),this.setHighlightedIndex(t,{type:rh})))},End:function(e){var t=this.getState().isOpen;t&&(e.preventDefault(),(e=this.getItemCount())<=0||!t||(t=Zp(e-1,!0,{length:e},this.isItemDisabled),this.setHighlightedIndex(t,{type:ih})))}}),c.getToggleButtonProps=function(e){var e=void 0===e?{}:e,t=e.onClick,n=(e.onPress,e.onKeyDown),a=e.onKeyUp,r=e.onBlur,e=yp(e,gh),i=c.getState().isOpen,t={onClick:Op(t,c.buttonHandleClick),onKeyDown:Op(n,c.buttonHandleKeyDown),onKeyUp:Op(a,c.buttonHandleKeyUp),onBlur:Op(r,c.buttonHandleBlur)};return P({type:"button",role:"button","aria-label":i?"close menu":"open menu","aria-haspopup":!0,"data-toggle":!0},e.disabled?{}:t,e)},c.buttonHandleKeyUp=function(e){e.preventDefault()},c.buttonHandleKeyDown=function(e){var t=Hp(e);c.buttonKeyDownHandlers[t]&&c.buttonKeyDownHandlers[t].call(c,e)},c.buttonHandleClick=function(e){var t,n;e.preventDefault(),c.props.environment&&(t=(n=c.props.environment.document).body,n=n.activeElement,t)&&t===n&&e.target.focus(),c.internalSetTimeout(function(){return c.toggleMenu({type:ch})})},c.buttonHandleBlur=function(e){var t=e.target;c.internalSetTimeout(function(){var e;c.isMouseDown||!c.props.environment||null!=(e=c.props.environment.document.activeElement)&&e.id===c.inputId||e===t||c.reset({type:dh})})},c.getLabelProps=function(e){return P({htmlFor:c.inputId,id:c.labelId},e)},c.getInputProps=function(e){var t,e=void 0===e?{}:e,n=e.onKeyDown,a=e.onBlur,r=e.onChange,i=e.onInput,e=(e.onChangeText,yp(e,yh)),o={},l=c.getState(),s=l.inputValue,u=l.isOpen,l=l.highlightedIndex;return e.disabled||((t={}).onChange=Op(r,i,c.inputHandleChange),t.onKeyDown=Op(n,c.inputHandleKeyDown),t.onBlur=Op(a,c.inputHandleBlur),o=t),P({"aria-autocomplete":"list","aria-activedescendant":u&&"number"==typeof l&&0<=l?c.getItemId(l):void 0,"aria-controls":u?c.menuId:void 0,"aria-labelledby":e&&e["aria-label"]?void 0:c.labelId,autoComplete:"off",value:s,id:c.inputId},o,e)},c.inputHandleKeyDown=function(e){var t=Hp(e);t&&c.inputKeyDownHandlers[t]&&c.inputKeyDownHandlers[t].call(c,e)},c.inputHandleChange=function(e){c.internalSetState({type:sh,isOpen:!0,inputValue:e.target.value,highlightedIndex:c.props.defaultHighlightedIndex})},c.inputHandleBlur=function(){c.internalSetTimeout(function(){var e,t;c.isMouseDown||!c.props.environment||(null==(t=c.props.environment.document.activeElement)||null==(e=t.dataset)?void 0:e.toggle)&&c._rootNode&&c._rootNode.contains(t)||c.reset({type:lh})})},c.menuRef=function(e){c._menuNode=e},c.getMenuProps=function(e,t){var e=void 0===e?{}:e,n=e.refKey,n=void 0===n?"ref":n,a=e.ref,e=yp(e,vh),t=(void 0===t?{}:t).suppressRefError,t=void 0!==t&&t;return c.getMenuProps.called=!0,c.getMenuProps.refKey=n,c.getMenuProps.suppressRefError=t,P(((t={})[n]=Mp(a,c.menuRef),t.role="listbox",t["aria-labelledby"]=e&&e["aria-label"]?void 0:c.labelId,t.id=c.menuId,t),e)},c.getItemProps=function(e){var e=void 0===e?{}:e,t=e.onMouseMove,n=e.onMouseDown,a=e.onClick,r=(e.onPress,e.index),i=e.item,i=void 0===i?void console.error('The property "item" is required in "getItemProps"'):i,e=yp(e,bh),i=(void 0===r?(c.items.push(i),r=c.items.indexOf(i)):c.items[r]=i,a),t=((a={onMouseMove:Op(t,function(){r!==c.getState().highlightedIndex&&(c.setHighlightedIndex(r,{type:Qp}),c.avoidScrolling=!0,c.internalSetTimeout(function(){return c.avoidScrolling=!1},250))}),onMouseDown:Op(n,function(e){e.preventDefault()})}).onClick=Op(i,function(){c.selectItemAtIndex(r,{type:oh})}),a),n=e.disabled?{onMouseDown:t.onMouseDown}:t;return P({id:c.getItemId(r),role:"option","aria-selected":c.getState().highlightedIndex===r},n,e)},c.clearItems=function(){c.items=[]},c.reset=function(t,e){t=Bp(t=void 0===t?{}:t),c.internalSetState(function(e){e=e.selectedItem;return P({isOpen:c.props.defaultIsOpen,highlightedIndex:c.props.defaultHighlightedIndex,inputValue:c.props.itemToString(e)},t)},e)},c.toggleMenu=function(n,a){n=Bp(n=void 0===n?{}:n),c.internalSetState(function(e){e=e.isOpen;return P({isOpen:!e},e&&{highlightedIndex:c.props.defaultHighlightedIndex},n)},function(){var e=c.getState(),t=e.isOpen,e=e.highlightedIndex;t&&0<c.getItemCount()&&"number"==typeof e&&c.setHighlightedIndex(e,n),Cp(a)()})},c.openMenu=function(e){c.internalSetState({isOpen:!0},e)},c.closeMenu=function(e){c.internalSetState({isOpen:!1},e)},c.updateStatus=Rp(function(){var e,t,n;null!=(e=c.props)&&null!=(e=e.environment)&&e.document&&(e=c.getState(),n=c.items[e.highlightedIndex],t=c.getItemCount(),n=c.props.getA11yStatusMessage(P({itemToString:c.props.itemToString,previousResultCount:c.previousResultCount,resultCount:t,highlightedItem:n},e)),c.previousResultCount=t,qp(n,c.props.environment.document))},200),c.props),t=e.defaultHighlightedIndex,n=e.initialHighlightedIndex,a=e.defaultIsOpen,r=e.initialIsOpen,i=e.initialInputValue,e=e.initialSelectedItem,t=c.getState({highlightedIndex:void 0===n?t:n,isOpen:void 0===r?a:r,inputValue:void 0===i?"":i,selectedItem:void 0===e?null:e});return null!=t.selectedItem&&void 0===c.props.initialInputValue&&(t.inputValue=c.props.itemToString(t.selectedItem)),c.state=t,c}t=o,(n=e).prototype=Object.create(t.prototype),vp(n.prototype.constructor=n,t);var t,n=e.prototype;return n.internalClearTimeouts=function(){this.timeoutIds.forEach(function(e){clearTimeout(e)}),this.timeoutIds=[]},n.getState=function(e){return zp(e=void 0===e?this.state:e,this.props)},n.getItemCount=function(){var e=this.items.length;return null!=this.itemCount?e=this.itemCount:void 0!==this.props.itemCount&&(e=this.props.itemCount),e},n.getItemNodeFromIndex=function(e){return this.props.environment?this.props.environment.document.getElementById(this.getItemId(e)):null},n.scrollHighlightedItemIntoView=function(){var e=this.getItemNodeFromIndex(this.getState().highlightedIndex);this.props.scrollIntoView(e,this._menuNode)},n.moveHighlightedIndex=function(e,t){var n=this.getItemCount(),a=this.getState().highlightedIndex;0<n&&(a=$p(a,e,{length:n},this.isItemDisabled,!0),this.setHighlightedIndex(a,t))},n.getStateAndHelpers=function(){var e=this.getState(),t=e.highlightedIndex,n=e.inputValue,a=e.selectedItem,e=e.isOpen,r=this.props.itemToString,i=this.id,o=this.getRootProps,l=this.getToggleButtonProps,s=this.getLabelProps,u=this.getMenuProps,c=this.getInputProps,d=this.getItemProps,m=this.openMenu,f=this.closeMenu,p=this.toggleMenu,h=this.selectItem,g=this.selectItemAtIndex,y=this.selectHighlightedItem,v=this.setHighlightedIndex,b=this.clearSelection,E=this.clearItems;return{getRootProps:o,getToggleButtonProps:l,getLabelProps:s,getMenuProps:u,getInputProps:c,getItemProps:d,reset:this.reset,openMenu:m,closeMenu:f,toggleMenu:p,selectItem:h,selectItemAtIndex:g,selectHighlightedItem:y,setHighlightedIndex:v,clearSelection:b,clearItems:E,setItemCount:this.setItemCount,unsetItemCount:this.unsetItemCount,setState:this.internalSetState,itemToString:r,id:i,highlightedIndex:t,inputValue:n,isOpen:e,selectedItem:a}},n.componentDidMount=function(){var e,t,n,a,r,i,o=this;this.getMenuProps.called&&!this.getMenuProps.suppressRefError&&Eh(this._menuNode,this.getMenuProps),this.props.environment?(t=function(e){o.isMouseDown=!1,!Wp(e.target,[o._rootNode,o._menuNode],o.props.environment)&&o.getState().isOpen&&o.reset({type:Jp},function(){return o.props.onOuterClick(o.getStateAndHelpers())})},n=function(){o.isTouchMove=!1},a=function(){o.isTouchMove=!0},r=function(e){e=Wp(e.target,[o._rootNode,o._menuNode],o.props.environment,!1);o.isTouchMove||e||!o.getState().isOpen||o.reset({type:fh},function(){return o.props.onOuterClick(o.getStateAndHelpers())})},(i=this.props.environment).addEventListener("mousedown",e=function(){o.isMouseDown=!0}),i.addEventListener("mouseup",t),i.addEventListener("touchstart",n),i.addEventListener("touchmove",a),i.addEventListener("touchend",r),this.cleanup=function(){o.internalClearTimeouts(),o.updateStatus.cancel(),i.removeEventListener("mousedown",e),i.removeEventListener("mouseup",t),i.removeEventListener("touchstart",n),i.removeEventListener("touchmove",a),i.removeEventListener("touchend",r)}):this.cleanup=function(){o.internalClearTimeouts()}},n.shouldScroll=function(e,t){var n=(void 0===this.props.highlightedIndex?this.getState():this.props).highlightedIndex,t=(void 0===t.highlightedIndex?e:t).highlightedIndex;return n&&this.getState().isOpen&&!e.isOpen||n!==t},n.componentDidUpdate=function(e,t){Kp(this.state,e,this.props),this.getMenuProps.called&&!this.getMenuProps.suppressRefError&&Eh(this._menuNode,this.getMenuProps),Up(this.props,"selectedItem")&&this.props.selectedItemChanged(e.selectedItem,this.props.selectedItem)&&this.internalSetState({type:mh,inputValue:this.props.itemToString(this.props.selectedItem)}),!this.avoidScrolling&&this.shouldScroll(t,e)&&this.scrollHighlightedItemIntoView(),this.updateStatus()},n.componentWillUnmount=function(){this.cleanup()},n.render=function(){var e,t,n,a,r=Lp(this.props.children,Np),r=(this.clearItems(),this.getRootProps.called=!1,this.getRootProps.refKey=void 0,this.getRootProps.suppressRefError=void 0,this.getMenuProps.called=!1,this.getMenuProps.refKey=void 0,this.getMenuProps.suppressRefError=void 0,this.getLabelProps.called=!1,this.getInputProps.called=!1,Lp(r(this.getStateAndHelpers())));if(!r)return null;if(this.getRootProps.called||this.props.suppressRefError)return this.getRootProps.suppressRefError||this.props.suppressRefError||(e=r,t=this.getRootProps,n="ref"!==(t=t.refKey),!(a=!Fp(e))||n||(0,bp.isForwardRef)(e)?!a&&n&&console.error('downshift: You returned a DOM element. You should not specify a refKey in getRootProps. You specified "'+t+'"'):console.error("downshift: You returned a non-DOM element. You must specify a refKey in getRootProps"),(0,bp.isForwardRef)(e))||Vp(e)[t]||console.error('downshift: You must apply the ref prop "'+t+'" from getRootProps onto your root element.'),r;if(Fp(r))return(0,L.cloneElement)(r,this.getRootProps(Vp(r)));throw new Error("downshift: If you return a non-DOM element, you must apply the getRootProps function")},e}(L.Component);return e.defaultProps={defaultHighlightedIndex:null,defaultIsOpen:!1,getA11yStatusMessage:Pp,itemToString:function(e){return null==e?"":("[object Object]"!==Object.prototype.toString.call(e)||e.hasOwnProperty("toString")||console.warn("downshift: An object was passed to the default implementation of `itemToString`. You should probably provide your own `itemToString` implementation. Please refer to the `itemToString` API documentation.","The object that was passed:",e),String(e))},onStateChange:Np,onInputValueChange:Np,onUserAction:Np,onChange:Np,onSelect:Np,onOuterClick:Np,selectedItemChanged:function(e,t){return e!==t},environment:"undefined"==typeof window?void 0:window,stateReducer:function(e,t){return t},suppressRefError:!1,scrollIntoView:Tp},e.stateChangeTypes=ph,e}().propTypes={children:c.default.func,defaultHighlightedIndex:c.default.number,defaultIsOpen:c.default.bool,initialHighlightedIndex:c.default.number,initialSelectedItem:c.default.any,initialInputValue:c.default.string,initialIsOpen:c.default.bool,getA11yStatusMessage:c.default.func,itemToString:c.default.func,onChange:c.default.func,onSelect:c.default.func,onStateChange:c.default.func,onInputValueChange:c.default.func,onUserAction:c.default.func,onOuterClick:c.default.func,selectedItemChanged:c.default.func,stateReducer:c.default.func,itemCount:c.default.number,id:c.default.string,environment:c.default.shape({addEventListener:c.default.func.isRequired,removeEventListener:c.default.func.isRequired,document:c.default.shape({createElement:c.default.func.isRequired,getElementById:c.default.func.isRequired,activeElement:c.default.any.isRequired,body:c.default.any.isRequired}).isRequired,Node:c.default.func.isRequired}),suppressRefError:c.default.bool,scrollIntoView:c.default.func,selectedItem:c.default.any,isOpen:c.default.bool,inputValue:c.default.string,highlightedIndex:c.default.number,labelId:c.default.string,inputId:c.default.string,menuId:c.default.string,getItemId:c.default.func}),selectedItem:null,inputValue:""};function _h(l,s,u){var e=l.props,t=l.type,c={};Object.keys(s).forEach(function(e){var t,n,a,r,i,o;t=e,a=s,r=u,i=(n=l).props,n=l.type,o="on"+Ch(t)+"Change",i[o]&&void 0!==r[t]&&r[t]!==a[t]&&i[o](P({type:n},r)),u[e]!==s[e]&&(c[e]=u[e])}),e.onStateChange&&Object.keys(c).length&&e.onStateChange(P({type:t},c))}var xh=Rp(function(e,t){qp(e,t)},200),Sh="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?L.useLayoutEffect:L.useEffect,kh="useId"in L.default?function(e){var t=e.id,n=e.labelId,a=e.menuId,r=e.getItemId,i=e.toggleButtonId,e=e.inputId,o="downshift-"+L.default.useId(),t=t||o;return(0,L.useRef)({labelId:n||t+"-label",menuId:a||t+"-menu",getItemId:r||function(e){return t+"-item-"+e},toggleButtonId:i||t+"-toggle-button",inputId:e||t+"-input"}).current}:function(e){var t=e.id,n=void 0===t?"downshift-"+Dp():t,t=e.labelId,a=e.menuId,r=e.getItemId,i=e.toggleButtonId,e=e.inputId;return(0,L.useRef)({labelId:t||n+"-label",menuId:a||n+"-menu",getItemId:r||function(e){return n+"-item-"+e},toggleButtonId:i||n+"-toggle-button",inputId:e||n+"-input"}).current};function Ih(e,t,n,a){var r,i;if(void 0===e){if(void 0===t)throw new Error(a);r=n[t],i=t}else i=void 0===t?n.indexOf(e):t,r=e;return[r,i]}function Ch(e){return""+e.slice(0,1).toUpperCase()+e.slice(1)}function Nh(e){var t=(0,L.useRef)(e);return t.current=e,t}function Th(a,e,t,n){var r=(0,L.useRef)(),i=(0,L.useRef)(),o=(0,L.useCallback)(function(e,t){e=zp(e,(i.current=t).props);var n=a(e,t);return t.props.stateReducer(e,P({},t,{changes:n}))},[a]),o=(0,L.useReducer)(o,e,t),l=o[0],s=o[1],u=Nh(e),t=(0,L.useCallback)(function(e){return s(P({props:u.current},e))},[u]),c=i.current;return(0,L.useEffect)(function(){var e=zp(r.current,null==c?void 0:c.props);c&&r.current&&!n(e,l)&&_h(c,e,l),r.current=l},[l,c,n]),[l,t]}function Ah(e,t,n,a){e=Th(e,t,n,a),n=e[0],a=e[1];return[zp(n,t),a]}_d={itemToString:function(e){return e?String(e):""},itemToKey:function(e){return e},stateReducer:function(e,t){return t.changes},scrollIntoView:Tp,environment:"undefined"==typeof window?void 0:window};function Rh(e,t,n){void 0===n&&(n=wh);e=e["default"+Ch(t)];return void 0!==e?e:n[t]}function Oh(e,t,n){void 0===n&&(n=wh);var a=e[t];return void 0!==a||void 0!==(a=e["initial"+Ch(t)])?a:Rh(e,t,n)}function Mh(t){var n=Oh(t,"selectedItem"),e=Oh(t,"isOpen"),a=function(e){var t=Oh(e,"highlightedIndex");if(-1<t&&e.isItemDisabled(e.items[t],t))return-1;return t}(t),r=Oh(t,"inputValue");return{highlightedIndex:a<0&&n&&e?t.items.findIndex(function(e){return t.itemToKey(e)===t.itemToKey(n)}):a,isOpen:e,selectedItem:n,inputValue:r}}function Dh(e,t,n){var a=e.items,r=e.initialHighlightedIndex,i=e.defaultHighlightedIndex,o=e.isItemDisabled,l=e.itemToKey,s=t.selectedItem,e=t.highlightedIndex;return 0===a.length?-1:void 0===r||e!==r||o(a[r],r)?void 0===i||o(a[i],i)?s?a.findIndex(function(e){return l(s)===l(e)}):n<0&&!o(a[a.length-1],a.length-1)?a.length-1:0<n&&!o(a[0],0)?0:-1:i:r}function Ph(o,l,s){var u=(0,L.useRef)({isMouseDown:!1,isTouchMove:!1,isTouchEnd:!1});return(0,L.useEffect)(function(){var t;return o?(t=s.map(function(e){return e.current}),o.addEventListener("mousedown",e),o.addEventListener("mouseup",n),o.addEventListener("touchstart",a),o.addEventListener("touchmove",r),o.addEventListener("touchend",i),function(){o.removeEventListener("mousedown",e),o.removeEventListener("mouseup",n),o.removeEventListener("touchstart",a),o.removeEventListener("touchmove",r),o.removeEventListener("touchend",i)}):Np;function e(){u.current.isTouchEnd=!1,u.current.isMouseDown=!0}function n(e){u.current.isMouseDown=!1,Wp(e.target,t,o)||l()}function a(){u.current.isTouchEnd=!1,u.current.isTouchMove=!1}function r(){u.current.isTouchMove=!0}function i(e){u.current.isTouchEnd=!0,u.current.isTouchMove||Wp(e.target,t,o,!1)||l()}},[s,o,l]),u.current}var Lh=function(){return Np};function Fh(t,n,e,a){var r=(a=void 0===a?{}:a).document,i=Uh();(0,L.useEffect)(function(){var e;t&&!i&&r&&(e=t(n),xh(e,r))},e),(0,L.useEffect)(function(){return function(){var e;xh.cancel(),(e=null==(e=r)?void 0:e.getElementById("a11y-status-message"))&&e.remove()}},[r])}function Vh(e){var t=e.highlightedIndex,n=e.isOpen,a=e.itemRefs,r=e.getItemNodeFromIndex,i=e.menuElement,o=e.scrollIntoView,l=(0,L.useRef)(!0);return Sh(function(){t<0||!n||!Object.keys(a.current).length||(!1===l.current?l.current=!0:o(r(t),i))},[t]),l}var Lh=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=(0,L.useRef)(t.reduce(function(e,t){return e[t]={},e},{}));return(0,L.useEffect)(function(){Object.keys(r.current).forEach(function(e){var t,n,a=r.current[e];Object.keys(a).length?(t=a.suppressRefError,n=a.refKey,a=a.elementRef,t||null!=a&&a.current||console.error('downshift: The ref prop "'+n+'" from '+e+" was not applied correctly on your element.")):console.error("downshift: You forgot to call the "+e+" getter function on your component / element.")})},[]),(0,L.useCallback)(function(e,t,n,a){r.current[e]={suppressRefError:t,refKey:n,elementRef:a}},[])},jh=Np;function Bh(e,t,n){var a;return void 0===n&&(n=!0),P({isOpen:!1,highlightedIndex:-1},(null==(a=e.items)?void 0:a.length)&&0<=t&&P({selectedItem:e.items[t],isOpen:Rh(e,"isOpen"),highlightedIndex:Rh(e,"highlightedIndex")},n&&{inputValue:e.itemToString(e.items[t])}))}function zh(e,t){return e.isOpen===t.isOpen&&e.inputValue===t.inputValue&&e.highlightedIndex===t.highlightedIndex&&e.selectedItem===t.selectedItem}function Uh(){var e=L.default.useRef(!0);return L.default.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]),e.current}function Hh(e){var t=Rh(e,"highlightedIndex");return-1<t&&e.isItemDisabled(e.items[t],t)?-1:t}jh=function(e){var t=e.props,n=e.state,a=(0,L.useRef)(t),r=Uh();(0,L.useEffect)(function(){r||(Kp(n,a.current,t),a.current=t)},[n,t,r])},vd={environment:c.default.shape({addEventListener:c.default.func.isRequired,removeEventListener:c.default.func.isRequired,document:c.default.shape({createElement:c.default.func.isRequired,getElementById:c.default.func.isRequired,activeElement:c.default.any.isRequired,body:c.default.any.isRequired}).isRequired,Node:c.default.func.isRequired}),itemToString:c.default.func,itemToKey:c.default.func,stateReducer:c.default.func},xd=P({},vd,{getA11yStatusMessage:c.default.func,highlightedIndex:c.default.number,defaultHighlightedIndex:c.default.number,initialHighlightedIndex:c.default.number,isOpen:c.default.bool,defaultIsOpen:c.default.bool,initialIsOpen:c.default.bool,selectedItem:c.default.any,initialSelectedItem:c.default.any,defaultSelectedItem:c.default.any,id:c.default.string,labelId:c.default.string,menuId:c.default.string,getItemId:c.default.func,toggleButtonId:c.default.string,onSelectedItemChange:c.default.func,onHighlightedIndexChange:c.default.func,onStateChange:c.default.func,onIsOpenChange:c.default.func,scrollIntoView:c.default.func});function $h(e,t,n){var a,r=t.type,i=t.props;switch(r){case n.ItemMouseMove:a={highlightedIndex:t.disabled?-1:t.index};break;case n.MenuMouseLeave:a={highlightedIndex:-1};break;case n.ToggleButtonClick:case n.FunctionToggleMenu:a={isOpen:!e.isOpen,highlightedIndex:e.isOpen?-1:Dh(i,e,0)};break;case n.FunctionOpenMenu:a={isOpen:!0,highlightedIndex:Dh(i,e,0)};break;case n.FunctionCloseMenu:a={isOpen:!1};break;case n.FunctionSetHighlightedIndex:a={highlightedIndex:i.isItemDisabled(i.items[t.highlightedIndex],t.highlightedIndex)?-1:t.highlightedIndex};break;case n.FunctionSetInputValue:a={inputValue:t.inputValue};break;case n.FunctionReset:a={highlightedIndex:Hh(i),isOpen:Rh(i,"isOpen"),selectedItem:Rh(i,"selectedItem"),inputValue:Rh(i,"inputValue")};break;default:throw new Error("Reducer called without proper action type.")}return P({},e,a)}kp(kp({},xd),{items:c.default.array.isRequired,isItemDisabled:c.default.func}),kp(kp({},_d),{isItemDisabled:function(){return!1}});var Zh="__input_keydown_arrow_down__",Wh="__input_keydown_arrow_up__",Kh="__input_keydown_escape__",Xh="__input_keydown_home__",Yh="__input_keydown_end__",qh="__input_keydown_page_up__",Gh="__input_keydown_page_down__",Jh="__input_keydown_enter__",Qh="__input_change__",eg="__input_blur__",tg="__input_click__",ng="__menu_mouse_leave__",ag="__item_mouse_move__",rg="__item_click__",ig="__togglebutton_click__",og="__function_toggle_menu__",lg="__function_open_menu__",sg="__function_close_menu__",ug="__function_set_highlighted_index__",cg="__function_select_item__",dg="__function_set_input_value__",mg="__function_reset__",fg="__controlled_prop_updated_selected_item__",pg=Object.freeze({__proto__:null,ControlledPropUpdatedSelectedItem:fg,FunctionCloseMenu:sg,FunctionOpenMenu:lg,FunctionReset:mg,FunctionSelectItem:cg,FunctionSetHighlightedIndex:ug,FunctionSetInputValue:dg,FunctionToggleMenu:og,InputBlur:eg,InputChange:Qh,InputClick:tg,InputKeyDownArrowDown:Zh,InputKeyDownArrowUp:Wh,InputKeyDownEnd:Yh,InputKeyDownEnter:Jh,InputKeyDownEscape:Kh,InputKeyDownHome:Xh,InputKeyDownPageDown:Gh,InputKeyDownPageUp:qh,ItemClick:rg,ItemMouseMove:ag,MenuMouseLeave:ng,ToggleButtonClick:ig});function hg(e){var t=Mh(e),n=t.selectedItem,a=t.inputValue;return P({},t,{inputValue:a=""===a&&n&&void 0===e.defaultInputValue&&void 0===e.initialInputValue&&void 0===e.inputValue?e.itemToString(n):a})}var gg=P({},xd,{items:c.default.array.isRequired,isItemDisabled:c.default.func,inputValue:c.default.string,defaultInputValue:c.default.string,initialInputValue:c.default.string,inputId:c.default.string,onInputValueChange:c.default.func});var yg=Np,yg=function(e,t){c.default.checkPropTypes(gg,e,"prop",t.name)},vg=P({},_d,{isItemDisabled:function(){return!1}});function bg(e,t){var n,a,r=t.type,i=t.props,o=t.altKey;switch(r){case rg:a={isOpen:Rh(i,"isOpen"),highlightedIndex:Hh(i),selectedItem:i.items[t.index],inputValue:i.itemToString(i.items[t.index])};break;case Zh:a=e.isOpen?{highlightedIndex:$p(e.highlightedIndex,1,i.items,i.isItemDisabled,!0)}:{highlightedIndex:o&&null==e.selectedItem?-1:Dh(i,e,1),isOpen:0<=i.items.length};break;case Wh:a=e.isOpen?o?Bh(i,e.highlightedIndex):{highlightedIndex:$p(e.highlightedIndex,-1,i.items,i.isItemDisabled,!0)}:{highlightedIndex:Dh(i,e,-1),isOpen:0<=i.items.length};break;case Jh:a=Bh(i,e.highlightedIndex);break;case Kh:a=P({isOpen:!1,highlightedIndex:-1},!e.isOpen&&{selectedItem:null,inputValue:""});break;case qh:a={highlightedIndex:$p(e.highlightedIndex,-10,i.items,i.isItemDisabled,!0)};break;case Gh:a={highlightedIndex:$p(e.highlightedIndex,10,i.items,i.isItemDisabled,!0)};break;case Xh:a={highlightedIndex:Zp(0,!1,i.items,i.isItemDisabled)};break;case Yh:a={highlightedIndex:Zp(i.items.length-1,!0,i.items,i.isItemDisabled)};break;case eg:a=P({isOpen:!1,highlightedIndex:-1},0<=e.highlightedIndex&&(null==(n=i.items)?void 0:n.length)&&t.selectItem&&{selectedItem:i.items[e.highlightedIndex],inputValue:i.itemToString(i.items[e.highlightedIndex])});break;case Qh:a={isOpen:!0,highlightedIndex:Hh(i),inputValue:t.inputValue};break;case tg:a={isOpen:!e.isOpen,highlightedIndex:e.isOpen?-1:Dh(i,e,0)};break;case cg:a={selectedItem:t.selectedItem,inputValue:i.itemToString(t.selectedItem)};break;case fg:a={inputValue:t.inputValue};break;default:return $h(e,t,pg)}return P({},e,a)}var Eg=["onMouseLeave","refKey","ref"],wg=["item","index","refKey","ref","onMouseMove","onMouseDown","onClick","onPress","disabled"],_g=["onClick","onPress","refKey","ref"],xg=["onKeyDown","onChange","onInput","onBlur","onChangeText","onClick","refKey","ref"];function Sg(e){yg(e=void 0===e?{}:e,Sg);var t,n,a,r,i,o=P({},vg,e),l=o.items,e=o.scrollIntoView,d=o.environment,s=o.getA11yStatusMessage,u=(p=bg,t=o,u=hg,c=zh,n=(0,L.useRef)(),a=(p=Th(p,t,u,c))[0],r=p[1],i=Uh(),(0,L.useEffect)(function(){Up(t,"selectedItem")&&(i||t.itemToKey(t.selectedItem)!==t.itemToKey(n.current)&&r({type:fg,inputValue:t.itemToString(t.selectedItem)}),n.current=(a.selectedItem===n.current?t:a).selectedItem)},[a.selectedItem,t.selectedItem]),[zp(a,t),r]),c=u[0],f=u[1],m=c.isOpen,p=c.highlightedIndex,u=c.selectedItem,h=c.inputValue,g=(0,L.useRef)(null),y=(0,L.useRef)({}),v=(0,L.useRef)(null),b=(0,L.useRef)(null),E=Uh(),w=kh(o),_=(0,L.useRef)(),x=Nh({state:c,props:o}),S=(0,L.useCallback)(function(e){return y.current[w.getItemId(e)]},[w]),k=(Fh(s,c,[m,p,u,h],d),Vh({menuElement:g.current,highlightedIndex:p,isOpen:m,itemRefs:y,scrollIntoView:e,getItemNodeFromIndex:S})),I=(jh({props:o,state:c}),(0,L.useEffect)(function(){Oh(o,"isOpen")&&v.current&&v.current.focus()},[]),(0,L.useEffect)(function(){E||(_.current=l.length)}),Ph(d,(0,L.useCallback)(function(){x.current.state.isOpen&&f({type:eg,selectItem:!1})},[f,x]),(0,L.useMemo)(function(){return[g,b,v]},[g.current,b.current,v.current]))),C=Lh("getInputProps","getMenuProps"),N=((0,L.useEffect)(function(){m||(y.current={})},[m]),(0,L.useEffect)(function(){var e;m&&null!=d&&d.document&&null!=v&&null!=(e=v.current)&&e.focus&&d.document.activeElement!==v.current&&v.current.focus()},[m,d]),(0,L.useMemo)(function(){return{ArrowDown:function(e){e.preventDefault(),f({type:Zh,altKey:e.altKey})},ArrowUp:function(e){e.preventDefault(),f({type:Wh,altKey:e.altKey})},Home:function(e){x.current.state.isOpen&&(e.preventDefault(),f({type:Xh}))},End:function(e){x.current.state.isOpen&&(e.preventDefault(),f({type:Yh}))},Escape:function(e){var t=x.current.state;(t.isOpen||t.inputValue||t.selectedItem||-1<t.highlightedIndex)&&(e.preventDefault(),f({type:Kh}))},Enter:function(e){x.current.state.isOpen&&229!==e.which&&(e.preventDefault(),f({type:Jh}))},PageUp:function(e){x.current.state.isOpen&&(e.preventDefault(),f({type:qh}))},PageDown:function(e){x.current.state.isOpen&&(e.preventDefault(),f({type:Gh}))}}},[f,x])),s=(0,L.useCallback)(function(e){return P({id:w.labelId,htmlFor:w.inputId},e)},[w]),e=(0,L.useCallback)(function(e,t){var e=void 0===e?{}:e,n=e.onMouseLeave,a=e.refKey,a=void 0===a?"ref":a,r=e.ref,e=yp(e,Eg),t=(void 0===t?{}:t).suppressRefError;return C("getMenuProps",void 0!==t&&t,a,g),P(((t={})[a]=Mp(r,function(e){g.current=e}),t.id=w.menuId,t.role="listbox",t["aria-labelledby"]=e&&e["aria-label"]?void 0:""+w.labelId,t.onMouseLeave=Op(n,function(){f({type:ng})}),t),e)},[f,C,w]),S=(0,L.useCallback)(function(e){var e=void 0===e?{}:e,t=e.item,n=e.index,a=e.refKey,a=void 0===a?"ref":a,r=e.ref,i=e.onMouseMove,o=e.onMouseDown,l=e.onClick,s=(e.onPress,e.disabled),e=yp(e,wg),s=(void 0!==s&&console.warn('Passing "disabled" as an argument to getItemProps is not supported anymore. Please use the isItemDisabled prop from useCombobox.'),x.current),u=s.props,c=s.state,s=Ih(t,n,u.items,"Pass either item or index to getItemProps!"),t=s[0],d=s[1],m=u.isItemDisabled(t,d),n=l;return P(((s={})[a]=Mp(r,function(e){e&&(y.current[w.getItemId(d)]=e)}),s["aria-disabled"]=m,s["aria-selected"]=d===c.highlightedIndex,s.id=w.getItemId(d),s.role="option",s),!m&&((u={}).onClick=Op(n,function(){f({type:rg,index:d})}),u),{onMouseMove:Op(i,function(){I.isTouchEnd||d===c.highlightedIndex||(k.current=!1,f({type:ag,index:d,disabled:m}))}),onMouseDown:Op(o,function(e){return e.preventDefault()})},e)},[f,w,x,I,k]),c=(0,L.useCallback)(function(e){var t,e=void 0===e?{}:e,n=e.onClick,a=(e.onPress,e.refKey),a=void 0===a?"ref":a,r=e.ref,e=yp(e,_g),i=x.current.state;return P(((t={})[a]=Mp(r,function(e){b.current=e}),t["aria-controls"]=w.menuId,t["aria-expanded"]=i.isOpen,t.id=w.toggleButtonId,t.tabIndex=-1,t),!e.disabled&&P({},{onClick:Op(n,function(){f({type:ig})})}),e)},[f,x,w]),T=(0,L.useCallback)(function(e,t){var n,e=void 0===e?{}:e,a=e.onKeyDown,r=e.onChange,i=e.onInput,o=e.onBlur,l=(e.onChangeText,e.onClick),s=e.refKey,s=void 0===s?"ref":s,u=e.ref,e=yp(e,xg),t=(void 0===t?{}:t).suppressRefError,c=(C("getInputProps",void 0!==t&&t,s,v),x.current.state),t={};return e.disabled||((n={}).onChange=Op(r,i,function(e){f({type:Qh,inputValue:e.target.value})}),n.onKeyDown=Op(a,function(e){var t=Hp(e);t&&N[t]&&N[t](e)}),n.onBlur=Op(o,function(e){null!=d&&d.document&&c.isOpen&&!I.isMouseDown&&(e=null===e.relatedTarget&&d.document.activeElement!==d.document.body,f({type:eg,selectItem:!e}))}),n.onClick=Op(l,function(){f({type:tg})}),t=n),P(((r={})[s]=Mp(u,function(e){v.current=e}),r["aria-activedescendant"]=c.isOpen&&-1<c.highlightedIndex?w.getItemId(c.highlightedIndex):"",r["aria-autocomplete"]="list",r["aria-controls"]=w.menuId,r["aria-expanded"]=c.isOpen,r["aria-labelledby"]=e&&e["aria-label"]?void 0:w.labelId,r.autoComplete="off",r.id=w.inputId,r.role="combobox",r.value=c.inputValue,r),t,e)},[f,w,d,N,x,I,C]),A=(0,L.useCallback)(function(){f({type:og})},[f]),R=(0,L.useCallback)(function(){f({type:sg})},[f]),O=(0,L.useCallback)(function(){f({type:lg})},[f]),M=(0,L.useCallback)(function(e){f({type:ug,highlightedIndex:e})},[f]),D=(0,L.useCallback)(function(e){f({type:cg,selectedItem:e})},[f]);return{getItemProps:S,getLabelProps:s,getMenuProps:e,getInputProps:T,getToggleButtonProps:c,toggleMenu:A,openMenu:O,closeMenu:R,setHighlightedIndex:M,setInputValue:(0,L.useCallback)(function(e){f({type:dg,inputValue:e})},[f]),selectItem:D,reset:(0,L.useCallback)(function(){f({type:mg})},[f]),highlightedIndex:p,isOpen:m,selectedItem:u,inputValue:h}}Sg.stateChangeTypes=pg;var kg={activeIndex:-1,selectedItems:[]};function Ig(e,t){return Oh(e,t,kg)}function Cg(e,t){return Rh(e,t,kg)}function Ng(e){return{activeIndex:Ig(e,"activeIndex"),selectedItems:Ig(e,"selectedItems")}}function Tg(e){return e.shiftKey||e.metaKey||e.ctrlKey||e.altKey||(e=e.target)instanceof HTMLInputElement&&""!==e.value&&(0!==e.selectionStart||0!==e.selectionEnd)?void 0:1}function Ag(e,t){return e.selectedItems===t.selectedItems&&e.activeIndex===t.activeIndex}var Rg={stateReducer:vd.stateReducer,itemToKey:vd.itemToKey,environment:vd.environment,selectedItems:c.default.array,initialSelectedItems:c.default.array,defaultSelectedItems:c.default.array,getA11yStatusMessage:c.default.func,activeIndex:c.default.number,initialActiveIndex:c.default.number,defaultActiveIndex:c.default.number,onActiveIndexChange:c.default.func,onSelectedItemsChange:c.default.func,keyNavigationNext:c.default.string,keyNavigationPrevious:c.default.string},Og={itemToKey:_d.itemToKey,stateReducer:_d.stateReducer,environment:_d.environment,keyNavigationNext:"ArrowRight",keyNavigationPrevious:"ArrowLeft"},Mg=Np,Mg=function(e,t){c.default.checkPropTypes(Rg,e,"prop",t.name)},Dg="__selected_item_click__",Pg="__selected_item_keydown_delete__",Lg="__selected_item_keydown_backspace__",Fg="__selected_item_keydown_navigation_next__",Vg="__selected_item_keydown_navigation_previous__",jg="__dropdown_keydown_navigation_previous__",Bg="__dropdown_keydown_backspace__",zg="__dropdown_click__",Ug="__function_add_selected_item__",Hg="__function_remove_selected_item__",$g="__function_set_selected_items__",Zg="__function_set_active_index__",Wg="__function_reset__",Sd=Object.freeze({__proto__:null,DropdownClick:zg,DropdownKeyDownBackspace:Bg,DropdownKeyDownNavigationPrevious:jg,FunctionAddSelectedItem:Ug,FunctionRemoveSelectedItem:Hg,FunctionReset:Wg,FunctionSetActiveIndex:Zg,FunctionSetSelectedItems:$g,SelectedItemClick:Dg,SelectedItemKeyDownBackspace:Lg,SelectedItemKeyDownDelete:Pg,SelectedItemKeyDownNavigationNext:Fg,SelectedItemKeyDownNavigationPrevious:Vg});function Kg(e,t){var n=t.type,a=t.index,r=t.props,i=t.selectedItem,o=e.activeIndex,l=e.selectedItems;switch(n){case Dg:c={activeIndex:a};break;case Vg:c={activeIndex:o-1<0?0:o-1};break;case Fg:c={activeIndex:o+1>=l.length?-1:o+1};break;case Lg:case Pg:o<0||(s=o,1===l.length?s=-1:o===l.length-1&&(s=l.length-2),c=P({selectedItems:[].concat(l.slice(0,o),l.slice(o+1))},{activeIndex:s}));break;case jg:c={activeIndex:l.length-1};break;case Bg:c={selectedItems:l.slice(0,l.length-1)};break;case Ug:c={selectedItems:[].concat(l,[i])};break;case zg:c={activeIndex:-1};break;case Hg:var s=o,u=l.findIndex(function(e){return r.itemToKey(e)===r.itemToKey(i)});u<0||(1===l.length?s=-1:u===l.length-1&&(s=l.length-2),c={selectedItems:[].concat(l.slice(0,u),l.slice(u+1)),activeIndex:s});break;case $g:var c={selectedItems:t.selectedItems};break;case Zg:c={activeIndex:t.activeIndex};break;case Wg:c={activeIndex:Cg(r,"activeIndex"),selectedItems:Cg(r,"selectedItems")};break;default:throw new Error("Reducer called without proper action type.")}return P({},e,c)}var Xg=["refKey","ref","onClick","onKeyDown","selectedItem","index"],Yg=["refKey","ref","onKeyDown","onClick","preventKeyAction"];function qg(e){Mg(e=void 0===e?{}:e,qg);var e=P({},Og,e),t=e.getA11yStatusMessage,n=e.environment,a=e.keyNavigationNext,r=e.keyNavigationPrevious,i=Ah(Kg,e,Ng,Ag),o=i[0],u=i[1],l=o.activeIndex,i=o.selectedItems,s=Uh(),c=(0,L.useRef)(null),d=(0,L.useRef)(),m=(d.current=[],Nh({state:o,props:e})),f=(Fh(t,o,[l,i],n),(0,L.useEffect)(function(){s||(-1===l&&c.current?c.current.focus():d.current[l]&&d.current[l].focus())},[l]),jh({props:e,state:o}),Lh("getDropdownProps")),p=(0,L.useMemo)(function(){var e={};return e[r]=function(){u({type:Vg})},e[a]=function(){u({type:Fg})},e.Delete=function(){u({type:Pg})},e.Backspace=function(){u({type:Lg})},e},[u,a,r]),h=(0,L.useMemo)(function(){var e={};return e[r]=function(e){Tg(e)&&u({type:jg})},e.Backspace=function(e){Tg(e)&&u({type:Bg})},e},[u,r]);return{getSelectedItemProps:(0,L.useCallback)(function(e){var e=void 0===e?{}:e,t=e.refKey,t=void 0===t?"ref":t,n=e.ref,a=e.onClick,r=e.onKeyDown,i=e.selectedItem,o=e.index,e=yp(e,Xg),l=m.current.state,s=Ih(i,o,l.selectedItems,"Pass either item or index to getSelectedItemProps!")[1],i=-1<s&&s===l.activeIndex;return P(((o={})[t]=Mp(n,function(e){e&&d.current.push(e)}),o.tabIndex=i?0:-1,o.onClick=Op(a,function(){u({type:Dg,index:s})}),o.onKeyDown=Op(r,function(e){var t=Hp(e);t&&p[t]&&p[t](e)}),o),e)},[u,m,p]),getDropdownProps:(0,L.useCallback)(function(e,t){var e=void 0===e?{}:e,n=e.refKey,n=void 0===n?"ref":n,a=e.ref,r=e.onKeyDown,i=e.onClick,o=e.preventKeyAction,o=void 0!==o&&o,e=yp(e,Yg),t=(void 0===t?{}:t).suppressRefError;f("getDropdownProps",void 0!==t&&t,n,c);return P(((t={})[n]=Mp(a,function(e){e&&(c.current=e)}),t),!o&&{onKeyDown:Op(r,function(e){var t=Hp(e);t&&h[t]&&h[t](e)}),onClick:Op(i,function(){u({type:zg})})},e)},[u,h,f]),addSelectedItem:(0,L.useCallback)(function(e){u({type:Ug,selectedItem:e})},[u]),removeSelectedItem:(0,L.useCallback)(function(e){u({type:Hg,selectedItem:e})},[u]),setSelectedItems:(0,L.useCallback)(function(e){u({type:$g,selectedItems:e})},[u]),setActiveIndex:(0,L.useCallback)(function(e){u({type:Zg,activeIndex:e})},[u]),reset:(0,L.useCallback)(function(){u({type:Wg})},[u]),selectedItems:i,activeIndex:l}}qg.stateChangeTypes=Sd;var Gg=t(b());function Jg(n){const{selectedItem:a,items:e,inputValue:t,forceOpen:r=!1}=n,{isOpen:i,getToggleButtonProps:o,getLabelProps:l,getMenuProps:s,getInputProps:u,highlightedIndex:c,getItemProps:d}=Sg({items:e,itemToString(e){return e?n.itemToString(e):""},selectedItem:a,onSelectedItemChange:({selectedItem:e})=>{n.onItemSelected(e)},inputValue:t});return Gg.default.createElement("div",{className:"relative"},Gg.default.createElement("div",{className:"flex flex-col gap-1"},Gg.default.createElement("label",{htmlFor:"combobox-search",className:"w-fit",...l()},Gg.default.createElement(_,{elementType:"small"},n.label)),Gg.default.createElement("div",{className:"bg-spice-tab-active flex gap-0.5 rounded-sm !pe-1"},Gg.default.createElement("input",{...u({onChange:e=>{e=e.target.value;a&&e===n.itemToString(a)||n.onInputChanged(e)}}),placeholder:n.placeholder,className:"w-full truncate !p-1.5",id:"combobox-search",onBlur:()=>{n.onBlur()},disabled:n.disabled}),null!==a&&Gg.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:"Clear selection"},Gg.default.createElement("button",{"aria-label":"clear selection",type:"button",disabled:n.disabled},Gg.default.createElement(Df,{size:16,onClick:n.onClear}))),Gg.default.createElement("button",{"aria-label":"toggle menu",className:"!px-2",type:"button",...o(),disabled:n.disabled},i?Gg.default.createElement(kf,{size:16}):Gg.default.createElement(Sf,{size:16})))),Gg.default.createElement("ul",{className:"bg-spice-highlight-elevated absolute z-10 !mt-1 max-h-80 w-full overflow-scroll rounded-sm !p-0 "+(i||r?"":"hidden"),...s()},(i||r)&&0<e.length&&e.map((e,t)=>Gg.default.createElement("li",{className:Spicetify.classnames(c===t?"bg-spice-highlight-elevated-hover":"","flex flex-col"),key:e.id,...d({item:e,index:t})},n.itemRenderer({item:e,index:t,isHighlighted:c===t,isSelected:a?.id===e.id}))),(i||r)&&0===e.length&&Gg.default.createElement("div",{className:"flex items-center justify-center !p-2"},Gg.default.createElement(_,{elementType:"span",fontSize:"small"},"No results"))))}function Qg(n){return gp.default.createElement(Os,{name:n.name,control:n.control,render:({field:{onChange:t},formState:{disabled:e}})=>gp.default.createElement(Jg,{items:n.items,itemRenderer:n.itemRenderer,itemToString:n.itemToString,label:n.label,placeholder:n.placeholder,selectedItem:n.selectedItem,onItemSelected:e=>{n.onItemSelected(e),t(e.id)},inputValue:n.inputValue,onInputChanged:n.onInputChanged,onClear:n.onClear,onBlur:n.onBlur,disabled:e})})}var ey=t(b());function ty(l){const{required:s=!1}=l;return ey.default.createElement(Os,{control:l.control,name:l.name,render:({field:{onChange:t,onBlur:e,value:n,name:a,ref:r},fieldState:{invalid:i},formState:{disabled:o}})=>{return ey.default.createElement("input",{className:Spicetify.classnames("bg-spice-tab-active w-full rounded-sm !p-1 !px-2.5",i?"border-spice-error border-1 border-solid":"border-0 border-none"),type:"number",placeholder:l.placeholder,onChange:e=>{e=s?e.target.valueAsNumber:""===(e=e.target.value)?void 0:Number(e);t(e),l.onChange(e)},onBlur:e,value:s?n:void 0===(i=n)?"":i.toString(),name:a,disabled:o,ref:r})}})}var ny=t(b());function ay(e){return ny.default.createElement("div",null,e.children,ny.default.createElement(Wf,{error:e.error}))}function ry(e){return"album"===e.type}function iy(e){return hp.default.createElement("div",{className:"flex max-h-[80px] items-stretch gap-2"},hp.default.createElement("div",{className:"flex h-[60px] w-[60px] shrink-0 items-center justify-center !p-2"},e.item.image&&hp.default.createElement("img",{src:e.item.image,className:"rounded-md object-contain",alt:"album"}),null===e.item.image&&hp.default.createElement(Tf,{size:60,strokeWidth:1})),hp.default.createElement("div",{className:"flex min-w-0 flex-col items-stretch justify-center"},hp.default.createElement("span",{className:Spicetify.classnames("truncate",e.isSelected?"font-bold":"")},e.item.name),hp.default.createElement("span",{className:"truncate text-sm"},e.item.artists)))}var oy=t(b()),ly=[{label:"Liked tracks",value:"liked"},{label:"Top tracks & popular releases",value:"top"},{label:"Latest release",value:"latest"},{label:"All tracks",value:"discography"}];function sy(e){return"artist"===e.type}function uy(e){return oy.default.createElement("div",{className:"flex max-h-[80px] items-stretch gap-2"},oy.default.createElement("div",{className:"flex h-[60px] w-[60px] shrink-0 items-center justify-center !p-2"},e.item.image&&oy.default.createElement("img",{src:e.item.image,className:"rounded-full object-contain",alt:"artist"}),null===e.item.image&&oy.default.createElement(Tf,{size:60,strokeWidth:1})),oy.default.createElement("div",{className:"flex min-w-0 flex-col items-stretch justify-center"},oy.default.createElement("span",{className:Spicetify.classnames("truncate",e.isSelected?"font-bold":"")},e.item.name)))}function cy(e){return"folder"===e.type}function dy(e){return"playlist"===e.type}async function my(e){return(await y().RootlistAPI.getContents({flatten:!0,filter:e})).items.filter(dy)}var I=t(b()),fy=t(b());function py(l){const{required:s=!1}=l;return fy.default.createElement(Os,{control:l.control,name:l.name,render:({field:{onChange:t,onBlur:e,value:n,name:a,ref:r},fieldState:{invalid:i},formState:{disabled:o}})=>fy.default.createElement("input",{className:Spicetify.classnames("bg-spice-tab-active w-full rounded-sm !p-1 !px-2.5",i?"border-spice-error border-1 border-solid":"border-0 border-none"),type:"text",placeholder:l.placeholder,onChange:e=>{e=s?e.target.value:""===(e=e.target.value)?void 0:e;t(e),l.onChange&&l.onChange(e)},onBlur:e,value:s?n:n??"",name:a,disabled:o,ref:r})})}var hy=[{value:"ALBUM",label:"Album"},{value:"ARTIST",label:"Artist"},{value:"TITLE",label:"Name"},{value:"DURATION",label:"Duration"},{value:"ADDED_AT",label:"Added at"},{value:"ADDED_BY",label:"Added by"},{value:"PUBLISH_DATE",label:"Publish date"},{value:"SHOW_NAME",label:"Show name"},{value:"NO_SORT",label:"No sort"}],gy=[{value:"ASC",label:"Ascending"},{value:"DESC",label:"Descending"}];function yy(e){return I.default.createElement("div",{className:"flex max-h-[80px] items-stretch gap-2"},I.default.createElement("div",{className:"flex h-[60px] w-[60px] shrink-0 items-center justify-center !p-2"},e.item.image&&I.default.createElement("img",{src:e.item.image,className:"rounded-md object-contain",alt:"playlist"}),null===e.item.image&&I.default.createElement(Tf,{size:60,strokeWidth:1})),I.default.createElement("div",{className:"flex min-w-0 flex-col items-stretch justify-center"},I.default.createElement("span",{className:Spicetify.classnames("truncate",e.isSelected?"font-bold":"")},e.item.name),I.default.createElement("span",{className:"truncate text-sm"},"by ",e.item.ownerName)))}var vy=t(b());function by(e){return e.icon?vy.default.createElement(Spicetify.ReactComponent.IconComponent,{iconSize:e.iconSize,semanticColor:e.semanticColor,dangerouslySetInnerHTML:{__html:Spicetify.SVGIcons[e.icon]},viewBox:"0 0 16 16"}):e.iconPath?vy.default.createElement(Spicetify.ReactComponent.IconComponent,{iconSize:e.iconSize,semanticColor:e.semanticColor,dangerouslySetInnerHTML:{__html:e.iconPath},viewBox:"0 0 16 16"}):vy.default.createElement(vy.default.Fragment,null)}var Ey=t(b());var wy=()=>{},_y=t(b()),xy=t(b()),Sy=t(b()),ky=t=>{const n=Sy.default.useRef(null);return Sy.default.useEffect(()=>{const e=e=>{n.current&&!n.current.contains(e.target)&&t()};return document.addEventListener("click",e,!0),()=>{document.removeEventListener("click",e,!0)}},[n,t]),n},C=t(b());function Iy(){return C.default.createElement("div",{className:"flex flex-col"},C.default.createElement("div",{className:"flex items-center !px-2 !py-1"},C.default.createElement("span",null,"Select all")),C.default.createElement("hr",{className:"border-t-1"}))}function Cy(){return C.default.createElement("div",{className:"flex flex-col"},C.default.createElement("div",{className:"flex items-center justify-between gap-2 !px-2 !py-1"},C.default.createElement("span",null,"Unselect all"),C.default.createElement("span",{className:"shrink-0"},C.default.createElement(by,{semanticColor:"textBrightAccent",icon:"check",iconSize:12}))),C.default.createElement("hr",{className:"border-t-1"}))}function Ny(a){const{selectedItems:r,onItemsSelected:n,inputValue:e,forceOpen:t=!1,selectAllItem:i,unselectAllItem:o,itemRenderer:l}=a;var s=[a.items.every(e=>r.includes(e))?o:i,...a.items];const{isOpen:u,getToggleButtonProps:c,getLabelProps:d,getMenuProps:m,getInputProps:f,highlightedIndex:p,getItemProps:h,closeMenu:g}=Sg({items:s,itemToString(e){return e?a.itemToString(e):""},selectedItem:null,inputValue:e,stateReducer(e,t){var{changes:n,type:t}=t;switch(t){case Sg.stateChangeTypes.InputKeyDownEnter:case Sg.stateChangeTypes.ItemClick:return{...n,isOpen:!0};default:return n}},onStateChange({inputValue:e,type:t,selectedItem:n}){switch(t){case Sg.stateChangeTypes.InputKeyDownEnter:case Sg.stateChangeTypes.ItemClick:case Sg.stateChangeTypes.InputBlur:if(n){if(n===a.selectAllItem)return void a.onItemsSelected(Vd([...a.selectedItems,...a.items],e=>e.id));if(n===a.unselectAllItem)return void a.onItemsSelected([...a.selectedItems.filter(e=>!a.items.includes(e))]);r.includes(n)?a.onItemsSelected(r.filter(e=>e!==n)):a.onItemsSelected([...r,n])}break;case Sg.stateChangeTypes.InputChange:a.onInputChanged(e??"")}}}),{getSelectedItemProps:y,getDropdownProps:v,removeSelectedItem:b}=qg({selectedItems:r,onStateChange({selectedItems:e,type:t}){switch(t){case qg.stateChangeTypes.SelectedItemKeyDownBackspace:case qg.stateChangeTypes.SelectedItemKeyDownDelete:case qg.stateChangeTypes.DropdownKeyDownBackspace:case qg.stateChangeTypes.FunctionRemoveSelectedItem:n(e??[])}}}),E=(0,C.useCallback)((e,t)=>e===i?C.default.createElement(Iy,null):e===o?C.default.createElement(Cy,null):l({item:e,index:t,isHighlighted:p===t,isSelected:r.includes(e)}),[p,r,i,o,l]);var w=ky(g);return C.default.createElement(C.default.Fragment,null,C.default.createElement("div",{className:"relative"},C.default.createElement("div",{className:"flex flex-col gap-1"},C.default.createElement("label",{htmlFor:"multiselect-search",className:"w-fit",...d()},C.default.createElement(_,{elementType:"small"},a.label)),C.default.createElement("div",{className:"bg-spice-tab-active flex gap-0.5 rounded-sm !pe-1"},C.default.createElement("input",{...f({...v({preventKeyAction:u}),onChange:e=>{e=e.target.value;a.onInputChanged(e)}}),placeholder:a.placeholder,className:"w-full truncate !p-1.5",id:"multiselect-search",onBlur:()=>{a.onBlur()},disabled:a.disabled}),C.default.createElement("button",{"aria-label":"toggle menu",className:"!px-2",type:"button",...c(),disabled:a.disabled},u?C.default.createElement(kf,{size:16}):C.default.createElement(Sf,{size:16})))),C.default.createElement("ul",{className:"bg-spice-highlight-elevated absolute z-10 !mt-1 max-h-80 w-full overflow-scroll rounded-sm !p-0 "+(u||t?"":"hidden"),ref:w,...m()},(u||t)&&0<a.items.length&&C.default.createElement(C.default.Fragment,null,s.map((e,t)=>C.default.createElement("li",{className:Spicetify.classnames(p===t?"bg-spice-highlight-elevated-hover":"","flex flex-col"),key:e.id,...h({item:e,index:t})},E(e,t)))),(u||t)&&0===a.items.length&&C.default.createElement("div",{className:"flex items-center justify-center !p-2"},C.default.createElement(_,{elementType:"span",fontSize:"small"},"No results")))),C.default.createElement("div",{className:"flex flex-wrap gap-1"},r.map((t,e)=>C.default.createElement("span",{className:"hover:bg-spice-tab-active bg-spice-highlight-elevated flex max-w-72 items-center gap-2 rounded-full !px-2.5",key:"selected-item-"+e.toFixed(),...y({selectedItem:t,index:e}),tabIndex:-1},C.default.createElement("span",{className:"truncate"},a.itemToString(t)),C.default.createElement("button",{"aria-label":"Remove item",onClick:e=>{e.stopPropagation(),b(t)}},C.default.createElement(by,{icon:"x",iconSize:12}))))))}function Ty(n){return xy.default.createElement(Os,{name:n.name,control:n.control,render:({field:{onChange:t},formState:{disabled:e}})=>xy.default.createElement(Ny,{selectedItems:n.selectedItems,onItemsSelected:e=>{n.onItemsSelected(e),t(e)},inputValue:n.inputValue,onInputChanged:n.onInputChanged,placeholder:n.placeholder,itemRenderer:n.itemRenderer,itemToString:n.itemToString,items:n.items,label:n.label,disabled:n.disabled||e,onBlur:n.onBlur,selectAllItem:n.selectAllItem,unselectAllItem:n.unselectAllItem})})}var Ay=[{label:"Added at",value:"ADDED_AT"},{label:"Album",value:"ALBUM_NAME"},{label:"Artist",value:"ARTIST_NAME"},{label:"Name",value:"NAME"}],Ry=[{label:"Ascending",value:"ASC"},{label:"Descending",value:"DESC"}];function Oy(e){return _y.default.createElement("div",{className:"flex items-center justify-between gap-2 !px-2 !py-1"},_y.default.createElement("span",{className:"truncate"},e.item.name),e.isSelected&&_y.default.createElement("span",{className:"shrink-0"},_y.default.createElement(by,{semanticColor:"textBrightAccent",icon:"check",iconSize:12})),!e.isSelected&&_y.default.createElement("div",{className:"h-[12px] w-[12px]"}))}var My=t(b()),Dy=[{label:"Album",value:"ALBUM"},{label:"Artist",value:"ARTIST"},{label:"Name",value:"TITLE"},{label:"Duration",value:"DURATION"},{label:"Added at",value:"ADDED_AT"},{label:"No sort",value:"NO_SORT"}],Py=[{label:"Ascending",value:"ASC"},{label:"Descending",value:"DESC"}];var Ly=r.object({searchTerm:r.string().nonempty(),offset:r.number().nonnegative().int(),limit:r.number().nonnegative().int().max(100),numberOfTopResults:r.number().nonnegative().int(),includeAudiobooks:r.boolean(),includeArtistHasConcertsField:r.boolean(),includePreReleases:r.boolean(),includeLocalConcertsField:r.boolean()}).strict().readonly();async function Fy(e){Ly.parse(e);return xm({name:"searchDesktop",operation:"query",sha256Hash:"dd1513013a4ab0d9c095eac6b6d292c801bef038e11e06b746385a509be24ab0",value:null},e)}var Vy=t(b()),jy=[{value:"ALBUM",label:"Album"},{value:"ARTIST",label:"Artist"},{value:"TITLE",label:"Name"},{value:"DURATION",label:"Duration"},{value:"ADDED_AT",label:"Added at"},{value:"ADDED_BY",label:"Added by"},{value:"PUBLISH_DATE",label:"Publish date"},{value:"SHOW_NAME",label:"Show name"},{value:"NO_SORT",label:"No sort"}],By=[{value:"ASC",label:"Ascending"},{value:"DESC",label:"Descending"}];function zy(e){return Vy.default.createElement("div",{className:"flex max-h-[80px] items-stretch gap-2"},Vy.default.createElement("div",{className:"flex h-[60px] w-[60px] shrink-0 items-center justify-center !p-2"},e.item.image&&Vy.default.createElement("img",{src:e.item.image,className:"rounded-md object-contain",alt:"album"}),null===e.item.image&&Vy.default.createElement(Tf,{size:60,strokeWidth:1})),Vy.default.createElement("div",{className:"flex min-w-0 flex-col items-stretch justify-center"},Vy.default.createElement("span",{className:Spicetify.classnames("truncate",e.isSelected?"font-bold":"")},e.item.name),Vy.default.createElement("span",{className:"truncate text-sm"},e.item.artists)))}var Uy=t(b()),Hy=[{value:"ALBUM",label:"Album"},{value:"ARTIST",label:"Artist"},{value:"TITLE",label:"Name"},{value:"DURATION",label:"Duration"},{value:"ADDED_AT",label:"Added at"},{value:"ADDED_BY",label:"Added by"},{value:"PUBLISH_DATE",label:"Publish date"},{value:"SHOW_NAME",label:"Show name"},{value:"NO_SORT",label:"No sort"}],$y=[{value:"ASC",label:"Ascending"},{value:"DESC",label:"Descending"}];function Zy(e){return Uy.default.createElement("div",{className:"flex max-h-[80px] items-stretch gap-2"},Uy.default.createElement("div",{className:"flex h-[60px] w-[60px] shrink-0 items-center justify-center !p-2"},e.item.image&&Uy.default.createElement("img",{src:e.item.image,className:"rounded-full object-contain",alt:"artist"}),null===e.item.image&&Uy.default.createElement(Tf,{size:60,strokeWidth:1})),Uy.default.createElement("div",{className:"flex min-w-0 flex-col items-stretch justify-center"},Uy.default.createElement("span",{className:Spicetify.classnames("truncate",e.isSelected?"font-bold":"")},e.item.name)))}var Wy=t(b()),Ky=[{value:"ALBUM",label:"Album"},{value:"ARTIST",label:"Artist"},{value:"TITLE",label:"Name"},{value:"DURATION",label:"Duration"},{value:"ADDED_AT",label:"Added at"},{value:"ADDED_BY",label:"Added by"},{value:"PUBLISH_DATE",label:"Publish date"},{value:"SHOW_NAME",label:"Show name"},{value:"NO_SORT",label:"No sort"}],Xy=[{value:"ASC",label:"Ascending"},{value:"DESC",label:"Descending"}];function Yy(e){return Wy.default.createElement("div",{className:"flex max-h-[80px] items-stretch gap-2"},Wy.default.createElement("div",{className:"flex h-[60px] w-[60px] shrink-0 items-center justify-center !p-2"},e.item.image&&Wy.default.createElement("img",{src:e.item.image,className:"rounded-md object-contain",alt:"album"}),null===e.item.image&&Wy.default.createElement(Tf,{size:60,strokeWidth:1})),Wy.default.createElement("div",{className:"flex min-w-0 flex-col items-stretch justify-center"},Wy.default.createElement("span",{className:Spicetify.classnames("truncate",e.isSelected?"font-bold":"")},e.item.name),Wy.default.createElement("span",{className:"truncate text-sm"},e.item.album," - ",e.item.artists)))}var qy=t(b());function Gy(e){return qy.default.createElement("div",{className:"flex max-h-[80px] items-stretch gap-2"},qy.default.createElement("div",{className:"flex h-[60px] w-[60px] shrink-0 items-center justify-center !p-2"},e.item.image&&qy.default.createElement("img",{src:e.item.image,className:"rounded-md object-contain",alt:"album"}),null===e.item.image&&qy.default.createElement(Tf,{size:60,strokeWidth:1})),qy.default.createElement("div",{className:"flex min-w-0 flex-col items-stretch justify-center"},qy.default.createElement("span",{className:Spicetify.classnames("truncate",e.isSelected?"font-bold":"")},e.item.name),qy.default.createElement("span",{className:"truncate text-sm"},e.item.artists)))}var Jy=t(b()),Qy=[{label:"Liked tracks",value:"liked"},{label:"Top tracks & popular releases",value:"top"},{label:"Latest release",value:"latest"},{label:"All tracks",value:"discography"}];function ev(e){return Jy.default.createElement("div",{className:"flex max-h-[80px] items-stretch gap-2"},Jy.default.createElement("div",{className:"flex h-[60px] w-[60px] shrink-0 items-center justify-center !p-2"},e.item.image&&Jy.default.createElement("img",{src:e.item.image,className:"rounded-full object-contain",alt:"artist"}),null===e.item.image&&Jy.default.createElement(Tf,{size:60,strokeWidth:1})),Jy.default.createElement("div",{className:"flex min-w-0 flex-col items-stretch justify-center"},Jy.default.createElement("span",{className:Spicetify.classnames("truncate",e.isSelected?"font-bold":"")},e.item.name)))}var N=t(b()),tv=[{value:"ALBUM",label:"Album"},{value:"ARTIST",label:"Artist"},{value:"TITLE",label:"Name"},{value:"DURATION",label:"Duration"},{value:"ADDED_AT",label:"Added at"},{value:"ADDED_BY",label:"Added by"},{value:"PUBLISH_DATE",label:"Publish date"},{value:"SHOW_NAME",label:"Show name"},{value:"NO_SORT",label:"No sort"}],nv=[{value:"ASC",label:"Ascending"},{value:"DESC",label:"Descending"}];function av(e){return N.default.createElement("div",{className:"flex max-h-[80px] items-stretch gap-2"},N.default.createElement("div",{className:"flex h-[60px] w-[60px] shrink-0 items-center justify-center !p-2"},e.item.image&&N.default.createElement("img",{src:e.item.image,className:"rounded-md object-contain",alt:"playlist"}),null===e.item.image&&N.default.createElement(Tf,{size:60,strokeWidth:1})),N.default.createElement("div",{className:"flex min-w-0 flex-col items-stretch justify-center"},N.default.createElement("span",{className:Spicetify.classnames("truncate",e.isSelected?"font-bold":"")},e.item.name),N.default.createElement("span",{className:"truncate text-sm"},"by ",e.item.ownerName)))}var rv=t(b());var iv={likedSongsSource:function(e){const t=e.data["genres"],{control:n,errors:a,updateNodeField:r}=af(e.id,e.data,Jm("likedSongsSource"),Lm),[i,o]=(0,_y.useState)([]),[l,s]=(0,_y.useState)(!0),{items:u,selectedItems:c,onSelectedIdsChanged:d,inputValue:m,onInputChanged:f,onItemsSelected:p}=function(a,t,n){const[r,i]=(0,Ey.useState)([]),[e,o]=(0,Ey.useState)(""),[l,s]=(0,Ey.useState)([]),u=fp(e=>{t(e).then(e=>{s(e)}).catch(e=>{console.error("Failed to fetch items",e)})},200);var c=(0,Ey.useCallback)(async e=>{var t=new Set(e);const n=new Set(r.map(e=>e.id));t.size===n.size&&[...t].every(e=>n.has(e))||(t=await a(e),i(t))},[a,r,i]);return(0,Ey.useEffect)(()=>{(async()=>{var e=await t("");s(e)})()},[t,s]),{selectedItems:r,onItemsSelected:e=>{n(e)},items:l,inputValue:e,onInputChanged:e=>{o(e),u(e)},onSelectedIdsChanged:c}}((0,_y.useCallback)(t=>Promise.resolve(i.filter(e=>t.includes(e.id))),[i]),(0,_y.useCallback)(t=>Promise.resolve(i.filter(e=>e.name.toLowerCase().includes(t.toLowerCase()))),[i]),e=>{r({genres:e.map(e=>e.id)})});return(0,_y.useEffect)(()=>{l||d(t)},[t,d,l]),(0,_y.useEffect)(()=>{(async()=>{var e=await Kd();const n=new Set;e.forEach(e=>{for(const t of e)n.add(t)}),o(Array.from(n).sort((e,t)=>e.localeCompare(t)).map(e=>({id:e,name:e}))),s(!1)})()},[]),_y.default.createElement(S,{isExecuting:e.data.isExecuting,isSelected:e.selected,classname:"max-w-80"},_y.default.createElement(pf,null),_y.default.createElement(df,null,_y.default.createElement(Lf,{title:"Liked songs"}),_y.default.createElement(k,{label:"Filter",tooltip:"Search filter to apply",error:a.filter},_y.default.createElement(py,{control:n,placeholder:"Search",name:"filter",onChange:e=>{r({filter:e})}})),_y.default.createElement(k,{label:"Offset",tooltip:"Number of elements to skip",error:a.offset},_y.default.createElement(ty,{placeholder:"0",control:n,name:"offset",onChange:e=>{r({offset:e})}})),_y.default.createElement(k,{label:"Limit",tooltip:"Number of elements to take. Leave empty to take all elements.",error:a.limit},_y.default.createElement(ty,{placeholder:"None",control:n,name:"limit",onChange:e=>{r({limit:e})}})),_y.default.createElement(k,{label:"Sort by",error:a.sortField},_y.default.createElement(ep,{name:"sortField",control:n,items:Ay,label:"Property to sort on",onChange:e=>{r({sortField:e})}})),_y.default.createElement(k,{label:"Order",error:a.sortOrder},_y.default.createElement(ep,{name:"sortOrder",control:n,items:Ry,label:"Sort order",onChange:e=>{r({sortOrder:e})}})),_y.default.createElement(Ty,{control:n,name:"genres",selectedItems:c,onItemsSelected:p,inputValue:m,onInputChanged:f,placeholder:"Rock, Pop, Hip Hop...",itemRenderer:Oy,itemToString:e=>e.name,items:u,label:l?"Genres (loading...)":"Genres",onBlur:wy,selectAllItem:{id:"select-all",name:"Select all"},unselectAllItem:{id:"unselect-all",name:"Unselect all"},disabled:l})),_y.default.createElement(v,{type:"source",position:O.Right,id:"result",style:{top:"40px"}}))},localTracksSource:function(e){const{control:t,errors:n,updateNodeField:a}=af(e.id,e.data,Jm("localTracksSource"),Vm);return My.default.createElement(S,{isExecuting:e.data.isExecuting,isSelected:e.selected},My.default.createElement(pf,null),My.default.createElement(df,null,My.default.createElement(Lf,{title:"Local tracks"}),My.default.createElement(k,{tooltip:"Search filter to apply",label:"Filter",error:n.filter},My.default.createElement(py,{placeholder:"Search",control:t,name:"filter",onChange:e=>{a({filter:e})}})),My.default.createElement(k,{label:"Sort by",error:n.sortField},My.default.createElement(ep,{label:"Property to sort on",name:"sortField",control:t,items:Dy,onChange:e=>{a({sortField:e})}})),My.default.createElement(k,{label:"Order",error:n.sortOrder},My.default.createElement(ep,{label:"Sort order",name:"sortOrder",control:t,items:Py,onChange:e=>{a({sortOrder:e})}}))),My.default.createElement(v,{type:"source",position:O.Right,id:"result",style:{top:"40px"}}))},libraryPlaylistSource:function(e){const{onlyMine:a,playlistUri:t}=e.data,{errors:n,control:r,updateNodeField:i}=af(e.id,e.data,Jm("libraryPlaylistSource"),Bm);var o=(0,I.useCallback)(async e=>{const t=await y().UserAPI.getUser();let n=await my(e);return n=n.filter(e=>""!==e.name),(n=(n=a?n.filter(e=>e.owner.uri===t.uri):n).toSorted((e,t)=>e.name.localeCompare(t.name))).map(e=>({id:e.uri,name:e.name,uri:e.uri,image:0<e.images.length?e.images.find(e=>"small"===e.label)?.url??e.images[0].url:null,ownerName:e.owner.displayName}))},[a]),l=(0,I.useCallback)(async e=>{var t=y().PlaylistAPI;try{var n=await t.getPlaylist(e,{},{});return{id:n.metadata.uri,name:n.metadata.name,uri:n.metadata.uri,image:0<n.metadata.images.length?n.metadata.images[0].url:null,ownerName:n.metadata.owner.displayName}}catch(e){return console.error("Failed to fetch playlist",e),i({playlistUri:""}),null}},[i]),s=(0,I.useCallback)(e=>e.name,[]);const{inputValue:u,items:c,onInputChanged:d,onItemSelected:m,resetSelection:f,selectedItem:p,syncInputWithSelectedItem:h,onSelectedIdChanged:g}=pp(l,o,s,e=>{i({playlistUri:e?.uri??""})});return(0,I.useEffect)(()=>{g(t)},[t,g]),I.default.createElement(S,{isExecuting:e.data.isExecuting,isSelected:e.selected},I.default.createElement(pf,null),I.default.createElement(df,null,I.default.createElement(Lf,{title:"Playlist"}),I.default.createElement(Kf,{label:"Search only my playlists",error:n.onlyMine},I.default.createElement(Uf,{control:r,name:"onlyMine",onChange:e=>{i({onlyMine:e})}})),I.default.createElement(ay,{error:n.playlistUri},I.default.createElement(Qg,{control:r,name:"playlistUri",selectedItem:p,onItemSelected:m,items:c,itemRenderer:yy,itemToString:s,label:"Playlist",placeholder:"Search for a playlist",inputValue:u,onInputChanged:d,onClear:f,onBlur:h})),I.default.createElement(_,{elementType:"p",fontSize:"small",semanticColor:"textSubdued"},"Selected:"," ",""===e.data.playlistUri?"-":e.data.playlistUri),I.default.createElement(k,{tooltip:"Search filter to apply",label:"Filter",error:n.filter},I.default.createElement(py,{placeholder:"Search",name:"filter",control:r,onChange:e=>{i({filter:e})}})),I.default.createElement(k,{label:"Offset",tooltip:"Number of elements to skip",error:n.offset},I.default.createElement(ty,{placeholder:"0",control:r,name:"offset",onChange:e=>{i({offset:e})}})),I.default.createElement(k,{label:"Limit",tooltip:"Number of elements to take. Leave empty to take all elements.",error:n.limit},I.default.createElement(ty,{placeholder:"None",control:r,name:"limit",onChange:e=>{i({limit:e})}})),I.default.createElement(k,{label:"Sort by",error:n.sortField},I.default.createElement(ep,{label:"Property to sort on",name:"sortField",control:r,items:hy,onChange:e=>{i({sortField:e})}})),I.default.createElement(k,{label:"Order",error:n.sortOrder},I.default.createElement(ep,{label:"Sort order",name:"sortOrder",control:r,items:gy,onChange:e=>{i({sortOrder:e})}}))),I.default.createElement(v,{type:"source",position:O.Right,id:"result",style:{top:"40px"}}))},searchPlaylistSource:function(e){const t=e.data["playlistUri"],{errors:n,control:a,updateNodeField:r}=af(e.id,e.data,Jm("searchPlaylistSource"),Bm);var i=(0,N.useCallback)(async e=>{return e.trim()?(await Fy({searchTerm:e,offset:0,limit:20,includePreReleases:!0,includeArtistHasConcertsField:!1,includeAudiobooks:!1,includeLocalConcertsField:!1,numberOfTopResults:5})).searchV2.playlists.items.map(e=>({id:e.data.uri,uri:e.data.uri,name:e.data.name,image:e.data.images.items[0]?.sources[0].url??null,ownerName:e.data.ownerV2.data.name})):[]},[]),o=(0,N.useCallback)(async e=>{var t=y().PlaylistAPI;try{var n=await t.getPlaylist(e,{},{});return{id:n.metadata.uri,name:n.metadata.name,uri:n.metadata.uri,image:0<n.metadata.images.length?n.metadata.images[0].url:null,ownerName:n.metadata.owner.displayName}}catch(e){return console.error("Failed to fetch playlist",e),r({playlistUri:""}),null}},[r]),l=(0,N.useCallback)(e=>e.name,[]);const{inputValue:s,items:u,onInputChanged:c,onItemSelected:d,resetSelection:m,selectedItem:f,syncInputWithSelectedItem:p,onSelectedIdChanged:h}=pp(o,i,l,e=>{r({playlistUri:e?.uri??""})});return(0,N.useEffect)(()=>{h(t)},[t,h]),N.default.createElement(S,{isExecuting:e.data.isExecuting,isSelected:e.selected},N.default.createElement(pf,null),N.default.createElement(df,null,N.default.createElement(Lf,{title:"Playlist",tooltip:"Search for a playlist using Spotify's search. You can use advanced search tags sush as 'genre:' or 'year:'."}),N.default.createElement(ay,{error:n.playlistUri},N.default.createElement(Qg,{control:a,name:"playlistUri",selectedItem:f,onItemSelected:d,items:u,itemRenderer:av,itemToString:l,label:"Playlist",placeholder:"Search for a playlist",inputValue:s,onInputChanged:c,onClear:m,onBlur:p})),N.default.createElement(_,{elementType:"p",fontSize:"small",semanticColor:"textSubdued"},"Selected:"," ",""===e.data.playlistUri?"-":e.data.playlistUri),N.default.createElement(k,{tooltip:"Search filter to apply",label:"Filter",error:n.filter},N.default.createElement(py,{placeholder:"Search",name:"filter",control:a,onChange:e=>{r({filter:e})}})),N.default.createElement(k,{label:"Offset",tooltip:"Number of elements to skip",error:n.offset},N.default.createElement(ty,{placeholder:"0",control:a,name:"offset",onChange:e=>{r({offset:e})}})),N.default.createElement(k,{label:"Limit",tooltip:"Number of elements to take. Leave empty to take all elements.",error:n.limit},N.default.createElement(ty,{placeholder:"None",control:a,name:"limit",onChange:e=>{r({limit:e})}})),N.default.createElement(k,{label:"Sort by",error:n.sortField},N.default.createElement(ep,{label:"Property to sort on",name:"sortField",control:a,items:tv,onChange:e=>{r({sortField:e})}})),N.default.createElement(k,{label:"Order",error:n.sortOrder},N.default.createElement(ep,{label:"Sort order",name:"sortOrder",control:a,items:nv,onChange:e=>{r({sortOrder:e})}}))),N.default.createElement(v,{type:"source",position:O.Right,id:"result",style:{top:"40px"}}))},topTracksSource:function(e){const{errors:t,control:n,updateNodeField:a}=af(e.id,e.data,Jm("topTracksSource"),Ym);return rv.default.createElement(S,{isExecuting:e.data.isExecuting,isSelected:e.selected},rv.default.createElement(pf,null),rv.default.createElement(df,null,rv.default.createElement(Lf,{title:"Top tracks"}),rv.default.createElement(k,{label:"Time range",error:t.timeRange},rv.default.createElement(ep,{label:"Select a time range",name:"timeRange",control:n,items:[{label:"Short term",value:"short_term"},{label:"Medium term",value:"medium_term"},{label:"Long term",value:"long_term"}],onChange:e=>{a({timeRange:e})}})),rv.default.createElement(k,{label:"Offset",tooltip:"Number of elements to skip",error:t.offset},rv.default.createElement(ty,{placeholder:"0",control:n,name:"offset",onChange:e=>{a({offset:e})}})),rv.default.createElement(k,{label:"Limit",tooltip:"Number of elements to take. Leave empty to take all elements.",error:t.limit},rv.default.createElement(ty,{placeholder:"None",control:n,name:"limit",onChange:e=>{a({limit:e})}}))),rv.default.createElement(v,{type:"source",position:O.Right,id:"result",style:{top:"40px"}}))},libraryAlbumSource:function(e){const t=e.data["uri"],{errors:n,control:a,updateNodeField:r}=af(e.id,e.data,Jm("libraryAlbumSource"),Im);var i=(0,hp.useCallback)(async e=>{return(await y().LibraryAPI.getContents({filters:["0"],textFilter:e,filtersPickedByUser:!0,offset:0,limit:5e3})).items.filter(ry).toSorted((e,t)=>e.name.localeCompare(t.name)).map(e=>({id:e.uri,name:e.name,uri:e.uri,image:0<e.images.length?e.images[0].url:null,artists:e.artists.map(e=>e.name).join(", ")}))},[]),o=(0,hp.useCallback)(async e=>{try{var t=await km({uri:e,offset:0,limit:0,locale:Spicetify.Locale.getLocale()});if("NotFound"===t.albumUnion.__typename)throw new Error("Album not found");return{id:t.albumUnion.uri,name:t.albumUnion.name,uri:t.albumUnion.uri,image:0<t.albumUnion.coverArt.sources.length?t.albumUnion.coverArt.sources[0].url:null,artists:t.albumUnion.artists.items.map(e=>e.profile.name).join(", ")}}catch(e){return console.error("Failed to fetch album",e),r({uri:""}),null}},[r]),l=(0,hp.useCallback)(e=>e.name,[]);const{inputValue:s,items:u,onInputChanged:c,onItemSelected:d,resetSelection:m,selectedItem:f,syncInputWithSelectedItem:p,onSelectedIdChanged:h}=pp(o,i,l,e=>{r({uri:e?.uri??""})});return(0,hp.useEffect)(()=>{h(t)},[t,h]),hp.default.createElement(S,{isExecuting:e.data.isExecuting,isSelected:e.selected},hp.default.createElement(pf,null),hp.default.createElement(df,null,hp.default.createElement(Lf,{title:"Album"}),hp.default.createElement(ay,{error:n.uri},hp.default.createElement(Qg,{control:a,name:"uri",selectedItem:f,onItemSelected:d,items:u,itemRenderer:iy,itemToString:l,label:"Album",placeholder:"Search for an album",inputValue:s,onInputChanged:c,onClear:m,onBlur:p})),hp.default.createElement(_,{elementType:"p",fontSize:"small",semanticColor:"textSubdued"},"Selected: ",""===e.data.uri?"-":e.data.uri),hp.default.createElement(k,{label:"Offset",tooltip:"Number of elements to skip",error:n.offset},hp.default.createElement(ty,{placeholder:"0",control:a,name:"offset",onChange:e=>{r({offset:e})}})),hp.default.createElement(k,{label:"Limit",tooltip:"Number of elements to take. Leave empty to take all elements.",error:n.limit},hp.default.createElement(ty,{placeholder:"None",control:a,name:"limit",onChange:e=>{r({limit:e})}})),hp.default.createElement(Kf,{label:"Only liked songs",tooltip:"Only keep songs that are liked in this album",error:n.onlyLiked},hp.default.createElement(Uf,{control:a,name:"onlyLiked",onChange:e=>{r({onlyLiked:e})}}))),hp.default.createElement(v,{type:"source",position:O.Right,id:"result",style:{top:"40px"}}))},searchAlbumSource:function(e){const t=e.data["uri"],{errors:n,control:a,updateNodeField:r}=af(e.id,e.data,Jm("searchAlbumSource"),Im);var i=(0,qy.useCallback)(async e=>{return e.trim()?(await Fy({searchTerm:e,offset:0,limit:10,includePreReleases:!0,includeArtistHasConcertsField:!1,includeAudiobooks:!1,includeLocalConcertsField:!1,numberOfTopResults:5})).searchV2.albumsV2.items.map(e=>{return"PreReleaseResponseWrapper"===e.__typename?{id:e.data.uri,uri:e.data.uri,name:e.data.preReleaseContent.name,image:0<e.data.preReleaseContent.coverArt.sources.length?e.data.preReleaseContent.coverArt.sources[0].url:null,artists:e.data.preReleaseContent.artists.items.map(e=>e.data.profile.name).join(", ")}:{id:e.data.uri,uri:e.data.uri,name:e.data.name,image:0<e.data.coverArt.sources.length?e.data.coverArt.sources[0].url:null,artists:e.data.artists.items.map(e=>e.profile.name).join(", ")}}):[]},[]),o=(0,qy.useCallback)(async e=>{try{var t=await km({uri:e,offset:0,limit:0,locale:Spicetify.Locale.getLocale()});if("NotFound"===t.albumUnion.__typename)throw new Error("Album not found");return{id:t.albumUnion.uri,name:t.albumUnion.name,uri:t.albumUnion.uri,image:0<t.albumUnion.coverArt.sources.length?t.albumUnion.coverArt.sources[0].url:null,artists:t.albumUnion.artists.items.map(e=>e.profile.name).join(", ")}}catch(e){return console.error("Failed to fetch album",e),r({uri:""}),null}},[r]),l=(0,qy.useCallback)(e=>e.name,[]);const{inputValue:s,items:u,onInputChanged:c,onItemSelected:d,resetSelection:m,selectedItem:f,syncInputWithSelectedItem:p,onSelectedIdChanged:h}=pp(o,i,l,e=>{r({uri:e?.uri??""})});return(0,qy.useEffect)(()=>{h(t)},[t,h]),qy.default.createElement(S,{isExecuting:e.data.isExecuting,isSelected:e.selected},qy.default.createElement(pf,null),qy.default.createElement(df,null,qy.default.createElement(Lf,{title:"Album",tooltip:"Search for an album using Spotify's search. You can use advanced search tags sush as 'genre:' or 'year:'."}),qy.default.createElement(ay,{error:n.uri},qy.default.createElement(Qg,{control:a,name:"uri",selectedItem:f,onItemSelected:d,items:u,itemRenderer:Gy,itemToString:l,label:"Album",placeholder:"Search for an album",inputValue:s,onInputChanged:c,onClear:m,onBlur:p})),qy.default.createElement(_,{elementType:"p",fontSize:"small",semanticColor:"textSubdued"},"Selected: ",""===e.data.uri?"-":e.data.uri),qy.default.createElement(k,{label:"Offset",tooltip:"Number of elements to skip",error:n.offset},qy.default.createElement(ty,{placeholder:"0",control:a,name:"offset",onChange:e=>{r({offset:e})}})),qy.default.createElement(k,{label:"Limit",tooltip:"Number of elements to take. Leave empty to take all elements.",error:n.limit},qy.default.createElement(ty,{placeholder:"None",control:a,name:"limit",onChange:e=>{r({limit:e})}})),qy.default.createElement(Kf,{label:"Only liked songs",tooltip:"Only keep songs that are liked in this album",error:n.onlyLiked},qy.default.createElement(Uf,{control:a,name:"onlyLiked",onChange:e=>{r({onlyLiked:e})}}))),qy.default.createElement(v,{type:"source",position:O.Right,id:"result",style:{top:"40px"}}))},libraryArtistSource:function(e){const t=e.data["uri"],{errors:n,control:a,updateNodeField:r}=af(e.id,e.data,Jm("libraryArtistSource"),Dm);var i=(0,oy.useCallback)(async e=>{return(await y().LibraryAPI.getContents({filters:["1"],textFilter:e,filtersPickedByUser:!0,offset:0,limit:5e3})).items.filter(sy).toSorted((e,t)=>e.name.localeCompare(t.name)).map(e=>({id:e.uri,name:e.name,uri:e.uri,image:0<e.images.length?e.images[0].url:null}))},[]),o=(0,oy.useCallback)(async e=>{try{var t=await Mm({uri:e,locale:Spicetify.Locale.getLocale()});if("NotFound"===t.artistUnion.__typename)throw new Error("Artist not found");return{id:t.artistUnion.uri,name:t.artistUnion.profile.name,uri:t.artistUnion.uri,image:0<t.artistUnion.visuals.avatarImage.sources.length?t.artistUnion.visuals.avatarImage.sources[0].url:null}}catch(e){return console.error("Failed to fetch artist",e),r({uri:""}),null}},[r]),l=(0,oy.useCallback)(e=>e.name,[]);const{inputValue:s,items:u,onInputChanged:c,onItemSelected:d,resetSelection:m,selectedItem:f,syncInputWithSelectedItem:p,onSelectedIdChanged:h}=pp(o,i,l,e=>{r({uri:e?.uri??""})});return(0,oy.useEffect)(()=>{h(t)},[t,h]),oy.default.createElement(S,{isExecuting:e.data.isExecuting,isSelected:e.selected},oy.default.createElement(pf,null),oy.default.createElement(df,null,oy.default.createElement(Lf,{title:"Artist"}),oy.default.createElement(ay,{error:n.uri},oy.default.createElement(Qg,{control:a,name:"uri",selectedItem:f,onItemSelected:d,items:u,itemRenderer:uy,itemToString:l,label:"Artist",placeholder:"Search for an artist",inputValue:s,onInputChanged:c,onClear:m,onBlur:p})),oy.default.createElement(_,{elementType:"p",fontSize:"small",semanticColor:"textSubdued"},"Selected: ",""===e.data.uri?"-":e.data.uri),oy.default.createElement(k,{label:"Type of tracks",error:n.trackType,tooltip:"Type of tracks to get from the artist : top tracks & popular releases, liked tracks, latest release or all tracks."},oy.default.createElement(ep,{label:"Type of tracks",name:"trackType",control:a,items:ly,onChange:e=>{r({trackType:e})}}))),oy.default.createElement(v,{type:"source",position:O.Right,id:"result",style:{top:"40px"}}))},searchArtistSource:function(e){const t=e.data["uri"],{errors:n,control:a,updateNodeField:r}=af(e.id,e.data,Jm("searchArtistSource"),Dm);var i=(0,Jy.useCallback)(async e=>{return e.trim()?(await Fy({searchTerm:e,offset:0,limit:10,includePreReleases:!0,includeArtistHasConcertsField:!1,includeAudiobooks:!1,includeLocalConcertsField:!1,numberOfTopResults:5})).searchV2.artists.items.map(e=>({id:e.data.uri,uri:e.data.uri,name:e.data.profile.name,image:e.data.visuals.avatarImage?.sources&&0<e.data.visuals.avatarImage.sources.length?e.data.visuals.avatarImage.sources[0].url:null})):[]},[]),o=(0,Jy.useCallback)(async e=>{try{var t=await Mm({uri:e,locale:Spicetify.Locale.getLocale()});if("NotFound"===t.artistUnion.__typename)throw new Error("Artist not found");return{id:t.artistUnion.uri,name:t.artistUnion.profile.name,uri:t.artistUnion.uri,image:0<t.artistUnion.visuals.avatarImage.sources.length?t.artistUnion.visuals.avatarImage.sources[0].url:null}}catch(e){return console.error("Failed to fetch artist",e),r({uri:""}),null}},[r]),l=(0,Jy.useCallback)(e=>e.name,[]);const{inputValue:s,items:u,onInputChanged:c,onItemSelected:d,resetSelection:m,selectedItem:f,syncInputWithSelectedItem:p,onSelectedIdChanged:h}=pp(o,i,l,e=>{r({uri:e?.uri??""})});return(0,Jy.useEffect)(()=>{h(t)},[t,h]),Jy.default.createElement(S,{isExecuting:e.data.isExecuting,isSelected:e.selected},Jy.default.createElement(pf,null),Jy.default.createElement(df,null,Jy.default.createElement(Lf,{title:"Artist",tooltip:"Search for an artist using Spotify's search. You can use advanced search tags sush as 'genre:' or 'year:'."}),Jy.default.createElement(ay,{error:n.uri},Jy.default.createElement(Qg,{control:a,name:"uri",selectedItem:f,onItemSelected:d,items:u,itemRenderer:ev,itemToString:l,label:"Artist",placeholder:"Search for an artist",inputValue:s,onInputChanged:c,onClear:m,onBlur:p})),Jy.default.createElement(_,{elementType:"p",fontSize:"small",semanticColor:"textSubdued"},"Selected: ",""===e.data.uri?"-":e.data.uri),Jy.default.createElement(k,{label:"Type of tracks",error:n.trackType,tooltip:"Type of tracks to get from the artist : top tracks & popular releases, liked tracks, latest release or all tracks."},Jy.default.createElement(ep,{label:"Type of tracks",name:"trackType",control:a,items:Qy,onChange:e=>{r({trackType:e})}}))),Jy.default.createElement(v,{type:"source",position:O.Right,id:"result",style:{top:"40px"}}))},deduplicate:function(e){return ip.default.createElement(S,{isExecuting:e.data.isExecuting,isSelected:e.selected},ip.default.createElement(hf,null),ip.default.createElement(df,null,ip.default.createElement(Lf,{title:"Deduplicate",tooltip:"Remove duplicate tracks."})),ip.default.createElement(v,{type:"target",position:O.Left,id:"input",style:{top:"42px"}}),ip.default.createElement(v,{type:"source",position:O.Right,id:"input",style:{top:"42px"}}))},isPlayable:function(e){const{control:t,updateNodeField:n,errors:a}=af(e.id,e.data,Jm("isPlayable"),am);return Bf.default.createElement(S,{isExecuting:e.data.isExecuting,isSelected:e.selected},Bf.default.createElement(gf,null),Bf.default.createElement(df,null,Bf.default.createElement(Lf,{title:"Is playable"}),Bf.default.createElement(Kf,{label:"Is playable ?",error:a.isPlayable},Bf.default.createElement(Uf,{control:t,name:"isPlayable",onChange:e=>{n({isPlayable:e})}}))),Bf.default.createElement(v,{type:"target",position:O.Left,id:"input",style:{top:"42px"}}),Bf.default.createElement(v,{type:"source",position:O.Right,id:"input",style:{top:"42px"}}))},result:function(e){var t=nf(Jl(e=>({result:e.result})))["result"];return cp.default.createElement(S,{isExecuting:e.data.isExecuting,isSelected:e.selected},cp.default.createElement(ff,{label:"Result",backgroundColor:"orange",textColor:"black"}),cp.default.createElement(df,null,cp.default.createElement(Lf,{title:"Final playlist"}),cp.default.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},cp.default.createElement(_,{elementType:"p"},"Number of tracks in result:"),0===t.length&&cp.default.createElement(_,{elementType:"p"},"-"),0!==t.length&&cp.default.createElement(_,{elementType:"p",weight:"bold",paddingBottom:"0"},t.length))),cp.default.createElement(v,{type:"target",position:O.Left,id:"input",style:{top:"42px"}}))},shuffle:function(e){return op.default.createElement(S,{isExecuting:e.data.isExecuting,isSelected:e.selected},op.default.createElement(hf,null),op.default.createElement(df,null,op.default.createElement(Lf,{title:"Shuffle"})),op.default.createElement(v,{type:"target",position:O.Left,id:"input",style:{top:"42px"}}),op.default.createElement(v,{type:"source",position:O.Right,id:"input",style:{top:"42px"}}))},sort:function(e){const{errors:t,control:n,updateNodeField:a}=af(e.id,e.data,Jm("sort"),bm);return lp.default.createElement(S,{isExecuting:e.data.isExecuting,isSelected:e.selected},lp.default.createElement(hf,null),lp.default.createElement(df,null,lp.default.createElement(Lf,{title:"Sort"}),lp.default.createElement(k,{label:"Property",error:t.property},lp.default.createElement(ep,{label:"Property to sort on",name:"property",control:n,items:sp,onChange:e=>{a({property:e})}})),lp.default.createElement(k,{label:"Order",error:t.order},lp.default.createElement(ep,{label:"Sort order",name:"order",control:n,items:up,onChange:e=>{a({order:e})}}))),lp.default.createElement(v,{type:"target",position:O.Left,id:"input",style:{top:"42px"}}),lp.default.createElement(v,{type:"source",position:O.Right,id:"input",style:{top:"42px"}}))},acousticness:function(e){const{control:t,updateNodeField:n}=af(e.id,e.data,Jm("acousticness"),Xd);return rf.default.createElement(S,{isExecuting:e.data.isExecuting,isSelected:e.selected},rf.default.createElement(gf,null),rf.default.createElement(df,null,rf.default.createElement("div",{style:{paddingLeft:"8px",paddingRight:"8px",paddingBottom:"8px"}},rf.default.createElement(Lf,{title:"Acousticness",tooltip:"A confidence measure from 0.0 to 1.0 of whether the track is acoustic. \n                        1.0 represents high confidence the track is acoustic."}),rf.default.createElement(sf,{control:t,min:0,max:1,step:.01,onChange:e=>{n({range:e})}}))),rf.default.createElement(v,{type:"target",position:O.Left,id:"input",style:{top:"42px"}}),rf.default.createElement(v,{type:"source",position:O.Right,id:"input",style:{top:"42px"}}))},danceability:function(e){const{control:t,updateNodeField:n}=af(e.id,e.data,Jm("danceability"),qd);return Ff.default.createElement(S,{isExecuting:e.data.isExecuting,isSelected:e.selected},Ff.default.createElement(gf,null),Ff.default.createElement(df,null,Ff.default.createElement("div",{style:{paddingLeft:"8px",paddingRight:"8px",paddingBottom:"8px"}},Ff.default.createElement(Lf,{title:"Danceability",tooltip:"How suitable a track is for\n                            dancing based on a combination of musical elements\n                            including tempo, rhythm stability, beat strength, and\n                            overall regularity. A value of 0.0 is least\n                            danceable and 1.0 is most danceable."}),Ff.default.createElement(sf,{control:t,min:0,max:1,step:.01,onChange:e=>{n({range:e})}}))),Ff.default.createElement(v,{type:"target",position:O.Left,id:"input",style:{top:"42px"}}),Ff.default.createElement(v,{type:"source",position:O.Right,id:"input",style:{top:"42px"}}))},energy:function(e){const{control:t,updateNodeField:n}=af(e.id,e.data,Jm("energy"),Jd);return Vf.default.createElement(S,{isExecuting:e.data.isExecuting,isSelected:e.selected},Vf.default.createElement(gf,null),Vf.default.createElement(df,null,Vf.default.createElement("div",{style:{paddingLeft:"8px",paddingRight:"8px",paddingBottom:"8px"}},Vf.default.createElement(Lf,{title:"Energy",tooltip:"Measure from 0.0 to 1.0 that represents a perceptual measure of intensity and activity. \n                        Typically, energetic tracks feel fast, loud, and noisy. \n                        For example, death metal has high energy, while a Bach prelude scores low on the scale."}),Vf.default.createElement(sf,{control:t,min:0,max:1,step:.01,onChange:e=>{n({range:e})}}))),Vf.default.createElement(v,{type:"target",position:O.Left,id:"input",style:{top:"42px"}}),Vf.default.createElement(v,{type:"source",position:O.Right,id:"input",style:{top:"42px"}}))},instrumentalness:function(e){const{control:t,updateNodeField:n}=af(e.id,e.data,Jm("instrumentalness"),em);return jf.default.createElement(S,{isExecuting:e.data.isExecuting,isSelected:e.selected},jf.default.createElement(gf,null),jf.default.createElement(df,null,jf.default.createElement("div",{style:{paddingLeft:"8px",paddingRight:"8px",paddingBottom:"8px"}},jf.default.createElement(Lf,{title:"Instrumentalness",tooltip:"Predicts whether a track contains no vocals.\n                        Values above 0.5 are intended to represent instrumental tracks. \n                        The closer the instrumentalness value is to 1.0, the greater likelihood the track contains no vocal content."}),jf.default.createElement(sf,{control:t,min:0,max:1,step:.01,onChange:e=>{n({range:e})}}))),jf.default.createElement(v,{type:"target",position:O.Left,id:"input",style:{top:"42px"}}),jf.default.createElement(v,{type:"source",position:O.Right,id:"input",style:{top:"42px"}}))},liveness:function(e){const{control:t,updateNodeField:n}=af(e.id,e.data,Jm("liveness"),im);return Xf.default.createElement(S,{isExecuting:e.data.isExecuting,isSelected:e.selected},Xf.default.createElement(gf,null),Xf.default.createElement(df,null,Xf.default.createElement("div",{style:{paddingLeft:"8px",paddingRight:"8px",paddingBottom:"8px"}},Xf.default.createElement(Lf,{title:"Liveness",tooltip:"Detects the presence of an audience in the recording. \n                        Higher liveness values represent an increased probability that the track was performed live. \n                        A value above 0.8 provides strong likelihood that the track is live."}),Xf.default.createElement(sf,{control:t,min:0,max:1,step:.01,onChange:e=>{n({range:e})}}))),Xf.default.createElement(v,{type:"target",position:O.Left,id:"input",style:{top:"42px"}}),Xf.default.createElement(v,{type:"source",position:O.Right,id:"input",style:{top:"42px"}}))},loudness:function(e){const{control:t,updateNodeField:n}=af(e.id,e.data,Jm("loudness"),lm);return Yf.default.createElement(S,{isExecuting:e.data.isExecuting,isSelected:e.selected},Yf.default.createElement(gf,null),Yf.default.createElement(df,null,Yf.default.createElement("div",{style:{paddingLeft:"8px",paddingRight:"8px",paddingBottom:"8px"}},Yf.default.createElement(Lf,{title:"Loudness (dB)",tooltip:"The overall loudness of a track in decibels (dB). \n                        Loudness values are averaged across the entire track and are useful for comparing relative loudness of tracks."}),Yf.default.createElement(sf,{control:t,min:-60,max:10,step:.01,onChange:e=>{n({range:e})}}))),Yf.default.createElement(v,{type:"target",position:O.Left,id:"input",style:{top:"42px"}}),Yf.default.createElement(v,{type:"source",position:O.Right,id:"input",style:{top:"42px"}}))},speechiness:function(e){const{control:t,updateNodeField:n}=af(e.id,e.data,Jm("speechiness"),dm);return np.default.createElement(S,{isExecuting:e.data.isExecuting,isSelected:e.selected},np.default.createElement(gf,null),np.default.createElement(df,null,np.default.createElement("div",{style:{paddingLeft:"8px",paddingRight:"8px",paddingBottom:"8px"}},np.default.createElement(Lf,{title:"Speechiness",tooltip:"Detects the presence of spoken words in a track. \n                        Values above 0.66 describe tracks that are probably made entirely of spoken words (e.g. talk show, audio book, poetry). \n                        Values below 0.33 most likely represent music and other non-speech-like tracks."}),np.default.createElement(sf,{control:t,min:0,max:1,step:.01,onChange:e=>{n({range:e})}}))),np.default.createElement(v,{type:"target",position:O.Left,id:"input",style:{top:"42px"}}),np.default.createElement(v,{type:"source",position:O.Right,id:"input",style:{top:"42px"}}))},valence:function(e){const{control:t,updateNodeField:n}=af(e.id,e.data,Jm("valence"),hm);return rp.default.createElement(S,{isExecuting:e.data.isExecuting,isSelected:e.selected},rp.default.createElement(gf,null),rp.default.createElement(df,null,rp.default.createElement("div",{style:{paddingLeft:"8px",paddingRight:"8px",paddingBottom:"8px"}},rp.default.createElement(Lf,{title:"Valence",tooltip:"A measure from 0.0 to 1.0 describing the musical positiveness conveyed by a track. \n                        Tracks with high valence sound more positive (e.g. happy, cheerful, euphoric),\n                        while tracks with low valence sound more negative (e.g. sad, depressed, angry)."}),rp.default.createElement(sf,{control:t,min:0,max:1,step:.01,onChange:e=>{n({range:e})}}))),rp.default.createElement(v,{type:"target",position:O.Left,id:"input",style:{top:"42px"}}),rp.default.createElement(v,{type:"source",position:O.Right,id:"input",style:{top:"42px"}}))},tempo:function(e){const{control:t,updateNodeField:n}=af(e.id,e.data,Jm("tempo"),fm);return ap.default.createElement(S,{isExecuting:e.data.isExecuting,isSelected:e.selected},ap.default.createElement(gf,null),ap.default.createElement(df,null,ap.default.createElement("div",{style:{paddingLeft:"8px",paddingRight:"8px",paddingBottom:"8px"}},ap.default.createElement(Lf,{title:"Tempo (BPM)",tooltip:"The overall estimated tempo of a track in beats per minute (BPM). \n                        In musical terminology, tempo is the speed or pace of a given piece and derives directly from the average beat duration."}),ap.default.createElement(sf,{control:t,min:0,max:1e3,step:1,onChange:e=>{n({range:e})}}))),ap.default.createElement(v,{type:"target",position:O.Left,id:"input",style:{top:"42px"}}),ap.default.createElement(v,{type:"source",position:O.Right,id:"input",style:{top:"42px"}}))},mode:function(e){const{control:t,errors:n,updateNodeField:a}=af(e.id,e.data,Jm("mode"),um);return qf.default.createElement(S,{isExecuting:e.data.isExecuting,isSelected:e.selected},qf.default.createElement(gf,null),qf.default.createElement(df,null,qf.default.createElement(Lf,{title:"Mode",tooltip:"Mode indicates the modality (major or minor) of a track, the type of scale from which its melodic content is derived."}),qf.default.createElement(k,{label:"Mode",error:n.mode},qf.default.createElement(ep,{label:"Mode",name:"mode",control:t,items:tp,onChange:e=>{a({mode:e})}}))),qf.default.createElement(v,{type:"target",position:O.Left,id:"input",style:{top:"42px"}}),qf.default.createElement(v,{type:"source",position:O.Right,id:"input",style:{top:"42px"}}))},radioAlbumSource:function(e){const t=e.data["uri"],{errors:n,control:a,updateNodeField:r}=af(e.id,e.data,Jm("radioAlbumSource"),Hm);var i=(0,Vy.useCallback)(async e=>{return e.trim()?(await Fy({searchTerm:e,offset:0,limit:10,includePreReleases:!0,includeArtistHasConcertsField:!1,includeAudiobooks:!1,includeLocalConcertsField:!1,numberOfTopResults:5})).searchV2.albumsV2.items.map(e=>{return"PreReleaseResponseWrapper"===e.__typename?{id:e.data.uri,uri:e.data.uri,name:e.data.preReleaseContent.name,image:0<e.data.preReleaseContent.coverArt.sources.length?e.data.preReleaseContent.coverArt.sources[0].url:null,artists:e.data.preReleaseContent.artists.items.map(e=>e.data.profile.name).join(", ")}:{id:e.data.uri,uri:e.data.uri,name:e.data.name,image:0<e.data.coverArt.sources.length?e.data.coverArt.sources[0].url:null,artists:e.data.artists.items.map(e=>e.profile.name).join(", ")}}):[]},[]),o=(0,Vy.useCallback)(async e=>{try{var t=await km({uri:e,offset:0,limit:0,locale:Spicetify.Locale.getLocale()});if("NotFound"===t.albumUnion.__typename)throw new Error("Album not found");return{id:t.albumUnion.uri,name:t.albumUnion.name,uri:t.albumUnion.uri,image:0<t.albumUnion.coverArt.sources.length?t.albumUnion.coverArt.sources[0].url:null,artists:t.albumUnion.artists.items.map(e=>e.profile.name).join(", ")}}catch(e){return console.error("Failed to fetch album",e),r({uri:""}),null}},[r]),l=(0,Vy.useCallback)(e=>e.name,[]);const{inputValue:s,items:u,onInputChanged:c,onItemSelected:d,resetSelection:m,selectedItem:f,syncInputWithSelectedItem:p,onSelectedIdChanged:h}=pp(o,i,l,e=>{r({uri:e?.uri??""})});return(0,Vy.useEffect)(()=>{h(t)},[t,h]),Vy.default.createElement(S,{isExecuting:e.data.isExecuting,isSelected:e.selected},Vy.default.createElement(pf,null),Vy.default.createElement(df,null,Vy.default.createElement(Lf,{title:"Album radio",tooltip:"Get a radio playlist based on an album."}),Vy.default.createElement(ay,{error:n.uri},Vy.default.createElement(Qg,{control:a,name:"uri",selectedItem:f,onItemSelected:d,items:u,itemRenderer:zy,itemToString:l,label:"Album",placeholder:"Search for an album",inputValue:s,onInputChanged:c,onClear:m,onBlur:p})),Vy.default.createElement(_,{elementType:"p",fontSize:"small",semanticColor:"textSubdued"},"Selected: ",""===e.data.uri?"-":e.data.uri),Vy.default.createElement(k,{label:"Offset",tooltip:"Number of elements to skip",error:n.offset},Vy.default.createElement(ty,{placeholder:"0",control:a,name:"offset",onChange:e=>{r({offset:e})}})),Vy.default.createElement(k,{label:"Limit",tooltip:"Number of elements to take. Leave empty to take all elements.",error:n.limit},Vy.default.createElement(ty,{placeholder:"None",control:a,name:"limit",onChange:e=>{r({limit:e})}})),Vy.default.createElement(k,{label:"Sort by",error:n.sortField},Vy.default.createElement(ep,{label:"Property to sort on",name:"sortField",control:a,items:jy,onChange:e=>{r({sortField:e})}})),Vy.default.createElement(k,{label:"Order",error:n.sortOrder},Vy.default.createElement(ep,{label:"Sort order",name:"sortOrder",control:a,items:By,onChange:e=>{r({sortOrder:e})}}))),Vy.default.createElement(v,{type:"source",position:O.Right,id:"result",style:{top:"40px"}}))},radioArtistSource:function(e){const t=e.data["uri"],{errors:n,control:a,updateNodeField:r}=af(e.id,e.data,Jm("radioArtistSource"),Hm);var i=(0,Uy.useCallback)(async e=>{return e.trim()?(await Fy({searchTerm:e,offset:0,limit:10,includePreReleases:!0,includeArtistHasConcertsField:!1,includeAudiobooks:!1,includeLocalConcertsField:!1,numberOfTopResults:5})).searchV2.artists.items.map(e=>({id:e.data.uri,uri:e.data.uri,name:e.data.profile.name,image:e.data.visuals.avatarImage?.sources&&0<e.data.visuals.avatarImage.sources.length?e.data.visuals.avatarImage.sources[0].url:null})):[]},[]),o=(0,Uy.useCallback)(async e=>{try{var t=await Mm({uri:e,locale:Spicetify.Locale.getLocale()});if("NotFound"===t.artistUnion.__typename)throw new Error("Artist not found");return{id:t.artistUnion.uri,name:t.artistUnion.profile.name,uri:t.artistUnion.uri,image:0<t.artistUnion.visuals.avatarImage.sources.length?t.artistUnion.visuals.avatarImage.sources[0].url:null}}catch(e){return console.error("Failed to fetch artist",e),r({uri:""}),null}},[r]),l=(0,Uy.useCallback)(e=>e.name,[]);const{inputValue:s,items:u,onInputChanged:c,onItemSelected:d,resetSelection:m,selectedItem:f,syncInputWithSelectedItem:p,onSelectedIdChanged:h}=pp(o,i,l,e=>{r({uri:e?.uri??""})});return(0,Uy.useEffect)(()=>{h(t)},[t,h]),Uy.default.createElement(S,{isExecuting:e.data.isExecuting,isSelected:e.selected},Uy.default.createElement(pf,null),Uy.default.createElement(df,null,Uy.default.createElement(Lf,{title:"Artist radio",tooltip:"Get a radio playlist based on an artist."}),Uy.default.createElement(ay,{error:n.uri},Uy.default.createElement(Qg,{control:a,name:"uri",selectedItem:f,onItemSelected:d,items:u,itemRenderer:Zy,itemToString:l,label:"Artist",placeholder:"Search for an artist",inputValue:s,onInputChanged:c,onClear:m,onBlur:p})),Uy.default.createElement(_,{elementType:"p",fontSize:"small",semanticColor:"textSubdued"},"Selected: ",""===e.data.uri?"-":e.data.uri),Uy.default.createElement(k,{label:"Offset",tooltip:"Number of elements to skip",error:n.offset},Uy.default.createElement(ty,{placeholder:"0",control:a,name:"offset",onChange:e=>{r({offset:e})}})),Uy.default.createElement(k,{label:"Limit",tooltip:"Number of elements to take. Leave empty to take all elements.",error:n.limit},Uy.default.createElement(ty,{placeholder:"None",control:a,name:"limit",onChange:e=>{r({limit:e})}})),Uy.default.createElement(k,{label:"Sort by",error:n.sortField},Uy.default.createElement(ep,{label:"Property to sort on",name:"sortField",control:a,items:Hy,onChange:e=>{r({sortField:e})}})),Uy.default.createElement(k,{label:"Order",error:n.sortOrder},Uy.default.createElement(ep,{label:"Sort order",name:"sortOrder",control:a,items:$y,onChange:e=>{r({sortOrder:e})}}))),Uy.default.createElement(v,{type:"source",position:O.Right,id:"result",style:{top:"40px"}}))},radioTrackSource:function(e){const t=e.data["uri"],{errors:n,control:a,updateNodeField:r}=af(e.id,e.data,Jm("radioTrackSource"),Hm);var i=(0,Wy.useCallback)(async e=>{return e.trim()?(await Fy({searchTerm:e,offset:0,limit:10,includePreReleases:!0,includeArtistHasConcertsField:!1,includeAudiobooks:!1,includeLocalConcertsField:!1,numberOfTopResults:5})).searchV2.tracksV2.items.map(e=>({id:e.item.data.uri,uri:e.item.data.uri,name:e.item.data.name,image:0<e.item.data.albumOfTrack.coverArt.sources.length?e.item.data.albumOfTrack.coverArt.sources[0].url:null,artists:e.item.data.artists.items.map(e=>e.profile.name).join(", "),album:e.item.data.albumOfTrack.name})):[]},[]),o=(0,Wy.useCallback)(async e=>{try{n={uri:e},Km.parse(n),a=Pu(Spicetify.URI.fromString(n.uri));var t=await(await Du(n.withoutMarket).withPath("/tracks/"+a).withEndpointIdentifier("/tracks/{id}").send()).body;return{id:t.uri,name:t.name,uri:t.uri,image:0<t.album.images.length?t.album.images[0].url:null,artists:t.artists.map(e=>e.name).join(", "),album:t.album.name}}catch(e){return console.error("Failed to fetch track",e),r({uri:""}),null}var n,a},[r]),l=(0,Wy.useCallback)(e=>e.name,[]);const{inputValue:s,items:u,onInputChanged:c,onItemSelected:d,resetSelection:m,selectedItem:f,syncInputWithSelectedItem:p,onSelectedIdChanged:h}=pp(o,i,l,e=>{r({uri:e?.uri??""})});return(0,Wy.useEffect)(()=>{h(t)},[t,h]),Wy.default.createElement(S,{isExecuting:e.data.isExecuting,isSelected:e.selected},Wy.default.createElement(pf,null),Wy.default.createElement(df,null,Wy.default.createElement(Lf,{title:"Track radio",tooltip:"Get a radio playlist based on a track."}),Wy.default.createElement(ay,{error:n.uri},Wy.default.createElement(Qg,{control:a,name:"uri",selectedItem:f,onItemSelected:d,items:u,itemRenderer:Yy,itemToString:l,label:"Track",placeholder:"Search for a track",inputValue:s,onInputChanged:c,onClear:m,onBlur:p})),Wy.default.createElement(_,{elementType:"p",fontSize:"small",semanticColor:"textSubdued"},"Selected: ",""===e.data.uri?"-":e.data.uri),Wy.default.createElement(k,{label:"Offset",tooltip:"Number of elements to skip",error:n.offset},Wy.default.createElement(ty,{placeholder:"0",control:a,name:"offset",onChange:e=>{r({offset:e})}})),Wy.default.createElement(k,{label:"Limit",tooltip:"Number of elements to take. Leave empty to take all elements.",error:n.limit},Wy.default.createElement(ty,{placeholder:"None",control:a,name:"limit",onChange:e=>{r({limit:e})}})),Wy.default.createElement(k,{label:"Sort by",error:n.sortField},Wy.default.createElement(ep,{label:"Property to sort on",name:"sortField",control:a,items:Ky,onChange:e=>{r({sortField:e})}})),Wy.default.createElement(k,{label:"Order",error:n.sortOrder},Wy.default.createElement(ep,{label:"Sort order",name:"sortOrder",control:a,items:Xy,onChange:e=>{r({sortOrder:e})}}))),Wy.default.createElement(v,{type:"source",position:O.Right,id:"result",style:{top:"40px"}}))}},m=t(b());function ov(n){const t=tf(e=>e.addNode);return m.default.createElement("li",null,m.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:n.tooltip,showDelay:500},m.default.createElement("button",{onDragStart:e=>{var t;e=e,t=n.nodeType,e.dataTransfer.setData("application/reactflow",t),e.dataTransfer.effectAllowed="move"},draggable:!0,tabIndex:0,onKeyDown:e=>{"Enter"===e.key&&(e=n.nodeType,t(e,{x:0,y:0}))},className:"hover:bg-spice-highlight hover:!text-spice-text w-full cursor-grab border-none bg-transparent !py-1 text-start"},m.default.createElement(_,{elementType:"span",fontSize:"medium"},n.label))))}function lv(e){return m.default.createElement("details",null,m.default.createElement("summary",null,m.default.createElement(_,{elementType:"h2",weight:"bold",fontSize:"large",className:"inline"},e.label)),m.default.createElement("div",{className:"!mt-2"},e.children))}function sv(e){return m.default.createElement(m.default.Fragment,null,m.default.createElement(_,{elementType:"h1",fontSize:"x-large"},e.label),m.default.createElement("hr",{className:"divide-solid opacity-60"}))}function uv(){return m.default.createElement("div",{className:"flex flex-col gap-2"},m.default.createElement("div",{className:"flex flex-col gap-2"},m.default.createElement(sv,{label:"Sources"}),m.default.createElement(lv,{label:"Library"},m.default.createElement("ul",null,m.default.createElement(ov,{label:"Liked songs",nodeType:"likedSongsSource",tooltip:"Get tracks from your liked songs."}),m.default.createElement(ov,{label:"Local files",nodeType:"localTracksSource",tooltip:"Get tracks from your local files."}),m.default.createElement(ov,{label:"Top tracks",nodeType:"topTracksSource",tooltip:"Get tracks from your top tracks."}),m.default.createElement(ov,{label:"Saved playlist",nodeType:"libraryPlaylistSource",tooltip:"Get tracks from a playlist in your library."}),m.default.createElement(ov,{label:"Saved album",nodeType:"libraryAlbumSource",tooltip:"Get tracks from an album in your library."}),m.default.createElement(ov,{label:"Saved artist",nodeType:"libraryArtistSource",tooltip:"Get tracks from an artist in your library."}))),m.default.createElement(lv,{label:"Search"},m.default.createElement("ul",null,m.default.createElement(ov,{label:"Artist",nodeType:"searchArtistSource",tooltip:"Get tracks from an artist."}),m.default.createElement(ov,{label:"Playlist",nodeType:"searchPlaylistSource",tooltip:"Get tracks from a playlist."}),m.default.createElement(ov,{label:"Album",nodeType:"searchAlbumSource",tooltip:"Get tracks from an album."}))),m.default.createElement(lv,{label:"Radio"},m.default.createElement("ul",null,m.default.createElement(ov,{label:"Track radio",nodeType:"radioTrackSource",tooltip:"Get a radio playlist for a track."}),m.default.createElement(ov,{label:"Artist radio",nodeType:"radioArtistSource",tooltip:"Get a radio playlist for an artist."}),m.default.createElement(ov,{label:"Album radio",nodeType:"radioAlbumSource",tooltip:"Get a radio playlist for an album."})))),m.default.createElement("div",{className:"flex flex-col gap-2"},m.default.createElement(sv,{label:"Filters"}),m.default.createElement(lv,{label:"Track property"},m.default.createElement("ul",null,m.default.createElement(ov,{label:"Is playable",nodeType:"isPlayable",tooltip:"Filter tracks that are playable."}))),m.default.createElement(lv,{label:"Audio features"},m.default.createElement("ul",null,m.default.createElement(ov,{label:"Acousticness",nodeType:"acousticness",tooltip:"Filter tracks by acousticness."}),m.default.createElement(ov,{label:"Danceability",nodeType:"danceability",tooltip:"Filter tracks by danceability."}),m.default.createElement(ov,{label:"Energy",nodeType:"energy",tooltip:"Filter tracks by energy."}),m.default.createElement(ov,{label:"Instrumentalness",nodeType:"instrumentalness",tooltip:"Filter tracks by instrumentalness."}),m.default.createElement(ov,{label:"Liveness",nodeType:"liveness",tooltip:"Filter tracks by liveness."}),m.default.createElement(ov,{label:"Speechiness",nodeType:"speechiness",tooltip:"Filter tracks by speechiness."}),m.default.createElement(ov,{label:"Valence",nodeType:"valence",tooltip:"Filter tracks by valence."}),m.default.createElement(ov,{label:"Loudness",nodeType:"loudness",tooltip:"Filter tracks by loudness."}),m.default.createElement(ov,{label:"Tempo",nodeType:"tempo",tooltip:"Filter tracks by tempo."}),m.default.createElement(ov,{label:"Mode",nodeType:"mode",tooltip:"Filter tracks by mode."})))),m.default.createElement("div",{className:"flex flex-col gap-2"},m.default.createElement(sv,{label:"Processing"}),m.default.createElement("ul",null,m.default.createElement(ov,{label:"Deduplicate",nodeType:"deduplicate",tooltip:"Remove duplicate tracks."}),m.default.createElement(ov,{label:"Shuffle",nodeType:"shuffle",tooltip:"Shuffle the tracks."}),m.default.createElement(ov,{label:"Sort",nodeType:"sort",tooltip:"Sort the tracks."}))),m.default.createElement("div",{className:"flex flex-col gap-2"},m.default.createElement(sv,{label:"Result"}),m.default.createElement("ul",null,m.default.createElement(ov,{label:"Result",nodeType:"result",tooltip:"The workflow result."}))))}var cv=an(t=>({showConfirmNewModal:!1,showConfirmLoadModal:!1,showConfirmDeleteModal:!1,selectedWorkflow:null,savedWorkflows:[],setShowConfirmNewModal:e=>{t({showConfirmNewModal:e})},setShowConfirmLoadModal:e=>{t({showConfirmLoadModal:e})},setShowConfirmDeleteModal:e=>{t({showConfirmDeleteModal:e})},setSelectedWorkflow:e=>{t({selectedWorkflow:e})},setSavedWorkflows:e=>{t({savedWorkflows:e})}})),dv=t(b());function mv(){const{showConfirmDeleteModal:e,setShowConfirmDeleteModal:n,selectedWorkflow:a,setSavedWorkflows:r}=cv(Jl(e=>({showConfirmDeleteModal:e.showConfirmDeleteModal,setShowConfirmDeleteModal:e.setShowConfirmDeleteModal,selectedWorkflow:e.selectedWorkflow,setSavedWorkflows:e.setSavedWorkflows})));return dv.default.createElement(Spicetify.ReactComponent.ConfirmDialog,{isOpen:e,onConfirm:()=>{var t,e;n(!1),null!==a&&(t=a.id,e=Ud().filter(e=>e.id!==t),Spicetify.LocalStorage.set(Bd,JSON.stringify(e)),r(Ud()))},onClose:()=>{n(!1)},onOutside:()=>{n(!1)},titleText:"Delete workflow",descriptionText:`Are you sure you want to delete the workflow "${a?.name??""}" ?`,confirmText:"Confirm",cancelText:"Cancel"})}var fv=t(b());function pv(){const e=nf(Jl(e=>({loadWorkflow:e.loadWorkflow})))["loadWorkflow"],{showConfirmLoadModal:t,setShowConfirmLoadModal:n,selectedWorkflow:a}=cv(Jl(e=>({showConfirmLoadModal:e.showConfirmLoadModal,setShowConfirmLoadModal:e.setShowConfirmLoadModal,selectedWorkflow:e.selectedWorkflow})));return fv.default.createElement(Spicetify.ReactComponent.ConfirmDialog,{isOpen:t,onConfirm:()=>{n(!1),null!==a&&e(a),Spicetify.PopupModal.hide()},onClose:()=>{n(!1)},onOutside:()=>{n(!1)},titleText:"Load workflow",descriptionText:"You have unsaved changes that will be lost. Confirm?",confirmText:"Confirm",cancelText:"Cancel"})}var hv=t(b());function gv(){const e=nf(Jl(e=>({resetState:e.resetState})))["resetState"],{showConfirmNewModal:t,setShowConfirmNewModal:n}=cv(Jl(e=>({showConfirmNewModal:e.showConfirmNewModal,setShowConfirmNewModal:e.setShowConfirmNewModal})));return hv.default.createElement(Spicetify.ReactComponent.ConfirmDialog,{isOpen:t,onConfirm:()=>{n(!1),e()},onClose:()=>{n(!1)},onOutside:()=>{n(!1)},titleText:"Create new workflow",descriptionText:"You have unsaved changes that will be lost. Confirm?",confirmText:"Confirm",cancelText:"Cancel"})}var yv={"grid-container":"EditorPage-module__grid-container___Mvr8j_playlistDmaker",padding:"EditorPage-module__padding___n1uom_playlistDmaker",sidenav:"EditorPage-module__sidenav___UBA-J_playlistDmaker",main:"EditorPage-module__main___kYWdy_playlistDmaker"},vv=t(b()),bv=t(b());function Ev(){const{hasPendingChanges:t,loadWorkflow:n}=nf(Jl(e=>({hasPendingChanges:e.hasPendingChanges,loadWorkflow:e.loadWorkflow}))),{setShowConfirmLoadModal:a,setShowConfirmDeleteModal:r,setSelectedWorkflow:i,savedWorkflows:e,setSavedWorkflows:o}=cv(Jl(e=>({setShowConfirmLoadModal:e.setShowConfirmLoadModal,setShowConfirmDeleteModal:e.setShowConfirmDeleteModal,setSelectedWorkflow:e.setSelectedWorkflow,savedWorkflows:e.savedWorkflows,setSavedWorkflows:e.setSavedWorkflows})));return(0,bv.useEffect)(()=>{o(Ud())},[o]),bv.default.createElement(bv.default.Fragment,null,0===e.length&&bv.default.createElement(_,{elementType:"small",semanticColor:"textSubdued"},"No saved workflows"),e.map(e=>bv.default.createElement("div",{key:e.id,className:"flex flex-row items-center justify-between"},bv.default.createElement(_,null,e.name),bv.default.createElement("div",null,bv.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:"Load workflow"},bv.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":"Load workflow",onClick:()=>{i(e),t?a(!0):(n(e),Spicetify.PopupModal.hide())},buttonSize:"sm",iconOnly:()=>bv.default.createElement(Nf,{size:20})})),bv.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:"Delete workflow"},bv.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":"Delete workflow",onClick:()=>{i(e),r(!0)},buttonSize:"sm",iconOnly:()=>bv.default.createElement(Mf,{size:20,className:"text-spice-error"})}))))))}var wv={panel:"CenterPanel-module__panel___M4yLx_playlistDmaker","divider-vertical":"CenterPanel-module__divider-vertical___rGt2c_playlistDmaker","title-input":"CenterPanel-module__title-input___GJaDF_playlistDmaker","flex-row":"CenterPanel-module__flex-row___JlGxZ_playlistDmaker"},_v=r.object({workflowName:r.string().nonempty({message:"Name cannot be empty"})});function xv(){const{workflowName:n,setWorkflowName:e,hasPendingChanges:t,reactFlowInstance:a,workflowId:r,onWorkflowSaved:i,resetState:o,anyExecuting:l}=nf(Jl(e=>({workflowName:e.workflowName,setWorkflowName:e.setWorkflowName,hasPendingChanges:e.hasPendingChanges,reactFlowInstance:e.reactFlowInstance,workflowId:e.workflowId,onWorkflowSaved:e.onWorkflowSaved,resetState:e.resetState,anyExecuting:e.anyExecuting}))),{formState:{errors:s,isValid:u},control:c,getValues:d,setValue:m}=mu({mode:"onChange",disabled:l,defaultValues:{workflowName:n},resolver:vu(_v)}),f=As({control:c}),p=((0,vv.useEffect)(()=>{e(f.workflowName??"")},[f,e]),(0,vv.useEffect)(()=>{d("workflowName")!==n&&m("workflowName",n,{shouldValidate:!0})},[n,d,m]),cv(Jl(e=>({setShowConfirmNewModal:e.setShowConfirmNewModal}))))["setShowConfirmNewModal"],h=(0,vv.useCallback)(()=>{var t,e;null!==a&&(e=a.toObject(),t={...e,id:r,name:n},e=Ud().filter(e=>e.id!==t.id),Spicetify.LocalStorage.set(Bd,JSON.stringify([...e,t])),i(),Spicetify.showNotification("Workflow saved",!1,1e3))},[a,i,r,n]),g=(0,vv.useCallback)(()=>{t?p(!0):o()},[t,o,p]);return vv.default.createElement(ir,{className:wv.panel+" "+wv["flex-row"],position:"top-center"},vv.default.createElement("div",null,vv.default.createElement("div",{className:wv["flex-row"]},vv.default.createElement(py,{placeholder:"",control:c,name:"workflowName",required:!0}),vv.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:"Save workflow"},vv.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":"Save workflow",disabled:!t||!u,onClick:()=>{h()},buttonSize:"sm",iconOnly:()=>vv.default.createElement(Rf,{size:20})}))),vv.default.createElement("div",{className:wv["title-input"]},vv.default.createElement(Wf,{error:s.workflowName}))),vv.default.createElement("div",{className:wv["divider-vertical"]}),vv.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:"Manage workflows"},vv.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":"Manage workflows",onClick:()=>{Spicetify.PopupModal.display({title:"Saved workflows",content:vv.default.createElement(Ev),isLarge:!1})},buttonSize:"sm",iconOnly:()=>vv.default.createElement(Af,{size:20})})),vv.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:"Create new"},vv.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":"Create new",onClick:()=>{g()},buttonSize:"sm",iconOnly:()=>vv.default.createElement(xf,{size:20})})))}var Sv=t(b()),kv={panel:"TopLeftPanel-module__panel___tilhV_playlistDmaker","divider-horizontal":"TopLeftPanel-module__divider-horizontal___ZDnoT_playlistDmaker"},Iv=t(b()),Cv="HelpButton-module__help-panel___puwoe_playlistDmaker",Nv="HelpButton-module__help-button___yRJAR_playlistDmaker",f=t(b()),Tv="HelpModal-module__help-modal___VsRP1_playlistDmaker";function Av(e){return f.default.createElement(_,{elementType:"p",semanticColor:"textSubdued",fontSize:"medium",paddingBottom:"1rem"},e.children)}function Rv(e){return f.default.createElement(_,{elementType:"span",semanticColor:"textBase",fontSize:"medium"},e.children)}function Ov(){return f.default.createElement("div",{className:Tv},f.default.createElement(Av,null,"Drag and drop nodes from the side menu to create a workflow.",f.default.createElement("br",null),"Move nodes in the editor by dragging them by their header."),f.default.createElement(Av,null,"A workflow must have ",f.default.createElement(Rv,null,"at least one source node"),", and ",f.default.createElement(Rv,null,"one result node"),".",f.default.createElement("br",null),"Connect the nodes together to create a workflow. Connections on the right of the nodes are ",f.default.createElement(Rv,null,"outputs"),", and connections on the left are ",f.default.createElement(Rv,null,"inputs"),".",f.default.createElement("br",null),"Nodes can accept ",f.default.createElement(Rv,null,"multiple connections")," on their input side."),f.default.createElement(Av,null,"Select a node by clicking on it. The selected node will be highlighted.",f.default.createElement("br",null),"To select multiple nodes, hold down the ",f.default.createElement("kbd",null,"Control")," key while clicking on the nodes.",f.default.createElement("br",null),"Selected nodes can be moved together by dragging any of them.",f.default.createElement("br",null),"Selected nodes can be ",f.default.createElement(Rv,null,"deleted")," by selecting it and pressing the ",f.default.createElement("kbd",null,"Backspace")," key."),f.default.createElement(Av,null,"Hover over the node names in the menu to see a description of the node."),f.default.createElement(Av,null,"When the workflow is done, click the"," ",f.default.createElement(Rv,null,'"Execute"')," button to run the workflow.",f.default.createElement("br",null),"The results will be displayed in the"," ",f.default.createElement(Rv,null,'"Result" tab'),".",f.default.createElement("br",null),"You can then either play the tracks directly or save the result to a playlist."),f.default.createElement(Av,null,"You can ",f.default.createElement(Rv,null,"save")," and ",f.default.createElement(Rv,null,"load")," ","workflows using the buttons in the top center of the editor."))}function Mv(){return Iv.default.createElement("div",{className:Cv},Iv.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:"Help",placement:"right"},Iv.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":"Help",iconOnly:()=>Iv.default.createElement(If,{size:20,strokeWidth:1.5}),buttonSize:"sm",onClick:()=>{Spicetify.PopupModal.display({title:"Help",content:Iv.default.createElement(Ov,null),isLarge:!0})},className:Nv})))}var Dv=t(b()),Pv=t(b());function Lv(){return Pv.default.createElement(_,{elementType:"p",semanticColor:"textSubdued",fontSize:"small"},"Coming soon")}function Fv(){return Dv.default.createElement("div",{className:"flex flex-col items-center"},Dv.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:"Settings",placement:"right"},Dv.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":"Settings",iconOnly:()=>Dv.default.createElement(Of,{size:20,strokeWidth:1.5,className:"text-spice-text"}),buttonSize:"sm",onClick:()=>{Spicetify.PopupModal.display({title:"Settings",content:Dv.default.createElement(Lv),isLarge:!0})},className:"p-1"})))}function Vv(){return Sv.default.createElement(ir,{className:kv.panel,position:"top-left"},Sv.default.createElement(Mv,null),Sv.default.createElement("div",{className:kv["divider-horizontal"]}),Sv.default.createElement(Fv,null))}var jv=t(b()),Bv={panel:"TopRightPanel-module__panel___dSzF7_playlistDmaker"};function zv(){const{nodes:e,edges:t}=nf(Jl(e=>({nodes:e.nodes,edges:e.edges})));return jv.default.createElement(ir,{className:Bv.panel,position:"top-right"},jv.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":"Execute",onClick:async()=>{(async function(t,n){var a=nf.getState().setResult,r=nf.getState().updateNodeData,i=nf.getState().nodeFormValidationCallbacks,o=t.filter(e=>"result"===e.type);if(0===o.length)Spicetify.showNotification("No result node found in workflow",!0);else if(1<o.length)Spicetify.showNotification("The workflow should have only one result node",!0);else{o=o[0];let e=!0;for(const p of i.values()){var l=await p();e=e&&l}if(e){for(var s=ai(o,t,n),i=Qm.result(o,s),u={[o.id]:i},c=new Set([o.id]);0<s.length;){var d,m,f=s.pop();c.has(f.id)||(c.add(f.id),d=ai(f,t,n),m=f.type,u[f.id]=Qm[m](f,d),s.push(...d))}try{a(await i.getResults(u)),Spicetify.showNotification("Workflow executed successfully",!1,1e3)}catch(e){console.error("Error while executing workflow:",e),Spicetify.showNotification("Error while executing workflow",!0),a([]);for(const h of t)r(h.id,{isExecuting:!1})}}else Spicetify.showNotification("Some nodes are invalid",!0)}})(e,t)},buttonSize:"sm",iconLeading:()=>jv.default.createElement(Cf,{size:20})},"Execute"))}var Uv=e=>({reactFlowInstance:e.reactFlowInstance,nodes:e.nodes,edges:e.edges,onNodesChange:e.onNodesChange,onEdgesChange:e.onEdgesChange,onConnect:e.onConnect,addNode:e.addNode,setReactFlowInstance:e.setReactFlowInstance,getNodes:e.getNodes,getEdges:e.getEdges});function Hv(){const{nodes:e,edges:t,onNodesChange:n,onEdgesChange:a,onConnect:r,addNode:i,reactFlowInstance:o,setReactFlowInstance:l,getNodes:s,getEdges:u}=tf(Jl(Uv));var c=(0,De.useCallback)(e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},[]),d=(0,De.useCallback)(e=>{e.preventDefault();var t=e.dataTransfer.getData("application/reactflow");void 0!==t&&t&&(e=o?.screenToFlowPosition({x:e.clientX,y:e.clientY})??{x:0,y:0},i(t,e))},[o,i]),m=(0,De.useCallback)(a=>{const r=s(),i=u();var e=r.find(e=>e.id===a.target);if(void 0===e)return!1;const o=(e,t=new Set)=>{if(!t.has(e.id)){t.add(e.id);for(const n of ni(e,r,i)){if(n.id===a.source)return!0;if(o(n,t))return!0}}return!1};return e.id!==a.source&&!o(e)},[s,u]);return De.default.createElement(De.default.Fragment,null,De.default.createElement("div",{className:"app-container"},De.default.createElement("div",{className:Spicetify.classnames(yv["grid-container"],"gap-panel h-full w-full")},De.default.createElement("div",{className:Spicetify.classnames(yv.padding,"panel")}),De.default.createElement("div",{className:Spicetify.classnames(yv.sidenav,"panel overflow-scroll !p-5")},De.default.createElement(uv,null)),De.default.createElement("div",{className:Spicetify.classnames(yv.main,"panel")},De.default.createElement(_l,{nodes:e,edges:t,onNodesChange:n,onEdgesChange:a,onConnect:r,onInit:l,onDrop:d,onDragOver:c,deleteKeyCode:["Backspace"],nodeTypes:iv,isValidConnection:m,selectNodesOnDrag:!1},De.default.createElement(Vv,null),De.default.createElement(xv,null),De.default.createElement(zv,null),De.default.createElement(Ul,null),De.default.createElement(Ol,null),De.default.createElement(ql,{variant:jl.Dots,gap:12,size:1}))))),De.default.createElement(gv,null),De.default.createElement(pv,null),De.default.createElement(mv,null))}var $v=t(b());var Zv=t(b());function p(e,...t){let n=y().Translations;for(const r of e){if("string"==typeof n)throw new Error(`Key "${r}" not found in translations.`);n=n[r]}let a=n;return t.forEach((e,t)=>{a=a.replace(`{${t.toFixed()}}`,e)}),a}var Wv=t(b()),Kv={"display-list":"TrackListGrid-module__display-list___ahMmJ_playlistDmaker","display-list-compact":"TrackListGrid-module__display-list-compact___Uwrj2_playlistDmaker"},Xv=t(b()),Yv=t(b());function qv(e){return Yv.default.createElement("svg",{height:"16",width:"16",viewBox:"0 0 16 16",fill:"var(--text-bright-accent)",className:e.className},Yv.default.createElement("path",{d:"M14 10L8 4l-6 6h12z"}))}var Gv=t(b());function Jv(e){return Gv.default.createElement("svg",{height:"16",width:"16",viewBox:"0 0 16 16",fill:"var(--text-bright-accent)",className:e.className},Gv.default.createElement("path",{d:"M14 6l-6 6-6-6h12z"}))}function Qv(n){function a(){return void 0===n.sortedHeader?Xv.default.createElement(Xv.default.Fragment,null):"ascending"===n.sortedHeader.order?Xv.default.createElement(qv,{className:"main-trackList-arrow"}):Xv.default.createElement(Jv,{className:"main-trackList-arrow"})}const r=void 0!==n.sortedHeader?"main-trackList-sortable":"";return Xv.default.createElement("div",{className:"main-trackList-trackListHeader"},Xv.default.createElement("div",{className:"main-trackList-trackListHeaderRow main-trackList-trackListRowGrid","aria-rowindex":1},Xv.default.createElement("div",{className:"main-trackList-rowSectionIndex","aria-colindex":1,"aria-sort":"none",tabIndex:-1},"#"),n.headers.map((e,t)=>Xv.default.createElement("div",{key:e.key,className:0===t?"main-trackList-rowSectionStart":"main-trackList-rowSectionVariable","aria-colindex":t+2,"aria-sort":n.sortedHeader&&n.sortedHeader.key===e.key?n.sortedHeader.order:"none",tabIndex:-1},Xv.default.createElement("button",{className:"main-trackList-column "+r,tabIndex:-1,onClick:()=>{n.onHeaderClicked?.(e.key)}},Xv.default.createElement(_,{variant:"mesto"},e.label),n.sortedHeader&&n.sortedHeader.key===e.key&&a()))),Xv.default.createElement("div",{className:"main-trackList-rowSectionEnd","aria-colindex":n.headers.length+2,"aria-sort":"none",tabIndex:-1},Xv.default.createElement("button",{"aria-label":p(["tracklist.header.duration"]),className:"main-trackList-column main-trackList-durationHeader "+r,onClick:()=>{n.onHeaderClicked?.("duration")}},Xv.default.createElement("svg",{height:"16",width:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor"},Xv.default.createElement("path",{d:"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8z"}),Xv.default.createElement("path",{d:"M8 3.25a.75.75 0 01.75.75v3.25H11a.75.75 0 010 1.5H7.25V4A.75.75 0 018 3.25z"}))),n.sortedHeader&&"duration"===n.sortedHeader.key&&a())))}var e0=t(b());var t0=t(b());function n0(e){const[t,n]=(0,t0.useState)(y().LibraryAPI.containsSync(e));return(0,t0.useEffect)(()=>{y().LibraryAPI.contains(e).then(e=>{n(e[0])}).catch(console.error)},[e]),[t,n]}var h=t(b());function a0(n){var e=(0,h.useRef)(null);const a=function(t){const[e,n]=(0,e0.useState)(!1);return(0,e0.useEffect)(()=>{const e=new IntersectionObserver(e=>{n(e.some(e=>e.isIntersecting))},{rootMargin:"0px",threshold:0});return e.observe(t.current),()=>{e.disconnect()}},[t]),e}(e),[t,r]=(0,h.useState)(!1),[i,o]=n0(n.track.uri);(0,h.useEffect)(()=>{const e=y().LibraryAPI;if(a){const t=e=>{e.data.uris.some(e=>e===n.track.uri)&&("add"===e.data.operation?o(!0):"remove"===e.data.operation&&o(!1))};return e.getEvents().addListener("operation_complete",t),()=>{e.getEvents().removeListener("operation_complete",t)}}},[a,n.track.uri,o]);var l=h.default.createElement("div",{style:{height:"compact"===n.displayType?"32px":"54px"}}),s=h.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:p(["save_to_your_liked_songs"]),showDelay:100},h.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":p(["save_to_your_liked_songs"]),iconOnly:()=>h.default.createElement(by,{icon:"plus-alt",iconSize:16}),buttonSize:"sm",style:{padding:0,visibility:t?void 0:"hidden"},onClick:async function(){await y().LibraryAPI.add({uris:[n.track.uri]})}})),u=h.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:p(["remove_from_your_liked_songs"]),showDelay:100},h.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":p(["remove_from_your_liked_songs"]),iconOnly:()=>h.default.createElement(by,{icon:"check-alt-fill",iconSize:16}),buttonSize:"sm",style:{padding:0},onClick:async function(){await y().LibraryAPI.remove({uris:[n.track.uri]})},semanticColor:"essentialBrightAccent"})),c=h.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{iconOnly:()=>h.default.createElement(h.default.Fragment,null),buttonSize:"sm",style:{padding:0,visibility:t?void 0:"hidden"}});let d;switch(i){case!0:d=u;break;case!1:d=s;break;default:d=c}return h.default.createElement("div",{ref:e,onMouseEnter:()=>{r(!0)},onMouseLeave:()=>{r(!1)}},a?h.default.createElement(Spicetify.ReactComponent.RightClickMenu,{menu:n.getRowMenu(n.track)},h.default.createElement("div",{"aria-selected":n.selected,onClick:n.onClick,onDoubleClick:()=>{n.track.isPlayable&&n.onDoubleClick()},draggable:"true",onDragStart:e=>{n.dragHandler.draggable&&n.dragHandler.onDragStart(e)}},h.default.createElement("div",{className:`main-trackList-trackListRow main-trackList-trackListRowGrid ${n.active?"main-trackList-active":""} ${n.selected?"main-trackList-selected":""} `+("compact"===n.displayType?"main-trackList-rowCompactMode":""),style:{opacity:n.track.isPlayable?1:.4}},h.default.createElement("div",{className:"main-trackList-rowSectionIndex","aria-colindex":1,tabIndex:-1},h.default.createElement("div",{className:"main-trackList-rowMarker"},n.playing?h.default.createElement(h.default.Fragment,null,h.default.createElement("img",{className:"main-trackList-playingIcon",width:"14",height:"14",alt:"",src:"/images/equaliser-animated-green.gif"}),h.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:p(["playback-control.pause"]),showDelay:200},h.default.createElement("button",{className:"main-trackList-rowImagePlayButton","aria-label":p(["playback-control.pause"]),tabIndex:0,"aria-expanded":"false",onClick:()=>{Spicetify.Player.pause()}},h.default.createElement("svg",{height:"24",width:"24","aria-hidden":"true",fill:"currentColor",className:"main-trackList-rowPlayPauseIcon",viewBox:"0 0 24 24"},h.default.createElement("path",{d:"M5.7 3a.7.7 0 0 0-.7.7v16.6a.7.7 0 0 0 .7.7h2.6a.7.7 0 0 0 .7-.7V3.7a.7.7 0 0 0-.7-.7H5.7zm10 0a.7.7 0 0 0-.7.7v16.6a.7.7 0 0 0 .7.7h2.6a.7.7 0 0 0 .7-.7V3.7a.7.7 0 0 0-.7-.7h-2.6z"}))))):h.default.createElement(h.default.Fragment,null,h.default.createElement("span",{className:"main-trackList-number"},n.index),n.track.isPlayable&&h.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:p(["tracklist.a11y.play"],n.track.name,n.track.artists.map(e=>e.name).join(", ")),showDelay:200},h.default.createElement("button",{className:"main-trackList-rowImagePlayButton","aria-label":p(["tracklist.a11y.play"],n.track.name,n.track.artists.map(e=>e.name).join(", ")),onClick:()=>{n.active?Spicetify.Player.play():n.track.isPlayable&&n.onDoubleClick()},tabIndex:-1},h.default.createElement("svg",{height:"24",width:"24","aria-hidden":"true",className:"main-trackList-rowPlayPauseIcon",viewBox:"0 0 24 24","data-encore-id":"icon",fill:"currentColor"},h.default.createElement("path",{d:"M7.05 3.606l13.49 7.788a.7.7 0 010 1.212L7.05 20.394A.7.7 0 016 19.788V4.212a.7.7 0 011.05-.606z"}))))))),n.children&&h.Children.map(n.children,(e,t)=>h.default.createElement("div",{className:0===t?"main-trackList-rowSectionStart":"main-trackList-rowSectionVariable","aria-colindex":t+2,tabIndex:-1},e)),h.default.createElement("div",{className:"main-trackList-rowSectionEnd","aria-colindex":h.Children.count(n.children)+2,tabIndex:-1},d,h.default.createElement(_,{variant:"mesto",semanticColor:"textSubdued",className:"main-trackList-rowDuration"},Spicetify.Player.formatTime(n.track.duration)),h.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:p(["more.label.track"],n.track.name,n.track.artists.map(e=>e.name).join(", ")),showDelay:100},h.default.createElement("div",null,h.default.createElement(Spicetify.ReactComponent.ContextMenu,{trigger:"click",action:"toggle",menu:n.getRowMenu(n.track)},h.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":p(["more.label.track"],n.track.name,n.track.artists.map(e=>e.name).join(", ")),"aria-haspopup":"menu",iconOnly:()=>h.default.createElement(by,{icon:"more",iconSize:16}),buttonSize:"sm",style:{padding:0,visibility:t?void 0:"hidden"}})))))))):l)}function r0(n){const a=function(){const[e,t]=(0,$v.useState)(Spicetify.Player.data.item.uri);return(0,$v.useEffect)(()=>{function e(e){t(e?.data.item.uri??"")}return Spicetify.Player.addEventListener("songchange",e),()=>{Spicetify.Player.removeEventListener("songchange",e)}}),e}(),r=function(){const[e,t]=(0,Zv.useState)(Spicetify.Player.data.isPaused?"pause":"play");return(0,Zv.useEffect)(()=>{function e(e){t(e.data.isPaused?"pause":"play")}return Spicetify.Player.addEventListener("onplaypause",e),()=>{Spicetify.Player.removeEventListener("onplaypause",e)}}),e}(),[i,o]=(0,Wv.useState)(new Map),l=(0,Wv.useMemo)(()=>{var e=Array.from(i.entries());return 0===e.length?Spicetify.ReactHook.DragHandler({itemUris:[],dragLabelText:""}):Spicetify.ReactHook.DragHandler({itemUris:e.map(e=>e[0]),dragLabelText:1<i.size?p(["tracklist.drag.multiple.label","other"],i.size.toFixed()):e[0][1].name})},[i]);function s(e,t){e.ctrlKey?(i.has(t.uri)?i.delete(t.uri):i.set(t.uri,t),o(new Map(i))):o(new Map([[t.uri,t]]))}return Wv.default.createElement("div",{className:"contentSpacing"},Wv.default.createElement("div",{role:"grid","aria-rowcount":n.tracks.length,"aria-colcount":n.headers.length+2,"aria-label":n.gridLabel,className:"main-trackList-trackList main-trackList-indexable",tabIndex:0},Wv.default.createElement(Qv,{headers:n.headers,sortedHeader:n.sortedHeader,onHeaderClicked:n.onHeaderClicked}),Wv.default.createElement("div",{className:"compact"===n.displayType?Kv["display-list-compact"]:Kv["display-list"]},n.tracks.map((t,e)=>Wv.default.createElement(a0,{key:t.uri,track:t,index:n.useTrackNumber?t.trackNumber:e+1,selected:i.has(t.uri),active:a===t.uri,playing:a===t.uri&&"play"===r,onClick:e=>{s(e,t)},onDoubleClick:()=>{n.onPlayTrack(t.uri)},dragHandler:l,displayType:n.displayType,getRowMenu:n.getRowMenu},n.getRowContent(t))),n.subtracks.map(e=>Wv.default.createElement(Wv.default.Fragment,null,e.headerRow,e.tracks.map((t,e)=>Wv.default.createElement(a0,{key:t.uri,track:t,index:n.useTrackNumber?t.trackNumber:e+1,selected:i.has(t.uri),active:a===t.uri,playing:a===t.uri&&"play"===r,onClick:e=>{s(e,t)},onDoubleClick:()=>{n.onPlayTrack(t.uri)},dragHandler:l,displayType:n.displayType,getRowMenu:n.getRowMenu},n.getRowContent(t))))))))}var i0=t(b());function o0(e){return i0.default.createElement(_,{variant:"mesto"},i0.default.createElement("a",{className:"standalone-ellipsis-one-line",dir:"auto",href:"#",tabIndex:-1,onClick:()=>{e.onAlbumClick(e.track.album.uri)}},e.track.album.name))}var l0=t(b()),s0=t(b());function u0(t){return s0.default.createElement("div",{className:"main-trackList-rowMainContent"},s0.default.createElement(_,{className:"main-trackList-rowTitle standalone-ellipsis-one-line",variant:"ballad",semanticColor:"textBase"},t.track.name),t.withArtists&&s0.default.createElement(_,{className:"main-trackList-rowSubTitle standalone-ellipsis-one-line",variant:"mesto",semanticColor:"textSubdued"},t.track.artists.map(e=>s0.default.createElement("a",{dir:"auto",href:"#",tabIndex:-1,onClick:()=>{t.onArtistClick(e.uri)},key:e.uri},e.name)).reduce((e,t)=>null===e?[t]:[...e,s0.default.createElement(s0.default.Fragment,null,", "),t],null)))}function c0(e){const t=l0.default.createElement("div",{className:"main-trackList-rowImage main-trackList-rowImageFallback"},l0.default.createElement("svg",{role:"img",height:"16",width:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor"},l0.default.createElement("path",{d:"M10 2v9.5a2.75 2.75 0 11-2.75-2.75H8.5V2H10zm-1.5 8.25H7.25A1.25 1.25 0 108.5 11.5v-1.25z"})));var n=0===(n=e.track.backingTrack.album).images.length?"":n.images[0].url;return l0.default.createElement(l0.default.Fragment,null,""!==n?l0.default.createElement("img",{loading:"eager",src:n,className:"main-image-image main-trackList-rowImage main-image-loaded",width:"40",height:"40",onError:e=>e.currentTarget.outerHTML=Spicetify.ReactDOMServer.renderToString(t)}):t,l0.default.createElement(u0,{track:e.track,withArtists:e.withArtists,onArtistClick:e.onArtistClick}))}var d0,m0,f0='<path d="M16 15H2v-1.5h14V15zm0-4.5H2V9h14v1.5zm-8.034-6A5.484 5.484 0 0 1 7.187 6H13.5a2.5 2.5 0 0 0 0-5H7.966c.159.474.255.978.278 1.5H13.5a1 1 0 1 1 0 2H7.966zM2 2V0h1.5v2h2v1.5h-2v2H2v-2H0V2h2z"></path>',p0=t(b()),h0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},g0=(d0="Radio",m0=[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]],(Id=(0,p0.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:a,children:r,...i},o)=>(0,p0.createElement)("svg",{ref:o,...h0,width:t,height:t,stroke:e,strokeWidth:a?24*Number(n)/Number(t):n,className:"lucide lucide-"+d0.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),...i},[...m0.map(([e,t])=>(0,p0.createElement)(e,t)),...(Array.isArray(r)?r:[r])||[]]))).displayName=""+d0,Id),y0=t(b()),v0=t(b()),b0=t(b());function E0(e){return b0.default.createElement(Spicetify.ReactComponent.Menu,{className:"encore-dark-theme main-contextMenu-menu"},e.children)}function w0(t){return v0.default.createElement(E0,null,t.artists.map(e=>v0.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:()=>{t.onArtistClick(e.uri)},key:e.uri},v0.default.createElement("span",null,e.name))))}var _0=t(b());function x0(n){const[e,a]=(0,_0.useState)([]);return(0,_0.useEffect)(()=>{!async function(){const t=await y().UserAPI.getUser();var e=(await my()).filter(e=>e.owner.uri===t.uri);a(e)}()},[]),_0.default.createElement(E0,null,e.map(t=>_0.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:async()=>{var e;e=t.uri,await y().PlaylistAPI.add(e,n.tracksUri,{after:"end"})},key:t.uri},_0.default.createElement("span",null,t.name))))}var S0=t(b());function k0(e){var t=Spicetify.ReactDOMServer.renderToString(S0.default.createElement(Spicetify.ReactComponent.MenuItem,{leadingIcon:e.leadingIcon,trailingIcon:S0.default.createElement("svg",{height:"16",width:"16","aria-hidden":"true",className:"main-contextMenu-subMenuIcon",viewBox:"0 0 16 16",fill:"currentColor"},S0.default.createElement("path",{d:"M14 10 8 4l-6 6h12z"}))},S0.default.createElement("span",null,e.label)));return S0.default.createElement(Spicetify.ReactComponent.ContextMenu,{trigger:"click",action:"toggle",placement:"right-end",renderInline:!0,menu:e.submenu},S0.default.createElement("div",{role:"menu",tabIndex:0,onMouseEnter:e=>{e.currentTarget.click()},dangerouslySetInnerHTML:{__html:t}}))}function I0(t){var[e]=n0(t.track.uri);let n;switch(e){case!0:n=y0.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:async function(){await y().LibraryAPI.remove({uris:[t.track.uri]})},leadingIcon:y0.default.createElement(by,{icon:"check-alt-fill",iconSize:16,semanticColor:"essentialBrightAccent"})},y0.default.createElement("span",null,p(["remove_from_your_liked_songs"])));break;case!1:n=y0.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:async function(){await y().LibraryAPI.add({uris:[t.track.uri]})},leadingIcon:y0.default.createElement(by,{icon:"plus-alt",iconSize:16})},y0.default.createElement("span",null,p(["save_to_your_liked_songs"])));break;default:n=y0.default.createElement(Spicetify.ReactComponent.MenuItem,null,y0.default.createElement("span",null,"..."))}return y0.default.createElement(E0,null,y0.default.createElement(k0,{label:p(["contextmenu.add-to-playlist"]),submenu:y0.default.createElement(x0,{tracksUri:[t.track.uri]}),leadingIcon:y0.default.createElement(by,{icon:"plus2px",iconSize:16})}),n,y0.default.createElement(Spicetify.ReactComponent.MenuItem,{divider:"after",onClick:async function(){await y().PlayerAPI.addToQueue([{uri:t.track.uri}])},leadingIcon:y0.default.createElement(by,{iconPath:f0,iconSize:16})},y0.default.createElement("span",null,p(["contextmenu.add-to-queue"]))),1===t.track.artists.length?y0.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:()=>{t.onArtistClick(t.track.artists[0].uri)},leadingIcon:y0.default.createElement(by,{icon:"artist",iconSize:16})},y0.default.createElement("span",null,p(["contextmenu.go-to-artist"]))):y0.default.createElement(k0,{label:p(["contextmenu.go-to-artist"]),submenu:y0.default.createElement(w0,{artists:t.track.artists,onArtistClick:t.onArtistClick}),leadingIcon:y0.default.createElement(by,{icon:"artist",iconSize:16})}),y0.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:()=>{t.onAlbumClick(t.track.album.uri)},leadingIcon:y0.default.createElement(by,{icon:"album",iconSize:16})},y0.default.createElement("span",null,p(["contextmenu.go-to-album"]))),!Spicetify.URI.isLocalTrack(t.track.uri)&&y0.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:async function(){var e=await Um(t.track.uri);y().History.push(Spicetify.URI.fromString(e).toURLPath(!0))},leadingIcon:y0.default.createElement(g0,{size:16})},y0.default.createElement("span",null,p(["contextmenu.go-to-song-radio"]))))}var C0=t(b());function N0(t){let e;return"lg"===t.size?e="large":"md"===t.size?e="medium":"sm"===t.size&&(e="small"),C0.default.createElement(Spicetify.ReactComponent.ButtonPrimary,{"aria-label":p(["play"]),size:e,buttonSize:t.size,disabled:t.disabled,onClick:e=>{e.stopPropagation(),t.onClick()},iconOnly:()=>C0.default.createElement(by,{icon:"play"})})}var T0=t(b()),A0=t(b()),R0={"button-wrapper":"CreatePlaylistModal-module__button-wrapper___bVbk-_playlistDmaker",fieldset:"CreatePlaylistModal-module__fieldset___tZbPT_playlistDmaker"},O0=r.object({playlistName:r.string().nonempty({message:"Name cannot be empty"}),parentFolder:r.string().optional()});function M0(){const[e,i]=A0.default.useState(!1),[t,n]=A0.default.useState([]),{workflowName:a,result:o}=nf(Jl(e=>({workflowName:e.workflowName,result:e.result}))),{formState:{errors:r,isValid:l},getValues:s,control:u}=mu({mode:"onChange",defaultValues:{playlistName:"",parentFolder:void 0},values:{playlistName:a},resolver:vu(O0)}),c=(0,A0.useCallback)(async()=>{i(!0);var e=y().RootlistAPI,t=y().PlaylistAPI,{playlistName:n,parentFolder:a}=s();try{var r=await e.createPlaylist(n,{after:void 0!==a&&""!==a?{uri:a}:"end"});await t.add(r,o.map(e=>e.uri),{after:"end"})}catch(e){return console.error("Error creating playlist",e),Spicetify.showNotification("Error creating playlist",!1),void i(!1)}i(!1),Spicetify.PopupModal.hide()},[s,o]);return(0,A0.useEffect)(()=>{!async function(){var e=await async function(){var e=await y().RootlistAPI.getContents();const t=e=>e.filter(cy).flatMap(e=>[e,...t(e.items)]);return t(e.items)}();n(e.map(e=>({uri:e.uri,name:e.name})))}()},[]),A0.default.createElement("div",null,A0.default.createElement(_,{paddingBottom:"8px",weight:"bold",elementType:"p"},"Save ",o.length," tracks to a new playlist"),A0.default.createElement("fieldset",{className:R0.fieldset,disabled:e},A0.default.createElement("label",null,A0.default.createElement(_,{elementType:"small",paddingBottom:"4px"},"Playlist name"),A0.default.createElement(py,{placeholder:"Playlist name",control:u,name:"playlistName"})),A0.default.createElement(Wf,{error:r.playlistName}),A0.default.createElement("label",null,A0.default.createElement(_,{elementType:"small",paddingBottom:"4px"},"Parent folder"),A0.default.createElement(ep,{label:"Root",name:"parentFolder",control:u,items:t.map(e=>({label:e.name,value:e.uri}))})),A0.default.createElement("div",{className:R0["button-wrapper"]},A0.default.createElement(Spicetify.ReactComponent.ButtonPrimary,{disabled:!l,buttonSize:"sm",onClick:async()=>{await c()}},"Create playlist"))))}var D0={"grid-container":"ResultPage-module__grid-container___xqfAg_playlistDmaker",padding:"ResultPage-module__padding___d6g1j_playlistDmaker",main:"ResultPage-module__main___WzLf0_playlistDmaker"};function P0(){const t=y().History,n=nf(Jl(e=>({result:e.result})))["result"];var e,a,r,i,o=(0,T0.useMemo)(()=>n.map(e=>new nm(e)),[n]),l=[{key:"title",label:p(["tracklist.header.title"])},{key:"album",label:p(["tracklist.header.album"])},{key:"source",label:"Source"}];const s=async e=>{e=e?{uri:e}:void 0;await y().PlayerAPI.play({uri:"",pages:[{items:n}]},{},{skipTo:e})};return T0.default.createElement("div",{className:"app-container"},T0.default.createElement("div",{className:Spicetify.classnames(D0["grid-container"],"gap-panel h-full w-full")},T0.default.createElement("div",{className:Spicetify.classnames(D0.padding,"panel")}),T0.default.createElement("div",{className:Spicetify.classnames(D0.main,"panel")},T0.default.createElement("div",{className:"main-actionBar-ActionBar contentSpacing"},T0.default.createElement("div",{className:"main-actionBar-ActionBarRow"},T0.default.createElement("div",{className:"main-playButton-PlayButton"},T0.default.createElement(N0,{disabled:0===o.length,size:"lg",onClick:()=>{s()}})),T0.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:"Create playlist from tracks"},T0.default.createElement(Spicetify.ReactComponent.ButtonSecondary,{disabled:0===o.length,"aria-label":"Create playlist from tracks",iconOnly:()=>T0.default.createElement(_f,{size:30}),buttonSize:"lg",onClick:()=>{Spicetify.PopupModal.display({title:"Create playlist",content:T0.default.createElement(M0,null),isLarge:!0})},className:D0["help-button"]})),0<o.length&&T0.default.createElement("p",null,p(["tracklist-header.songs-counter",1===o.length?"one":"other"],o.length.toFixed()),T0.default.createElement("span",{className:"main-entityHeader-divider"}),(e=o.reduce((e,t)=>e+t.duration,0),a=Math.floor(e/1e3%60),r=Math.floor(e/1e3/60%60),e=Math.floor(e/1e3/60/60%24),i=[],0!==e&&i.push(p(["time.hours.short",1===e?"one":"other"],e.toFixed())),0!==r&&i.push(p(["time.minutes.short",1===r?"one":"other"],r.toFixed())),0===e&&0!==a&&i.push(p(["time.seconds.short",1===a?"one":"other"],a.toFixed())),i.join(" "))))),T0.default.createElement(r0,{tracks:o,subtracks:[],gridLabel:p(["local-files"]),useTrackNumber:!1,onPlayTrack:e=>{s(e)},headers:l,getRowContent:e=>{return[T0.default.createElement(c0,{track:e,withArtists:!0,key:e.uri,onArtistClick:e=>{t.push("/artist/"+Pu(Spicetify.URI.fromString(e)))}}),T0.default.createElement(o0,{track:e,key:e.uri,onAlbumClick:e=>{t.push("/album/"+Pu(Spicetify.URI.fromString(e)))}}),T0.default.createElement(_,{key:e.uri,variant:"mesto",className:"standalone-ellipsis-one-line"},e.source)]},displayType:"list",getRowMenu:e=>T0.default.createElement(I0,{track:e,onArtistClick:e=>{var t=y().History,e=Spicetify.URI.fromString(e).toURLPath(!0);t.push(e)},onAlbumClick:e=>{var t=y().History,e=Spicetify.URI.fromString(e).toURLPath(!0);t.push(e)}})}))))}var Ad="/playlist-maker",L0=Ad+"/editor",F0=Ad+"/result",V0=[{key:"Editor",href:L0,label:"Editor"},{key:"Result",href:F0,label:"Result"}];var j0=function(){(0,ye.useEffect)(()=>{!async function(){await Ee("playlist-maker",we,{title:"New in v"+we,content:ye.default.createElement("p",null,ye.default.createElement("ul",null,_e.map(e=>ye.default.createElement("li",{key:e},e)))),isLarge:!0})}()},[]);const t=y().History,n=t.location;let e=ye.default.createElement(ye.default.Fragment,null);switch(n.pathname){case L0:e=ye.default.createElement(Hv,null);break;case F0:e=ye.default.createElement(P0,null);break;default:t.replace(L0)}var a=document.querySelector(".main-topBar-topbarContentWrapper");return ye.default.createElement(ye.default.Fragment,null,e,null!==a&&Spicetify.ReactDOM.createPortal(ye.default.createElement(Me,{onItemClicked:e=>{t.push(e.href)},items:V0,activeItem:V0.find(e=>e.href.startsWith(n.pathname))??V0[0]}),a))},B0=t(b());return n=pe,j(R({},"__esModule",{value:!0}),n)})();const render=()=>playlistDmaker.default();