var playlistDmaker=(()=>{var T,R=Object.create,M=Object.defineProperty,A=Object.getOwnPropertyDescriptor,D=Object.getOwnPropertyNames,F=Object.getPrototypeOf,V=Object.prototype.hasOwnProperty,e=(e,t)=>function(){return t||(0,e[D(e)[0]])((t={exports:{}}).exports,t),t.exports},j=(t,n,r,a)=>{if(n&&"object"==typeof n||"function"==typeof n)for(let e of D(n))V.call(t,e)||e===r||M(t,e,{get:()=>n[e],enumerable:!(a=A(n,e))||a.enumerable});return t},t=(e,t,n)=>(n=null!=e?R(F(e)):{},j(!t&&e&&e.__esModule?n:M(n,"default",{value:e,enumerable:!0}),e)),b=e({"external-global-plugin:react"(e,t){t.exports=Spicetify.React}}),$=e({"../../node_modules/spcr-whats-new/node_modules/semver/internal/debug.js"(e,t){var n="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};t.exports=n}}),H=e({"../../node_modules/spcr-whats-new/node_modules/semver/internal/constants.js"(e,t){var n=Number.MAX_SAFE_INTEGER||9007199254740991;t.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}}}),U=e({"../../node_modules/spcr-whats-new/node_modules/semver/internal/re.js"(e,t){var{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:a}=H(),i=$(),o=(e=t.exports={}).re=[],s=e.safeRe=[],l=e.src=[],u=e.t={},c=0,t="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",a],[t,r]],a=(e,t,n)=>{var r=(e=>{for(var[t,n]of d)e=e.split(t+"*").join(`${t}{0,${n}}`).split(t+"+").join(`${t}{1,${n}}`);return e})(t),a=c++;i(e,a,t),u[e]=a,l[a]=t,o[a]=new RegExp(t,n?"g":void 0),s[a]=new RegExp(r,n?"g":void 0)};a("NUMERICIDENTIFIER","0|[1-9]\\d*"),a("NUMERICIDENTIFIERLOOSE","\\d+"),a("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${t}*`),a("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),a("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),a("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),a("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),a("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),a("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),a("BUILDIDENTIFIER",t+"+"),a("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),a("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),a("FULL",`^${l[u.FULLPLAIN]}$`),a("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),a("LOOSE",`^${l[u.LOOSEPLAIN]}$`),a("GTLT","((?:<|>)?=?)"),a("XRANGEIDENTIFIERLOOSE",l[u.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*"),a("XRANGEIDENTIFIER",l[u.NUMERICIDENTIFIER]+"|x|X|\\*"),a("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),a("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),a("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),a("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),a("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),a("COERCERTL",l[u.COERCE],!0),a("LONETILDE","(?:~>?)"),a("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",a("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),a("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),a("LONECARET","(?:\\^)"),a("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",a("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),a("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),a("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),a("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),a("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",a("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),a("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),a("STAR","(<|>)?=?\\s*\\*"),a("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),a("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}}),Z=e({"../../node_modules/spcr-whats-new/node_modules/semver/internal/parse-options.js"(e,t){var n=Object.freeze({loose:!0}),r=Object.freeze({});t.exports=e=>e?"object"!=typeof e?n:e:r}}),K=e({"../../node_modules/spcr-whats-new/node_modules/semver/internal/identifiers.js"(e,t){var a=/^[0-9]+$/,n=(e,t)=>{var n=a.test(e),r=a.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r||(!r||n)&&e<t?-1:1};t.exports={compareIdentifiers:n,rcompareIdentifiers:(e,t)=>n(t,e)}}}),W=e({"../../node_modules/spcr-whats-new/node_modules/semver/classes/semver.js"(e,t){var a=$(),{MAX_LENGTH:n,MAX_SAFE_INTEGER:r}=H(),{safeRe:i,t:o}=U(),s=Z(),l=K()["compareIdentifiers"],u=class{constructor(e,t){if(t=s(t),e instanceof u){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>n)throw new TypeError(`version is longer than ${n} characters`);a("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;t=e.trim().match(t.loose?i[o.LOOSE]:i[o.FULL]);if(!t)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+t[1],this.minor=+t[2],this.patch=+t[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");t[4]?this.prerelease=t[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){var t=+e;if(0<=t&&t<r)return t}return e}):this.prerelease=[],this.build=t[5]?t[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.`+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version}toString(){return this.version}compare(e){if(a("SemVer.compare",this.version,this.options,e),!(e instanceof u)){if("string"==typeof e&&e===this.version)return 0;e=new u(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof u||(e=new u(e,this.options)),l(this.major,e.major)||l(this.minor,e.minor)||l(this.patch,e.patch)}comparePre(e){if(e instanceof u||(e=new u(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{var n=this.prerelease[t],r=e.prerelease[t];if(a("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return l(n,r)}while(++t)}compareBuild(e){e instanceof u||(e=new u(e,this.options));let t=0;do{var n=this.build[t],r=e.build[t];if(a("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return l(n,r)}while(++t)}inc(e,t,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":var r=Number(n)?1:0;if(!t&&!1===n)throw new Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[r];else{let e=this.prerelease.length;for(;0<=--e;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);if(-1===e){if(t===this.prerelease.join(".")&&!1===n)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(r)}}if(t){let e=!1===n?[t]:[t,r];(0!==l(this.prerelease[0],t)||isNaN(this.prerelease[1]))&&(this.prerelease=e)}break;default:throw new Error("invalid increment argument: "+e)}return this.raw=this.format(),this.build.length&&(this.raw+="+"+this.build.join(".")),this}};t.exports=u}}),X=e({"../../node_modules/spcr-whats-new/node_modules/semver/functions/compare.js"(e,t){var r=W();t.exports=(e,t,n)=>new r(e,n).compare(new r(t,n))}}),n=e({"../../node_modules/spcr-whats-new/node_modules/semver/functions/gt.js"(e,t){var r=X();t.exports=(e,t,n)=>0<r(e,t,n)}}),Y=e({"external-global-plugin:react-dom"(e,t){t.exports=Spicetify.ReactDOM}}),q=e({"../../node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.development.js"(e){"use strict";function s(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a="error",i=n,o=c.ReactDebugCurrentFrame.getStackAddendum();""!==o&&(e+="%s",i=i.concat([o])),(o=i.map(function(e){return String(e)})).unshift("Warning: "+e),Function.prototype.apply.call(console[a],console,o)}function l(e){var t=e.getSnapshot,e=e.value;try{var n=t();return!d(e,n)}catch(e){return 1}}var u,c,d,f,m,p,h,g,y,t;"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error),u=b(),c=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,d="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},f=u.useState,m=u.useEffect,p=u.useLayoutEffect,h=u.useDebugValue,y=g=!1,t=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),t=void 0!==u.useSyncExternalStore?u.useSyncExternalStore:!t?function(e,t,n){return t()}:function(e,t,n){g||void 0!==u.startTransition&&(g=!0,s("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var r=t(),a=(y||(a=t(),d(r,a))||(s("The result of getSnapshot should be cached to avoid an infinite loop"),y=!0),f({inst:{value:r,getSnapshot:t}})),i=a[0].inst,o=a[1];return p(function(){i.value=r,i.getSnapshot=t,l(i)&&o({inst:i})},[e,r,t]),m(function(){l(i)&&o({inst:i});return e(function(){l(i)&&o({inst:i})})},[e]),h(r),r},e.useSyncExternalStore=t,"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}}),G=e({"../../node_modules/use-sync-external-store/shim/index.js"(e,t){"use strict";t.exports=q()}}),J=e({"../../node_modules/use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.development.js"(e){"use strict";var t,n,c,i,d,f,m,p;"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error),t=b(),n=G(),c="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=n.useSyncExternalStore,d=t.useRef,f=t.useEffect,m=t.useMemo,p=t.useDebugValue,e.useSyncExternalStoreWithSelector=function(e,n,o,s,l){var u;null===(r=d(null)).current?(u={hasValue:!1,value:null},r.current=u):u=r.current;var t=(r=m(function(){var r,a,i=!1,e=function(e){if(i)return t=a,c(r,e)||(n=s(e),void 0!==l&&l(t,n))?t:(r=e,a=n);i=!0;var t=s(r=e);if(void 0!==l&&u.hasValue){var n=u.value;if(l(n,t))return a=n}return a=t},t=void 0===o?null:o;return[function(){return e(n())},null===t?void 0:function(){return e(t())}]},[n,o,s,l]))[0],r=r[1],a=i(e,t,r);return f(function(){u.hasValue=!0,u.value=a},[a]),p(a),a},"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)}}),r=e({"../../node_modules/use-sync-external-store/shim/with-selector.js"(e,t){"use strict";t.exports=J()}}),Q=e({"../../node_modules/react-range/lib/types.js"(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Direction=void 0,e.Direction={Right:"to right",Left:"to left",Down:"to bottom",Up:"to top"}}}),ee=e({"../../node_modules/react-range/lib/utils.js"(l){"use strict";var y=l&&l.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||((r=r||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},r=(Object.defineProperty(l,"__esModule",{value:!0}),l.isIOS=l.useThumbOverlap=l.assertUnreachable=l.voidFn=l.getTrackBackground=l.replaceAt=l.schd=l.translate=l.getClosestThumbIndex=l.translateThumbs=l.getPaddingAndBorder=l.getMargin=l.checkInitialOverlap=l.checkValuesAgainstBoundaries=l.checkBoundaries=l.isVertical=l.relativeValue=l.normalizeValue=l.isStepDivisible=l.isTouchEvent=l.getStepDecimals=void 0,b()),o=Q();function s(e){return e===o.Direction.Up||e===o.Direction.Down}function a(e,t,n){e.style.transform="translate(".concat(t,"px, ").concat(n,"px)")}l.getStepDecimals=function(e){e=e.toString().split(".")[1];return e?e.length:0},l.isTouchEvent=function(e){return e.touches&&e.touches.length||e.changedTouches&&e.changedTouches.length},l.isStepDivisible=function(e,t,n){return t=Number(((t-e)/n).toFixed(8)),parseInt(t.toString(),10)===t},l.normalizeValue=function(e,t,n,r,a,i,o){var s=1e11;if(e=Math.round(e*s)/s,!i){var i=o[t-1],o=o[t+1];if(i&&e<i)return i;if(o&&o<e)return o}return r<e?r:e<n?n:(t=Math.floor(e*s-n*s)%Math.floor(a*s),i=Math.floor(e*s-Math.abs(t)),o=0==t?e:i/s,r=Math.abs(t/s)<a/2?o:o+a,n=(0,l.getStepDecimals)(a),parseFloat(r.toFixed(n)))},l.relativeValue=function(e,t,n){return(e-t)/(n-t)},l.isVertical=s,l.checkBoundaries=function(e,t,n){if(n<=t)throw new RangeError("min (".concat(t,") is equal/bigger than max (").concat(n,")"));if(e<t)throw new RangeError("value (".concat(e,") is smaller than min (").concat(t,")"));if(n<e)throw new RangeError("value (".concat(e,") is bigger than max (").concat(n,")"))},l.checkValuesAgainstBoundaries=function(e,t,n){return e<t?t:n<e?n:e},l.checkInitialOverlap=function(n){if(!(n.length<2||n.slice(1).every(function(e,t){return n[t]<=e})))throw new RangeError("values={[".concat(n,"]} needs to be sorted when allowOverlap={false}"))},l.getMargin=function(e){return e=window.getComputedStyle(e),{top:parseInt(e["margin-top"],10),bottom:parseInt(e["margin-bottom"],10),left:parseInt(e["margin-left"],10),right:parseInt(e["margin-right"],10)}},l.getPaddingAndBorder=function(e){return e=window.getComputedStyle(e),{top:parseInt(e["padding-top"],10)+parseInt(e["border-top-width"],10),bottom:parseInt(e["padding-bottom"],10)+parseInt(e["border-bottom-width"],10),left:parseInt(e["padding-left"],10)+parseInt(e["border-left-width"],10),right:parseInt(e["padding-right"],10)+parseInt(e["border-right-width"],10)}},l.translateThumbs=function(e,n,t){var r=t?-1:1;e.forEach(function(e,t){return a(e,r*n[t].x,n[t].y)})},l.getClosestThumbIndex=function(e,t,n,r){for(var a=0,i=u(e[0],t,n,r),o=1;o<e.length;o++){var s=u(e[o],t,n,r);s<i&&(i=s,a=o)}return a},l.translate=a;l.schd=function(n){var r,a=null;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];r=e,a=a||requestAnimationFrame(function(){a=null,n.apply(void 0,r)})}},l.replaceAt=function(e,t,n){return(e=e.slice(0))[t]=n,e},l.getTrackBackground=function(e){var t=e.values,r=e.colors,n=e.min,a=e.max,i=void 0===(i=e.direction)?o.Direction.Right:i;return(e=void 0!==(e=e.rtl)&&e)&&i===o.Direction.Right?i=o.Direction.Left:e&&o.Direction.Left&&(i=o.Direction.Right),e=t.slice(0).sort(function(e,t){return e-t}).map(function(e){return(e-n)/(a-n)*100}).reduce(function(e,t,n){return"".concat(e,", ").concat(r[n]," ").concat(t,"%, ").concat(r[n+1]," ").concat(t,"%")},""),"linear-gradient(".concat(i,", ").concat(r[0]," 0%").concat(e,", ").concat(r[r.length-1]," 100%)")},l.voidFn=function(){},l.assertUnreachable=function(e){throw new Error("Didn't expect to get here")};function v(e,t,o,s,l,u,c){function d(r){var a=m(o[r],s[r],l,u,c),i=t[r].x;t.forEach(function(e,t){var e=e.x,n=m(o[t],s[t],l,u,c);r!==t&&(e<=i&&i<=e+n||e<=i+a&&i+a<=e+n)&&!f.includes(t)&&(f.push(r),f.push(t),f=y(y([],f,!0),[r,t],!1),d(t))})}void 0===c&&(c=function(e){return e});var f=[];return d(e),Array.from(new Set(f.sort()))}var m=function(e,r,a,i,o){return void 0===o&&(o=function(e){return e}),Math.ceil(y([e],Array.from(e.children),!0).reduce(function(e,t){var n=Math.ceil(t.getBoundingClientRect().width);return t.innerText&&t.innerText.includes(a)&&0===t.childElementCount&&((t=t.cloneNode(!0)).innerHTML=o(r.toFixed(i)),t.style.visibility="hidden",document.body.appendChild(t),n=Math.ceil(t.getBoundingClientRect().width),document.body.removeChild(t)),e<n?n:e},e.getBoundingClientRect().width))};function u(e,t,n,r){var e=e.getBoundingClientRect(),a=e.left,i=e.top,o=e.width,e=e.height;return s(r)?Math.abs(n-(i+e/2)):Math.abs(t-(a+o/2))}l.useThumbOverlap=function(u,c,d,e,f,m){void 0===f&&(f=" - "),void 0===m&&(m=function(e){return e});var p=(0,l.getStepDecimals)(e=void 0===e?.1:e),e=(0,r.useState)({}),t=e[0],h=e[1],e=(0,r.useState)(m(c[d].toFixed(p))),n=e[0],g=e[1];return(0,r.useEffect)(function(){var e,a,t,n,r,i,o,s,l;!u||(l=u.getThumbs()).length<1||(e={},a=u.getOffsets(),t=v(d,a,l,c,f,p,m),n=m(c[d].toFixed(p)),t.length&&(r=t.reduce(function(e,t,n,r){return e.length?y(y([],e,!0),[a[r[n]].x],!1):[a[r[n]].x]},[]),Math.min.apply(Math,r)===a[d].x?(i=[],t.forEach(function(e){i.push(c[e].toFixed(p))}),n=Array.from(new Set(i.sort(function(e,t){return parseFloat(e)-parseFloat(t)}))).map(m).join(f),o=Math.min.apply(Math,r),s=Math.max.apply(Math,r),l=l[t[r.indexOf(s)]].getBoundingClientRect().width,e.left="".concat(Math.abs(o-(s+l))/2,"px"),e.transform="translate(-50%, 0)"):e.visibility="hidden"),g(n),h(e))},[u,c]),[n,t]};l.isIOS=function(){var e=(null==(e=navigator.userAgentData)?void 0:e.platform)||navigator.platform;return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(e)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}}}),ne=e({"../../node_modules/react-range/lib/Range.js"(e){"use strict";var r,t,n=e&&e.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=e&&e.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&("get"in a?t.__esModule:!a.writable&&!a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,a)}:function(e,t,n,r){e[r=void 0===r?n:r]=t[n]}),i=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&a(t,e,n);return i(t,e),t},p=e&&e.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,a=0,i=t.length;a<i;a++)!r&&a in t||((r=r||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))},s=(Object.defineProperty(e,"__esModule",{value:!0}),o(b())),_=ee(),x=Q(),l=["ArrowRight","ArrowUp","k","PageUp"],u=["ArrowLeft","ArrowDown","j","PageDown"],o=(t=s.Component,n(c,t),c.prototype.componentDidMount=function(){var t=this,e=this.props,n=e.values,r=e.min,a=e.step;this.resizeObserver=window.ResizeObserver?new window.ResizeObserver(this.onResize):{observe:function(){return window.addEventListener("resize",t.onResize)},unobserve:function(){return window.removeEventListener("resize",t.onResize)}},document.addEventListener("touchstart",this.onMouseOrTouchStart,{passive:!1}),document.addEventListener("mousedown",this.onMouseOrTouchStart,{passive:!1}),this.props.allowOverlap||(0,_.checkInitialOverlap)(this.props.values),this.props.values.forEach(function(e){return(0,_.checkBoundaries)(e,t.props.min,t.props.max)}),this.resizeObserver.observe(this.trackRef.current),(0,_.translateThumbs)(this.getThumbs(),this.getOffsets(),this.props.rtl),this.calculateMarkOffsets(),n.forEach(function(e){(0,_.isStepDivisible)(r,e,a)||console.warn("The `values` property is in conflict with the current `step`, `min`, and `max` properties. Please provide values that are accessible using the min, max, and step values.")})},c.prototype.componentDidUpdate=function(e,t){var n=this.props,r=n.max,a=n.min,i=n.step,o=n.values,n=n.rtl;e.max===r&&e.min===a&&e.step===i||this.updateMarkRefs(this.props),(0,_.translateThumbs)(this.getThumbs(),this.getOffsets(),n),e.max===r&&e.min===a&&e.step===i&&t.markOffsets.length===this.state.markOffsets.length||(this.calculateMarkOffsets(),o.forEach(function(e){(0,_.isStepDivisible)(a,e,i)||console.warn("The `values` property is in conflict with the current `step`, `min`, and `max` properties. Please provide values that are accessible using the min, max, and step values.")}))},c.prototype.componentWillUnmount=function(){document.removeEventListener("mousedown",this.onMouseOrTouchStart,{passive:!1}),document.removeEventListener("mousemove",this.schdOnMouseMove),document.removeEventListener("touchmove",this.schdOnTouchMove),document.removeEventListener("touchstart",this.onMouseOrTouchStart),document.removeEventListener("mouseup",this.schdOnEnd),document.removeEventListener("touchend",this.schdOnEnd),this.resizeObserver.unobserve(this.trackRef.current)},c.prototype.render=function(){var r=this,e=this.props,a=e.label,i=e.labelledBy,t=e.renderTrack,o=e.renderThumb,n=e.renderMark,s=void 0===n?function(){return null}:n,l=e.values,u=e.min,c=e.max,d=e.allowOverlap,f=e.disabled,n=this.state,e=n.draggedThumbIndex,m=n.thumbZIndexes,n=n.markOffsets;return t({props:{style:{transform:"scale(1)",cursor:-1<e?"grabbing":this.props.draggableTrack?(0,_.isVertical)(this.props.direction)?"ns-resize":"ew-resize":1!==l.length||f?"inherit":"pointer"},onMouseDown:f?_.voidFn:this.onMouseDownTrack,onTouchStart:f?_.voidFn:this.onTouchStartTrack,ref:this.trackRef},isDragged:-1<this.state.draggedThumbIndex,disabled:f,children:p(p([],n.map(function(e,t,n){return s({props:{style:r.props.direction===x.Direction.Left||r.props.direction===x.Direction.Right?{position:"absolute",left:"".concat(e[0],"px"),marginTop:"".concat(e[1],"px")}:{position:"absolute",top:"".concat(e[0],"px"),marginLeft:"".concat(e[1],"px")},key:"mark".concat(t),ref:r.markRefs[t]},index:t})}),!0),l.map(function(e,t){var n=r.state.draggedThumbIndex===t;return o({index:t,value:e,isDragged:n,props:{style:{position:"absolute",zIndex:m[t],cursor:f?"inherit":n?"grabbing":"grab",userSelect:"none",touchAction:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},key:t,tabIndex:f?void 0:0,"aria-valuemax":!d&&l[t+1]||c,"aria-valuemin":!d&&l[t-1]||u,"aria-valuenow":e,draggable:!1,ref:r.thumbRefs[t],"aria-label":a,"aria-labelledby":i,role:"slider",onKeyDown:f?_.voidFn:r.onKeyDown,onKeyUp:f?_.voidFn:r.onKeyUp}})}),!0)})},c.defaultProps={label:"Accessibility label",labelledBy:null,step:1,direction:x.Direction.Right,rtl:!1,disabled:!1,allowOverlap:!1,draggableTrack:!1,min:0,max:100},c);function c(e){var w=t.call(this,e)||this;if(w.trackRef=s.createRef(),w.thumbRefs=[],w.state={draggedTrackPos:[-1,-1],draggedThumbIndex:-1,thumbZIndexes:new Array(w.props.values.length).fill(0).map(function(e,t){return t}),isChanged:!1,markOffsets:[]},w.getOffsets=function(){var i,o,e=w.props,s=e.direction,l=e.values,u=e.min,c=e.max,e=w.trackRef.current;return e?(i=e.getBoundingClientRect(),o=(0,_.getPaddingAndBorder)(e),w.getThumbs().map(function(e,t){var n={x:0,y:0},r=e.getBoundingClientRect(),a=(0,_.getMargin)(e);switch(s){case x.Direction.Right:return n.x=-1*(a.left+o.left),n.y=-1*((r.height-i.height)/2+o.top),n.x+=i.width*(0,_.relativeValue)(l[t],u,c)-r.width/2,n;case x.Direction.Left:return n.x=-1*(a.right+o.right),n.y=-1*((r.height-i.height)/2+o.top),n.x+=i.width-i.width*(0,_.relativeValue)(l[t],u,c)-r.width/2,n;case x.Direction.Up:return n.x=-1*((r.width-i.width)/2+a.left+o.left),n.y=-o.left,n.y+=i.height-i.height*(0,_.relativeValue)(l[t],u,c)-r.height/2,n;case x.Direction.Down:return n.x=-1*((r.width-i.width)/2+a.left+o.left),n.y=-o.left,n.y+=i.height*(0,_.relativeValue)(l[t],u,c)-r.height/2,n;default:return(0,_.assertUnreachable)(s)}})):(console.warn("No track element found."),[])},w.getThumbs=function(){return w.trackRef&&w.trackRef.current?Array.from(w.trackRef.current.children).filter(function(e){return e.hasAttribute("aria-valuenow")}):(console.warn("No thumbs found in the track container. Did you forget to pass & spread the `props` param in renderTrack?"),[])},w.getTargetIndex=function(t){return w.getThumbs().findIndex(function(e){return e===t.target||e.contains(t.target)})},w.addTouchEvents=function(e){document.addEventListener("touchmove",w.schdOnTouchMove,{passive:!1}),document.addEventListener("touchend",w.schdOnEnd,{passive:!1}),document.addEventListener("touchcancel",w.schdOnEnd,{passive:!1})},w.addMouseEvents=function(e){document.addEventListener("mousemove",w.schdOnMouseMove),document.addEventListener("mouseup",w.schdOnEnd)},w.onMouseDownTrack=function(t){var e,n;0!==t.button||(0,_.isIOS)()||(t.persist(),t.preventDefault(),w.addMouseEvents(t.nativeEvent),1<w.props.values.length&&w.props.draggableTrack?w.thumbRefs.some(function(e){return null==(e=e.current)?void 0:e.contains(t.target)})||w.setState({draggedTrackPos:[t.clientX,t.clientY]},function(){return w.onMove(t.clientX,t.clientY)}):(n=(0,_.getClosestThumbIndex)(w.thumbRefs.map(function(e){return e.current}),t.clientX,t.clientY,w.props.direction),null!=(e=w.thumbRefs[n].current)&&e.focus(),w.setState({draggedThumbIndex:n},function(){return w.onMove(t.clientX,t.clientY)})))},w.onResize=function(){(0,_.translateThumbs)(w.getThumbs(),w.getOffsets(),w.props.rtl),w.calculateMarkOffsets()},w.onTouchStartTrack=function(t){var e,n;t.persist(),w.addTouchEvents(t.nativeEvent),1<w.props.values.length&&w.props.draggableTrack?w.thumbRefs.some(function(e){return null==(e=e.current)?void 0:e.contains(t.target)})||w.setState({draggedTrackPos:[t.touches[0].clientX,t.touches[0].clientY]},function(){return w.onMove(t.touches[0].clientX,t.touches[0].clientY)}):(n=(0,_.getClosestThumbIndex)(w.thumbRefs.map(function(e){return e.current}),t.touches[0].clientX,t.touches[0].clientY,w.props.direction),null!=(e=w.thumbRefs[n].current)&&e.focus(),w.setState({draggedThumbIndex:n},function(){return w.onMove(t.touches[0].clientX,t.touches[0].clientY)}))},w.onMouseOrTouchStart=function(e){var t,n;w.props.disabled||!(t=(0,_.isTouchEvent)(e))&&0!==e.button||-1===(n=w.getTargetIndex(e))||(t?w.addTouchEvents(e):w.addMouseEvents(e),w.setState({draggedThumbIndex:n,thumbZIndexes:w.state.thumbZIndexes.map(function(e,t){return t===n?Math.max.apply(Math,w.state.thumbZIndexes):e<=w.state.thumbZIndexes[n]?e:e-1})}))},w.onMouseMove=function(e){e.preventDefault(),w.onMove(e.clientX,e.clientY)},w.onTouchMove=function(e){e.preventDefault(),w.onMove(e.touches[0].clientX,e.touches[0].clientY)},w.onKeyDown=function(e){var t=w.props,n=t.values,r=t.onChange,a=t.step,i=t.rtl,t=t.direction,o=w.state.isChanged,s=w.getTargetIndex(e.nativeEvent),i=i||t===x.Direction.Left||t===x.Direction.Down?-1:1;-1!==s&&(l.includes(e.key)?(e.preventDefault(),w.setState({draggedThumbIndex:s,isChanged:!0}),r((0,_.replaceAt)(n,s,w.normalizeValue(n[s]+i*("PageUp"===e.key?10*a:a),s)))):u.includes(e.key)?(e.preventDefault(),w.setState({draggedThumbIndex:s,isChanged:!0}),r((0,_.replaceAt)(n,s,w.normalizeValue(n[s]-i*("PageDown"===e.key?10*a:a),s)))):"Tab"===e.key?w.setState({draggedThumbIndex:-1},function(){o&&w.fireOnFinalChange()}):o&&w.fireOnFinalChange())},w.onKeyUp=function(e){var t=w.state.isChanged;w.setState({draggedThumbIndex:-1},function(){t&&w.fireOnFinalChange()})},w.onMove=function(e,t){var n=w.state,r=n.draggedThumbIndex,n=n.draggedTrackPos,a=w.props,i=a.direction,o=a.min,s=a.max,l=a.onChange,u=a.values,c=a.step,a=a.rtl;if(-1===r&&-1===n[0]&&-1===n[1])return null;var d=w.trackRef.current;if(!d)return null;var f=d.getBoundingClientRect(),m=(0,_.isVertical)(i)?f.height:f.width;if(-1!==n[0]&&-1!==n[1]){var p=e-n[0],h=t-n[1],g=0;switch(i){case x.Direction.Right:case x.Direction.Left:g=p/m*(s-o);break;case x.Direction.Down:case x.Direction.Up:g=h/m*(s-o);break;default:(0,_.assertUnreachable)(i)}if(a&&(g*=-1),Math.abs(g)>=c/2){for(var y=0;y<w.thumbRefs.length;y++){if(u[y]===s&&1===Math.sign(g)||u[y]===o&&-1===Math.sign(g))return;var v=u[y]+g;s<v?g=s-u[y]:v<o&&(g=o-u[y])}for(var b=u.slice(0),y=0;y<w.thumbRefs.length;y++)b=(0,_.replaceAt)(b,y,w.normalizeValue(u[y]+g,y));w.setState({draggedTrackPos:[e,t]}),l(b)}}else{var E=0;switch(i){case x.Direction.Right:E=(e-f.left)/m*(s-o)+o;break;case x.Direction.Left:E=(m-(e-f.left))/m*(s-o)+o;break;case x.Direction.Down:E=(t-f.top)/m*(s-o)+o;break;case x.Direction.Up:E=(m-(t-f.top))/m*(s-o)+o;break;default:(0,_.assertUnreachable)(i)}a&&(E=s+o-E),Math.abs(u[r]-E)>=c/2&&l((0,_.replaceAt)(u,r,w.normalizeValue(E,r)))}},w.normalizeValue=function(e,t){var n=w.props,r=n.min,a=n.max,i=n.step,o=n.allowOverlap,n=n.values;return(0,_.normalizeValue)(e,t,r,a,i,o,n)},w.onEnd=function(e){if(e.preventDefault(),document.removeEventListener("mousemove",w.schdOnMouseMove),document.removeEventListener("touchmove",w.schdOnTouchMove),document.removeEventListener("mouseup",w.schdOnEnd),document.removeEventListener("touchend",w.schdOnEnd),document.removeEventListener("touchcancel",w.schdOnEnd),-1===w.state.draggedThumbIndex&&-1===w.state.draggedTrackPos[0]&&-1===w.state.draggedTrackPos[1])return null;w.setState({draggedThumbIndex:-1,draggedTrackPos:[-1,-1]},function(){w.fireOnFinalChange()})},w.fireOnFinalChange=function(){w.setState({isChanged:!1});var e=w.props,t=e.onFinalChange,e=e.values;t&&t(e)},w.updateMarkRefs=function(e){if(e.renderMark){w.numOfMarks=(e.max-e.min)/w.props.step,w.markRefs=[];for(var t=0;t<w.numOfMarks+1;t++)w.markRefs[t]=s.createRef()}else w.numOfMarks=void 0,w.markRefs=void 0},w.calculateMarkOffsets=function(){if(w.props.renderMark&&w.trackRef&&w.numOfMarks&&w.markRefs&&null!==w.trackRef.current){for(var e=window.getComputedStyle(w.trackRef.current),t=parseInt(e.width,10),n=parseInt(e.height,10),r=parseInt(e.paddingLeft,10),a=parseInt(e.paddingTop,10),i=[],o=0;o<w.numOfMarks+1;o++){var s,l=9999,u=9999;w.markRefs[o].current&&(l=(s=w.markRefs[o].current.getBoundingClientRect()).height,u=s.width),w.props.direction===x.Direction.Left||w.props.direction===x.Direction.Right?i.push([Math.round(t/w.numOfMarks*o+r-u/2),-Math.round((l-n)/2)]):i.push([Math.round(n/w.numOfMarks*o+a-l/2),-Math.round((u-t)/2)])}w.setState({markOffsets:i})}},0===e.step)throw new Error('"step" property should be a positive number');return w.schdOnMouseMove=(0,_.schd)(w.onMouseMove),w.schdOnTouchMove=(0,_.schd)(w.onTouchMove),w.schdOnEnd=(0,_.schd)(w.onEnd),w.thumbRefs=e.values.map(function(){return s.createRef()}),w.updateMarkRefs(e),w}e.default=o}}),re=e({"../../node_modules/react-range/lib/index.js"(e){"use strict";var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},t=(Object.defineProperty(e,"__esModule",{value:!0}),e.checkValuesAgainstBoundaries=e.relativeValue=e.useThumbOverlap=e.Direction=e.getTrackBackground=e.Range=void 0,t(ne())),n=(e.Range=t.default,ee()),r=(Object.defineProperty(e,"getTrackBackground",{enumerable:!0,get:function(){return n.getTrackBackground}}),Object.defineProperty(e,"useThumbOverlap",{enumerable:!0,get:function(){return n.useThumbOverlap}}),Object.defineProperty(e,"relativeValue",{enumerable:!0,get:function(){return n.relativeValue}}),Object.defineProperty(e,"checkValuesAgainstBoundaries",{enumerable:!0,get:function(){return n.checkValuesAgainstBoundaries}}),Q());Object.defineProperty(e,"Direction",{enumerable:!0,get:function(){return r.Direction}})}}),ae=e({"../../node_modules/react-is/cjs/react-is.development.js"(e){"use strict";function t(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case a:var n=e.type;switch(n){case d:case f:case o:case l:case s:case p:return n;default:var r=n&&n.$$typeof;switch(r){case c:case m:case y:case g:case u:return r;default:return t}}case i:return t}}}function n(e){return t(e)===f}var r,a,i,o,s,l,u,c,d,f,m,p,h,g,y,v,b,E,w,_,x,S,k,I,C,N,T,R,M,O,A;r="function"==typeof Symbol&&Symbol.for,a=r?Symbol.for("react.element"):60103,i=r?Symbol.for("react.portal"):60106,o=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,l=r?Symbol.for("react.profiler"):60114,u=r?Symbol.for("react.provider"):60109,c=r?Symbol.for("react.context"):60110,d=r?Symbol.for("react.async_mode"):60111,f=r?Symbol.for("react.concurrent_mode"):60111,m=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,h=r?Symbol.for("react.suspense_list"):60120,g=r?Symbol.for("react.memo"):60115,y=r?Symbol.for("react.lazy"):60116,v=r?Symbol.for("react.block"):60121,b=r?Symbol.for("react.fundamental"):60117,E=r?Symbol.for("react.responder"):60118,w=r?Symbol.for("react.scope"):60119,r=f,_=c,x=u,S=a,k=m,I=o,C=y,N=g,T=i,R=l,M=s,O=p,A=!1,e.AsyncMode=d,e.ConcurrentMode=r,e.ContextConsumer=_,e.ContextProvider=x,e.Element=S,e.ForwardRef=k,e.Fragment=I,e.Lazy=C,e.Memo=N,e.Portal=T,e.Profiler=R,e.StrictMode=M,e.Suspense=O,e.isAsyncMode=function(e){return A||(A=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),n(e)||t(e)===d},e.isConcurrentMode=n,e.isContextConsumer=function(e){return t(e)===c},e.isContextProvider=function(e){return t(e)===u},e.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===a},e.isForwardRef=function(e){return t(e)===m},e.isFragment=function(e){return t(e)===o},e.isLazy=function(e){return t(e)===y},e.isMemo=function(e){return t(e)===g},e.isPortal=function(e){return t(e)===i},e.isProfiler=function(e){return t(e)===l},e.isStrictMode=function(e){return t(e)===s},e.isSuspense=function(e){return t(e)===p},e.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===f||e===l||e===s||e===p||e===h||"object"==typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===g||e.$$typeof===u||e.$$typeof===c||e.$$typeof===m||e.$$typeof===b||e.$$typeof===E||e.$$typeof===w||e.$$typeof===v)},e.typeOf=t}}),ie=e({"../../node_modules/react-is/index.js"(e,t){"use strict";t.exports=ae()}}),oe=e({"../../node_modules/object-assign/index.js"(e,t){"use strict";var l=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(Object.assign){var e=new String("abc");if(e[5]="de","5"!==Object.getOwnPropertyNames(e)[0]){for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r,a=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"===a.join(""))return r={},"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")?1:void 0}}}catch(e){}}()?Object.assign:function(e,t){for(var n,r=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),a=1;a<arguments.length;a++){for(var i in n=Object(arguments[a]))u.call(n,i)&&(r[i]=n[i]);if(l)for(var o=l(n),s=0;s<o.length;s++)c.call(n,o[s])&&(r[o[s]]=n[o[s]])}return r}}}),se=e({"../../node_modules/prop-types/lib/ReactPropTypesSecret.js"(e,t){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}}),le=e({"../../node_modules/prop-types/lib/has.js"(e,t){t.exports=Function.call.bind(Object.prototype.hasOwnProperty)}}),ue=e({"../../node_modules/prop-types/checkPropTypes.js"(e,t){"use strict";var l,u,c,d=function(){};function n(e,t,n,r,a){for(var i in e)if(c(e,i)){var o,s;try{if("function"!=typeof e[i])throw(s=Error((r||"React class")+": "+n+" type `"+i+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[i]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.")).name="Invariant Violation",s;o=e[i](t,i,r,n,null,l)}catch(e){o=e}!o||o instanceof Error||d((r||"React class")+": type specification of "+n+" `"+i+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof o+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),o instanceof Error&&!(o.message in u)&&(u[o.message]=!0,i=a?a():"",d("Failed "+n+" type: "+o.message+(null!=i?i:"")))}}l=se(),u={},c=le(),d=function(e){e="Warning: "+e;"undefined"!=typeof console&&console.error(e);try{throw new Error(e)}catch(e){}},n.resetWarningCache=function(){u={}},t.exports=n}}),ce=e({"../../node_modules/prop-types/factoryWithTypeCheckers.js"(e,t){"use strict";var u=ie(),g=oe(),y=se(),v=le(),r=ue(),b=function(){};function a(){return null}b=function(e){e="Warning: "+e;"undefined"!=typeof console&&console.error(e);try{throw new Error(e)}catch(e){}},t.exports=function(i,c){var o="function"==typeof Symbol&&Symbol.iterator,s="@@iterator";var d="<<anonymous>>",e={array:t("array"),bigint:t("bigint"),bool:t("boolean"),func:t("function"),number:t("number"),object:t("object"),string:t("string"),symbol:t("symbol"),any:n(a),arrayOf:function(l){return n(function(e,t,n,r,a){if("function"!=typeof l)return new f("Property `"+a+"` of component `"+n+"` has invalid PropType notation inside arrayOf.");var i=e[t];if(!Array.isArray(i))return new f("Invalid "+r+" `"+a+"` of type `"+p(i)+"` supplied to `"+n+"`, expected an array.");for(var o=0;o<i.length;o++){var s=l(i,o,n,r,a+"["+o+"]",y);if(s instanceof Error)return s}return null})},element:n(function(e,t,n,r,a){return e=e[t],i(e)?null:new f("Invalid "+r+" `"+a+"` of type `"+p(e)+"` supplied to `"+n+"`, expected a single ReactElement.")}),elementType:n(function(e,t,n,r,a){return e=e[t],u.isValidElementType(e)?null:new f("Invalid "+r+" `"+a+"` of type `"+p(e)+"` supplied to `"+n+"`, expected a single ReactElement type.")}),instanceOf:function(o){return n(function(e,t,n,r,a){var i;return e[t]instanceof o?null:(i=o.name||d,new f("Invalid "+r+" `"+a+"` of type `"+((r=e[t]).constructor&&r.constructor.name?r.constructor.name:d)+"` supplied to `"+n+"`, expected instance of `"+i+"`."))})},node:n(function(e,t,n,r,a){return l(e[t])?null:new f("Invalid "+r+" `"+a+"` supplied to `"+n+"`, expected a ReactNode.")}),objectOf:function(l){return n(function(e,t,n,r,a){if("function"!=typeof l)return new f("Property `"+a+"` of component `"+n+"` has invalid PropType notation inside objectOf.");var i,o=e[t];if("object"!==(e=p(o)))return new f("Invalid "+r+" `"+a+"` of type `"+e+"` supplied to `"+n+"`, expected an object.");for(i in o)if(v(o,i)){var s=l(o,i,n,r,a+"."+i,y);if(s instanceof Error)return s}return null})},oneOf:function(s){if(Array.isArray(s))return n(function(e,t,n,r,a){for(var i=e[t],o=0;o<s.length;o++)if(function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(i,s[o]))return null;e=JSON.stringify(s,function(e,t){return"symbol"===h(t)?String(t):t});return new f("Invalid "+r+" `"+a+"` of value `"+String(i)+"` supplied to `"+n+"`, expected one of "+e+".")});b(1<arguments.length?"Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z]).":"Invalid argument supplied to oneOf, expected an array.");return a},oneOfType:function(l){if(!Array.isArray(l))return b("Invalid argument supplied to oneOfType, expected an instance of array."),a;for(var e=0;e<l.length;e++){var t=l[e];if("function"!=typeof t)return b("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+function(e){var t=h(e);switch(t){case"array":case"object":return"an "+t;case"boolean":case"date":case"regexp":return"a "+t;default:return t}}(t)+" at index "+e+"."),a}return n(function(e,t,n,r,a){for(var i=[],o=0;o<l.length;o++){var s=(0,l[o])(e,t,n,r,a,y);if(null==s)return null;s.data&&v(s.data,"expectedType")&&i.push(s.data.expectedType)}return new f("Invalid "+r+" `"+a+"` supplied to `"+n+"`"+(0<i.length?", expected one of type ["+i.join(", ")+"]":"")+".")})},shape:function(l){return n(function(e,t,n,r,a){var i,o=e[t];if("object"!==(e=p(o)))return new f("Invalid "+r+" `"+a+"` of type `"+e+"` supplied to `"+n+"`, expected `object`.");for(i in l){var s=l[i];if("function"!=typeof s)return m(n,r,a,i,h(s));s=s(o,i,n,r,a+"."+i,y);if(s)return s}return null})},exact:function(u){return n(function(e,t,n,r,a){var i,o=e[t],s=p(o);if("object"!==s)return new f("Invalid "+r+" `"+a+"` of type `"+s+"` supplied to `"+n+"`, expected `object`.");for(i in g({},e[t],u)){var l=u[i];if(v(u,i)&&"function"!=typeof l)return m(n,r,a,i,h(l));if(!l)return new f("Invalid "+r+" `"+a+"` key `"+i+"` supplied to `"+n+"`.\nBad object: "+JSON.stringify(e[t],null,"  ")+"\nValid keys: "+JSON.stringify(Object.keys(u),null,"  "));l=l(o,i,n,r,a+"."+i,y);if(l)return l}return null})}};function f(e,t){this.message=e,this.data=t&&"object"==typeof t?t:{},this.stack=""}function n(s){var l={},u=0;function e(e,t,n,r,a,i,o){if(r=r||d,i=i||n,o!==y){if(c)throw(o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types")).name="Invariant Violation",o;"undefined"!=typeof console&&!l[o=r+":"+n]&&u<3&&(b("You are manually calling a React.PropTypes validation function for the `"+i+"` prop on `"+r+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),l[o]=!0,u++)}return null==t[n]?e?null===t[n]?new f("The "+a+" `"+i+"` is marked as required in `"+r+"`, but its value is `null`."):new f("The "+a+" `"+i+"` is marked as required in `"+r+"`, but its value is `undefined`."):null:s(t,n,r,a,i)}var t=e.bind(null,!1);return t.isRequired=e.bind(null,!0),t}function t(o){return n(function(e,t,n,r,a,i){return p(e=e[t])!==o?new f("Invalid "+r+" `"+a+"` of type `"+h(e)+"` supplied to `"+n+"`, expected `"+o+"`.",{expectedType:o}):null})}function m(e,t,n,r,a){return new f((e||"React class")+": "+t+" type `"+n+"."+r+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+a+"`.")}function l(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(l);if(null!==e&&!i(e)){var t=function(e){if("function"==typeof(e=e&&(o&&e[o]||e[s])))return e}(e);if(!t)return!1;var n,r=t.call(e);if(t!==e.entries){for(;!(n=r.next()).done;)if(!l(n.value))return!1}else for(;!(n=r.next()).done;){var a=n.value;if(a&&!l(a[1]))return!1}}return!0;default:return!1}}function p(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":(e=e,"symbol"===t||e&&("Symbol"===e["@@toStringTag"]||"function"==typeof Symbol&&e instanceof Symbol)?"symbol":t)}function h(e){if(null==e)return""+e;var t=p(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}return f.prototype=Error.prototype,e.checkPropTypes=r,e.resetWarningCache=r.resetWarningCache,e.PropTypes=e}}}),de=e({"../../node_modules/prop-types/index.js"(e,t){var n=ie();t.exports=ce()(n.isElement,!0)}}),fe=e({"../../node_modules/downshift/node_modules/react-is/cjs/react-is.development.js"(e){"use strict";function t(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case a:var n=e.type;switch(n){case o:case l:case s:case m:case p:return n;default:var r=n&&n.$$typeof;switch(r){case d:case c:case f:case g:case h:case u:return r;default:return t}}case i:return t}}}var a,i,o,s,l,u,c,d,f,m,p,h,g,n,r,y,v,b,E,w,_,x,S,k,I,C,N,T;a=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),n=Symbol.for("react.offscreen"),r=Symbol.for("react.module.reference"),y=u,v=a,b=f,E=o,w=g,_=h,x=i,S=l,k=s,I=m,C=p,T=N=!1,e.ContextConsumer=c,e.ContextProvider=y,e.Element=v,e.ForwardRef=b,e.Fragment=E,e.Lazy=w,e.Memo=_,e.Portal=x,e.Profiler=S,e.StrictMode=k,e.Suspense=I,e.SuspenseList=C,e.isAsyncMode=function(e){return N||(N=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 18+.")),!1},e.isConcurrentMode=function(e){return T||(T=!0,console.warn("The ReactIs.isConcurrentMode() alias has been deprecated, and will be removed in React 18+.")),!1},e.isContextConsumer=function(e){return t(e)===c},e.isContextProvider=function(e){return t(e)===u},e.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===a},e.isForwardRef=function(e){return t(e)===f},e.isFragment=function(e){return t(e)===o},e.isLazy=function(e){return t(e)===g},e.isMemo=function(e){return t(e)===h},e.isPortal=function(e){return t(e)===i},e.isProfiler=function(e){return t(e)===l},e.isStrictMode=function(e){return t(e)===s},e.isSuspense=function(e){return t(e)===m},e.isSuspenseList=function(e){return t(e)===p},e.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===l||e===s||e===m||e===p||e===n||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===h||e.$$typeof===u||e.$$typeof===c||e.$$typeof===f||e.$$typeof===r||void 0!==e.getModuleId)},e.typeOf=t}}),e=e({"../../node_modules/downshift/node_modules/react-is/index.js"(e,t){"use strict";t.exports=fe()}}),me={},pe=me,he={default:()=>function(){return h0.default.createElement(p0,null)}};for(T in he)M(pe,T,{get:he[T],enumerable:!0});var ge=t(b()),ye=t(n()),ve=t(Y());var be=async function(t,n,e){for(;!Spicetify?.PopupModal||!Spicetify?.LocalStorage;)await new Promise(e=>setTimeout(e,100));var r,t=`spcr-whats-new_${t}-version`,a=Spicetify.LocalStorage.get(t)??"";try{(0,ye.default)(n,a)&&(Spicetify.LocalStorage.set(t,n),r={...e,content:function(e){var t=document.createElement("div"),n=(t.setAttribute("id","whats-new-content-wrapper"),document.createElement("style"));return n.textContent=`
      #whats-new-content-wrapper ul, #whats-new-content-wrapper ol {
         list-style: inherit;
         margin-left: 1em;
      }
   `,ve.default.render(e,t),t.appendChild(n),t}(e.content)},Spicetify.PopupModal.display(r))}catch(e){Spicetify.LocalStorage.set(t,n)}},Ee="1.0.0",we=[],_e=t(b()),xe=t(b()),Se=t(b()),ke="TabBar-module__active___qFHnJ_playlistDmaker",Ie=t(b());function _(e){const{elementType:t="span",children:n,fontSize:r,style:a,...i}=e;let o;switch(t){case"h1":o=Spicetify.ReactComponent.TextComponent.h1;break;case"h2":o=Spicetify.ReactComponent.TextComponent.h2;break;case"h3":o=Spicetify.ReactComponent.TextComponent.h3;break;case"h4":o=Spicetify.ReactComponent.TextComponent.h4;break;case"h5":o=Spicetify.ReactComponent.TextComponent.h5;break;case"h6":o=Spicetify.ReactComponent.TextComponent.h6;break;case"li":o=Spicetify.ReactComponent.TextComponent.li;break;case"p":o=Spicetify.ReactComponent.TextComponent.p;break;case"small":o=Spicetify.ReactComponent.TextComponent.small;break;case"span":o=Spicetify.ReactComponent.TextComponent.span;break;default:o=Spicetify.ReactComponent.TextComponent}return Ie.default.createElement(o,{...i,style:{...a,fontSize:r,display:e.paddingBottom?"block":a?.display}},n)}function Ce(e){return Se.default.createElement("li",{"data-tab":e.item.key,onClick:()=>{e.onItemClicked(e.item)}},Se.default.createElement("button",{className:e.active?ke:"",draggable:"false"},Se.default.createElement(_,{variant:"mestoBold"},e.item.label)))}var Ne=t(b());function Te(n){var e={width:n.size+"px"};return Ne.default.createElement("li",{id:"more-button",style:e},Ne.default.createElement("select",{className:"main-dropDown-dropDown",value:n.activeItem.key,disabled:!1,onChange:t=>{var e=n.items.find(e=>e.key===t.target.value);e&&n.onClick(e)}},n.items.map(e=>Ne.default.createElement("option",{key:e.key,value:e.key},e.label))))}var Re={tabBar:"TabBar-module__tabBar___DxQjm_playlistDmaker",active:"TabBar-module__active___qFHnJ_playlistDmaker"};function Me(n){const t=xe.default.useRef(null),[a,r]=(0,xe.useState)([]),[i,e]=(0,xe.useState)(0),[o,s]=(0,xe.useState)([]),[l,u]=(0,xe.useState)(0);return(0,xe.useEffect)(()=>{t.current&&e(t.current.clientWidth)},[n.windowSize]),(0,xe.useEffect)(()=>{var e;t.current&&(e=Array.from(t.current.children).filter(e=>"more-button"!==e.id).map(e=>e.clientWidth),r(e))},[n.items]),(0,xe.useEffect)(()=>{if(t.current)if(a.reduce((e,t)=>e+t,0)<=i)s([]);else{var e=Math.max(...a)+32;const r=[];let n=e;a.forEach((e,t)=>{i>=n+e?n+=e:r.push(t)}),s(r),u(e)}},[i,a]),xe.default.createElement("nav",{className:Re.tabBar},xe.default.createElement("ul",{ref:t},n.items.filter((e,t)=>!o.includes(t)).map(e=>xe.default.createElement(Ce,{key:e.key,item:e,active:n.activeItem.key===e.key,onItemClicked:n.onItemClicked})),o.length||0===a.length?xe.default.createElement(Te,{items:n.items.filter((e,t)=>o.includes(t)||e.key===n.activeItem.key),activeItem:n.activeItem,onClick:n.onItemClicked,size:l}):null))}function Oe(e){const t=document.querySelector(".Root__main-view .os-resize-observer-host")??document.querySelector(".Root__main-view .os-size-observer");if(!t)throw new Error("Could not find resize host");const[n,r]=(0,_e.useState)(t.clientWidth);return(0,_e.useEffect)(()=>{const e=new ResizeObserver(()=>{r(t.clientWidth)});return e.observe(t),()=>{e.disconnect()}},[t]),_e.default.createElement(Me,{windowSize:n,items:e.items,activeItem:e.activeItem,onItemClicked:e.onItemClicked})}function y(){return Spicetify.Platform}var Ae=t(b()),ut=t(b(),1);function ct(n){if("string"==typeof n||"number"==typeof n)return""+n;let r="";if(Array.isArray(n))for(let e=0,t;e<n.length;e++)""!==(t=ct(n[e]))&&(r+=(r&&" ")+t);else for(var e in n)n[e]&&(r+=(r&&" ")+e);return r}var n=t(b(),1),a=t(r(),1),De={},Pe=e=>{let r;const a=new Set;var t=(e,t)=>{e="function"==typeof e?e(r):e;if(!Object.is(e,r)){const n=r;r=(null!=t?t:"object"!=typeof e||null===e)?e:Object.assign({},r,e),a.forEach(e=>e(r,n))}},n=()=>r,i={setState:t,getState:n,getInitialState:()=>o,subscribe:e=>(a.add(e),()=>a.delete(e)),destroy:()=>{"production"!==(De.env?De.env.MODE:void 0)&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),a.clear()}};const o=r=e(t,n,i);return i},Le=e=>e?Pe(e):Pe,Fe=n.default["useDebugValue"],Ve=a.default["useSyncExternalStoreWithSelector"],je=e=>e;function Be(e,t=je,n){e=Ve(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Fe(e),e}var ze=(e,n)=>{const r=Le(e);e=(e,t=n)=>Be(r,e,t);return Object.assign(e,r),e},$e=(e,t)=>e?ze(e,t):ze;function He(e,t){if(!Object.is(e,t)){if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(var[n,r]of e)if(!Object.is(r,t.get(n)))return!1}else if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1}else{var a=Object.keys(e);if(a.length!==Object.keys(t).length)return!1;for(const o of a)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1}}return!0}var Ue={value:()=>{}};function Ze(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new Ke(r)}function Ke(e){this._=e}function We(e,t,n){for(var r=0,a=e.length;r<a;++r)if(e[r].name===t){e[r]=Ue,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}Ke.prototype=Ze.prototype={constructor:Ke,on:function(e,t){var n,r,a=this._,i=(r=a,(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");if(0<=n&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!r.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}})),o=-1,s=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<s;)if(n=(e=i[o]).type)a[n]=We(a[n],e.name,t);else if(null==t)for(n in a)a[n]=We(a[n],e.name,null);return this}for(;++o<s;)if(n=(n=(e=i[o]).type)&&function(e,t){for(var n,r=0,a=e.length;r<a;++r)if((n=e[r]).name===t)return n.value}(a[n],e.name))return n},copy:function(){var e,t={},n=this._;for(e in n)t[e]=n[e].slice();return new Ke(t)},call:function(e,t){if(0<(n=arguments.length-2))for(var n,r,a=new Array(n),i=0;i<n;++i)a[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(r=this._[e]).length;i<n;++i)r[i].value.apply(t,a)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],a=0,i=r.length;a<i;++a)r[a].value.apply(t,n)}};var Xe=Ze,Ye="http://www.w3.org/1999/xhtml",qe={svg:"http://www.w3.org/2000/svg",xhtml:Ye,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ge(e){var t=e+="",n=t.indexOf(":");return 0<=n&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),qe.hasOwnProperty(t)?{space:qe[t],local:e}:e}function Je(e){e=Ge(e);return(e.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(n){return function(){var e=this.ownerDocument,t=this.namespaceURI;return t===Ye&&e.documentElement.namespaceURI===Ye?e.createElement(n):e.createElementNS(t,n)}})(e)}function Qe(){}function et(e){return null==e?Qe:function(){return this.querySelector(e)}}function tt(){return[]}function nt(e){return null==e?tt:function(){return this.querySelectorAll(e)}}function rt(t){return function(){return null==(e=t.apply(this,arguments))?[]:Array.isArray(e)?e:Array.from(e);var e}}function at(e){return function(){return this.matches(e)}}function it(t){return function(e){return e.matches(t)}}var ot=Array.prototype.find;function st(){return this.firstElementChild}var lt=Array.prototype.filter;function dt(){return Array.from(this.children)}function ft(e){return new Array(e.length)}function mt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function pt(e,t,n,r,a,i){for(var o,s=0,l=t.length,u=i.length;s<u;++s)(o=t[s])?(o.__data__=i[s],r[s]=o):n[s]=new mt(e,i[s]);for(;s<l;++s)(o=t[s])&&(a[s]=o)}function ht(e,t,n,r,a,i,o){for(var s,l,u=new Map,c=t.length,d=i.length,f=new Array(c),m=0;m<c;++m)(s=t[m])&&(f[m]=l=o.call(s,s.__data__,m,t)+"",u.has(l)?a[m]=s:u.set(l,s));for(m=0;m<d;++m)l=o.call(e,i[m],m,i)+"",(s=u.get(l))?((r[m]=s).__data__=i[m],u.delete(l)):n[m]=new mt(e,i[m]);for(m=0;m<c;++m)(s=t[m])&&u.get(f[m])===s&&(a[m]=s)}function gt(e){return e.__data__}function yt(e,t){return e<t?-1:t<e?1:t<=e?0:NaN}function vt(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function bt(e,t){return e.style.getPropertyValue(t)||vt(e).getComputedStyle(e,null).getPropertyValue(t)}function Et(e){return e.trim().split(/^|\s+/)}function wt(e){return e.classList||new _t(e)}function _t(e){this._node=e,this._names=Et(e.getAttribute("class")||"")}function xt(e,t){for(var n=wt(e),r=-1,a=t.length;++r<a;)n.add(t[r])}function St(e,t){for(var n=wt(e),r=-1,a=t.length;++r<a;)n.remove(t[r])}function kt(){this.textContent=""}function It(){this.innerHTML=""}function Ct(){this.nextSibling&&this.parentNode.appendChild(this)}function Nt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Tt(){return null}function Rt(){var e=this.parentNode;e&&e.removeChild(this)}function Mt(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ot(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function At(i){return function(){var e=this.__on;if(e){for(var t,n=0,r=-1,a=e.length;n<a;++n)t=e[n],i.type&&t.type!==i.type||t.name!==i.name?e[++r]=t:this.removeEventListener(t.type,t.listener,t.options);++r?e.length=r:delete this.__on}}}function Dt(o,s,l){return function(){function e(e){n.call(this,e,this.__data__)}var t,n,r=this.__on;n=s;if(r)for(var a=0,i=r.length;a<i;++a)if((t=r[a]).type===o.type&&t.name===o.name)return this.removeEventListener(t.type,t.listener,t.options),this.addEventListener(t.type,t.listener=e,t.options=l),void(t.value=s);this.addEventListener(o.type,e,l),t={type:o.type,name:o.name,value:s,listener:e,options:l},r?r.push(t):this.__on=[t]}}function Pt(e,t,n){var r=vt(e),a=r.CustomEvent;"function"==typeof a?a=new a(t,n):(a=r.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}mt.prototype={constructor:mt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},_t.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){e=this._names.indexOf(e);0<=e&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return 0<=this._names.indexOf(e)}};var Lt=[null];function Ft(e,t){this._groups=e,this._parents=t}function Vt(){return new Ft([[document.documentElement]],Lt)}Ft.prototype=Vt.prototype={constructor:Ft,select:function(e){"function"!=typeof e&&(e=et(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,o,s=t[a],l=s.length,u=r[a]=new Array(l),c=0;c<l;++c)(i=s[c])&&(o=e.call(i,i.__data__,c,s))&&("__data__"in i&&(o.__data__=i.__data__),u[c]=o);return new Ft(r,this._parents)},selectAll:function(e){e=("function"==typeof e?rt:nt)(e);for(var t=this._groups,n=t.length,r=[],a=[],i=0;i<n;++i)for(var o,s=t[i],l=s.length,u=0;u<l;++u)(o=s[u])&&(r.push(e.call(o,o.__data__,u,s)),a.push(o));return new Ft(r,a)},selectChild:function(e){return this.select(null==e?st:(t="function"==typeof e?e:it(e),function(){return ot.call(this.children,t)}));var t},selectChildren:function(e){return this.selectAll(null==e?dt:(t="function"==typeof e?e:it(e),function(){return lt.call(this.children,t)}));var t},filter:function(e){"function"!=typeof e&&(e=at(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,o=t[a],s=o.length,l=r[a]=[],u=0;u<s;++u)(i=o[u])&&e.call(i,i.__data__,u,o)&&l.push(i);return new Ft(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,gt);var n,r=t?ht:pt,a=this._parents,i=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var o=i.length,s=new Array(o),l=new Array(o),u=new Array(o),c=0;c<o;++c){var d=a[c],f=i[c],m=f.length,p="object"==typeof(p=e.call(d,d&&d.__data__,c,a))&&"length"in p?p:Array.from(p),h=p.length,g=l[c]=new Array(h),y=s[c]=new Array(h);r(d,f,g,y,u[c]=new Array(m),p,t);for(var v,b,E=0,w=0;E<h;++E)if(v=g[E]){for(w<=E&&(w=E+1);!(b=y[w])&&++w<h;);v._next=b||null}}return(s=new Ft(s,a))._enter=l,s._exit=u,s},enter:function(){return new Ft(this._enter||this._groups.map(ft),this._parents)},exit:function(){return new Ft(this._exit||this._groups.map(ft),this._parents)},join:function(e,t,n){var r=this.enter(),a=this,i=this.exit(),r="function"==typeof e?(r=e(r))&&r.selection():r.append(e+"");return null!=t&&(a=(a=t(a))&&a.selection()),null==n?i.remove():n(i),r&&a?r.merge(a).order():a},merge:function(e){for(var e=e.selection?e.selection():e,t=this._groups,n=e._groups,r=t.length,e=n.length,a=Math.min(r,e),i=new Array(r),o=0;o<a;++o)for(var s,l=t[o],u=n[o],c=l.length,d=i[o]=new Array(c),f=0;f<c;++f)(s=l[f]||u[f])&&(d[f]=s);for(;o<r;++o)i[o]=t[o];return new Ft(i,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,a=e[t],i=a.length-1,o=a[i];0<=--i;)(r=a[i])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(n){function e(e,t){return e&&t?n(e.__data__,t.__data__):!e-!t}n=n||yt;for(var t=this._groups,r=t.length,a=new Array(r),i=0;i<r;++i){for(var o,s=t[i],l=s.length,u=a[i]=new Array(l),c=0;c<l;++c)(o=s[c])&&(u[c]=o);u.sort(e)}return new Ft(a,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,i=r.length;a<i;++a){var o=r[a];if(o)return o}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var a,i=t[n],o=0,s=i.length;o<s;++o)(a=i[o])&&e.call(a,a.__data__,o,i);return this},attr:function(e,t){var n,r=Ge(e);return arguments.length<2?(n=this.node(),r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)):this.each((null==t?r.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?r.local?function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}:function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}:r.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(r,t))},style:function(e,t,n){return 1<arguments.length?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(t,n,r){return function(){var e=n.apply(this,arguments);null==e?this.style.removeProperty(t):this.style.setProperty(t,e,r)}}:function(e,t,n){return function(){this.style.setProperty(e,t,n)}})(e,t,null==n?"":n)):bt(this.node(),e)},property:function(e,t){return 1<arguments.length?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var n=Et(e+"");if(arguments.length<2){for(var r=wt(this.node()),a=-1,i=n.length;++a<i;)if(!r.contains(n[a]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?xt:St)(this,e)}}:t?function(e){return function(){xt(this,e)}}:function(e){return function(){St(this,e)}})(n,t))},text:function(e){return arguments.length?this.each(null==e?kt:("function"==typeof e?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?It:("function"==typeof e?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(Ct)},lower:function(){return this.each(Nt)},append:function(e){var t="function"==typeof e?e:Je(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:Je(e),r=null==t?Tt:"function"==typeof t?t:et(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(Rt)},clone:function(e){return this.select(e?Ot:Mt)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,a,i=(e+"").trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return 0<=n&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}),o=i.length;if(!(arguments.length<2)){for(s=t?Dt:At,r=0;r<o;++r)this.each(s(i[r],t,n));return this}var s=this.node().__on;if(s)for(var l,u=0,c=s.length;u<c;++u)for(r=0,l=s[u];r<o;++r)if((a=i[r]).type===l.type&&a.name===l.name)return l.value},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return Pt(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return Pt(this,e,t)}})(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,a=e[t],i=0,o=a.length;i<o;++i)(r=a[i])&&(yield r)}};n=Vt;function jt(e){return"string"==typeof e?new Ft([[document.querySelector(e)]],[document.documentElement]):new Ft([[e]],Lt)}function Bt(e,t){if(e=function(e){for(var t;t=e.sourceEvent;)e=t;return e}(e),t=void 0===t?e.currentTarget:t){var n=t.ownerSVGElement||t;if(n.createSVGPoint)return(n=n.createSVGPoint()).x=e.clientX,n.y=e.clientY,[(n=n.matrixTransform(t.getScreenCTM().inverse())).x,n.y];if(t.getBoundingClientRect)return n=t.getBoundingClientRect(),[e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop]}return[e.pageX,e.pageY]}var zt={passive:!1},$t={capture:!0,passive:!1};function Ht(e){e.stopImmediatePropagation()}function Ut(e){e.preventDefault(),e.stopImmediatePropagation()}function Zt(e){var t=e.document.documentElement,e=jt(e).on("dragstart.drag",Ut,$t);"onselectstart"in t?e.on("selectstart.drag",Ut,$t):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Kt(e,t){var n=e.document.documentElement,r=jt(e).on("dragstart.drag",null);t&&(r.on("click.drag",Ut,$t),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Wt=e=>()=>e;function Xt(e,{sourceEvent:t,subject:n,target:r,identifier:a,active:i,x:o,y:s,dx:l,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}function Yt(e){return!e.ctrlKey&&!e.button}function qt(){return this.parentNode}function Gt(e,t){return null==t?{x:e.x,y:e.y}:t}function Jt(){return navigator.maxTouchPoints||"ontouchstart"in this}function Qt(e,t,n){(e.prototype=t.prototype=n).constructor=e}function en(e,t){var n,r=Object.create(e.prototype);for(n in t)r[n]=t[n];return r}function tn(){}Xt.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var a="\\s*([+-]?\\d+)\\s*",i="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",nn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rn=/^#([0-9a-f]{3,8})$/,an=new RegExp(`^rgb\\(${a},${a},${a}\\)$`),on=new RegExp(`^rgb\\(${nn},${nn},${nn}\\)$`),sn=new RegExp(`^rgba\\(${a},${a},${a},${i}\\)$`),ln=new RegExp(`^rgba\\(${nn},${nn},${nn},${i}\\)$`),un=new RegExp(`^hsl\\(${i},${nn},${nn}\\)$`),cn=new RegExp(`^hsla\\(${i},${nn},${nn},${i}\\)$`),dn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function fn(){return this.rgb().formatHex()}function mn(){return this.rgb().formatRgb()}function pn(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=rn.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?hn(t):3===n?new vn(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?gn(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?gn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=an.exec(e))?new vn(t[1],t[2],t[3],1):(t=on.exec(e))?new vn(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=sn.exec(e))?gn(t[1],t[2],t[3],t[4]):(t=ln.exec(e))?gn(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=un.exec(e))?Sn(t[1],t[2]/100,t[3]/100,1):(t=cn.exec(e))?Sn(t[1],t[2]/100,t[3]/100,t[4]):dn.hasOwnProperty(e)?hn(dn[e]):"transparent"===e?new vn(NaN,NaN,NaN,0):null}function hn(e){return new vn(e>>16&255,e>>8&255,255&e,1)}function gn(e,t,n,r){return new vn(e=r<=0?t=n=NaN:e,t,n,r)}function yn(e,t,n,r){return 1===arguments.length?(a=(a=e)instanceof tn?a:pn(a))?new vn((a=a.rgb()).r,a.g,a.b,a.opacity):new vn:new vn(e,t,n,null==r?1:r);var a}function vn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function bn(){return"#"+xn(this.r)+xn(this.g)+xn(this.b)}function En(){var e=wn(this.opacity);return(1===e?"rgb(":"rgba(")+_n(this.r)+`, ${_n(this.g)}, `+_n(this.b)+(1===e?")":`, ${e})`)}function wn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function _n(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function xn(e){return((e=_n(e))<16?"0":"")+e.toString(16)}function Sn(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||1<=n?e=t=NaN:t<=0&&(e=NaN),new In(e,t,n,r)}function kn(e){var t,n,r,a,i,o,s,l;return e instanceof In?new In(e.h,e.s,e.l,e.opacity):(e=e instanceof tn?e:pn(e))?e instanceof In?e:(t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),o=NaN,l=((i=Math.max(t,n,r))+a)/2,(s=i-a)?(o=t===i?(n-r)/s+6*(n<r):n===i?(r-t)/s+2:(t-n)/s+4,s/=l<.5?i+a:2-i-a,o*=60):s=0<l&&l<1?0:o,new In(o,s,l,e.opacity)):new In}function In(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Cn(e){return(e=(e||0)%360)<0?e+360:e}function Nn(e){return Math.max(0,Math.min(1,e||0))}function Tn(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function Rn(e,t,n,r,a){var i=e*e,o=i*e;return((1-3*e+3*i-o)*t+(4-6*i+3*o)*n+(1+3*e+3*i-3*o)*r+o*a)/6}Qt(tn,pn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:fn,formatHex:fn,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return kn(this).formatHsl()},formatRgb:mn,toString:mn}),Qt(vn,yn,en(tn,{brighter(e){return e=null==e?1/.7:Math.pow(1/.7,e),new vn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new vn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new vn(_n(this.r),_n(this.g),_n(this.b),wn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bn,formatHex:bn,formatHex8:function(){return"#"+xn(this.r)+xn(this.g)+xn(this.b)+xn(255*(isNaN(this.opacity)?1:this.opacity))},formatRgb:En,toString:En})),Qt(In,function(e,t,n,r){return 1===arguments.length?kn(e):new In(e,t,n,null==r?1:r)},en(tn,{brighter(e){return e=null==e?1/.7:Math.pow(1/.7,e),new In(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new In(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,t=n+(n<.5?n:1-n)*t,n=2*n-t;return new vn(Tn(240<=e?e-240:120+e,n,t),Tn(e,n,t),Tn(e<120?240+e:e-120,n,t),this.opacity)},clamp(){return new In(Cn(this.h),Nn(this.s),Nn(this.l),wn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){var e=wn(this.opacity);return(1===e?"hsl(":"hsla(")+Cn(this.h)+`, ${100*Nn(this.s)}%, ${100*Nn(this.l)}%`+(1===e?")":`, ${e})`)}}));var Mn=e=>()=>e;function On(i){return 1==(i=+i)?An:function(e,t){return t-e?(n=e,r=t,a=i,n=Math.pow(n,a),r=Math.pow(r,a)-n,a=1/a,function(e){return Math.pow(n+e*r,a)}):Mn(isNaN(e)?t:e);var n,r,a}}function An(e,t){var n,r,a=t-e;return a?(n=e,r=a,function(e){return n+e*r}):Mn(isNaN(e)?t:e)}var Dn=function e(t){var o=On(t);function n(t,e){var n=o((t=yn(t)).r,(e=yn(e)).r),r=o(t.g,e.g),a=o(t.b,e.b),i=An(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=r(e),t.b=a(e),t.opacity=i(e),t+""}}return n.gamma=e,n}(1);function Pn(s){return function(e){for(var t,n=e.length,r=new Array(n),a=new Array(n),i=new Array(n),o=0;o<n;++o)t=yn(e[o]),r[o]=t.r||0,a[o]=t.g||0,i[o]=t.b||0;return r=s(r),a=s(a),i=s(i),t.opacity=1,function(e){return t.r=r(e),t.g=a(e),t.b=i(e),t+""}}}Pn(function(o){var s=o.length-1;return function(e){var t=e<=0?e=0:1<=e?s-(e=1):Math.floor(e*s),n=o[t],r=o[t+1],a=0<t?o[t-1]:2*n-r,i=t<s-1?o[t+2]:2*r-n;return Rn((e-t/s)*s,a,n,r,i)}}),Pn(function(o){var s=o.length;return function(e){var t=Math.floor(((e%=1)<0?++e:e)*s),n=o[(t+s-1)%s],r=o[t%s],a=o[(t+1)%s],i=o[(t+2)%s];return Rn((e-t/s)*s,n,r,a,i)}});function Ln(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}var Fn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Vn=new RegExp(Fn.source,"g");var jn,Bn=180/Math.PI,zn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function $n(e,t,n,r,a,i){var o,s,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:a,translateY:i,rotate:Math.atan2(t,e)*Bn,skewX:Math.atan(l)*Bn,scaleX:o,scaleY:s}}function Hn(f,m,p,h){function g(e){return e.length?e.pop()+" ":""}return function(e,t){var n,r,a,i,o,s,l,u,c=[],d=[];return e=f(e),t=f(t),a=e.translateX,i=e.translateY,l=t.translateX,s=t.translateY,o=c,r=d,a!==l||i!==s?(n=o.push("translate(",null,m,null,p),r.push({i:n-4,x:Ln(a,l)},{i:n-2,x:Ln(i,s)})):(l||s)&&o.push("translate("+l+m+s+p),r=e.rotate,a=t.rotate,n=c,i=d,r!==a?(180<r-a?a+=360:180<a-r&&(r+=360),i.push({i:n.push(g(n)+"rotate(",null,h)-2,x:Ln(r,a)})):a&&n.push(g(n)+"rotate("+a+h),o=e.skewX,l=t.skewX,s=c,i=d,o!==l?i.push({i:s.push(g(s)+"skewX(",null,h)-2,x:Ln(o,l)}):l&&s.push(g(s)+"skewX("+l+h),r=e.scaleX,a=e.scaleY,i=t.scaleX,o=t.scaleY,s=c,l=d,r!==i||a!==o?(u=s.push(g(s)+"scale(",null,",",null,")"),l.push({i:u-4,x:Ln(r,i)},{i:u-2,x:Ln(a,o)})):1===i&&1===o||s.push(g(s)+"scale("+i+","+o+")"),e=t=null,function(e){for(var t,n=-1,r=d.length;++n<r;)c[(t=d[n]).i]=t.x(e);return c.join("")}}}var Un=Hn(function(e){return(e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"")).isIdentity?zn:$n(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),Zn=Hn(function(e){return null!=e&&((jn=jn||document.createElementNS("http://www.w3.org/2000/svg","g")).setAttribute("transform",e),e=jn.transform.baseVal.consolidate())?$n((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):zn},", ",")",")");function Kn(e){return((e=Math.exp(e))+1/e)/2}var Wn,Xn,Yn=function n(d,f,m){function e(e,t){var r,a,i,o=e[0],s=e[1],l=e[2],e=t[0],n=t[1],t=t[2],u=e-o,c=n-s,e=u*u+c*c;return(t=e<1e-12?(i=Math.log(t/l)/d,function(e){return[o+e*u,s+e*c,l*Math.exp(d*e*i)]}):(r=Math.sqrt(e),n=(t*t-l*l+m*e)/(2*l*f*r),e=(t*t-l*l-m*e)/(2*t*f*r),a=Math.log(Math.sqrt(n*n+1)-n),i=(Math.log(Math.sqrt(e*e+1)-e)-a)/d,function(e){var e=e*i,t=Kn(a),n=l/(f*r)*(t*(n=d*e+a,((n=Math.exp(2*n))-1)/(n+1))-(n=a,((n=Math.exp(a))-1/n)/2));return[o+n*u,s+n*c,l*t/Kn(d*e+a)]})).duration=1e3*i*d/Math.SQRT2,t}return e.rho=function(e){var e=Math.max(.001,+e),t=e*e;return n(e,t,t*t)},e}(Math.SQRT2,2,4),qn=0,Gn=0,Jn=0,Qn=1e3,er=0,tr=0,nr=0,rr="object"==typeof performance&&performance.now?performance:Date,ar="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ir(){return tr||(ar(or),tr=rr.now()+nr)}function or(){tr=0}function sr(){this._call=this._time=this._next=null}function lr(e,t,n){var r=new sr;return r.restart(e,t,n),r}function ur(){tr=(er=rr.now())+nr,qn=Gn=0;try{ir(),++qn;for(var e,t=Wn;t;)0<=(e=tr-t._time)&&t._call.call(void 0,e),t=t._next;--qn}finally{for(var n,r,a=Wn,i=1/(qn=0);a;)a=a._call?(i>a._time&&(i=a._time),(n=a)._next):(r=a._next,a._next=null,n?n._next=r:Wn=r);Xn=n,dr(i),tr=0}}function cr(){var e=rr.now(),t=e-er;Qn<t&&(nr-=t,er=e)}function dr(e){qn||(Gn=Gn&&clearTimeout(Gn),24<e-tr?(e<1/0&&(Gn=setTimeout(ur,e-rr.now()-nr)),Jn=Jn&&clearInterval(Jn)):(Jn||(er=rr.now(),Jn=setInterval(cr,Qn)),qn=1,ar(ur)))}function fr(t,n,e){var r=new sr;return n=null==n?0:+n,r.restart(e=>{r.stop(),t(e+n)},n,e),r}sr.prototype=lr.prototype={constructor:sr,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?ir():+n)+(null==t?0:+t),this._next||Xn===this||(Xn?Xn._next=this:Wn=this,Xn=this),this._call=e,this._time=n,dr()},stop:function(){this._call&&(this._call=null,this._time=1/0,dr())}};var mr=Xe("start","end","cancel","interrupt"),pr=[],hr=0,gr=1,yr=2,vr=3,br=4,Er=5,wr=6;function _r(e,t,n,r,a,i){var o,s,l,u,c,d=e.__transition;if(d){if(n in d)return}else e.__transition={};function f(e){var t,n,r,a;if(l.state!==gr)return p();for(t in c)if((a=c[t]).name===l.name){if(a.state===vr)return fr(f);a.state===br?(a.state=wr,a.timer.stop(),a.on.call("interrupt",o,o.__data__,a.index,a.group),delete c[t]):+t<s&&(a.state=wr,a.timer.stop(),a.on.call("cancel",o,o.__data__,a.index,a.group),delete c[t])}if(fr(function(){l.state===vr&&(l.state=br,l.timer.restart(m,l.delay,l.time),m(e))}),l.state=yr,l.on.call("start",o,o.__data__,l.index,l.group),l.state===yr){for(l.state=vr,u=new Array(r=l.tween.length),t=0,n=-1;t<r;++t)(a=l.tween[t].value.call(o,o.__data__,l.index,l.group))&&(u[++n]=a);u.length=n+1}}function m(e){for(var t=e<l.duration?l.ease.call(null,e/l.duration):(l.timer.restart(p),l.state=Er,1),n=-1,r=u.length;++n<r;)u[n].call(o,t);l.state===Er&&(l.on.call("end",o,o.__data__,l.index,l.group),p())}function p(){for(var e in l.state=wr,l.timer.stop(),delete c[s],c)return;delete o.__transition}o=e,s=n,l={name:t,index:r,group:a,on:mr,tween:pr,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:hr},((c=o.__transition)[s]=l).timer=lr(function(e){l.state=gr,l.timer.restart(f,l.delay,l.time),l.delay<=e&&f(e-l.delay)},0,l.time)}function xr(e,t){e=kr(e,t);if(e.state>hr)throw new Error("too late; already scheduled");return e}function Sr(e,t){e=kr(e,t);if(e.state>vr)throw new Error("too late; already running");return e}function kr(e,t){e=e.__transition;if(e=e&&e[t])return e;throw new Error("transition not found")}function Ir(e,t){var n,r,a,i=e.__transition,o=!0;if(i){for(a in t=null==t?null:t+"",i)(n=i[a]).name!==t?o=!1:(r=n.state>yr&&n.state<Er,n.state=wr,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[a]);o&&delete e.__transition}}function Cr(e,t,n){var r=e._id;return e.each(function(){var e=Sr(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return kr(e,r).value[t]}}function Nr(e,t){var n;return("number"==typeof t?Ln:t instanceof pn?Dn:(n=pn(t))?(t=n,Dn):function(e,r){var t,n,a,i,o,s=Fn.lastIndex=Vn.lastIndex=0,l=-1,u=[],c=[];for(e+="",r+="";(t=Fn.exec(e))&&(n=Vn.exec(r));)(a=n.index)>s&&(a=r.slice(s,a),u[l]?u[l]+=a:u[++l]=a),(t=t[0])===(n=n[0])?u[l]?u[l]+=n:u[++l]=n:(u[++l]=null,c.push({i:l,x:Ln(t,n)})),s=Vn.lastIndex;return s<r.length&&(a=r.slice(s),u[l]?u[l]+=a:u[++l]=a),u.length<2?c[0]?(o=c[0].x,function(e){return o(e)+""}):(i=r,function(){return i}):(r=c.length,function(e){for(var t,n=0;n<r;++n)u[(t=c[n]).i]=t.x(e);return u.join("")})})(e,t)}function Tr(r,a){var i,o;function e(){var t,n,e=a.apply(this,arguments);return i=e!==o?(o=e)&&(t=r,n=e,function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}):i}return e._value=a,e}function Rr(r,a){var i,o;function e(){var t,n,e=a.apply(this,arguments);return i=e!==o?(o=e)&&(t=r,n=e,function(e){this.setAttribute(t,n.call(this,e))}):i}return e._value=a,e}var Mr=n.prototype.constructor;function Or(e){return function(){this.style.removeProperty(e)}}function Ar(a,i,o){var s,l;function e(){var t,n,r,e=i.apply(this,arguments);return s=e!==l?(l=e)&&(t=a,n=e,r=o,function(e){this.style.setProperty(t,n.call(this,e),r)}):s}return e._value=i,e}function Dr(n){var r,a;function e(){var t,e=n.apply(this,arguments);return r=e!==a?(a=e)&&(t=e,function(e){this.textContent=t.call(this,e)}):r}return e._value=n,e}var Pr=0;function Lr(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}a=n.prototype;Lr.prototype={constructor:Lr,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=et(e));for(var r=this._groups,a=r.length,i=new Array(a),o=0;o<a;++o)for(var s,l,u=r[o],c=u.length,d=i[o]=new Array(c),f=0;f<c;++f)(s=u[f])&&(l=e.call(s,s.__data__,f,u))&&("__data__"in s&&(l.__data__=s.__data__),d[f]=l,_r(d[f],t,n,f,d,kr(s,n)));return new Lr(i,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=nt(e));for(var r=this._groups,a=r.length,i=[],o=[],s=0;s<a;++s)for(var l,u=r[s],c=u.length,d=0;d<c;++d)if(l=u[d]){for(var f,m=e.call(l,l.__data__,d,u),p=kr(l,n),h=0,g=m.length;h<g;++h)(f=m[h])&&_r(f,t,n,h,m,p);i.push(m),o.push(l)}return new Lr(i,o,t,n)},selectChild:a.selectChild,selectChildren:a.selectChildren,filter:function(e){"function"!=typeof e&&(e=at(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var i,o=t[a],s=o.length,l=r[a]=[],u=0;u<s;++u)(i=o[u])&&e.call(i,i.__data__,u,o)&&l.push(i);return new Lr(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,e=n.length,a=Math.min(r,e),i=new Array(r),o=0;o<a;++o)for(var s,l=t[o],u=n[o],c=l.length,d=i[o]=new Array(c),f=0;f<c;++f)(s=l[f]||u[f])&&(d[f]=s);for(;o<r;++o)i[o]=t[o];return new Lr(i,this._parents,this._name,this._id)},selection:function(){return new Mr(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=++Pr,r=this._groups,a=r.length,i=0;i<a;++i)for(var o,s=r[i],l=s.length,u=0;u<l;++u)(o=s[u])&&_r(o,e,n,u,s,{time:(o=kr(o,t)).time+o.delay+o.duration,delay:0,duration:o.duration,ease:o.ease});return new Lr(r,this._parents,e,n)},call:a.call,nodes:a.nodes,node:a.node,size:a.size,empty:a.empty,each:a.each,on:function(e,t){var n,r,a,i,o,s,l=this._id;return arguments.length<2?kr(this.node(),l).on.on(e):this.each((n=l,a=t,s=((r=e)+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return!(e=0<=t?e.slice(0,t):e)||"start"===e})?xr:Sr,function(){var e=s(this,n),t=e.on;t!==i&&(o=(i=t).copy()).on(r,a),e.on=o}))},attr:function(e,t){var n=Ge(e),r="transform"===n?Zn:Nr;return this.attrTween(e,"function"==typeof t?(n.local?function(r,a,i){var o,s,l;return function(){var e,t,n=i(this);if(null!=n)return(e=this.getAttributeNS(r.space,r.local))===(t=n+"")?null:e===o&&t===s?l:(s=t,l=a(o=e,n));this.removeAttributeNS(r.space,r.local)}}:function(r,a,i){var o,s,l;return function(){var e,t,n=i(this);if(null!=n)return(e=this.getAttribute(r))===(t=n+"")?null:e===o&&t===s?l:(s=t,l=a(o=e,n));this.removeAttribute(r)}})(n,r,Cr(this,"attr."+e,t)):null==t?(n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}})(n):(n.local?function(t,n,r){var a,i,o=r+"";return function(){var e=this.getAttributeNS(t.space,t.local);return e===o?null:e===a?i:i=n(a=e,r)}}:function(t,n,r){var a,i,o=r+"";return function(){var e=this.getAttribute(t);return e===o?null:e===a?i:i=n(a=e,r)}})(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=Ge(e);return this.tween(n,(r.local?Tr:Rr)(r,t))},style:function(e,t,n){var r,a,i,o,s,l,u,c,d,f,m,p,h,g,y,v,b,E,w,_,x,S,k,I,C,N="transform"==(e+="")?Un:Nr;return null==t?this.styleTween(e,(x=e,S=N,function(){var e=bt(this,x),t=(this.style.removeProperty(x),bt(this,x));return e===t?null:e===k&&t===I?C:C=S(k=e,I=t)})).on("end.style."+e,Or(e)):"function"==typeof t?this.styleTween(e,(v=N,b=Cr(this,"style."+(y=e),t),function(){var e=bt(this,y),t=b(this),n=t+"";return null==t&&(this.style.removeProperty(y),n=t=bt(this,y)),e===n?null:e===E&&n===w?_:(w=n,_=v(E=e,t))})).each((u=this._id,g="end."+(h="style."+(c=e)),function(){var e=Sr(this,u),t=e.on,n=null==e.value[h]?p=p||Or(c):void 0;t===d&&m===n||(f=(d=t).copy()).on(g,m=n),e.on=f})):this.styleTween(e,(r=e,a=N,l=(i=t)+"",function(){var e=bt(this,r);return e===l?null:e===o?s:s=a(o=e,i)}),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,Ar(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?(n=Cr(this,"text",e),function(){var e=n(this);this.textContent=null==e?"":e}):(t=null==e?"":e+"",function(){this.textContent=t}));var t,n},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,Dr(e))},remove:function(){return this.on("end.remove",(n=this._id,function(){var e,t=this.parentNode;for(e in this.__transition)if(+e!==n)return;t&&t.removeChild(this)}));var n},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,a=kr(this.node(),n).tween,i=0,o=a.length;i<o;++i)if((r=a[i]).name===e)return r.value;return null}return this.each((null==t?function(a,i){var o,s;return function(){var e=Sr(this,a),t=e.tween;if(t!==o)for(var n=0,r=(s=o=t).length;n<r;++n)if(s[n].name===i){(s=s.slice()).splice(n,1);break}e.tween=s}}:function(i,o,s){var l,u;if("function"!=typeof s)throw new Error;return function(){var e=Sr(this,i),t=e.tween;if(t!==l){u=(l=t).slice();for(var n={name:o,value:s},r=0,a=u.length;r<a;++r)if(u[r].name===o){u[r]=n;break}r===a&&u.push(n)}e.tween=u}})(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){xr(this,e).delay=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){xr(this,e).delay=t}})(t,e)):kr(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){Sr(this,e).duration=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){Sr(this,e).duration=t}})(t,e)):kr(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){Sr(this,e).ease=t}}(t,e)):kr(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each((t=this._id,n=e,function(){var e=n.apply(this,arguments);if("function"!=typeof e)throw new Error;Sr(this,t).ease=e}));var t,n},end:function(){var a,i,o=this,s=o._id,l=o.size();return new Promise(function(e,t){var n={value:t},r={value:function(){0==--l&&e()}};o.each(function(){var e=Sr(this,s),t=e.on;t!==a&&((i=(a=t).copy())._.cancel.push(n),i._.interrupt.push(n),i._.end.push(r)),e.on=i}),0===l&&e()})},[Symbol.iterator]:a[Symbol.iterator]};var Fr={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};n.prototype.interrupt=function(e){return this.each(function(){Ir(this,e)})},n.prototype.transition=function(e){var t,n;e=e instanceof Lr?(t=e._id,e._name):(t=++Pr,(n=Fr).time=ir(),null==e?null:e+"");for(var r=this._groups,a=r.length,i=0;i<a;++i)for(var o,s=r[i],l=s.length,u=0;u<l;++u)(o=s[u])&&_r(o,e,t,u,s,n||function(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}(o,t));return new Lr(r,this._parents,e,t)};var Vr=e=>()=>e;function jr(e,{sourceEvent:t,target:n,transform:r,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:a}})}function Br(e,t,n){this.k=e,this.x=t,this.y=n}Br.prototype={constructor:Br,scale:function(e){return 1===e?this:new Br(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Br(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var zr=new Br(1,0,0);function $r(e){e.stopImmediatePropagation()}function Hr(e){e.preventDefault(),e.stopImmediatePropagation()}function Ur(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function Zr(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function Kr(){return this.__zoom||zr}function Wr(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Xr(){return navigator.maxTouchPoints||"ontouchstart"in this}function Yr(e,t,n){var r=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],t=e.invertY(t[1][1])-n[1][1];return e.translate(r<a?(r+a)/2:Math.min(0,r)||Math.max(0,a),i<t?(i+t)/2:Math.min(0,i)||Math.max(0,t))}function qr(){var u,c,l,d=Ur,f=Zr,m=Yr,o=Wr,t=Xr,s=[0,1/0],p=[[-1/0,-1/0],[1/0,1/0]],h=250,g=Yn,n=Xe("start","zoom","end"),y=500,v=150,b=0,E=10;function w(e){e.property("__zoom",Kr).on("wheel.zoom",a,{passive:!1}).on("mousedown.zoom",i).on("dblclick.zoom",C).filter(t).on("touchstart.zoom",N).on("touchmove.zoom",T).on("touchend.zoom touchcancel.zoom",R).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function _(e,t){return(t=Math.max(s[0],Math.min(s[1],t)))===e.k?e:new Br(t,e.x,e.y)}function x(e,t,n){var r=t[0]-n[0]*e.k,t=t[1]-n[1]*e.k;return r===e.x&&t===e.y?e:new Br(e.k,r,t)}function S(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function k(e,n,l,u){e.on("start.zoom",function(){I(this,arguments).event(u).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(u).end()}).tween("zoom",function(){var e=arguments,r=I(this,e).event(u),t=f.apply(this,e),a=null==l?S(t):"function"==typeof l?l.apply(this,e):l,i=Math.max(t[1][0]-t[0][0],t[1][1]-t[0][1]),t=this.__zoom,o="function"==typeof n?n.apply(this,e):n,s=g(t.invert(a).concat(i/t.k),o.invert(a).concat(i/o.k));return function(e){var t,n;e=1===e?o:(t=s(e),new Br(n=i/t[2],a[0]-t[0]*n,a[1]-t[1]*n)),r.zoom(null,e)}})}function I(e,t,n){return!n&&e.__zooming||new r(e,t)}function r(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=f.apply(e,t),this.taps=0}function a(e,...t){if(d.apply(this,arguments)){var n=I(this,t).event(e),r=this.__zoom,a=Math.max(s[0],Math.min(s[1],r.k*Math.pow(2,o.apply(this,arguments)))),i=Bt(e);if(n.wheel)n.mouse[0][0]===i[0]&&n.mouse[0][1]===i[1]||(n.mouse[1]=r.invert(n.mouse[0]=i)),clearTimeout(n.wheel);else{if(r.k===a)return;n.mouse=[i,r.invert(i)],Ir(this),n.start()}Hr(e),n.wheel=setTimeout(function(){n.wheel=null,n.end()},v),n.zoom("mouse",m(x(_(r,a),n.mouse[0],n.mouse[1]),n.extent,p))}}function i(e,...t){var r,a,n,i,o,s;!l&&d.apply(this,arguments)&&(r=e.currentTarget,a=I(this,t,!0).event(e),n=jt(e.view).on("mousemove.zoom",function(e){{var t,n;Hr(e),a.moved||(t=e.clientX-o,n=e.clientY-s,a.moved=b<t*t+n*n)}a.event(e).zoom("mouse",m(x(a.that.__zoom,a.mouse[0]=Bt(e,r),a.mouse[1]),a.extent,p))},!0).on("mouseup.zoom",function(e){n.on("mousemove.zoom mouseup.zoom",null),Kt(e.view,a.moved),Hr(e),a.event(e).end()},!0),i=Bt(e,r),o=e.clientX,s=e.clientY,Zt(e.view),$r(e),a.mouse=[i,this.__zoom.invert(i)],Ir(this),a.start())}function C(e,...t){var n,r,a,i;d.apply(this,arguments)&&(i=this.__zoom,n=Bt(e.changedTouches?e.changedTouches[0]:e,this),r=i.invert(n),a=i.k*(e.shiftKey?.5:2),i=m(x(_(i,a),n,r),f.apply(this,t),p),Hr(e),0<h?jt(this).transition().duration(h).call(k,i,n,e):jt(this).call(w.transform,i,n,e))}function N(e,...t){if(d.apply(this,arguments)){var n,r,a,i,o=e.touches,s=o.length,l=I(this,t,e.changedTouches.length===s).event(e);for($r(e),r=0;r<s;++r)i=[i=Bt(a=o[r],this),this.__zoom.invert(i),a.identifier],l.touch0?l.touch1||l.touch0[2]===i[2]||(l.touch1=i,l.taps=0):(l.touch0=i,n=!0,l.taps=1+!!u);u=u&&clearTimeout(u),n&&(l.taps<2&&(c=i[0],u=setTimeout(function(){u=null},y)),Ir(this),l.start())}}function T(e,...t){if(this.__zooming){var n,r=I(this,t).event(e),a=e.changedTouches,i=a.length;for(Hr(e),n=0;n<i;++n)d=Bt(c=a[n],this),r.touch0&&r.touch0[2]===c.identifier?r.touch0[0]=d:r.touch1&&r.touch1[2]===c.identifier&&(r.touch1[0]=d);if(c=r.that.__zoom,r.touch1)var t=r.touch0[0],e=r.touch0[1],o=r.touch1[0],s=r.touch1[1],l=(l=o[0]-t[0])*l+(l=o[1]-t[1])*l,u=(u=s[0]-e[0])*u+(u=s[1]-e[1])*u,c=_(c,Math.sqrt(l/u)),d=[(t[0]+o[0])/2,(t[1]+o[1])/2],l=[(e[0]+s[0])/2,(e[1]+s[1])/2];else{if(!r.touch0)return;d=r.touch0[0],l=r.touch0[1]}r.zoom("touch",m(x(c,d,l),r.extent,p))}}function R(e,...t){if(this.__zooming){var n,r,a,i=I(this,t).event(e),o=e.changedTouches,s=o.length;for($r(e),l&&clearTimeout(l),l=setTimeout(function(){l=null},y),n=0;n<s;++n)a=o[n],i.touch0&&i.touch0[2]===a.identifier?delete i.touch0:i.touch1&&i.touch1[2]===a.identifier&&delete i.touch1;i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0?i.touch0[1]=this.__zoom.invert(i.touch0[0]):(i.end(),2===i.taps&&(a=Bt(a,this),Math.hypot(c[0]-a[0],c[1]-a[1])<E)&&(r=jt(this).on("dblclick.zoom"))&&r.apply(this,arguments))}}return w.transform=function(e,t,n,r){var a=e.selection?e.selection():e;a.property("__zoom",Kr),e!==a?k(e,t,n,r):a.interrupt().each(function(){I(this,arguments).event(r).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()})},w.scaleBy=function(e,t,n,r){w.scaleTo(e,function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)},n,r)},w.scaleTo=function(e,i,o,t){w.transform(e,function(){var e=f.apply(this,arguments),t=this.__zoom,n=null==o?S(e):"function"==typeof o?o.apply(this,arguments):o,r=t.invert(n),a="function"==typeof i?i.apply(this,arguments):i;return m(x(_(t,a),n,r),e,p)},o,t)},w.translateBy=function(e,t,n,r){w.transform(e,function(){return m(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),f.apply(this,arguments),p)},null,r)},w.translateTo=function(e,r,a,i,t){w.transform(e,function(){var e=f.apply(this,arguments),t=this.__zoom,n=null==i?S(e):"function"==typeof i?i.apply(this,arguments):i;return m(zr.translate(n[0],n[1]).scale(t.k).translate("function"==typeof r?-r.apply(this,arguments):-r,"function"==typeof a?-a.apply(this,arguments):-a),e,p)},i,t)},r.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this).emit("start"),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=jt(this.that).datum();n.call(e,this.that,new jr(e,{sourceEvent:this.sourceEvent,target:w,type:e,transform:this.that.__zoom,dispatch:n}),t)}},w.wheelDelta=function(e){return arguments.length?(o="function"==typeof e?e:Vr(+e),w):o},w.filter=function(e){return arguments.length?(d="function"==typeof e?e:Vr(!!e),w):d},w.touchable=function(e){return arguments.length?(t="function"==typeof e?e:Vr(!!e),w):t},w.extent=function(e){return arguments.length?(f="function"==typeof e?e:Vr([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),w):f},w.scaleExtent=function(e){return arguments.length?(s[0]=+e[0],s[1]=+e[1],w):[s[0],s[1]]},w.translateExtent=function(e){return arguments.length?(p[0][0]=+e[0][0],p[1][0]=+e[1][0],p[0][1]=+e[0][1],p[1][1]=+e[1][1],w):[[p[0][0],p[0][1]],[p[1][0],p[1][1]]]},w.constrain=function(e){return arguments.length?(m=e,w):m},w.duration=function(e){return arguments.length?(h=+e,w):h},w.interpolate=function(e){return arguments.length?(g=e,w):g},w.on=function(){var e=n.on.apply(n,arguments);return e===n?w:e},w.clickDistance=function(e){return arguments.length?(b=(e=+e)*e,w):Math.sqrt(b)},w.tapDistance=function(e){return arguments.length?(E=+e,w):E},w}t(Y(),1);var Gr=(0,ut.createContext)(null),Jr=Gr.Provider,Qr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},ea=Qr.error001();function ta(e,t){var n=(0,ut.useContext)(Gr);if(null===n)throw new Error(ea);return Be(n,e,t)}var na=()=>{const e=(0,ut.useContext)(Gr);if(null===e)throw new Error(ea);return(0,ut.useMemo)(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},ra=e=>e.userSelectionActive?"none":"all";function aa({position:e,children:t,className:n,style:r,...a}){var i=ta(ra),e=(""+e).split("-");return ut.default.createElement("div",{className:ct(["react-flow__panel",n,...e]),style:{...r,pointerEvents:i},...a},t)}function ia({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:ut.default.createElement(aa,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},ut.default.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}var oa=(0,ut.memo)(({x:e,y:t,label:n,labelStyle:r={},labelShowBg:a=!0,labelBgStyle:i={},labelBgPadding:o=[2,4],labelBgBorderRadius:s=2,children:l,className:u,...c})=>{const d=(0,ut.useRef)(null),[f,m]=(0,ut.useState)({x:0,y:0,width:0,height:0});u=ct(["react-flow__edge-textwrapper",u]);return(0,ut.useEffect)(()=>{var e;d.current&&(e=d.current.getBBox(),m({x:e.x,y:e.y,width:e.width,height:e.height}))},[n]),void 0!==n&&n?ut.default.createElement("g",{transform:`translate(${e-f.width/2} ${t-f.height/2})`,className:u,visibility:f.width?"visible":"hidden",...c},a&&ut.default.createElement("rect",{width:f.width+2*o[0],x:-o[0],y:-o[1],height:f.height+2*o[1],className:"react-flow__edge-textbg",style:i,rx:s,ry:s}),ut.default.createElement("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:d,style:r},n),l):null}),sa=e=>({width:e.offsetWidth,height:e.offsetHeight}),la=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),ua=(e={x:0,y:0},t)=>({x:la(e.x,t[0][0],t[1][0]),y:la(e.y,t[0][1],t[1][1])}),ca=(e,t,n)=>e<t?la(Math.abs(e-t),1,50)/50:n<e?-la(Math.abs(e-n),1,50)/50:0,da=(e,t)=>{return[20*ca(e.x,35,t.width-35),20*ca(e.y,35,t.height-35)]},fa=e=>e.getRootNode?.()||window?.document,ma=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),pa=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),ha=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),ga=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),ya=(e,t)=>ha(ma(pa(e),pa(t))),va=(e,t)=>{var n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),e=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*e)},ba=e=>Ea(e.width)&&Ea(e.height)&&Ea(e.x)&&Ea(e.y),Ea=e=>!isNaN(e)&&isFinite(e),wa=Symbol.for("internals"),_a=["Enter"," ","Escape"],xa=(e,t)=>{console.warn(`[React Flow]: ${t} Help: https://reactflow.dev/error#`+e)},Sa=e=>"nativeEvent"in e;function ka(e){e=(Sa(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(e?.nodeName)||e?.hasAttribute("contenteditable")||!!e?.closest(".nokey")}var Ia,Ca,Na,Ta,O,Ra=e=>"clientX"in e,Ma=(e,t)=>{var n=Ra(e),r=(n?e:e.touches?.[0]).clientX,n=(n?e:e.touches?.[0]).clientY;return{x:r-(t?.left??0),y:n-(t?.top??0)}},Oa=()=>"undefined"!=typeof navigator&&0<=navigator?.userAgent?.indexOf("Mac"),Aa=({id:e,path:t,labelX:n,labelY:r,label:a,labelStyle:i,labelShowBg:o,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:d,markerStart:f,interactionWidth:m=20})=>ut.default.createElement(ut.default.Fragment,null,ut.default.createElement("path",{id:e,style:c,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:d,markerStart:f}),m&&ut.default.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}),a&&Ea(n)&&Ea(r)?ut.default.createElement(oa,{x:n,y:r,label:a,labelStyle:i,labelShowBg:o,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:u}):null);function Da(n,r,a){return void 0===a?a:e=>{var t=r().edges.find(e=>e.id===n);t&&a(e,{...t})}}function Pa({sourceX:e,sourceY:t,targetX:n,targetY:r}){var a=Math.abs(n-e)/2,e=n<e?n+a:n-a,n=Math.abs(r-t)/2;return[e,r<t?r+n:r-n,a,n]}function La({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:a,sourceControlY:i,targetControlX:o,targetControlY:s}){a=.125*e+.375*a+.375*o+.125*n,o=.125*t+.375*i+.375*s+.125*r;return[a,o,Math.abs(a-e),Math.abs(o-t)]}function Fa({pos:e,x1:t,y1:n,x2:r,y2:a}){return e===O.Left||e===O.Right?[.5*(t+r),n]:[t,.5*(n+a)]}function Va({sourceX:e,sourceY:t,sourcePosition:n=O.Bottom,targetX:r,targetY:a,targetPosition:i=O.Top}){var[n,o]=Fa({pos:n,x1:e,y1:t,x2:r,y2:a}),[i,s]=Fa({pos:i,x1:r,y1:a,x2:e,y2:t}),[l,u,c,d]=La({sourceX:e,sourceY:t,targetX:r,targetY:a,sourceControlX:n,sourceControlY:o,targetControlX:i,targetControlY:s});return[`M${e},${t} C${n},${o} ${i},${s} ${r},`+a,l,u,c,d]}Aa.displayName="BaseEdge",(nn=Ia=Ia||{}).Strict="strict",nn.Loose="loose",(i=Ca=Ca||{}).Free="free",i.Vertical="vertical",i.Horizontal="horizontal",(a=Na=Na||{}).Partial="partial",a.Full="full",(n=Ta=Ta||{}).Bezier="default",n.Straight="straight",n.Step="step",n.SmoothStep="smoothstep",n.SimpleBezier="simplebezier",(nn=o=o||{}).Arrow="arrow",nn.ArrowClosed="arrowclosed",(i=O=O||{}).Left="left",i.Top="top",i.Right="right",i.Bottom="bottom";var ja=(0,ut.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:a=O.Bottom,targetPosition:i=O.Top,label:o,labelStyle:s,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:f,markerEnd:m,markerStart:p,interactionWidth:h})=>{var[e,t,a]=Va({sourceX:e,sourceY:t,sourcePosition:a,targetX:n,targetY:r,targetPosition:i});return ut.default.createElement(Aa,{path:e,labelX:t,labelY:a,label:o,labelStyle:s,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:f,markerEnd:m,markerStart:p,interactionWidth:h})}),Ba=(ja.displayName="SimpleBezierEdge",{[O.Left]:{x:-1,y:0},[O.Right]:{x:1,y:0},[O.Top]:{x:0,y:-1},[O.Bottom]:{x:0,y:1}}),za=({source:e,sourcePosition:t=O.Bottom,target:n})=>t===O.Left||t===O.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},$a=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Ha({sourceX:e,sourceY:t,sourcePosition:n=O.Bottom,targetX:r,targetY:a,targetPosition:i=O.Top,borderRadius:o=5,centerX:s,centerY:l,offset:u=20}){const[c,d,f,m,p]=function({source:e,sourcePosition:t=O.Bottom,target:n,targetPosition:r=O.Top,center:a,offset:i}){var o=Ba[t],s=Ba[r],l={x:e.x+o.x*i,y:e.y+o.y*i},u={x:n.x+s.x*i,y:n.y+s.y*i},c=0!==(d=za({source:l,sourcePosition:t,target:u})).x?"x":"y",d=d[c];let f=[],m,p;var h={x:0,y:0},g={x:0,y:0},[y,v,b,E]=Pa({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});return o[c]*s[c]==-1?(m=a.x??y,p=a.y??v,y=[{x:m,y:l.y},{x:m,y:u.y}],a=[{x:l.x,y:p},{x:u.x,y:p}],f=o[c]===d?"x"==c?y:a:"x"==c?a:y):(v=[{x:l.x,y:u.y}],a=[{x:u.x,y:l.y}],f="x"==c?o.x===d?a:v:o.y===d?v:a,t===r&&(y=Math.abs(e[c]-n[c]))<=i&&(i=Math.min(i-1,i-y),o[c]===d?h[c]=(l[c]>e[c]?-1:1)*i:g[c]=(u[c]>n[c]?-1:1)*i),t!==r&&(d=o[c]===s[y="x"==c?"y":"x"],i=u[y]<l[y],t=l[y]<u[y],1===o[c]&&(!d&&i||d&&t)||1!==o[c]&&(!d&&t||d&&i))&&(f="x"==c?v:a),r={x:l.x+h.x,y:l.y+h.y},s={x:u.x+g.x,y:u.y+g.y},y=Math.max(Math.abs(r.x-f[0].x),Math.abs(s.x-f[0].x)),o=Math.max(Math.abs(r.y-f[0].y),Math.abs(s.y-f[0].y)),p=o<=y?(m=(r.x+s.x)/2,f[0].y):(m=f[0].x,(r.y+s.y)/2)),[t=[e,{x:l.x+h.x,y:l.y+h.y},...f,{x:u.x+g.x,y:u.y+g.y},n],m,p,b,E]}({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:a},targetPosition:i,center:{x:s,y:l},offset:u});return[c.reduce((e,t,n)=>{let r="";return e+=r=0<n&&n<c.length-1?function(e,t,n,r){var a,r=Math.min($a(e,t)/2,$a(t,n)/2,r),{x:t,y:i}=t;return e.x===t&&t===n.x||e.y===i&&i===n.y?`L${t} `+i:e.y===i?`L ${t+r*(e.x<n.x?-1:1)},${i}Q ${t},${i} ${t},`+(i+r*(e.y<n.y?1:-1)):(a=e.x<n.x?1:-1,`L ${t},${i+r*(e.y<n.y?-1:1)}Q ${t},${i} ${t+r*a},`+i)}(c[n-1],t,c[n+1],o):(0===n?"M":"L")+t.x+" "+t.y},""),d,f,m,p]}var Ua=(0,ut.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:a,labelStyle:i,labelShowBg:o,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:u,style:c,sourcePosition:d=O.Bottom,targetPosition:f=O.Top,markerEnd:m,markerStart:p,pathOptions:h,interactionWidth:g})=>{var[e,t,d]=Ha({sourceX:e,sourceY:t,sourcePosition:d,targetX:n,targetY:r,targetPosition:f,borderRadius:h?.borderRadius,offset:h?.offset});return ut.default.createElement(Aa,{path:e,labelX:t,labelY:d,label:a,labelStyle:i,labelShowBg:o,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:m,markerStart:p,interactionWidth:g})}),Za=(Ua.displayName="SmoothStepEdge",(0,ut.memo)(e=>ut.default.createElement(Ua,{...e,pathOptions:(0,ut.useMemo)(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])})));Za.displayName="StepEdge";var Ka=(0,ut.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:r,label:a,labelStyle:i,labelShowBg:o,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:d,markerStart:f,interactionWidth:m})=>{var[e,t,n]=function({sourceX:e,sourceY:t,targetX:n,targetY:r}){var[a,i,o,s]=Pa({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},`+r,a,i,o,s]}({sourceX:e,sourceY:t,targetX:n,targetY:r});return ut.default.createElement(Aa,{path:e,labelX:t,labelY:n,label:a,labelStyle:i,labelShowBg:o,labelBgStyle:s,labelBgPadding:l,labelBgBorderRadius:u,style:c,markerEnd:d,markerStart:f,interactionWidth:m})});function Wa(e,t){return 0<=e?.5*e:25*t*Math.sqrt(-e)}function Xa({pos:e,x1:t,y1:n,x2:r,y2:a,c:i}){switch(e){case O.Left:return[t-Wa(t-r,i),n];case O.Right:return[t+Wa(r-t,i),n];case O.Top:return[t,n-Wa(n-a,i)];case O.Bottom:return[t,n+Wa(a-n,i)]}}function Ya({sourceX:e,sourceY:t,sourcePosition:n=O.Bottom,targetX:r,targetY:a,targetPosition:i=O.Top,curvature:o=.25}){var[n,s]=Xa({pos:n,x1:e,y1:t,x2:r,y2:a,c:o}),[i,o]=Xa({pos:i,x1:r,y1:a,x2:e,y2:t,c:o}),[l,u,c,d]=La({sourceX:e,sourceY:t,targetX:r,targetY:a,sourceControlX:n,sourceControlY:s,targetControlX:i,targetControlY:o});return[`M${e},${t} C${n},${s} ${i},${o} ${r},`+a,l,u,c,d]}Ka.displayName="StraightEdge";var qa=(0,ut.memo)(({sourceX:e,sourceY:t,targetX:n,targetY:r,sourcePosition:a=O.Bottom,targetPosition:i=O.Top,label:o,labelStyle:s,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:f,markerEnd:m,markerStart:p,pathOptions:h,interactionWidth:g})=>{var[e,t,a]=Ya({sourceX:e,sourceY:t,sourcePosition:a,targetX:n,targetY:r,targetPosition:i,curvature:h?.curvature});return ut.default.createElement(Aa,{path:e,labelX:t,labelY:a,label:o,labelStyle:s,labelShowBg:l,labelBgStyle:u,labelBgPadding:c,labelBgBorderRadius:d,style:f,markerEnd:m,markerStart:p,interactionWidth:g})}),Ga=(qa.displayName="BezierEdge",(0,ut.createContext)(null)),Ja=Ga.Provider,Qa=(Ga.Consumer,e=>"id"in e&&"source"in e&&"target"in e),ei=e=>"id"in e&&!("source"in e)&&!("target"in e),ti=(t,e,n)=>{if(!ei(t))return[];const r=n.filter(e=>e.source===t.id).map(e=>e.target);return e.filter(e=>r.includes(e.id))},ni=(t,e,n)=>{if(!ei(t))return[];const r=n.filter(e=>e.target===t.id).map(e=>e.source);return e.filter(e=>r.includes(e.id))},ri=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`reactflow__edge-${e}${t||""}-`+n+(r||""),ai=(t,e)=>{return void 0===t?"":"string"==typeof t?t:(e?e+"__":"")+Object.keys(t).sort().map(e=>e+"="+t[e]).join("&")},ii=(t,e)=>e.some(e=>!(e.source!==t.source||e.target!==t.target||e.sourceHandle!==t.sourceHandle&&(e.sourceHandle||t.sourceHandle)||e.targetHandle!==t.targetHandle&&(e.targetHandle||t.targetHandle))),oi=(e,t)=>{if(!e.source||!e.target)return xa("006",Qr.error006()),t;let n;return n=Qa(e)?{...e}:{...e,id:ri(e)},ii(n,t)?t:t.concat(n)},si=({x:e,y:t},[n,r,a],i,[o,s])=>{e={x:(e-n)/a,y:(t-r)/a};return i?{x:o*Math.round(e.x/o),y:s*Math.round(e.y/s)}:e},li=({x:e,y:t},[n,r,a])=>({x:e*a+n,y:t*a+r}),ui=(e,t=[0,0])=>{var n,r;return e?(n=(e.width??0)*t[0],t=(e.height??0)*t[1],{...r={x:e.position.x-n,y:e.position.y-t},positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-t}:r}):{x:0,y:0,positionAbsolute:{x:0,y:0}}},ci=(e,a=[0,0])=>{return 0===e.length?{x:0,y:0,width:0,height:0}:(e=e.reduce((e,t)=>{var{x:n,y:r}=ui(t,a).positionAbsolute;return ma(e,pa({x:n,y:r,width:t.width||0,height:t.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0}),ha(e))},di=(e,t,[n,r,a]=[0,0,1],i=!1,o=!1,s=[0,0])=>{const l={x:(t.x-n)/a,y:(t.y-r)/a,width:t.width/a,height:t.height/a},u=[];return e.forEach(e=>{var{width:t,height:n,selectable:r=!0,hidden:a=!1}=e;if(o&&!r||a)return!1;r=ui(e,s).positionAbsolute,a={x:r.x,y:r.y,width:t||0,height:n||0},r=va(l,a);(void 0===t||void 0===n||null===t||null===n||i&&0<r||(t||0)*(n||0)<=r||e.dragging)&&u.push(e)}),u},fi=(e,t)=>{const n=e.map(e=>e.id);return t.filter(e=>n.includes(e.source)||n.includes(e.target))},mi=(e,t,n,r,a,i=.1)=>{var o=t/(e.width*(1+i)),i=n/(e.height*(1+i)),o=Math.min(o,i),i=la(o,r,a);return{x:t/2-(e.x+e.width/2)*i,y:n/2-(e.y+e.height/2)*i,zoom:i}},pi=(e,t=0)=>e.transition().duration(t);function hi(n,e,r,a){return(e[r]||[]).reduce((e,t)=>(`${n.id}-${t.id}-`+r!==a&&e.push({id:t.id||null,type:r,nodeId:n.id,x:(n.positionAbsolute?.x??0)+t.x+t.width/2,y:(n.positionAbsolute?.y??0)+t.y+t.height/2}),e),[])}var gi={source:null,target:null,sourceHandle:null,targetHandle:null},yi=()=>({handleDomNode:null,isValid:!1,connection:gi,endHandle:null});function vi(e,t,n,r,a,i,o){var s,l,u,c,d,a="target"===a,o=o.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),e={...yi(),handleDomNode:o};return o&&(s=bi(void 0,o),l=o.getAttribute("data-nodeid"),u=o.getAttribute("data-handleid"),c=o.classList.contains("connectable"),o=o.classList.contains("connectableend"),e.connection=d={source:a?l:n,sourceHandle:a?u:r,target:a?n:l,targetHandle:a?r:u},c&&o)&&(t===Ia.Strict?a&&"source"===s||!a&&"target"===s:l!==n||u!==r)&&(e.endHandle={nodeId:l,handleId:u,type:s},e.isValid=i(d)),e}function bi(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function Ei(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function wi({event:e,handleId:u,nodeId:c,onConnect:t,isTarget:d,getState:f,setState:m,isValidConnection:p,edgeUpdaterType:n,onReconnectEnd:h}){const g=fa(e.target),{connectionMode:y,domNode:r,autoPanOnConnect:v,connectionRadius:b,onConnectStart:E,panBy:w,getNodes:_,cancelConnection:x}=f();let S=0,k;var I,C,N,{x:T,y:R}=Ma(e),T=g?.elementFromPoint(T,R),R=bi(n,T);const M=r?.getBoundingClientRect();if(M&&R){let r,a=Ma(e,M),i=!1,o=null,s=!1,l=null;({nodes:T,nodeId:I,handleId:C,handleType:N}=[{nodes:_(),nodeId:c,handleId:u,handleType:R}][0]);const D=T.reduce((n,r)=>{if(r[wa]){var a=r[wa]["handleBounds"];let e=[],t=[];a&&(e=hi(r,a,"source",I+`-${C}-`+N),t=hi(r,a,"target",I+`-${C}-`+N)),n.push(...e,...t)}return n},[]);const P=()=>{var e,t;v&&([e,t]=da(a,M),w({x:e,y:t}),S=requestAnimationFrame(P))};function O(e){var t=f()["transform"],{handle:e,validHandleResult:n}=(a=Ma(e,M),function(e,t,r,a,n,i){var{x:e,y:o}=Ma(e);if(t=t.elementsFromPoint(e,o).find(e=>e.classList.contains("react-flow__handle"))){const d=t.getAttribute("data-nodeid");if(d){const f=bi(void 0,t),m=t.getAttribute("data-handleid");e=i({nodeId:d,id:m,type:f});if(e)return o=n.find(e=>e.nodeId===d&&e.type===f&&e.id===m),{handle:{id:m,type:f,nodeId:d,x:o?.x||r.x,y:o?.y||r.y},validHandleResult:e}}}let s=[],l=1/0;if(n.forEach(e=>{var t,n=Math.sqrt((e.x-r.x)**2+(e.y-r.y)**2);n<=a&&(t=i(e),n<=l)&&(n<l?s=[{handle:e,validHandleResult:t}]:n===l&&s.push({handle:e,validHandleResult:t}),l=n)}),!s.length)return{handle:null,validHandleResult:yi()};if(1===s.length)return s[0];const u=s.some(({validHandleResult:e})=>e.isValid),c=s.some(({handle:e})=>"target"===e.type);return s.find(({handle:e,validHandleResult:t})=>c?"target"===e.type:!u||t.isValid)||s[0]}(e,g,si(a,t,!1,[1,1]),b,D,e=>vi(e,y,c,u,d?"target":"source",p,g)));if(k=e,i||(P(),i=!0),l=n.handleDomNode,o=n.connection,s=n.isValid,m({connectionPosition:k&&s?li({x:k.x,y:k.y},t):a,connectionStatus:function(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}(!!k,s),connectionEndHandle:n.endHandle}),!k&&!s&&!l)return Ei(r);o.source!==o.target&&l&&(Ei(r),(r=l).classList.add("connecting","react-flow__handle-connecting"),l.classList.toggle("valid",s),l.classList.toggle("react-flow__handle-valid",s))}function A(e){(k||l)&&o&&s&&t?.(o),f().onConnectEnd?.(e),n&&h?.(e),Ei(r),x(),cancelAnimationFrame(S),i=!1,s=!1,o=null,l=null,g.removeEventListener("mousemove",O),g.removeEventListener("mouseup",A),g.removeEventListener("touchmove",O),g.removeEventListener("touchend",A)}m({connectionPosition:a,connectionStatus:null,connectionNodeId:c,connectionHandleId:u,connectionHandleType:R,connectionStartHandle:{nodeId:c,handleId:u,type:R},connectionEndHandle:null}),E?.(e,{nodeId:c,handleId:u,handleType:R}),g.addEventListener("mousemove",O),g.addEventListener("mouseup",A),g.addEventListener("touchmove",O),g.addEventListener("touchend",A)}}var _i=()=>!0,xi=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),a=(0,ut.forwardRef)(({type:s="source",position:e=O.Top,isValidConnection:l,isConnectable:t=!0,isConnectableStart:u=!0,isConnectableEnd:n=!0,id:r,onConnect:a,children:i,className:o,onMouseDown:c,onTouchStart:d,...f},m)=>{const p=r||null,h="target"===s,g=na(),y=(0,ut.useContext)(Ga);var v,b,E,{connectOnClick:r,noPanClassName:w}=ta(xi,He),{connecting:_,clickConnecting:x}=ta((v=y,b=p,E=s,e=>{var{connectionStartHandle:e,connectionEndHandle:t,connectionClickStartHandle:n}=e;return{connecting:e?.nodeId===v&&e?.handleId===b&&e?.type===E||t?.nodeId===v&&t?.handleId===b&&t?.type===E,clickConnecting:n?.nodeId===v&&n?.handleId===b&&n?.type===E}}),He);y||g.getState().onError?.("010",Qr.error010());const S=e=>{var{defaultEdgeOptions:t,onConnect:n,hasDefaultEdges:r}=g.getState(),t={...t,...e};r&&({edges:e,setEdges:r}=g.getState(),r(oi(t,e))),n?.(t),a?.(t)};var k=e=>{var t;y&&(t=Ra(e),u&&(t&&0===e.button||!t)&&wi({event:e,handleId:p,nodeId:y,onConnect:S,isTarget:h,getState:g.getState,setState:g.setState,isValidConnection:l||g.getState().isValidConnection||_i}),(t?c:d)?.(e))};return ut.default.createElement("div",{"data-handleid":p,"data-nodeid":y,"data-handlepos":e,"data-id":`${y}-${p}-`+s,className:ct(["react-flow__handle","react-flow__handle-"+e,"nodrag",w,o,{source:!h,target:h,connectable:t,connectablestart:u,connectableend:n,connecting:x,connectionindicator:t&&(u&&!_||n&&_)}]),onMouseDown:k,onTouchStart:k,onClick:r?e=>{var t,{onClickConnectStart:n,onClickConnectEnd:r,connectionClickStartHandle:a,connectionMode:i,isValidConnection:o}=g.getState();y&&(a||u)&&(a?(t=fa(e.target),o=l||o||_i,{connection:i,isValid:a}=vi({nodeId:y,id:p,type:s},i,a.nodeId,a.handleId||null,a.type,o,t),a&&S(i),r?.(e),g.setState({connectionClickStartHandle:null})):(n?.(e,{nodeId:y,handleId:p,handleType:s}),g.setState({connectionClickStartHandle:{nodeId:y,type:s,handleId:p}})))}:void 0,ref:m,...f},i)}),v=(a.displayName="Handle",(0,ut.memo)(a)),n=({data:e,isConnectable:t,targetPosition:n=O.Top,sourcePosition:r=O.Bottom})=>ut.default.createElement(ut.default.Fragment,null,ut.default.createElement(v,{type:"target",position:n,isConnectable:t}),e?.label,ut.default.createElement(v,{type:"source",position:r,isConnectable:t})),Si=(n.displayName="DefaultNode",(0,ut.memo)(n)),nn=({data:e,isConnectable:t,sourcePosition:n=O.Bottom})=>ut.default.createElement(ut.default.Fragment,null,e?.label,ut.default.createElement(v,{type:"source",position:n,isConnectable:t})),ki=(nn.displayName="InputNode",(0,ut.memo)(nn)),i=({data:e,isConnectable:t,targetPosition:n=O.Top})=>ut.default.createElement(ut.default.Fragment,null,ut.default.createElement(v,{type:"target",position:n,isConnectable:t}),e?.label),Ii=(i.displayName="OutputNode",(0,ut.memo)(i)),Ci=()=>null,Ni=(Ci.displayName="GroupNode",e=>({selectedNodes:e.getNodes().filter(e=>e.selected),selectedEdges:e.edges.filter(e=>e.selected).map(e=>({...e}))})),Ti=e=>e.id;function Ri(e,t){return He(e.selectedNodes.map(Ti),t.selectedNodes.map(Ti))&&He(e.selectedEdges.map(Ti),t.selectedEdges.map(Ti))}var Mi=(0,ut.memo)(({onSelectionChange:e})=>{const n=na(),{selectedNodes:r,selectedEdges:a}=ta(Ni,Ri);return(0,ut.useEffect)(()=>{const t={nodes:r,edges:a};e?.(t),n.getState().onSelectionChange.forEach(e=>e(t))},[r,a,e]),null}),Oi=(Mi.displayName="SelectionListener",e=>!!e.onSelectionChange);function Ai({onSelectionChange:e}){var t=ta(Oi);return e||t?ut.default.createElement(Mi,{onSelectionChange:e}):null}var Di=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Pi(e,t){(0,ut.useEffect)(()=>{void 0!==e&&t(e)},[e])}function te(e,t,n){(0,ut.useEffect)(()=>{void 0!==t&&n({[e]:t})},[t])}var Li=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:a,onConnectStart:i,onConnectEnd:o,onClickConnectStart:s,onClickConnectEnd:l,nodesDraggable:u,nodesConnectable:c,nodesFocusable:d,edgesFocusable:f,edgesUpdatable:m,elevateNodesOnSelect:p,minZoom:h,maxZoom:g,nodeExtent:y,onNodesChange:v,onEdgesChange:b,elementsSelectable:E,connectionMode:w,snapGrid:_,snapToGrid:x,translateExtent:S,connectOnClick:k,defaultEdgeOptions:I,fitView:C,fitViewOptions:N,onNodesDelete:T,onEdgesDelete:R,onNodeDrag:M,onNodeDragStart:O,onNodeDragStop:A,onSelectionDrag:D,onSelectionDragStart:L,onSelectionDragStop:F,noPanClassName:V,nodeOrigin:j,rfId:B,autoPanOnConnect:z,autoPanOnNodeDrag:$,onError:H,connectionRadius:U,isValidConnection:Z,nodeDragThreshold:K})=>{const{setNodes:W,setEdges:X,setDefaultNodesAndEdges:Y,setMinZoom:q,setMaxZoom:G,setTranslateExtent:J,setNodeExtent:Q,reset:ee}=ta(Di,He);var P=na();return(0,ut.useEffect)(()=>{var e=r?.map(e=>({...e,...I}));return Y(n,e),()=>{ee()}},[]),te("defaultEdgeOptions",I,P.setState),te("connectionMode",w,P.setState),te("onConnect",a,P.setState),te("onConnectStart",i,P.setState),te("onConnectEnd",o,P.setState),te("onClickConnectStart",s,P.setState),te("onClickConnectEnd",l,P.setState),te("nodesDraggable",u,P.setState),te("nodesConnectable",c,P.setState),te("nodesFocusable",d,P.setState),te("edgesFocusable",f,P.setState),te("edgesUpdatable",m,P.setState),te("elementsSelectable",E,P.setState),te("elevateNodesOnSelect",p,P.setState),te("snapToGrid",x,P.setState),te("snapGrid",_,P.setState),te("onNodesChange",v,P.setState),te("onEdgesChange",b,P.setState),te("connectOnClick",k,P.setState),te("fitViewOnInit",C,P.setState),te("fitViewOnInitOptions",N,P.setState),te("onNodesDelete",T,P.setState),te("onEdgesDelete",R,P.setState),te("onNodeDrag",M,P.setState),te("onNodeDragStart",O,P.setState),te("onNodeDragStop",A,P.setState),te("onSelectionDrag",D,P.setState),te("onSelectionDragStart",L,P.setState),te("onSelectionDragStop",F,P.setState),te("noPanClassName",V,P.setState),te("nodeOrigin",j,P.setState),te("rfId",B,P.setState),te("autoPanOnConnect",z,P.setState),te("autoPanOnNodeDrag",$,P.setState),te("onError",H,P.setState),te("connectionRadius",U,P.setState),te("isValidConnection",Z,P.setState),te("nodeDragThreshold",K,P.setState),Pi(e,W),Pi(t,X),Pi(h,q),Pi(g,G),Pi(S,J),Pi(y,Q),null},Fi={display:"none"},Vi={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},ji="react-flow__node-desc",Bi="react-flow__edge-desc",zi="react-flow__aria-live",$i=e=>e.ariaLiveMessage;function Hi({rfId:e}){var t=ta($i);return ut.default.createElement("div",{id:zi+"-"+e,"aria-live":"assertive","aria-atomic":"true",style:Vi},t)}function Ui({rfId:e,disableKeyboardA11y:t}){return ut.default.createElement(ut.default.Fragment,null,ut.default.createElement("div",{id:ji+"-"+e,style:Fi},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),ut.default.createElement("div",{id:Bi+"-"+e,style:Fi},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&ut.default.createElement(Hi,{rfId:e}))}var Zi=(i=null,o={actInsideInputWithModifier:!0})=>{const[e,s]=(0,ut.useState)(!1),l=(0,ut.useRef)(!1),u=(0,ut.useRef)(new Set([])),[c,d]=(0,ut.useMemo)(()=>{var e,t;return null!==i?(t=(e=(Array.isArray(i)?i:[i]).filter(e=>"string"==typeof e).map(e=>e.split("+"))).reduce((e,t)=>e.concat(...t),[]),[e,t]):[[],[]]},[i]);return(0,ut.useEffect)(()=>{var e="undefined"!=typeof document?document:null;const t=o?.target||e;if(null!==i){const n=e=>{if(l.current=e.ctrlKey||e.metaKey||e.shiftKey,(!l.current||l.current&&!o.actInsideInputWithModifier)&&ka(e))return!1;var t=Wi(e.code,d);u.current.add(e[t]),Ki(c,u.current,!1)&&(e.preventDefault(),s(!0))},r=e=>{if((!l.current||l.current&&!o.actInsideInputWithModifier)&&ka(e))return!1;var t=Wi(e.code,d);Ki(c,u.current,!0)?(s(!1),u.current.clear()):u.current.delete(e[t]),"Meta"===e.key&&u.current.clear(),l.current=!1},a=()=>{u.current.clear(),s(!1)};return t?.addEventListener("keydown",n),t?.addEventListener("keyup",r),window.addEventListener("blur",a),()=>{t?.removeEventListener("keydown",n),t?.removeEventListener("keyup",r),window.removeEventListener("blur",a)}}},[i,s]),e};function Ki(e,t,n){return e.filter(e=>n||e.length===t.size).some(e=>e.every(e=>t.has(e)))}function Wi(e,t){return t.includes(e)?"code":"key"}function Xi(a,i,o){a.forEach(e=>{var t,n,r=e.parentNode||e.parentId;if(r&&!a.has(r))throw new Error(`Parent node ${r} not found`);(r||o?.[e.id])&&({x:r,y:t,z:n}=function e(t,n,r,a){var i,t=t.parentNode||t.parentId;return t?(t=n.get(t),i=ui(t,a),e(t,n,{x:(r.x??0)+i.x,y:(r.y??0)+i.y,z:(t[wa]?.z??0)>(r.z??0)?t[wa]?.z??0:r.z??0},a)):r}(e,a,{...e.position,z:e[wa]?.z??0},i),e.positionAbsolute={x:r,y:t},e[wa].z=n,o?.[e.id])&&(e[wa].isParent=!0)})}function Yi(e,i,t,n){const o=new Map,s={},l=n?1e3:0;return e.forEach(e=>{var t=(Ea(e.zIndex)?e.zIndex:0)+(e.selected?l:0),n=i.get(e.id),r={...e,positionAbsolute:{x:e.position.x,y:e.position.y}},a=e.parentNode||e.parentId,a=(a&&(s[a]=!0),n?.type&&n?.type!==e.type);Object.defineProperty(r,wa,{enumerable:!1,value:{handleBounds:a?void 0:n?.[wa]?.handleBounds,z:t}}),o.set(e.id,r)}),Xi(o,t,s),o}function qi(e,n={}){var{getNodes:e,width:t,height:r,minZoom:a,maxZoom:i,d3Zoom:o,d3Selection:s,fitViewOnInitDone:l,fitViewOnInit:u,nodeOrigin:c}=e(),l=n.initial&&!l&&u;if(o&&s&&(l||!n.initial)){var u=e().filter(t=>{var e=n.includeHiddenNodes?t.width&&t.height:!t.hidden;return n.nodes?.length?e&&n.nodes.some(e=>e.id===t.id):e}),l=u.every(e=>e.width&&e.height);if(0<u.length&&l)return e=ci(u,c),{x:l,y:u,zoom:c}=mi(e,t,r,n.minZoom??a,n.maxZoom??i,n.padding??.1),e=zr.translate(l,u).scale(c),"number"==typeof n.duration&&0<n.duration?o.transform(pi(s,n.duration),e):o.transform(s,e),!0}return!1}function Gi({changedNodes:e,changedEdges:t,get:n,set:r}){var a,i,{nodeInternals:n,edges:o,onNodesChange:s,onEdgesChange:l,hasDefaultNodes:u,hasDefaultEdges:c}=n();e?.length&&(u&&r({nodeInternals:(a=n,e.forEach(e=>{var t=a.get(e.id);t&&a.set(t.id,{...t,[wa]:t[wa],selected:e.selected})}),new Map(a))}),s?.(e)),t?.length&&(c&&r({edges:(i=t,o.map(t=>{var e=i.find(e=>e.id===t.id);return e&&(t.selected=e.selected),t}))}),l?.(t))}var a=()=>{},Ji={zoomIn:a,zoomOut:a,zoomTo:a,getZoom:()=>1,setViewport:a,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:a,fitBounds:a,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},Qi=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),eo=()=>{const o=na(),{d3Zoom:s,d3Selection:l}=ta(Qi,He);return(0,ut.useMemo)(()=>l&&s?{zoomIn:e=>s.scaleBy(pi(l,e?.duration),1.2),zoomOut:e=>s.scaleBy(pi(l,e?.duration),1/1.2),zoomTo:(e,t)=>s.scaleTo(pi(l,t?.duration),e),getZoom:()=>o.getState().transform[2],setViewport:(e,t)=>{var[n,r,a]=o.getState().transform,n=zr.translate(e.x??n,e.y??r).scale(e.zoom??a);s.transform(pi(l,t?.duration),n)},getViewport:()=>{var[e,t,n]=o.getState().transform;return{x:e,y:t,zoom:n}},fitView:e=>qi(o.getState,e),setCenter:(e,t,n)=>{var{width:r,height:a,maxZoom:i}=o.getState(),i=void 0!==n?.zoom?n.zoom:i,r=zr.translate(r/2-e*i,a/2-t*i).scale(i);s.transform(pi(l,n?.duration),r)},fitBounds:(e,t)=>{var{width:n,height:r,minZoom:a,maxZoom:i}=o.getState(),{x:e,y:n,zoom:r}=mi(e,n,r,a,i,t?.padding??.1),a=zr.translate(e,n).scale(r);s.transform(pi(l,t?.duration),a)},project:e=>{var{transform:t,snapToGrid:n,snapGrid:r}=o.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),si(e,t,n,r)},screenToFlowPosition:e=>{var t,{transform:n,snapToGrid:r,snapGrid:a,domNode:i}=o.getState();return i?({x:i,y:t}=i.getBoundingClientRect(),i={x:e.x-i,y:e.y-t},si(i,n,r,a)):e},flowToScreenPosition:e=>{var t,{transform:n,domNode:r}=o.getState();return r?({x:r,y:t}=r.getBoundingClientRect(),{x:(n=li(e,n)).x+r,y:n.y+t}):e},viewportInitialized:!0}:Ji,[s,l])};function to(){const e=eo(),h=na(),t=(0,ut.useCallback)(()=>h.getState().getNodes().map(e=>({...e})),[]),n=(0,ut.useCallback)(e=>h.getState().nodeInternals.get(e),[]),r=(0,ut.useCallback)(()=>{var{edges:e=[]}=h.getState();return e.map(e=>({...e}))},[]),a=(0,ut.useCallback)(t=>{var{edges:e=[]}=h.getState();return e.find(e=>e.id===t)},[]),i=(0,ut.useCallback)(e=>{var{getNodes:t,setNodes:n,hasDefaultNodes:r,onNodesChange:a}=h.getState(),t=t(),e="function"==typeof e?e(t):e;r?n(e):a&&a(0===e.length?t.map(e=>({type:"remove",id:e.id})):e.map(e=>({item:e,type:"reset"})))},[]),o=(0,ut.useCallback)(e=>{var{edges:t=[],setEdges:n,hasDefaultEdges:r,onEdgesChange:a}=h.getState(),e="function"==typeof e?e(t):e;r?n(e):a&&a(0===e.length?t.map(e=>({type:"remove",id:e.id})):e.map(e=>({item:e,type:"reset"})))},[]),s=(0,ut.useCallback)(e=>{var e=Array.isArray(e)?e:[e],{getNodes:t,setNodes:n,hasDefaultNodes:r,onNodesChange:a}=h.getState();r?n([...t(),...e]):a&&a(e.map(e=>({item:e,type:"add"})))},[]),l=(0,ut.useCallback)(e=>{var e=Array.isArray(e)?e:[e],{edges:t=[],setEdges:n,hasDefaultEdges:r,onEdgesChange:a}=h.getState();r?n([...t,...e]):a&&a(e.map(e=>({item:e,type:"add"})))},[]),u=(0,ut.useCallback)(()=>{var{getNodes:e,edges:t=[],transform:n}=h.getState(),[n,r,a]=n;return{nodes:e().map(e=>({...e})),edges:t.map(e=>({...e})),viewport:{x:n,y:r,zoom:a}}},[]),c=(0,ut.useCallback)(({nodes:e,edges:t})=>{const{nodeInternals:n,getNodes:r,edges:a,hasDefaultNodes:i,hasDefaultEdges:o,onNodesDelete:s,onEdgesDelete:l,onNodesChange:u,onEdgesChange:c}=h.getState(),d=(e||[]).map(e=>e.id),f=(t||[]).map(e=>e.id);var e=r().reduce((e,t)=>{const n=t.parentNode||t.parentId;var r=!d.includes(t.id)&&n&&e.find(e=>e.id===n);return("boolean"!=typeof t.deletable||t.deletable)&&(d.includes(t.id)||r)&&e.push(t),e},[]),t=a.filter(e=>"boolean"!=typeof e.deletable||e.deletable),m=t.filter(e=>f.includes(e.id));if(e||m){t=fi(e,t),m=[...m,...t];const p=m.reduce((e,t)=>(e.includes(t.id)||e.push(t.id),e),[]);(o||i)&&(o&&h.setState({edges:a.filter(e=>!p.includes(e.id))}),i)&&(e.forEach(e=>{n.delete(e.id)}),h.setState({nodeInternals:new Map(n)})),0<p.length&&(l?.(m),c)&&c(p.map(e=>({id:e,type:"remove"}))),0<e.length&&(s?.(e),u)&&(t=e.map(e=>({id:e.id,type:"remove"})),u(t))}},[]),d=(0,ut.useCallback)(e=>{var t=ba(e),n=t?null:h.getState().nodeInternals.get(e.id);return t||n?[t?e:ga(n),n,t]:[null,null,t]},[]),f=(0,ut.useCallback)((e,t=!0,n)=>{const[r,a,i]=d(e);return r?(n||h.getState().getNodes()).filter(e=>{return!!(i||e.id!==a.id&&e.positionAbsolute)&&(e=ga(e),e=va(e,r),t&&0<e||e>=r.width*r.height)}):[]},[]),m=(0,ut.useCallback)((e,t,n=!0)=>{var[e]=d(e);return!!e&&(t=va(e,t),n&&0<t||t>=e.width*e.height)},[]);return(0,ut.useMemo)(()=>({...e,getNodes:t,getNode:n,getEdges:r,getEdge:a,setNodes:i,setEdges:o,addNodes:s,addEdges:l,toObject:u,deleteElements:c,getIntersectingNodes:f,isNodeIntersecting:m}),[e,t,n,r,a,i,o,s,l,u,c,f,m])}var no={actInsideInputWithModifier:!1};var ro={position:"absolute",width:"100%",height:"100%",top:0,left:0},ao=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,io=e=>({x:e.x,y:e.y,zoom:e.k}),oo=(e,t)=>e.target.closest("."+t),so=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),lo=e=>{var t=e.ctrlKey&&Oa()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t},uo=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),co=({onMove:u,onMoveStart:c,onMoveEnd:d,onPaneContextMenu:r,zoomOnScroll:a=!0,zoomOnPinch:f=!0,panOnScroll:i=!1,panOnScrollSpeed:m=.5,panOnScrollMode:p=Ca.Free,zoomOnDoubleClick:o=!0,elementsSelectable:e,panOnDrag:s=!0,defaultViewport:l,translateExtent:h,minZoom:g,maxZoom:y,zoomActivationKeyCode:t,preventScrolling:n=!0,children:v,noWheelClassName:b,noPanClassName:L})=>{const E=(0,ut.useRef)(),w=na(),_=(0,ut.useRef)(!1),x=(0,ut.useRef)(!1),S=(0,ut.useRef)(null),k=(0,ut.useRef)({x:0,y:0,zoom:0}),{d3Zoom:I,d3Selection:C,d3ZoomHandler:N,userSelectionActive:T}=ta(uo,He),R=Zi(t),M=(0,ut.useRef)(0),O=(0,ut.useRef)(!1),A=(0,ut.useRef)();{var D=S;const P=na();(0,ut.useEffect)(()=>{let e;const t=()=>{var e;D.current&&(0!==(e=sa(D.current)).height&&0!==e.width||P.getState().onError?.("004",Qr.error004()),P.setState({width:e.width||500,height:e.height||500}))};return t(),window.addEventListener("resize",t),D.current&&(e=new ResizeObserver(()=>t())).observe(D.current),()=>{window.removeEventListener("resize",t),e&&D.current&&e.unobserve(D.current)}},[])}return(0,ut.useEffect)(()=>{var e,t,n,r;S.current&&(n=S.current.getBoundingClientRect(),e=qr().scaleExtent([g,y]).translateExtent(h),t=jt(S.current).call(e),r=zr.translate(l.x,l.y).scale(la(l.zoom,g,y)),n=[[0,0],[n.width,n.height]],r=e.constrain()(r,n,h),e.transform(t,r),e.wheelDelta(lo),w.setState({d3Zoom:e,d3Selection:t,d3ZoomHandler:t.on("wheel.zoom"),transform:[r.x,r.y,r.k],domNode:S.current.closest(".react-flow")}))},[]),(0,ut.useEffect)(()=>{C&&I&&(!i||R||T?void 0!==N&&C.on("wheel.zoom",function(e,t){if(!n&&"wheel"===e.type&&!e.ctrlKey||oo(e,b))return null;e.preventDefault(),N.call(this,e,t)},{passive:!1}):C.on("wheel.zoom",n=>{if(oo(n,b))return!1;n.preventDefault(),n.stopImmediatePropagation();var e,r=C.property("__zoom").k||1;if(n.ctrlKey&&f)e=Bt(n),a=lo(n),a=r*Math.pow(2,a),I.scaleTo(C,a,e,n);else{var a=1===n.deltaMode?20:1;let e=p===Ca.Vertical?0:n.deltaX*a,t=p===Ca.Horizontal?0:n.deltaY*a;!Oa()&&n.shiftKey&&p!==Ca.Vertical&&(e=n.deltaY*a,t=0),I.translateBy(C,-e/r*m,-t/r*m,{internal:!0});const i=io(C.property("__zoom")),{onViewportChangeStart:o,onViewportChange:s,onViewportChangeEnd:l}=w.getState();clearTimeout(A.current),O.current||(O.current=!0,c?.(n,i),o?.(i)),O.current&&(u?.(n,i),s?.(i),A.current=setTimeout(()=>{d?.(n,i),l?.(i),O.current=!1},150))}},{passive:!1}))},[T,i,p,C,I,N,R,f,n,b,c,u,d]),(0,ut.useEffect)(()=>{I&&I.on("start",e=>{if(!e.sourceEvent||e.sourceEvent.internal)return null;M.current=e.sourceEvent?.button;var t=w.getState()["onViewportChangeStart"],n=io(e.transform);_.current=!0,k.current=n,"mousedown"===e.sourceEvent?.type&&w.setState({paneDragging:!0}),t?.(n),c?.(e.sourceEvent,n)})},[I,c]),(0,ut.useEffect)(()=>{I&&(T&&!_.current?I.on("zoom",null):T||I.on("zoom",e=>{var t,n=w.getState()["onViewportChange"];w.setState({transform:[e.transform.x,e.transform.y,e.transform.k]}),x.current=!(!r||!so(s,M.current??0)),!u&&!n||e.sourceEvent?.internal||(t=io(e.transform),n?.(t),u?.(e.sourceEvent,t))}))},[T,I,u,s,r]),(0,ut.useEffect)(()=>{I&&I.on("end",e=>{if(!e.sourceEvent||e.sourceEvent.internal)return null;const t=w.getState()["onViewportChangeEnd"];if(_.current=!1,w.setState({paneDragging:!1}),r&&so(s,M.current??0)&&!x.current&&r(e.sourceEvent),x.current=!1,(d||t)&&ao(k.current,e.transform)){const n=io(e.transform);k.current=n,clearTimeout(E.current),E.current=setTimeout(()=>{t?.(n),d?.(e.sourceEvent,n)},i?150:0)}})},[I,i,s,d,r]),(0,ut.useEffect)(()=>{I&&I.filter(e=>{var t,n=R||a,r=f&&e.ctrlKey;return!(!(!0===s||Array.isArray(s)&&s.includes(1))||1!==e.button||"mousedown"!==e.type||!oo(e,"react-flow__node")&&!oo(e,"react-flow__edge"))||!!(s||n||i||o||f)&&!T&&!(!o&&"dblclick"===e.type||oo(e,b)&&"wheel"===e.type||oo(e,L)&&("wheel"!==e.type||i&&"wheel"===e.type&&!R)||!f&&e.ctrlKey&&"wheel"===e.type||!(n||i||r||"wheel"!==e.type)||!(s||"mousedown"!==e.type&&"touchstart"!==e.type)||Array.isArray(s)&&!s.includes(e.button)&&"mousedown"===e.type||(t=Array.isArray(s)&&s.includes(e.button)||!e.button||e.button<=1,e.ctrlKey&&"wheel"!==e.type))&&t})},[T,I,a,f,i,o,s,e,R]),ut.default.createElement("div",{className:"react-flow__renderer",ref:S,style:ro},v)},fo=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function mo(){var{userSelectionActive:e,userSelectionRect:t}=ta(fo,He);return e&&t?ut.default.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function po(e,t){const n=t.parentNode||t.parentId;var r,a,e=e.find(e=>e.id===n);e&&(r=t.position.x+t.width-e.width,a=t.position.y+t.height-e.height,0<r||0<a||t.position.x<0||t.position.y<0)&&(e.style={...e.style},e.style.width=e.style.width??e.width,e.style.height=e.style.height??e.height,0<r&&(e.style.width+=r),0<a&&(e.style.height+=a),t.position.x<0&&(r=Math.abs(t.position.x),e.position.x=e.position.x-r,e.style.width+=r,t.position.x=0),t.position.y<0&&(a=Math.abs(t.position.y),e.position.y=e.position.y-a,e.style.height+=a,t.position.y=0),e.width=e.style.width,e.height=e.style.height)}function ho(i,e){var t;return i.some(e=>"reset"===e.type)?i.filter(e=>"reset"===e.type).map(e=>e.item):(t=i.filter(e=>"add"===e.type).map(e=>e.item),e.reduce((e,t)=>{var n=i.filter(e=>e.id===t.id);if(0===n.length)e.push(t);else{var r={...t};for(const a of n)if(a)switch(a.type){case"select":r.selected=a.selected;break;case"position":void 0!==a.position&&(r.position=a.position),void 0!==a.positionAbsolute&&(r.positionAbsolute=a.positionAbsolute),void 0!==a.dragging&&(r.dragging=a.dragging),r.expandParent&&po(e,r);break;case"dimensions":void 0!==a.dimensions&&(r.width=a.dimensions.width,r.height=a.dimensions.height),void 0!==a.updateStyle&&(r.style={...r.style||{},...a.dimensions}),"boolean"==typeof a.resizing&&(r.resizing=a.resizing),r.expandParent&&po(e,r);break;case"remove":return e}e.push(r)}return e},t))}function go(e,t){return ho(e,t)}function yo(e,t){return ho(e,t)}var vo=(e,t)=>({id:e,type:"select",selected:t});function bo(e,r){return e.reduce((e,t)=>{var n=r.includes(t.id);return!t.selected&&n?(t.selected=!0,e.push(vo(t.id,!0))):t.selected&&!n&&(t.selected=!1,e.push(vo(t.id,!1))),e},[])}var Eo=(t,n)=>e=>{e.target===n.current&&t?.(e)},wo=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),_o=(0,ut.memo)(({isSelecting:d,selectionMode:f=Na.Full,panOnDrag:t,onSelectionStart:a,onSelectionEnd:n,onPaneClick:r,onPaneContextMenu:i,onPaneScroll:o,onPaneMouseEnter:e,onPaneMouseMove:s,onPaneMouseLeave:l,children:u})=>{const c=(0,ut.useRef)(null),m=na(),p=(0,ut.useRef)(0),h=(0,ut.useRef)(0),g=(0,ut.useRef)(),{userSelectionActive:y,elementsSelectable:v,dragging:b}=ta(wo,He),E=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),p.current=0,h.current=0},w=e=>{r?.(e),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})};var _=o?e=>o(e):void 0,x=v&&(d||y);return ut.default.createElement("div",{className:ct(["react-flow__pane",{dragging:b,selection:d}]),onClick:x?void 0:Eo(w,c),onContextMenu:Eo(e=>{Array.isArray(t)&&t?.includes(2)?e.preventDefault():i?.(e)},c),onWheel:Eo(_,c),onMouseEnter:x?void 0:e,onMouseDown:x?e=>{var t,{resetSelectedElements:n,domNode:r}=m.getState();g.current=r?.getBoundingClientRect(),v&&d&&0===e.button&&e.target===c.current&&g.current&&({x:r,y:t}=Ma(e,g.current),n(),m.setState({userSelectionRect:{width:0,height:0,startX:r,startY:t,x:r,y:t}}),a?.(e))}:void 0,onMouseMove:x?e=>{var t,n,{userSelectionRect:r,nodeInternals:a,edges:i,transform:o,onNodesChange:s,onEdgesChange:l,nodeOrigin:u,getNodes:c}=m.getState();d&&g.current&&r&&(m.setState({userSelectionActive:!0,nodesSelectionActive:!1}),e=Ma(e,g.current),t=r.startX??0,n=r.startY??0,r={...r,x:e.x<t?e.x:t,y:e.y<n?e.y:n,width:Math.abs(e.x-t),height:Math.abs(e.y-n)},t=c(),e=di(a,r,o,f===Na.Partial,!0,u),n=fi(e,i).map(e=>e.id),c=e.map(e=>e.id),p.current!==c.length&&(p.current=c.length,(a=bo(t,c)).length)&&s?.(a),h.current!==n.length&&(h.current=n.length,(o=bo(i,n)).length)&&l?.(o),m.setState({userSelectionRect:r}))}:s,onMouseUp:x?e=>{var t;0===e.button&&(t=m.getState()["userSelectionRect"],!y&&t&&e.target===c.current&&w(e),m.setState({nodesSelectionActive:0<p.current}),E(),n?.(e))}:void 0,onMouseLeave:x?e=>{y&&(m.setState({nodesSelectionActive:0<p.current}),n?.(e)),E()}:l,ref:c,style:ro},u,ut.default.createElement(mo,null))});function xo(e,t,n){let r=e;do{if(r?.matches(t))return!0;if(r===n.current)return!1}while(r=r.parentElement);return!1}function So(t,n,r,a){return Array.from(t.values()).filter(e=>(e.selected||e.id===a)&&(!e.parentNode||e.parentId||!function e(t,n){t=t.parentNode||t.parentId;return!!t&&!!(t=n.get(t))&&(!!t.selected||e(t,n))}(e,t))&&(e.draggable||n&&void 0===e.draggable)).map(e=>({id:e.id,position:e.position||{x:0,y:0},positionAbsolute:e.positionAbsolute||{x:0,y:0},distance:{x:r.x-(e.positionAbsolute?.x??0),y:r.y-(e.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:e.extent,parentNode:e.parentNode||e.parentId,parentId:e.parentNode||e.parentId,width:e.width,height:e.height,expandParent:e.expandParent}))}function ko(e,t,n,r,a=[0,0],i){var o=(r=(o=e).extent||r)&&"parent"!==r?[r[0],[r[1][0]-(o.width||0),r[1][1]-(o.height||0)]]:r;let s=o;var l,u,r=e.parentNode||e.parentId;"parent"!==e.extent||e.expandParent?e.extent&&r&&"parent"!==e.extent&&(l=n.get(r),{x:l,y:u}=ui(l,a).positionAbsolute,s=[[e.extent[0][0]+l,e.extent[0][1]+u],[e.extent[1][0]+l,e.extent[1][1]+u]]):s=r&&e.width&&e.height?(l=n.get(r),{x:u,y:d}=ui(l,a).positionAbsolute,l&&Ea(u)&&Ea(d)&&Ea(l.width)&&Ea(l.height)?[[u+e.width*a[0],d+e.height*a[1]],[u+l.width-e.width+e.width*a[0],d+l.height-e.height+e.height*a[1]]]:s):(i?.("005",Qr.error005()),o);let c={x:0,y:0};r&&(u=n.get(r),c=ui(u,a).positionAbsolute);var d=s&&"parent"!==s?ua(t,s):t;return{position:{x:d.x-c.x,y:d.y-c.y},positionAbsolute:d}}function Io({nodeId:t,dragItems:e,nodeInternals:n}){e=e.map(e=>{return{...n.get(e.id),position:e.position,positionAbsolute:e.positionAbsolute}});return[t?e.find(e=>e.id===t):e[0],e]}_o.displayName="Pane";var Co=(e,t,n,r)=>{e=t.querySelectorAll(e);if(!e||!e.length)return null;e=Array.from(e);const a=t.getBoundingClientRect(),i={x:a.width*r[0],y:a.height*r[1]};return e.map(e=>{var t=e.getBoundingClientRect();return{id:e.getAttribute("data-handleid"),position:e.getAttribute("data-handlepos"),x:(t.left-a.left-i.x)/n,y:(t.top-a.top-i.y)/n,...sa(e)}})};function No(n,r,a){return void 0===a?a:e=>{var t=r().nodeInternals.get(n);t&&a(e,{...t})}}function To({id:e,store:t,unselect:n=!1,nodeRef:r}){var{addSelectedNodes:a,unselectNodesAndEdges:i,multiSelectionActive:o,nodeInternals:s,onError:l}=t.getState(),s=s.get(e);s?(t.setState({nodesSelectionActive:!1}),s.selected?(n||s.selected&&o)&&(i({nodes:[s],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):a([e])):l?.("012",Qr.error012(e))}function Ro(r){return(e,t,n)=>r?.(e,n)}function Mo({nodeRef:k,disabled:I=!1,noDragClassName:C,handleSelector:N,nodeId:T,isSelectable:R,selectNodesOnDrag:M}){const O=na(),[e,A]=(0,ut.useState)(!1),D=(0,ut.useRef)([]),P=(0,ut.useRef)({x:null,y:null}),L=(0,ut.useRef)(0),F=(0,ut.useRef)(null),V=(0,ut.useRef)({x:0,y:0}),j=(0,ut.useRef)(null),B=(0,ut.useRef)(!1),z=(0,ut.useRef)(!1),$=(0,ut.useRef)(!1),H=function(){const i=na();return(0,ut.useCallback)(({sourceEvent:e})=>{var{transform:t,snapGrid:n,snapToGrid:r}=i.getState(),a=(e.touches?e.touches[0]:e).clientX,e=(e.touches?e.touches[0]:e).clientY,a={x:(a-t[0])/t[2],y:(e-t[1])/t[2]};return{xSnapped:r?n[0]*Math.round(a.x/n[0]):a.x,ySnapped:r?n[1]*Math.round(a.y/n[1]):a.y,...a}},[])}();return(0,ut.useEffect)(()=>{if(k?.current){const w=jt(k.current),_=({x:r,y:a})=>{const{nodeInternals:i,onNodeDrag:e,onSelectionDrag:t,updateNodePositions:n,nodeExtent:o,snapGrid:s,snapToGrid:l,nodeOrigin:u,onError:c}=O.getState();let d=!(P.current={x:r,y:a}),f={x:0,y:0,x2:0,y2:0};var m,p,h;1<D.current.length&&o&&(m=ci(D.current,u),f=pa(m)),D.current=D.current.map(e=>{var t={x:r-e.distance.x,y:a-e.distance.y},n=(l&&(t.x=s[0]*Math.round(t.x/s[0]),t.y=s[1]*Math.round(t.y/s[1])),[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]),t=(1<D.current.length&&o&&!e.extent&&(n[0][0]=e.positionAbsolute.x-f.x+o[0][0],n[1][0]=e.positionAbsolute.x+(e.width??0)-f.x2+o[1][0],n[0][1]=e.positionAbsolute.y-f.y+o[0][1],n[1][1]=e.positionAbsolute.y+(e.height??0)-f.y2+o[1][1]),ko(e,t,i,n,u,c));return d=d||e.position.x!==t.position.x||e.position.y!==t.position.y,e.position=t.position,e.positionAbsolute=t.positionAbsolute,e}),d&&(n(D.current,!0,!0),A(!0),m=T?e:Ro(t))&&j.current&&([p,h]=Io({nodeId:T,dragItems:D.current,nodeInternals:i}),m(j.current,p,h))},x=()=>{var e,t,n,r;F.current&&([e,t]=da(V.current,F.current),0===e&&0===t||({transform:n,panBy:r}=O.getState(),P.current.x=(P.current.x??0)-e/n[2],P.current.y=(P.current.y??0)-t/n[2],r({x:e,y:t})&&_(P.current)),L.current=requestAnimationFrame(x))},S=e=>{var{nodeInternals:t,multiSelectionActive:n,nodesDraggable:r,unselectNodesAndEdges:a,onNodeDragStart:i,onSelectionDragStart:o}=O.getState(),i=(z.current=!0,T?i:Ro(o)),o=(M&&R||n||!T||t.get(T)?.selected||a(),T&&R&&M&&To({id:T,store:O,nodeRef:k}),H(e));P.current=o,D.current=So(t,r,o,T),i&&D.current&&([n,a]=Io({nodeId:T,dragItems:D.current,nodeInternals:t}),i(e.sourceEvent,n,a))};var e;if(!I)return f=Yt,m=qt,g=Gt,p=Jt,y={},v=Xe("start","drag","end"),E=b=0,h.filter=function(e){return arguments.length?(f="function"==typeof e?e:Wt(!!e),h):f},h.container=function(e){return arguments.length?(m="function"==typeof e?e:Wt(e),h):m},h.subject=function(e){return arguments.length?(g="function"==typeof e?e:Wt(e),h):g},h.touchable=function(e){return arguments.length?(p="function"==typeof e?e:Wt(!!e),h):p},h.on=function(){var e=v.on.apply(v,arguments);return e===v?h:e},h.clickDistance=function(e){return arguments.length?(E=(e=+e)*e,h):Math.sqrt(E)},e=h.on("start",e=>{var{domNode:t,nodeDragThreshold:n}=O.getState(),n=(0===n&&S(e),$.current=!1,H(e));P.current=n,F.current=t?.getBoundingClientRect()||null,V.current=Ma(e.sourceEvent,F.current)}).on("drag",e=>{var t,n=H(e),{autoPanOnNodeDrag:r,nodeDragThreshold:a}=O.getState();"touchmove"===e.sourceEvent.type&&1<e.sourceEvent.touches.length&&($.current=!0),$.current||(!B.current&&z.current&&r&&(B.current=!0,x()),z.current||(r=n.xSnapped-(P?.current?.x??0),t=n.ySnapped-(P?.current?.y??0),a<Math.sqrt(r*r+t*t)&&S(e)),(P.current.x!==n.xSnapped||P.current.y!==n.ySnapped)&&D.current&&z.current&&(j.current=e.sourceEvent,V.current=Ma(e.sourceEvent,F.current),_(n)))}).on("end",e=>{var t,n,r,a;z.current&&!$.current&&(A(!1),B.current=!1,z.current=!1,cancelAnimationFrame(L.current),D.current)&&({updateNodePositions:a,nodeInternals:t,onNodeDragStop:n,onSelectionDragStop:r}=O.getState(),n=T?n:Ro(r),a(D.current,!1,!1),n)&&([r,a]=Io({nodeId:T,dragItems:D.current,nodeInternals:t}),n(e.sourceEvent,r,a))}).filter(e=>{var t=e.target;return!e.button&&(!C||!xo(t,"."+C,k))&&(!N||xo(t,N,k))}),w.call(e),()=>{w.on(".drag",null)};w.on(".drag",null)}function h(e){e.on("mousedown.drag",t).filter(p).on("touchstart.drag",a).on("touchmove.drag",i,zt).on("touchend.drag touchcancel.drag",o).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function t(e,t){!d&&f.call(this,e,t)&&(t=s(this,m.call(this,e,t),e,t,"mouse"))&&(jt(e.view).on("mousemove.drag",n,$t).on("mouseup.drag",r,$t),Zt(e.view),Ht(e),c=!1,l=e.clientX,u=e.clientY,t("start",e))}function n(e){var t,n;Ut(e),c||(t=e.clientX-l,n=e.clientY-u,c=E<t*t+n*n),y.mouse("drag",e)}function r(e){jt(e.view).on("mousemove.drag mouseup.drag",null),Kt(e.view,c),Ut(e),y.mouse("end",e)}function a(e,t){if(f.call(this,e,t))for(var n,r=e.changedTouches,a=m.call(this,e,t),i=r.length,o=0;o<i;++o)(n=s(this,a,e,t,r[o].identifier,r[o]))&&(Ht(e),n("start",e,r[o]))}function i(e){for(var t,n=e.changedTouches,r=n.length,a=0;a<r;++a)(t=y[n[a].identifier])&&(Ut(e),t("drag",e,n[a]))}function o(e){var t,n,r=e.changedTouches,a=r.length;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),t=0;t<a;++t)(n=y[r[t].identifier])&&(Ht(e),n("end",e,r[t]))}function s(o,s,e,l,u,t){var c,d,f,m=v.copy(),p=Bt(t||e,s);if(null!=(f=g.call(o,new Xt("beforestart",{sourceEvent:e,target:h,identifier:u,active:b,x:p[0],y:p[1],dx:0,dy:0,dispatch:m}),l)))return c=f.x-p[0]||0,d=f.y-p[1]||0,function e(t,n,r){var a,i=p;switch(t){case"start":y[u]=e,a=b++;break;case"end":delete y[u],--b;case"drag":p=Bt(r||n,s),a=b}m.call(t,o,new Xt(t,{sourceEvent:n,subject:f,target:h,identifier:u,active:a,x:p[0]+c,y:p[1]+d,dx:p[0]-i[0],dy:p[1]-i[1],dispatch:m}),l)}}var l,u,c,d,f,m,g,p,y,v,b,E},[k,I,C,N,R,O,T,M,H]),e}function Oo(){const h=na();return(0,ut.useCallback)(e=>{const{nodeInternals:r,nodeExtent:a,updateNodePositions:t,getNodes:n,snapToGrid:i,snapGrid:o,onError:s,nodesDraggable:l}=h.getState();var u=n().filter(e=>e.selected&&(e.draggable||l&&void 0===e.draggable)),c=i?o[0]:5,d=i?o[1]:5,f=e.isShiftPressed?4:1;const m=e.x*c*f,p=e.y*d*f;c=u.map(e=>{var t,n;return e.positionAbsolute&&(t={x:e.positionAbsolute.x+m,y:e.positionAbsolute.y+p},{positionAbsolute:t,position:n}=(i&&(t.x=o[0]*Math.round(t.x/o[0]),t.y=o[1]*Math.round(t.y/o[1])),ko(e,t,r,a,void 0,s)),e.position=n,e.positionAbsolute=t),e});t(c,!0,!1)},[])}var Ao={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Do=H=>{var e=({id:r,type:a,data:e,xPos:n,yPos:i,xPosOrigin:t,yPosOrigin:o,selected:s,onClick:l,onMouseEnter:u,onMouseMove:c,onMouseLeave:d,onContextMenu:f,onDoubleClick:m,style:p,className:h,isDraggable:g,isSelectable:y,isConnectable:L,isFocusable:v,selectNodesOnDrag:b,sourcePosition:E,targetPosition:w,hidden:_,resizeObserver:x,dragHandle:S,zIndex:k,isParent:F,noDragClassName:I,noPanClassName:V,initialized:C,disableKeyboardA11y:N,ariaLabel:j,rfId:B,hasHandleBounds:T})=>{const R=na(),M=(0,ut.useRef)(null),O=(0,ut.useRef)(null),A=(0,ut.useRef)(E),D=(0,ut.useRef)(w),P=(0,ut.useRef)(a);var z=y||g||l||u||c||d;const $=Oo();u=No(r,R.getState,u),c=No(r,R.getState,c),d=No(r,R.getState,d),f=No(r,R.getState,f),m=No(r,R.getState,m),(0,ut.useEffect)(()=>()=>{O.current&&(x?.unobserve(O.current),O.current=null)},[]),(0,ut.useEffect)(()=>{var e;M.current&&!_&&(e=M.current,C&&T&&O.current===e||(O.current&&x?.unobserve(O.current),x?.observe(e),O.current=e))},[_,C,T]),(0,ut.useEffect)(()=>{var e=P.current!==a,t=A.current!==E,n=D.current!==w;M.current&&(e||t||n)&&(e&&(P.current=a),t&&(A.current=E),n&&(D.current=w),R.getState().updateNodeDimensions([{id:r,nodeElement:M.current,forceUpdate:!0}]))},[r,a,E,w]),I=Mo({nodeRef:M,disabled:_||!g,noDragClassName:I,handleSelector:S,nodeId:r,isSelectable:y,selectNodesOnDrag:b});return _?null:ut.default.createElement("div",{className:ct(["react-flow__node","react-flow__node-"+a,{[V]:g},h,{selected:s,selectable:y,parent:F,dragging:I}]),ref:M,style:{zIndex:k,transform:`translate(${t}px,${o}px)`,pointerEvents:z?"all":"none",visibility:C?"visible":"hidden",...p},"data-id":r,"data-testid":"rf__node-"+r,onMouseEnter:u,onMouseMove:c,onMouseLeave:d,onContextMenu:f,onClick:e=>{var t=R.getState()["nodeDragThreshold"];y&&(!b||!g||0<t)&&To({id:r,store:R,nodeRef:M}),l&&(t=R.getState().nodeInternals.get(r))&&l(e,{...t})},onDoubleClick:m,onKeyDown:v?e=>{var t;ka(e)||N||(_a.includes(e.key)&&y?(t="Escape"===e.key,To({id:r,store:R,unselect:t,nodeRef:M})):g&&s&&Object.prototype.hasOwnProperty.call(Ao,e.key)&&(R.setState({ariaLiveMessage:`Moved selected node ${e.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~n}, y: `+~~i}),$({x:Ao[e.key].x,y:Ao[e.key].y,isShiftPressed:e.shiftKey})))}:void 0,tabIndex:v?0:void 0,role:v?"button":void 0,"aria-describedby":N?void 0:ji+"-"+B,"aria-label":j},ut.default.createElement(Ja,{value:r},ut.default.createElement(H,{id:r,data:e,type:a,xPos:n,yPos:i,selected:s,isConnectable:L,sourcePosition:E,targetPosition:w,dragging:I,dragHandle:S,zIndex:k})))};return e.displayName="NodeWrapper",(0,ut.memo)(e)},Po=e=>{var t=e.getNodes().filter(e=>e.selected);return{...ci(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};var Lo=(0,ut.memo)(function({onSelectionContextMenu:n,noPanClassName:e,disableKeyboardA11y:t}){const r=na();var{width:a,height:i,x:o,y:s,transformString:l,userSelectionActive:u}=ta(Po,He);const c=Oo(),d=(0,ut.useRef)(null);return(0,ut.useEffect)(()=>{t||d.current?.focus({preventScroll:!0})},[t]),Mo({nodeRef:d}),!u&&a&&i?(u=n?e=>{var t=r.getState().getNodes().filter(e=>e.selected);n(e,t)}:void 0,ut.default.createElement("div",{className:ct(["react-flow__nodesselection","react-flow__container",e]),style:{transform:l}},ut.default.createElement("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:u,tabIndex:t?void 0:-1,onKeyDown:t?void 0:e=>{Object.prototype.hasOwnProperty.call(Ao,e.key)&&c({x:Ao[e.key].x,y:Ao[e.key].y,isShiftPressed:e.shiftKey})},style:{width:a,height:i,top:s,left:o}}))):null}),Fo=e=>e.nodesSelectionActive,n=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:a,onPaneContextMenu:i,onPaneScroll:o,deleteKeyCode:s,onMove:l,onMoveStart:u,onMoveEnd:c,selectionKeyCode:d,selectionOnDrag:f,selectionMode:m,onSelectionStart:p,onSelectionEnd:h,multiSelectionKeyCode:g,panActivationKeyCode:y,zoomActivationKeyCode:v,elementsSelectable:b,zoomOnScroll:E,zoomOnPinch:w,panOnScroll:_,panOnScrollSpeed:x,panOnScrollMode:S,zoomOnDoubleClick:k,panOnDrag:I,defaultViewport:C,translateExtent:N,minZoom:T,maxZoom:R,preventScrolling:L,onSelectionContextMenu:F,noWheelClassName:V,noPanClassName:M,disableKeyboardA11y:j})=>{var B=ta(Fo),d=Zi(d),y=Zi(y),I=y||I,y=y||_,_=d||f&&!0!==I;{var{deleteKeyCode:f,multiSelectionKeyCode:s}={deleteKeyCode:s,multiSelectionKeyCode:g};const O=na(),A=to()["deleteElements"],D=Zi(f,no),P=Zi(s);(0,ut.useEffect)(()=>{var e,t;D&&({edges:t,getNodes:e}=O.getState(),e=e().filter(e=>e.selected),t=t.filter(e=>e.selected),A({nodes:e,edges:t}),O.setState({nodesSelectionActive:!1}))},[D]),(0,ut.useEffect)(()=>{O.setState({multiSelectionActive:P})},[P])}return ut.default.createElement(co,{onMove:l,onMoveStart:u,onMoveEnd:c,onPaneContextMenu:i,elementsSelectable:b,zoomOnScroll:E,zoomOnPinch:w,panOnScroll:y,panOnScrollSpeed:x,panOnScrollMode:S,zoomOnDoubleClick:k,panOnDrag:!d&&I,defaultViewport:C,translateExtent:N,minZoom:T,maxZoom:R,zoomActivationKeyCode:v,preventScrolling:L,noWheelClassName:V,noPanClassName:M},ut.default.createElement(_o,{onSelectionStart:p,onSelectionEnd:h,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:a,onPaneContextMenu:i,onPaneScroll:o,panOnDrag:I,isSelecting:!!_,selectionMode:m},e,B&&ut.default.createElement(Lo,{onSelectionContextMenu:F,noPanClassName:M,disableKeyboardA11y:j})))},Vo=(n.displayName="FlowRenderer",(0,ut.memo)(n));function jo(n){var e={input:Do(n.input||ki),default:Do(n.default||Si),output:Do(n.output||Ii),group:Do(n.group||Ci)},t=Object.keys(n).filter(e=>!["input","default","output","group"].includes(e)).reduce((e,t)=>(e[t]=Do(n[t]||Si),e),{});return{...e,...t}}var Bo=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),nn=p=>{const{nodesDraggable:h,nodesConnectable:g,nodesFocusable:y,elementsSelectable:v,updateNodeDimensions:t,onError:b}=ta(Bo,He);n=p.onlyRenderVisibleElements;var n,e=ta((0,ut.useCallback)(e=>n?di(e.nodeInternals,{x:0,y:0,width:e.width,height:e.height},e.transform,!0):e.getNodes(),[n]));const r=(0,ut.useRef)(),E=(0,ut.useMemo)(()=>{var e;return"undefined"==typeof ResizeObserver?null:(e=new ResizeObserver(e=>{e=e.map(e=>({id:e.target.getAttribute("data-id"),nodeElement:e.target,forceUpdate:!0}));t(e)}),r.current=e)},[]);return(0,ut.useEffect)(()=>()=>{r?.current?.disconnect()},[]),ut.default.createElement("div",{className:"react-flow__nodes",style:ro},e.map(e=>{let t=e.type||"default";p.nodeTypes[t]||(b?.("003",Qr.error003(t)),t="default");var n,r,a,i,o=p.nodeTypes[t]||p.nodeTypes.default,s=!!(e.draggable||h&&void 0===e.draggable),l=!!(e.selectable||v&&void 0===e.selectable),u=!!(e.connectable||g&&void 0===e.connectable),c=!!(e.focusable||y&&void 0===e.focusable),d=p.nodeExtent?ua(e.positionAbsolute,p.nodeExtent):e.positionAbsolute,f=d?.x??0,d=d?.y??0,m=({x:m,y:n,width:r,height:a,origin:i}=[{x:f,y:d,width:e.width??0,height:e.height??0,origin:p.nodeOrigin}][0],!r||!a||i[0]<0||i[1]<0||1<i[0]||1<i[1]?{x:m,y:n}:{x:m-r*i[0],y:n-a*i[1]});return ut.default.createElement(o,{key:e.id,id:e.id,className:e.className,style:e.style,type:t,data:e.data,sourcePosition:e.sourcePosition||O.Bottom,targetPosition:e.targetPosition||O.Top,hidden:e.hidden,xPos:f,yPos:d,xPosOrigin:m.x,yPosOrigin:m.y,selectNodesOnDrag:p.selectNodesOnDrag,onClick:p.onNodeClick,onMouseEnter:p.onNodeMouseEnter,onMouseMove:p.onNodeMouseMove,onMouseLeave:p.onNodeMouseLeave,onContextMenu:p.onNodeContextMenu,onDoubleClick:p.onNodeDoubleClick,selected:!!e.selected,isDraggable:s,isSelectable:l,isConnectable:u,isFocusable:c,resizeObserver:E,dragHandle:e.dragHandle,zIndex:e[wa]?.z??0,isParent:!!e[wa]?.isParent,noDragClassName:p.noDragClassName,noPanClassName:p.noPanClassName,initialized:!!e.width&&!!e.height,rfId:p.rfId,disableKeyboardA11y:p.disableKeyboardA11y,ariaLabel:e.ariaLabel,hasHandleBounds:!!e[wa]?.handleBounds})}))},zo=(nn.displayName="NodeRenderer",(0,ut.memo)(nn)),$o="react-flow__edgeupdater",Ho=({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:a,onMouseEnter:i,onMouseOut:o,type:s})=>{return ut.default.createElement("circle",{onMouseDown:a,onMouseEnter:i,onMouseOut:o,className:ct([$o,$o+"-"+s]),cx:(a=t,i=r,(o=e)===O.Left?a-i:o===O.Right?a+i:a),cy:(s=n,t=r,(o=e)===O.Top?s-t:o===O.Bottom?s+t:s),r:r,stroke:"transparent",fill:"transparent"})},Uo=()=>!0,Zo=ee=>{var e=({id:l,className:e,type:t,data:L,onClick:i,onEdgeDoubleClick:n,selected:r,animated:a,label:F,labelStyle:V,labelShowBg:j,labelBgStyle:B,labelBgPadding:z,labelBgBorderRadius:$,style:H,source:u,target:c,sourceX:o,sourceY:s,targetX:d,targetY:f,sourcePosition:m,targetPosition:p,elementsSelectable:h,hidden:g,sourceHandleId:y,targetHandleId:v,onContextMenu:b,onMouseEnter:E,onMouseMove:w,onMouseLeave:_,reconnectRadius:x,onReconnect:U,onReconnectStart:Z,onReconnectEnd:K,markerEnd:S,markerStart:k,rfId:I,ariaLabel:C,isFocusable:N,isReconnectable:T,pathOptions:W,interactionWidth:X,disableKeyboardA11y:Y})=>{const R=(0,ut.useRef)(null),[q,M]=(0,ut.useState)(!1),[G,O]=(0,ut.useState)(!1),A=na();var J=(0,ut.useMemo)(()=>`url('#${ai(k,I)}')`,[k,I]),Q=(0,ut.useMemo)(()=>`url('#${ai(S,I)}')`,[S,I]);if(g)return null;g=Da(l,A.getState,n),n=Da(l,A.getState,b),b=Da(l,A.getState,E),E=Da(l,A.getState,w),w=Da(l,A.getState,_);const D=(e,t)=>{if(0===e.button){var{edges:n,isValidConnection:r}=A.getState(),a=t?c:u,i=(t?v:y)||null;const o=t?"target":"source";r=r||Uo;const s=n.find(e=>e.id===l);O(!0),Z?.(e,s,o);wi({event:e,handleId:i,nodeId:a,onConnect:e=>U?.(s,e),isTarget:t,getState:A.getState,setState:A.setState,isValidConnection:r,edgeUpdaterType:o,onReconnectEnd:e=>{O(!1),K?.(e,s,o)}})}};var _=()=>M(!0),P=()=>M(!1);return ut.default.createElement("g",{className:ct(["react-flow__edge","react-flow__edge-"+t,e,{selected:r,animated:a,inactive:!h&&!i,updating:q}]),onClick:e=>{var{edges:t,addSelectedEdges:n,unselectNodesAndEdges:r,multiSelectionActive:a}=A.getState(),t=t.find(e=>e.id===l);t&&(h&&(A.setState({nodesSelectionActive:!1}),t.selected&&a?(r({nodes:[],edges:[t]}),R.current?.blur()):n([l])),i)&&i(e,t)},onDoubleClick:g,onContextMenu:n,onMouseEnter:b,onMouseMove:E,onMouseLeave:w,onKeyDown:N?e=>{var t,n,r;!Y&&_a.includes(e.key)&&h&&({unselectNodesAndEdges:t,addSelectedEdges:n,edges:r}=A.getState(),"Escape"===e.key?(R.current?.blur(),t({edges:[r.find(e=>e.id===l)]})):n([l]))}:void 0,tabIndex:N?0:void 0,role:N?"button":"img","data-testid":"rf__edge-"+l,"aria-label":null===C?void 0:C||`Edge from ${u} to `+c,"aria-describedby":N?Bi+"-"+I:void 0,ref:R},!G&&ut.default.createElement(ee,{id:l,source:u,target:c,selected:r,animated:a,label:F,labelStyle:V,labelShowBg:j,labelBgStyle:B,labelBgPadding:z,labelBgBorderRadius:$,data:L,style:H,sourceX:o,sourceY:s,targetX:d,targetY:f,sourcePosition:m,targetPosition:p,sourceHandleId:y,targetHandleId:v,markerStart:J,markerEnd:Q,pathOptions:W,interactionWidth:X}),T&&ut.default.createElement(ut.default.Fragment,null,("source"===T||!0===T)&&ut.default.createElement(Ho,{position:m,centerX:o,centerY:s,radius:x,onMouseDown:e=>D(e,!0),onMouseEnter:_,onMouseOut:P,type:"source"}),("target"===T||!0===T)&&ut.default.createElement(Ho,{position:p,centerX:d,centerY:f,radius:x,onMouseDown:e=>D(e,!1),onMouseEnter:_,onMouseOut:P,type:"target"})))};return e.displayName="EdgeWrapper",(0,ut.memo)(e)};function Ko(n){var e={default:Zo(n.default||qa),straight:Zo(n.bezier||Ka),step:Zo(n.step||Za),smoothstep:Zo(n.step||Ua),simplebezier:Zo(n.simplebezier||ja)},t=Object.keys(n).filter(e=>!["default","bezier"].includes(e)).reduce((e,t)=>(e[t]=Zo(n[t]||qa),e),{});return{...e,...t}}function Wo(e,t,n=null){var r=(n?.x||0)+t.x,a=(n?.y||0)+t.y,i=n?.width||t.width,o=n?.height||t.height;switch(e){case O.Top:return{x:r+i/2,y:a};case O.Right:return{x:r+i,y:a+o/2};case O.Bottom:return{x:r+i/2,y:a+o};case O.Left:return{x:r,y:a+o/2}}}function Xo(e,t){return e?1!==e.length&&t?t&&e.find(e=>e.id===t)||null:e[0]:null}function Yo(e){var t=e?.[wa]?.handleBounds||null,n=t&&e?.width&&e?.height&&void 0!==e?.positionAbsolute?.x&&void 0!==e?.positionAbsolute?.y;return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!n]}var qo=[{level:0,isMaxLevel:!0,edges:[]}];function Go(e,c,t){var n=ta((0,ut.useCallback)(u=>e?u.edges.filter(e=>{var t,n,r,a,i,o,s,l=c.get(e.source),e=c.get(e.target);return l?.width&&l?.height&&e?.width&&e?.height&&({sourcePos:l,targetPos:e,sourceWidth:t,sourceHeight:n,targetWidth:r,targetHeight:a,width:i,height:o,transform:s}=[{sourcePos:l.positionAbsolute||{x:0,y:0},targetPos:e.positionAbsolute||{x:0,y:0},sourceWidth:l.width,sourceHeight:l.height,targetWidth:e.width,targetHeight:e.height,width:u.width,height:u.height,transform:u.transform}][0],(t={x:Math.min(l.x,e.x),y:Math.min(l.y,e.y),x2:Math.max(l.x+t,e.x+r),y2:Math.max(l.y+n,e.y+a)}).x===t.x2&&(t.x2+=1),t.y===t.y2&&(t.y2+=1),r=pa({x:(0-s[0])/s[2],y:(0-s[1])/s[2],width:i/s[2],height:o/s[2]}),l=Math.max(0,Math.min(r.x2,t.x2)-Math.max(r.x,t.x)),n=Math.max(0,Math.min(r.y2,t.y2)-Math.max(r.y,t.y)),0<Math.ceil(l*n))}):u.edges,[e,c]));{var[n,l,u=!1]=[n,c,t];let s=-1;return n=n.reduce((e,t)=>{var n,r,a,i=Ea(t.zIndex);let o=i?t.zIndex:0;return u&&(n=l.get(t.target),a=l.get(t.source),r=t.selected||n?.selected||a?.selected,a=Math.max(a?.[wa]?.z||0,n?.[wa]?.z||0,1e3),o=(i?t.zIndex:0)+(r?a:0)),e[o]?e[o].push(t):e[o]=[t],s=o>s?o:s,e},{}),0===(n=Object.entries(n).map(([e,t])=>{e=+e;return{edges:t,level:e,isMaxLevel:e===s}})).length?qo:n}}var Jo={[o.Arrow]:({color:e="none",strokeWidth:t=1})=>ut.default.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),[o.ArrowClosed]:({color:e="none",strokeWidth:t=1})=>ut.default.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})};var Qo=({id:e,type:t,color:n,width:r=12.5,height:a=12.5,markerUnits:i="strokeWidth",strokeWidth:o,orient:s="auto-start-reverse"})=>{t=function(e){const t=na();return(0,ut.useMemo)(()=>{return Object.prototype.hasOwnProperty.call(Jo,e)?Jo[e]:(t.getState().onError?.("009",Qr.error009(e)),null)},[e])}(t);return t?ut.default.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:""+r,markerHeight:""+a,viewBox:"-10 -10 20 20",markerUnits:i,orient:s,refX:"0",refY:"0"},ut.default.createElement(t,{color:n,strokeWidth:o})):null},i=({defaultColor:e,rfId:t})=>{var a,i,e=ta((0,ut.useCallback)(({defaultColor:a,rfId:i}=[{defaultColor:e,rfId:t}][0],e=>{const r=[];return e.edges.reduce((n,e)=>([e.markerStart,e.markerEnd].forEach(e=>{var t;e&&"object"==typeof e&&(t=ai(e,i),r.includes(t)||(n.push({id:t,color:e.color||a,...e}),r.push(t)))}),n),[]).sort((e,t)=>e.id.localeCompare(t.id))}),[e,t]),(e,n)=>!(e.length!==n.length||e.some((e,t)=>e.id!==n[t].id)));return ut.default.createElement("defs",null,e.map(e=>ut.default.createElement(Qo,{id:e.id,key:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,strokeWidth:e.strokeWidth,orient:e.orient})))},es=(i.displayName="MarkerDefinitions",(0,ut.memo)(i)),ts=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),a=({defaultMarkerColor:r,onlyRenderVisibleElements:e,elevateEdgesOnSelect:t,rfId:f,edgeTypes:m,noPanClassName:p,onEdgeContextMenu:h,onEdgeMouseEnter:g,onEdgeMouseMove:y,onEdgeMouseLeave:v,onEdgeClick:b,onEdgeDoubleClick:E,onReconnect:w,onReconnectStart:_,onReconnectEnd:x,reconnectRadius:S,children:n,disableKeyboardA11y:k})=>{const{edgesFocusable:I,edgesUpdatable:C,elementsSelectable:N,width:a,height:i,connectionMode:T,nodeInternals:R,onError:M}=ta(ts,He);e=Go(e,R,t);return a?ut.default.createElement(ut.default.Fragment,null,e.map(({level:e,edges:t,isMaxLevel:n})=>ut.default.createElement("svg",{key:e,style:{zIndex:e},width:a,height:i,className:"react-flow__edges react-flow__container"},n&&ut.default.createElement(es,{defaultColor:r,rfId:f}),ut.default.createElement("g",null,t.map(e=>{var[t,n,r]=Yo(R.get(e.source)),[a,i,o]=Yo(R.get(e.target));if(!r||!o)return null;let s=e.type||"default";m[s]||(M?.("011",Qr.error011(s)),s="default");var l,r=m[s]||m.default,o=T===Ia.Strict?i.target:(i.target??[]).concat(i.source??[]),i=Xo(n.source,e.sourceHandle),n=Xo(o,e.targetHandle),o=i?.position||O.Bottom,u=n?.position||O.Top,c=!!(e.focusable||I&&void 0===e.focusable),d=e.reconnectable||e.updatable,d=void 0!==w&&(d||C&&void 0===d);return i&&n?({sourceX:t,sourceY:a,targetX:n,targetY:l}=((e,t,n,r,a,i)=>{n=Wo(n,e,t),e=Wo(i,r,a);return{sourceX:n.x,sourceY:n.y,targetX:e.x,targetY:e.y}})(t,i,o,a,n,u),ut.default.createElement(r,{key:e.id,id:e.id,className:ct([e.className,p]),type:s,data:e.data,selected:!!e.selected,animated:!!e.animated,hidden:!!e.hidden,label:e.label,labelStyle:e.labelStyle,labelShowBg:e.labelShowBg,labelBgStyle:e.labelBgStyle,labelBgPadding:e.labelBgPadding,labelBgBorderRadius:e.labelBgBorderRadius,style:e.style,source:e.source,target:e.target,sourceHandleId:e.sourceHandle,targetHandleId:e.targetHandle,markerEnd:e.markerEnd,markerStart:e.markerStart,sourceX:t,sourceY:a,targetX:n,targetY:l,sourcePosition:o,targetPosition:u,elementsSelectable:N,onContextMenu:h,onMouseEnter:g,onMouseMove:y,onMouseLeave:v,onClick:b,onEdgeDoubleClick:E,onReconnect:w,onReconnectStart:_,onReconnectEnd:x,reconnectRadius:S,rfId:f,ariaLabel:e.ariaLabel,isFocusable:c,isReconnectable:d,pathOptions:"pathOptions"in e?e.pathOptions:void 0,interactionWidth:e.interactionWidth,disableKeyboardA11y:k})):(M?.("008",Qr.error008(i,e)),null)})))),n):null},ns=(a.displayName="EdgeRenderer",(0,ut.memo)(a)),rs=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function as({children:e}){var t=ta(rs);return ut.default.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}var is={[O.Left]:O.Right,[O.Right]:O.Left,[O.Top]:O.Bottom,[O.Bottom]:O.Top},os=({nodeId:t,handleType:e,style:n,type:r=Ta.Bezier,CustomComponent:a,connectionStatus:i})=>{const{fromNode:o,handleId:s,toX:l,toY:u,connectionMode:c}=ta((0,ut.useCallback)(e=>({fromNode:e.nodeInternals.get(t),handleId:e.connectionHandleId,toX:(e.connectionPosition.x-e.transform[0])/e.transform[2],toY:(e.connectionPosition.y-e.transform[1])/e.transform[2],connectionMode:e.connectionMode}),[t]),He);var d=o?.[wa]?.handleBounds;let f=d?.[e];if(c===Ia.Loose&&(f=f||d?.["source"===e?"target":"source"]),!o||!f)return null;var d=s?f.find(e=>e.id===s):f[0],e=d?d.x+d.width/2:(o.width??0)/2,m=d?d.y+d.height/2:o.height??0,e=(o.positionAbsolute?.x??0)+e,m=(o.positionAbsolute?.y??0)+m,p=d?.position,h=p?is[p]:null;if(!p||!h)return null;if(a)return ut.default.createElement(a,{connectionLineType:r,connectionLineStyle:n,fromNode:o,fromHandle:d,fromX:e,fromY:m,toX:l,toY:u,fromPosition:p,toPosition:h,connectionStatus:i});let g="";a={sourceX:e,sourceY:m,sourcePosition:p,targetX:l,targetY:u,targetPosition:h};return r===Ta.Bezier?[g]=Ya(a):r===Ta.Step?[g]=Ha({...a,borderRadius:0}):r===Ta.SmoothStep?[g]=Ha(a):r===Ta.SimpleBezier?[g]=Va(a):g=`M${e},${m} ${l},`+u,ut.default.createElement("path",{d:g,fill:"none",className:"react-flow__connection-path",style:n})},ss=(os.displayName="ConnectionLine",e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height}));function ls({containerStyle:e,style:t,type:n,component:r}){var{nodeId:a,handleType:i,nodesConnectable:o,width:s,height:l,connectionStatus:u}=ta(ss,He);return a&&i&&s&&o?ut.default.createElement("svg",{style:e,width:s,height:l,className:"react-flow__edges react-flow__connectionline react-flow__container"},ut.default.createElement("g",{className:ct(["react-flow__connection",u])},ut.default.createElement(os,{nodeId:a,handleType:i,style:t,type:n,CustomComponent:r,connectionStatus:u}))):null}function us(t,n){const r=(0,ut.useRef)(null),a=na();return(0,ut.useMemo)(()=>{var e=Object.keys(t);return He(r.current,e)&&a.getState().onError?.("002",Qr.error002()),r.current=e,n(t)},[t])}var n=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:r,onMoveEnd:a,onInit:i,onNodeClick:o,onEdgeClick:s,onNodeDoubleClick:l,onEdgeDoubleClick:u,onNodeMouseEnter:c,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:m,onSelectionContextMenu:p,onSelectionStart:h,onSelectionEnd:g,connectionLineType:y,connectionLineStyle:v,connectionLineComponent:b,connectionLineContainerStyle:E,selectionKeyCode:w,selectionOnDrag:_,selectionMode:x,multiSelectionKeyCode:S,panActivationKeyCode:k,zoomActivationKeyCode:I,deleteKeyCode:C,onlyRenderVisibleElements:N,elementsSelectable:L,selectNodesOnDrag:F,defaultViewport:V,translateExtent:j,minZoom:B,maxZoom:z,preventScrolling:$,defaultMarkerColor:H,zoomOnScroll:U,zoomOnPinch:Z,panOnScroll:K,panOnScrollSpeed:W,panOnScrollMode:X,zoomOnDoubleClick:Y,panOnDrag:q,onPaneClick:G,onPaneMouseEnter:J,onPaneMouseMove:Q,onPaneMouseLeave:ee,onPaneScroll:te,onPaneContextMenu:ne,onEdgeContextMenu:re,onEdgeMouseEnter:ae,onEdgeMouseMove:ie,onEdgeMouseLeave:oe,onReconnect:se,onReconnectStart:le,onReconnectEnd:ue,reconnectRadius:ce,noDragClassName:T,noWheelClassName:de,noPanClassName:R,elevateEdgesOnSelect:fe,disableKeyboardA11y:M,nodeOrigin:me,nodeExtent:pe,rfId:O})=>{e=us(e,jo),t=us(t,Ko);{var A=i;const D=to(),P=(0,ut.useRef)(!1);(0,ut.useEffect)(()=>{!P.current&&D.viewportInitialized&&A&&(setTimeout(()=>A(D),1),P.current=!0)},[A,D.viewportInitialized])}return ut.default.createElement(Vo,{onPaneClick:G,onPaneMouseEnter:J,onPaneMouseMove:Q,onPaneMouseLeave:ee,onPaneContextMenu:ne,onPaneScroll:te,deleteKeyCode:C,selectionKeyCode:w,selectionOnDrag:_,selectionMode:x,onSelectionStart:h,onSelectionEnd:g,multiSelectionKeyCode:S,panActivationKeyCode:k,zoomActivationKeyCode:I,elementsSelectable:L,onMove:n,onMoveStart:r,onMoveEnd:a,zoomOnScroll:U,zoomOnPinch:Z,zoomOnDoubleClick:Y,panOnScroll:K,panOnScrollSpeed:W,panOnScrollMode:X,panOnDrag:q,defaultViewport:V,translateExtent:j,minZoom:B,maxZoom:z,onSelectionContextMenu:p,preventScrolling:$,noDragClassName:T,noWheelClassName:de,noPanClassName:R,disableKeyboardA11y:M},ut.default.createElement(as,null,ut.default.createElement(ns,{edgeTypes:t,onEdgeClick:s,onEdgeDoubleClick:u,onlyRenderVisibleElements:N,onEdgeContextMenu:re,onEdgeMouseEnter:ae,onEdgeMouseMove:ie,onEdgeMouseLeave:oe,onReconnect:se,onReconnectStart:le,onReconnectEnd:ue,reconnectRadius:ce,defaultMarkerColor:H,noPanClassName:R,elevateEdgesOnSelect:!!fe,disableKeyboardA11y:M,rfId:O},ut.default.createElement(ls,{style:v,type:y,component:b,containerStyle:E})),ut.default.createElement("div",{className:"react-flow__edgelabel-renderer"}),ut.default.createElement(zo,{nodeTypes:e,onNodeClick:o,onNodeDoubleClick:l,onNodeMouseEnter:c,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:m,selectNodesOnDrag:F,onlyRenderVisibleElements:N,noPanClassName:R,noDragClassName:T,disableKeyboardA11y:M,nodeOrigin:me,nodeExtent:pe,rfId:O})))},cs=(n.displayName="GraphView",(0,ut.memo)(n)),ds=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],fs={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:ds,nodeExtent:ds,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Ia.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:xa,isValidConnection:void 0},ms=({children:e})=>{var t=(0,ut.useRef)(null);return t.current||(t.current=$e((c,d)=>({...fs,setNodes:e=>{var{nodeInternals:t,nodeOrigin:n,elevateNodesOnSelect:r}=d();c({nodeInternals:Yi(e,t,n,r)})},getNodes:()=>Array.from(d().nodeInternals.values()),setEdges:e=>{const{defaultEdgeOptions:t={}}=d();c({edges:e.map(e=>({...t,...e}))})},setDefaultNodesAndEdges:(e,t)=>{var n=void 0!==e,r=void 0!==t,e=n?Yi(e,new Map,d().nodeOrigin,d().elevateNodesOnSelect):new Map;c({nodeInternals:e,edges:r?t:[],hasDefaultNodes:n,hasDefaultEdges:r})},updateNodeDimensions:e=>{const{onNodesChange:t,nodeInternals:a,fitViewOnInit:n,fitViewOnInitDone:r,fitViewOnInitOptions:i,domNode:o,nodeOrigin:s}=d();var l=o?.querySelector(".react-flow__viewport");if(l){l=window.getComputedStyle(l);const u=new window.DOMMatrixReadOnly(l.transform)["m22"];l=e.reduce((e,t)=>{var n,r=a.get(t.id);return r?.hidden?a.set(r.id,{...r,[wa]:{...r[wa],handleBounds:void 0}}):r&&(n=sa(t.nodeElement)).width&&n.height&&(r.width!==n.width||r.height!==n.height||t.forceUpdate)&&(a.set(r.id,{...r,[wa]:{...r[wa],handleBounds:{source:Co(".source",t.nodeElement,u,s),target:Co(".target",t.nodeElement,u,s)}},...n}),e.push({id:r.id,type:"dimensions",dimensions:n})),e},[]),e=(Xi(a,s),r||n&&!r&&qi(d,{initial:!0,...i}));c({nodeInternals:new Map(a),fitViewOnInitDone:e}),0<l?.length&&t?.(l)}},updateNodePositions:(e,n=!0,r=!1)=>{var t=d()["triggerNodeChanges"];t(e.map(e=>{var t={id:e.id,type:"position",dragging:r};return n&&(t.positionAbsolute=e.positionAbsolute,t.position=e.position),t}))},triggerNodeChanges:e=>{var{onNodesChange:t,nodeInternals:n,hasDefaultNodes:r,nodeOrigin:a,getNodes:i,elevateNodesOnSelect:o}=d();e?.length&&(r&&(r=Yi(go(e,i()),n,a,o),c({nodeInternals:r})),t?.(e))},addSelectedNodes:e=>{var{multiSelectionActive:t,edges:n,getNodes:r}=d();let a,i=null;t?a=e.map(e=>vo(e,!0)):(a=bo(r(),e),i=bo(n,[])),Gi({changedNodes:a,changedEdges:i,get:d,set:c})},addSelectedEdges:e=>{var{multiSelectionActive:t,edges:n,getNodes:r}=d();let a,i=null;t?a=e.map(e=>vo(e,!0)):(a=bo(n,e),i=bo(r(),[])),Gi({changedNodes:i,changedEdges:a,get:d,set:c})},unselectNodesAndEdges:({nodes:e,edges:t}={})=>{var{edges:n,getNodes:r}=d(),t=t||n;Gi({changedNodes:(e||r()).map(e=>(e.selected=!1,vo(e.id,!1))),changedEdges:t.map(e=>vo(e.id,!1)),get:d,set:c})},setMinZoom:e=>{var{d3Zoom:t,maxZoom:n}=d();t?.scaleExtent([e,n]),c({minZoom:e})},setMaxZoom:e=>{var{d3Zoom:t,minZoom:n}=d();t?.scaleExtent([n,e]),c({maxZoom:e})},setTranslateExtent:e=>{d().d3Zoom?.translateExtent(e),c({translateExtent:e})},resetSelectedElements:()=>{var{edges:e,getNodes:t}=d();Gi({changedNodes:t().filter(e=>e.selected).map(e=>vo(e.id,!1)),changedEdges:e.filter(e=>e.selected).map(e=>vo(e.id,!1)),get:d,set:c})},setNodeExtent:t=>{var e=d()["nodeInternals"];e.forEach(e=>{e.positionAbsolute=ua(e.position,t)}),c({nodeExtent:t,nodeInternals:new Map(e)})},panBy:e=>{var{transform:t,width:n,height:r,d3Zoom:a,d3Selection:i,translateExtent:o}=d();return!(!a||!i||!e.x&&!e.y)&&(e=zr.translate(t[0]+e.x,t[1]+e.y).scale(t[2]),n=[[0,0],[n,r]],r=a?.constrain()(e,n,o),a.transform(i,r),t[0]!==r.x||t[1]!==r.y||t[2]!==r.k)},cancelConnection:()=>c({connectionNodeId:fs.connectionNodeId,connectionHandleId:fs.connectionHandleId,connectionHandleType:fs.connectionHandleType,connectionStatus:fs.connectionStatus,connectionStartHandle:fs.connectionStartHandle,connectionEndHandle:fs.connectionEndHandle}),reset:()=>c({...fs})}),Object.is)),ut.default.createElement(Jr,{value:t.current},e)},ps=(ms.displayName="ReactFlowProvider",({children:e})=>{return(0,ut.useContext)(Gr)?ut.default.createElement(ut.default.Fragment,null,e):ut.default.createElement(ms,null,e)}),hs=(ps.displayName="ReactFlowWrapper",{input:ki,default:Si,output:Ii,group:Ci}),gs={default:qa,straight:Ka,step:Za,smoothstep:Ua,simplebezier:ja},ys=[0,0],vs=[15,15],bs={x:0,y:0,zoom:1},Es={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},ws=(0,ut.forwardRef)(({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:a,nodeTypes:i=hs,edgeTypes:o=gs,onNodeClick:s,onEdgeClick:l,onInit:u,onMove:c,onMoveStart:d,onMoveEnd:f,onConnect:m,onConnectStart:p,onConnectEnd:h,onClickConnectStart:g,onClickConnectEnd:y,onNodeMouseEnter:v,onNodeMouseMove:b,onNodeMouseLeave:E,onNodeContextMenu:w,onNodeDoubleClick:_,onNodeDragStart:x,onNodeDrag:S,onNodeDragStop:k,onNodesDelete:I,onEdgesDelete:L,onSelectionChange:F,onSelectionDragStart:V,onSelectionDrag:j,onSelectionDragStop:B,onSelectionContextMenu:z,onSelectionStart:$,onSelectionEnd:H,connectionMode:U=Ia.Strict,connectionLineType:Z=Ta.Bezier,connectionLineStyle:K,connectionLineComponent:W,connectionLineContainerStyle:X,deleteKeyCode:Y="Backspace",selectionKeyCode:q="Shift",selectionOnDrag:G=!1,selectionMode:J=Na.Full,panActivationKeyCode:Q="Space",multiSelectionKeyCode:ee=Oa()?"Meta":"Control",zoomActivationKeyCode:te=Oa()?"Meta":"Control",snapToGrid:ne=!1,snapGrid:re=vs,onlyRenderVisibleElements:ae=!1,selectNodesOnDrag:ie=!0,nodesDraggable:oe,nodesConnectable:se,nodesFocusable:le,nodeOrigin:C=ys,edgesFocusable:ue,edgesUpdatable:ce,elementsSelectable:de,defaultViewport:fe=bs,minZoom:N=.5,maxZoom:T=2,translateExtent:R=ds,preventScrolling:me=!0,nodeExtent:M,defaultMarkerColor:pe="#b1b1b7",zoomOnScroll:he=!0,zoomOnPinch:ge=!0,panOnScroll:ye=!1,panOnScrollSpeed:ve=.5,panOnScrollMode:be=Ca.Free,zoomOnDoubleClick:Ee=!0,panOnDrag:we=!0,onPaneClick:_e,onPaneMouseEnter:xe,onPaneMouseMove:Se,onPaneMouseLeave:ke,onPaneScroll:Ie,onPaneContextMenu:Ce,children:Ne,onEdgeContextMenu:Te,onEdgeDoubleClick:Re,onEdgeMouseEnter:Me,onEdgeMouseMove:Oe,onEdgeMouseLeave:Ae,onEdgeUpdate:De,onEdgeUpdateStart:Pe,onEdgeUpdateEnd:Le,onReconnect:Fe,onReconnectStart:Ve,onReconnectEnd:je,reconnectRadius:Be=10,edgeUpdaterRadius:ze=10,onNodesChange:$e,onEdgesChange:He,noDragClassName:Ue="nodrag",noWheelClassName:Ze="nowheel",noPanClassName:O="nopan",fitView:Ke=!1,fitViewOptions:We,connectOnClick:Xe=!0,attributionPosition:Ye,proOptions:qe,defaultEdgeOptions:Ge,elevateNodesOnSelect:Je=!0,elevateEdgesOnSelect:Qe=!1,disableKeyboardA11y:A=!1,autoPanOnConnect:et=!0,autoPanOnNodeDrag:tt=!0,connectionRadius:nt=20,isValidConnection:rt,onError:at,style:it,id:D,nodeDragThreshold:ot,...st},lt)=>{var P=D||"1";return ut.default.createElement("div",{...st,style:{...it,...Es},ref:lt,className:ct(["react-flow",a]),"data-testid":"rf__wrapper",id:D},ut.default.createElement(ps,null,ut.default.createElement(cs,{onInit:u,onMove:c,onMoveStart:d,onMoveEnd:f,onNodeClick:s,onEdgeClick:l,onNodeMouseEnter:v,onNodeMouseMove:b,onNodeMouseLeave:E,onNodeContextMenu:w,onNodeDoubleClick:_,nodeTypes:i,edgeTypes:o,connectionLineType:Z,connectionLineStyle:K,connectionLineComponent:W,connectionLineContainerStyle:X,selectionKeyCode:q,selectionOnDrag:G,selectionMode:J,deleteKeyCode:Y,multiSelectionKeyCode:ee,panActivationKeyCode:Q,zoomActivationKeyCode:te,onlyRenderVisibleElements:ae,selectNodesOnDrag:ie,defaultViewport:fe,translateExtent:R,minZoom:N,maxZoom:T,preventScrolling:me,zoomOnScroll:he,zoomOnPinch:ge,zoomOnDoubleClick:Ee,panOnScroll:ye,panOnScrollSpeed:ve,panOnScrollMode:be,panOnDrag:we,onPaneClick:_e,onPaneMouseEnter:xe,onPaneMouseMove:Se,onPaneMouseLeave:ke,onPaneScroll:Ie,onPaneContextMenu:Ce,onSelectionContextMenu:z,onSelectionStart:$,onSelectionEnd:H,onEdgeContextMenu:Te,onEdgeDoubleClick:Re,onEdgeMouseEnter:Me,onEdgeMouseMove:Oe,onEdgeMouseLeave:Ae,onReconnect:Fe??De,onReconnectStart:Ve??Pe,onReconnectEnd:je??Le,reconnectRadius:Be??ze,defaultMarkerColor:pe,noDragClassName:Ue,noWheelClassName:Ze,noPanClassName:O,elevateEdgesOnSelect:Qe,rfId:P,disableKeyboardA11y:A,nodeOrigin:C,nodeExtent:M}),ut.default.createElement(Li,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:m,onConnectStart:p,onConnectEnd:h,onClickConnectStart:g,onClickConnectEnd:y,nodesDraggable:oe,nodesConnectable:se,nodesFocusable:le,edgesFocusable:ue,edgesUpdatable:ce,elementsSelectable:de,elevateNodesOnSelect:Je,minZoom:N,maxZoom:T,nodeExtent:M,onNodesChange:$e,onEdgesChange:He,snapToGrid:ne,snapGrid:re,connectionMode:U,translateExtent:R,connectOnClick:Xe,defaultEdgeOptions:Ge,fitView:Ke,fitViewOptions:We,onNodesDelete:I,onEdgesDelete:L,onNodeDragStart:x,onNodeDrag:S,onNodeDragStop:k,onSelectionDrag:j,onSelectionDragStart:V,onSelectionDragStop:B,noPanClassName:O,nodeOrigin:C,rfId:P,autoPanOnConnect:et,autoPanOnNodeDrag:tt,onError:at,connectionRadius:nt,isValidConnection:rt,nodeDragThreshold:ot}),ut.default.createElement(Ai,{onSelectionChange:F}),Ne,ut.default.createElement(ia,{proOptions:qe,position:Ye}),ut.default.createElement(Ui,{rfId:P,disableKeyboardA11y:A})))});function _s(r){return e=>{const[t,n]=(0,ut.useState)(e);e=(0,ut.useCallback)(t=>n(e=>r(t,e)),[]);return[t,n,e]}}ws.displayName="ReactFlow";_s(go),_s(yo);var xs=t(b(),1),nn=({id:t,x:e,y:n,width:r,height:a,style:i,color:o,strokeColor:s,strokeWidth:l,className:u,borderRadius:c,shapeRendering:d,onClick:f,selected:m})=>{var{background:i,backgroundColor:p}=i||{},o=o||i||p;return xs.default.createElement("rect",{className:ct(["react-flow__minimap-node",{selected:m},u]),x:e,y:n,rx:c,ry:c,width:r,height:a,fill:o,stroke:s,strokeWidth:l,shapeRendering:d,onClick:f?e=>f(e,t):void 0})},Ss=(nn.displayName="MiniMapNode",(0,xs.memo)(nn)),ks=e=>e.nodeOrigin,Is=e=>e.getNodes().filter(e=>!e.hidden&&e.width&&e.height),Cs=e=>e instanceof Function?e:()=>e;var Ns=(0,xs.memo)(function({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:a=2,nodeComponent:i=Ss,onClick:o}){var s=ta(Is,He);const l=ta(ks),u=Cs(t),c=Cs(e),d=Cs(n),f="undefined"==typeof window||window.chrome?"crispEdges":"geometricPrecision";return xs.default.createElement(xs.default.Fragment,null,s.map(e=>{var{x:t,y:n}=ui(e,l).positionAbsolute;return xs.default.createElement(i,{key:e.id,x:t,y:n,width:e.width,height:e.height,style:e.style,selected:e.selected,className:d(e),color:u(e),borderRadius:r,strokeColor:c(e),strokeWidth:a,shapeRendering:f,onClick:o,id:e.id})}))}),Ts=e=>{var t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:0<t.length?ya(ci(t,e.nodeOrigin),n):n,rfId:e.rfId}};function Rs({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:r="#e2e2e2",nodeClassName:a="",nodeBorderRadius:i=5,nodeStrokeWidth:o=2,nodeComponent:s,maskColor:l="rgb(240, 240, 240, 0.6)",maskStrokeColor:u="none",maskStrokeWidth:c=1,position:d="bottom-right",onClick:f,onNodeClick:m,pannable:p=!1,zoomable:h=!1,ariaLabel:g="React Flow mini map",inversePan:y=!1,zoomStep:v=10,offsetScale:b=5}){const E=na(),w=(0,xs.useRef)(null);var{boundingRect:_,viewBB:x,rfId:S}=ta(Ts,He),k=e?.width??200,I=e?.height??150,C=_.width/k,N=_.height/I,C=Math.max(C,N),N=C*k,T=C*I,b=b*C,R=_.x-(N-_.width)/2-b,_=_.y-(T-_.height)/2-b,N=N+2*b,T=T+2*b,S="react-flow__minimap-desc-"+S;const M=(0,xs.useRef)(0);M.current=C,(0,xs.useEffect)(()=>{if(w.current){const t=jt(w.current);var e=qr().on("zoom",p?e=>{var t,{transform:n,d3Selection:r,d3Zoom:a,translateExtent:i,width:o,height:s}=E.getState();"mousemove"===e.sourceEvent.type&&r&&a&&(t=M.current*Math.max(1,n[2])*(y?-1:1),e={x:n[0]-e.sourceEvent.movementX*t,y:n[1]-e.sourceEvent.movementY*t},t=[[0,0],[o,s]],o=zr.translate(e.x,e.y).scale(n[2]),s=a.constrain()(o,t,i),a.transform(r,s))}:null).on("zoom.wheel",h?e=>{var{transform:t,d3Selection:n,d3Zoom:r}=E.getState();"wheel"===e.sourceEvent.type&&n&&r&&(e=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*v,t=t[2]*Math.pow(2,e),r.scaleTo(n,t))}:null);return t.call(e),()=>{t.on("zoom",null)}}},[p,h,y,v]);var C=f?e=>{var t=Bt(e);f(e,{x:t[0],y:t[1]})}:void 0,O=m?(e,t)=>{t=E.getState().nodeInternals.get(t);m(e,t)}:void 0;return xs.default.createElement(aa,{position:d,style:e,className:ct(["react-flow__minimap",t]),"data-testid":"rf__minimap"},xs.default.createElement("svg",{width:k,height:I,viewBox:R+` ${_} ${N} `+T,role:"img","aria-labelledby":S,ref:w,onClick:C},g&&xs.default.createElement("title",{id:S},g),xs.default.createElement(Ns,{onClick:O,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:i,nodeClassName:a,nodeStrokeWidth:o,nodeComponent:s}),xs.default.createElement("path",{className:"react-flow__minimap-mask",d:`M${R-b},${_-b}h${N+2*b}v${T+2*b}h${-N-2*b}z
        M${x.x},${x.y}h${x.width}v${x.height}h${-x.width}z`,fill:l,fillRule:"evenodd",stroke:u,strokeWidth:c,pointerEvents:"none"})))}Rs.displayName="MiniMap";var Ms=(0,xs.memo)(Rs),Os=t(b(),1);function As(){return Os.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},Os.default.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Ds(){return Os.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},Os.default.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Ps(){return Os.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},Os.default.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function Ls(){return Os.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},Os.default.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Fs(){return Os.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},Os.default.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}var Vs,js=({children:e,className:t,...n})=>Os.default.createElement("button",{type:"button",className:ct(["react-flow__controls-button",t]),...n},e),Bs=(js.displayName="ControlButton",e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom})),o=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:a,onZoomIn:i,onZoomOut:o,onFitView:s,onInteractiveChange:l,className:u,children:c,position:d="bottom-left"})=>{const f=na(),[m,p]=(0,Os.useState)(!1),{isInteractive:h,minZoomReached:g,maxZoomReached:y}=ta(Bs,He),{zoomIn:v,zoomOut:b,fitView:E}=to();return(0,Os.useEffect)(()=>{p(!0)},[]),m?Os.default.createElement(aa,{className:ct(["react-flow__controls",u]),position:d,style:e,"data-testid":"rf__controls"},t&&Os.default.createElement(Os.default.Fragment,null,Os.default.createElement(js,{onClick:()=>{v(),i?.()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:y},Os.default.createElement(As,null)),Os.default.createElement(js,{onClick:()=>{b(),o?.()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:g},Os.default.createElement(Ds,null))),n&&Os.default.createElement(js,{className:"react-flow__controls-fitview",onClick:()=>{E(a),s?.()},title:"fit view","aria-label":"fit view"},Os.default.createElement(Ps,null)),r&&Os.default.createElement(js,{className:"react-flow__controls-interactive",onClick:()=>{f.setState({nodesDraggable:!h,nodesConnectable:!h,elementsSelectable:!h}),l?.(!h)},title:"toggle interactivity","aria-label":"toggle interactivity"},h?Os.default.createElement(Fs,null):Os.default.createElement(Ls,null)),c):null},zs=(o.displayName="Controls",(0,Os.memo)(o)),$s=t(b(),1);function Hs({color:e,dimensions:t,lineWidth:n}){return $s.default.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H`+t[0]})}function Us({color:e,radius:t}){return $s.default.createElement("circle",{cx:t,cy:t,r:t,fill:e})}(i=Vs=Vs||{}).Lines="lines",i.Dots="dots",i.Cross="cross";var Zs={[Vs.Dots]:"#91919a",[Vs.Lines]:"#eee",[Vs.Cross]:"#e2e2e2"},Ks={[Vs.Dots]:1,[Vs.Lines]:1,[Vs.Cross]:6},Ws=e=>({transform:e.transform,patternId:"pattern-"+e.rfId});function Xs({id:e,variant:t=Vs.Dots,gap:n=20,size:r,lineWidth:a=1,offset:i=2,color:o,style:s,className:l}){var u=(0,$s.useRef)(null),{transform:c,patternId:d}=ta(Ws,He),o=o||Zs[t],r=r||Ks[t],f=t===Vs.Dots,t=t===Vs.Cross,n=Array.isArray(n)?n:[n,n],n=[n[0]*c[2]||1,n[1]*c[2]||1],r=r*c[2],t=t?[r,r]:n,m=f?[r/i,r/i]:[t[0]/i,t[1]/i];return $s.default.createElement("svg",{className:ct(["react-flow__background",l]),style:{...s,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},$s.default.createElement("pattern",{id:d+e,x:c[0]%n[0],y:c[1]%n[1],width:n[0],height:n[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${m[0]},-${m[1]})`},f?$s.default.createElement(Us,{color:o,radius:r/i}):$s.default.createElement(Hs,{dimensions:t,color:o,lineWidth:a})),$s.default.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${d+e})`}))}Xs.displayName="Background";var Ys=(0,$s.memo)(Xs);t(b(),1),t(Y(),1);var qs=t(b(),1).default["useRef"];function Gs(t){const n=qs();return e=>{e=t(e);return function(e,t){if(Object.is(e,t))return 1;if("object"==typeof e&&null!==e&&"object"==typeof t&&null!==t){if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return;for(var[n,r]of e)if(!Object.is(r,t.get(n)))return;return 1}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return;for(const i of e)if(!t.has(i))return;return 1}var a=Object.keys(e);if(a.length===Object.keys(t).length){for(const o of a)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return;return 1}}}(n.current,e)?n.current:n.current=e}}var Js=t(b(),1),Qs=e=>"checkbox"===e.type,el=e=>e instanceof Date,tl=e=>null==e,nl=e=>"object"==typeof e,rl=e=>!tl(e)&&!Array.isArray(e)&&nl(e)&&!el(e),al=e=>rl(e)&&e.target?Qs(e.target)?e.target.checked:e.target.value:e,il=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,ol=(e,t)=>e.has(il(t)),sl="undefined"!=typeof window&&void 0!==window.HTMLElement&&"undefined"!=typeof document;function ll(e){let t;var n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(sl&&(e instanceof Blob||e instanceof FileList)||!n&&!rl(e))return e;if(t=n?[]:{},n||(e=>{e=e.constructor&&e.constructor.prototype;return rl(e)&&e.hasOwnProperty("isPrototypeOf")})(e))for(const r in e)e.hasOwnProperty(r)&&(t[r]=ll(e[r]));else t=e}return t}var ul=e=>Array.isArray(e)?e.filter(Boolean):[],cl=e=>void 0===e,B=(e,t,n)=>{var r;return t&&rl(e)?(r=ul(t.split(/[,[\].]+?/)).reduce((e,t)=>tl(e)?e:e[t],e),cl(r)||r===e?cl(e[t])?n:e[t]:r):n},dl=e=>"boolean"==typeof e,fl=e=>/^\w*$/.test(e),ml=e=>ul(e.replace(/["|']|\]/g,"").split(/\.|\[/)),z=(t,e,n)=>{let r=-1;for(var a=fl(e)?[e]:ml(e),i=a.length,o=i-1;++r<i;){var s,l=a[r];let e=n;if(r!==o&&(s=t[l],e=rl(s)||Array.isArray(s)?s:isNaN(+a[r+1])?{}:[]),"__proto__"===l)return;t[l]=e,t=t[l]}return t},pl="blur",hl="focusout",gl="change",yl={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},vl={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},bl=Js.default.createContext(null),El=()=>Js.default.useContext(bl),wl=(t,n,r,a=!0)=>{var e={defaultValues:n._defaultValues};for(const i in t)Object.defineProperty(e,i,{get:()=>{var e=i;return n._proxyFormState[e]!==yl.all&&(n._proxyFormState[e]=!a||yl.all),r&&(r[e]=!0),t[e]}});return e},_l=e=>rl(e)&&!Object.keys(e).length,xl=(e,t,n,r)=>{n(e);const{name:a,...i}=e;return _l(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(e=>t[e]===(!r||yl.all))},Sl=e=>Array.isArray(e)?e:[e],kl=(e,t,n)=>!e||!t||e===t||Sl(e).some(e=>e&&(n?e===t:e.startsWith(t)||t.startsWith(e)));function Il(t){const n=Js.default.useRef(t);n.current=t,Js.default.useEffect(()=>{const e=!t.disabled&&n.current.subject&&n.current.subject.subscribe({next:n.current.next});return()=>{e&&e.unsubscribe()}},[t.disabled])}var Cl=e=>"string"==typeof e,Nl=(e,t,n,r,a)=>Cl(e)?(r&&t.watch.add(e),B(n,e,a)):Array.isArray(e)?e.map(e=>(r&&t.watch.add(e),B(n,e))):(r&&(t.watchAll=!0),n);function Tl(e){var t=El();const{control:n=t.control,name:r,defaultValue:a,disabled:i,exact:o}=e||{},s=Js.default.useRef(r),[l,u]=(s.current=r,Il({disabled:i,subject:n._subjects.values,next:e=>{kl(s.current,e.name,o)&&u(ll(Nl(s.current,n._names,e.values||n._formValues,!1,a)))}}),Js.default.useState(n._getWatch(r,a)));return Js.default.useEffect(()=>n._removeUnmounted()),l}function Rl(e){var t=El();const{name:r,disabled:n,control:a=t.control,shouldUnregister:i}=e,o=ol(a._names.array,r);t=Tl({control:a,name:r,defaultValue:B(a._formValues,r,B(a._defaultValues,r,e.defaultValue)),exact:!0});const s=function(e){var t=El();const{control:n=t.control,disabled:r,name:a,exact:i}=e||{},[o,s]=Js.default.useState(n._formState),l=Js.default.useRef(!0),u=Js.default.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),c=Js.default.useRef(a);return c.current=a,Il({disabled:r,next:e=>l.current&&kl(c.current,e.name,i)&&xl(e,u.current,n._updateFormState)&&s({...n._formState,...e}),subject:n._subjects.state}),Js.default.useEffect(()=>(l.current=!0,u.current.isValid&&n._updateValid(!0),()=>{l.current=!1}),[n]),wl(o,n,u.current,!1)}({control:a,name:r}),l=Js.default.useRef(a.register(r,{...e.rules,value:t,...dl(e.disabled)?{disabled:e.disabled}:{}}));return Js.default.useEffect(()=>{const e=a._options.shouldUnregister||i,t=(e,t)=>{e=B(a._fields,e);e&&e._f&&(e._f.mount=t)};var n;return t(r,!0),e&&(n=ll(B(a._options.defaultValues,r)),z(a._defaultValues,r,n),cl(B(a._formValues,r)))&&z(a._formValues,r,n),()=>{(o?e&&!a._state.action:e)?a.unregister(r):t(r,!1)}},[r,a,o,i]),Js.default.useEffect(()=>{B(a._fields,r)&&a._updateDisabledField({disabled:n,fields:a._fields,name:r,value:B(a._fields,r)._f.value})},[n,r,a]),{field:{name:r,value:t,...dl(n)||s.disabled?{disabled:s.disabled||n}:{},onChange:Js.default.useCallback(e=>l.current.onChange({target:{value:al(e),name:r},type:gl}),[r]),onBlur:Js.default.useCallback(()=>l.current.onBlur({target:{value:B(a._formValues,r),name:r},type:pl}),[r,a]),ref:t=>{var e=B(a._fields,r);e&&t&&(e._f.ref={focus:()=>t.focus(),select:()=>t.select(),setCustomValidity:e=>t.setCustomValidity(e),reportValidity:()=>t.reportValidity()})}},formState:s,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!B(s.errors,r)},isDirty:{enumerable:!0,get:()=>!!B(s.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!B(s.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!B(s.validatingFields,r)},error:{enumerable:!0,get:()=>B(s.errors,r)}})}}var Ml=e=>e.render(Rl(e)),Ol=(e,t,n,r,a)=>t?{...n[e],types:{...n[e]&&n[e].types?n[e].types:{},[r]:a||!0}}:{},Al=e=>({isOnSubmit:!e||e===yl.onSubmit,isOnBlur:e===yl.onBlur,isOnChange:e===yl.onChange,isOnAll:e===yl.all,isOnTouch:e===yl.onTouched}),Dl=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(e=>t.startsWith(e)&&/^\.\w+/.test(t.slice(e.length)))),Pl=(e,t,n,r)=>{for(const i of n||Object.keys(e)){var a=B(e,i);if(a){const{_f:o,...s}=a;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],i)&&!r)break;if(o.ref&&t(o.ref,o.name)&&!r)break;Pl(s,t)}else rl(s)&&Pl(s,t)}}},Ll=e=>"file"===e.type,Fl=e=>"function"==typeof e,Vl=e=>{return!!sl&&e instanceof((e=e?e.ownerDocument:0)&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},jl=e=>Cl(e),Bl=e=>"radio"===e.type,zl=e=>e instanceof RegExp,$l={value:!1,isValid:!1},Hl={value:!0,isValid:!0},Ul=e=>{var t;return Array.isArray(e)?1<e.length?{value:t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value),isValid:!!t.length}:e[0].checked&&!e[0].disabled?!e[0].attributes||cl(e[0].attributes.value)||cl(e[0].value)||""===e[0].value?Hl:{value:e[0].value,isValid:!0}:$l:$l},Zl={isValid:!1,value:null},Kl=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,Zl):Zl;function Wl(e,t,n="validate"){if(jl(e)||Array.isArray(e)&&e.every(jl)||dl(e)&&!e)return{type:n,message:jl(e)?e:"",ref:t}}var Xl=e=>rl(e)&&!zl(e)?e:{value:e,message:""},Yl=async(n,t,r,a,e)=>{const{ref:i,refs:o,required:s,maxLength:l,minLength:u,min:c,max:d,pattern:f,validate:m,name:p,valueAsNumber:h,mount:g,disabled:y}=n._f;var v=B(t,p);if(!g||y)return{};const b=o?o[0]:i;var E=e=>{a&&b.reportValidity&&(b.setCustomValidity(!dl(e)&&e||""),b.reportValidity())};const w={};var n=Bl(i),_=Qs(i),x=n||_,S=(h||Ll(i))&&cl(i.value)&&cl(v)||Vl(i)&&""===i.value||""===v||Array.isArray(v)&&!v.length;const k=Ol.bind(null,p,r,w);var I=(e,t,n,r=vl.maxLength,a=vl.minLength)=>{t=e?t:n;w[p]={type:e?r:a,message:t,ref:i,...k(e?r:a,t)}};if(e?!Array.isArray(v)||!v.length:s&&(!x&&(S||tl(v))||dl(v)&&!v||_&&!Ul(o).isValid||n&&!Kl(o).isValid)){var{value:x,message:_}=jl(s)?{value:!!s,message:s}:Xl(s);if(x&&(w[p]={type:vl.required,message:_,ref:b,...k(vl.required,_)},!r))return E(_),w}if(!(S||tl(c)&&tl(d))){let e,t;n=Xl(d),x=Xl(c);if(tl(v)||isNaN(v)?(_=i.valueAsDate||new Date(v),C=e=>new Date((new Date).toDateString()+" "+e),T="time"==i.type,N="week"==i.type,Cl(n.value)&&v&&(e=T?C(v)>C(n.value):N?v>n.value:_>new Date(n.value)),Cl(x.value)&&v&&(t=T?C(v)<C(x.value):N?v<x.value:_<new Date(x.value))):(T=i.valueAsNumber||v&&+v,tl(n.value)||(e=T>n.value),tl(x.value)||(t=T<x.value)),(e||t)&&(I(!!e,n.message,x.message,vl.max,vl.min),!r))return E(w[p].message),w}if((l||u)&&!S&&(Cl(v)||e&&Array.isArray(v))){var C=Xl(l),N=Xl(u),_=!tl(C.value)&&v.length>+C.value,T=!tl(N.value)&&v.length<+N.value;if((_||T)&&(I(_,C.message,N.message),!r))return E(w[p].message),w}if(f&&!S&&Cl(v)){var{value:n,message:x}=Xl(f);if(zl(n)&&!v.match(n)&&(w[p]={type:vl.pattern,message:x,ref:i,...k(vl.pattern,x)},!r))return E(x),w}if(m)if(Fl(m)){e=Wl(await m(v,t),b);if(e&&(w[p]={...e,...k(vl.validate,e.message)},!r))return E(e.message),w}else if(rl(m)){let e={};for(const M in m){if(!_l(e)&&!r)break;var R=Wl(await m[M](v,t),b,M);R&&(e={...R,...k(M,R.message)},E(R.message),r)&&(w[p]=e)}if(!_l(e)&&(w[p]={ref:b,...e},!r))return w}return E(!0),w};function ql(e,t){var t=Array.isArray(t)?t:fl(t)?[t]:ml(t),n=1===t.length?e:function(e,t){var n=t.slice(0,-1).length;let r=0;for(;r<n;)e=cl(e)?r++:e[t[r++]];return e}(e,t),r=t.length-1,a=t[r];return n&&delete n[a],0!=r&&(rl(n)&&_l(n)||Array.isArray(n)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!cl(e[t]))return;return 1}(n))&&ql(e,t.slice(0,-1)),e}var Gl=()=>{let n=[];return{get observers(){return n},next:e=>{for(const t of n)t.next&&t.next(e)},subscribe:t=>(n.push(t),{unsubscribe:()=>{n=n.filter(e=>e!==t)}}),unsubscribe:()=>{n=[]}}},Jl=e=>tl(e)||!nl(e);function Ql(e,t){if(Jl(e)||Jl(t))return e===t;if(el(e)&&el(t))return e.getTime()===t.getTime();var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const o of n){var a=e[o];if(!r.includes(o))return!1;if("ref"!==o){var i=t[o];if(el(a)&&el(i)||rl(a)&&rl(i)||Array.isArray(a)&&Array.isArray(i)?!Ql(a,i):a!==i)return!1}}return!0}var eu=e=>"select-multiple"===e.type,tu=e=>Vl(e)&&e.isConnected,nu=e=>{for(const t in e)if(Fl(e[t]))return!0;return!1};function ru(e,t={}){var n=Array.isArray(e);if(rl(e)||n)for(const r in e)Array.isArray(e[r])||rl(e[r])&&!nu(e[r])?(t[r]=Array.isArray(e[r])?[]:{},ru(e[r],t[r])):tl(e[r])||(t[r]=!0);return t}var au=(e,t)=>function e(t,n,r){var a=Array.isArray(t);if(rl(t)||a)for(const i in t)Array.isArray(t[i])||rl(t[i])&&!nu(t[i])?cl(n)||Jl(r[i])?r[i]=Array.isArray(t[i])?ru(t[i],[]):{...ru(t[i])}:e(t[i],tl(n)?{}:n[i],r[i]):r[i]=!Ql(t[i],n[i]);return r}(e,t,ru(t)),iu=(e,{valueAsNumber:t,valueAsDate:n,setValueAs:r})=>cl(e)?e:t?""===e?NaN:e&&+e:n&&Cl(e)?new Date(e):r?r(e):e;function ou(e){var t=e.ref;if(e.refs?!e.refs.every(e=>e.disabled):!t.disabled)return Ll(t)?t.files:Bl(t)?Kl(e.refs).value:eu(t)?[...t.selectedOptions].map(({value:e})=>e):Qs(t)?Ul(e.refs).value:iu((cl(t.value)?e.ref:t).value,e)}var su=e=>cl(e)?e:zl(e)?e.source:rl(e)?zl(e.value)?e.value.source:e.value:e;function lu(e,t,n){var r=B(e,n);if(r||fl(n))return{error:r,name:n};for(var a=n.split(".");a.length;){var i=a.join("."),o=B(t,i),s=B(e,i);if(o&&!Array.isArray(o)&&n!==i)return{name:n};if(s&&s.type)return{name:i,error:s};a.pop()}return{name:n}}var uu={mode:yl.onSubmit,reValidateMode:yl.onChange,shouldFocusError:!0};function cu(u={}){let h={...uu,...u},g={submitCount:0,isDirty:!1,isLoading:Fl(h.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:h.errors||{},disabled:h.disabled||!1},y={},c=(rl(h.defaultValues)||rl(h.values))&&ll(h.defaultValues||h.values)||{},v=h.shouldUnregister?{}:ll(c),b={action:!1,mount:!1,watch:!1},E={mount:new Set,unMount:new Set,array:new Set,watch:new Set},w,s=0;const _={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},x={values:Gl(),array:Gl(),state:Gl()},L=Al(h.mode),F=Al(h.reValidateMode),S=h.criteriaMode===yl.all,k=async e=>{(_.isValid||e)&&(e=h.resolver?_l((await N()).errors):await T(y,!0))!==g.isValid&&x.state.next({isValid:e})},I=(e,t)=>{(_.isValidating||_.validatingFields)&&((e||Array.from(E.mount)).forEach(e=>{e&&(t?z(g.validatingFields,e,t):ql(g.validatingFields,e))}),x.state.next({validatingFields:g.validatingFields,isValidating:!_l(g.validatingFields)}))};const o=(e,t,n,r)=>{var a=B(y,e);a&&(n=B(v,e,cl(n)?B(c,e):n),cl(n)||r&&r.defaultChecked||t?z(v,e,t?n:ou(a._f)):l(e,n),b.mount)&&k()},C=(e,t,n,r,a)=>{let i=!1,o=!1;var s={name:e},l=!!(B(y,e)&&B(y,e)._f&&B(y,e)._f.disabled);return n&&!r||(_.isDirty&&(o=g.isDirty,g.isDirty=s.isDirty=d(),i=o!==s.isDirty),r=l||Ql(B(c,e),t),o=!(l||!B(g.dirtyFields,e)),r||l?ql(g.dirtyFields,e):z(g.dirtyFields,e,!0),s.dirtyFields=g.dirtyFields,i=i||_.dirtyFields&&o!==!r),n&&!(t=B(g.touchedFields,e))&&(z(g.touchedFields,e,n),s.touchedFields=g.touchedFields,i=i||_.touchedFields&&t!==n),i&&a&&x.state.next(s),i?s:{}},V=(n,e,r,t)=>{var a,i=B(g.errors,n),o=_.isValid&&dl(e)&&g.isValid!==e;u.delayError&&r?(w=(a=()=>{return e=n,t=r,z(g.errors,e,t),void x.state.next({errors:g.errors});var e,t},e=>{clearTimeout(s),s=setTimeout(a,e)}))(u.delayError):(clearTimeout(s),w=null,r?z(g.errors,n,r):ql(g.errors,n)),(r?Ql(i,r):!i)&&_l(t)&&!o||(i={...t,...o&&dl(e)?{isValid:e}:{},errors:g.errors,name:n},g={...g,...i},x.state.next(i))},N=async e=>{I(e,!0);var t=await h.resolver(v,h.context,((e,t,n,r)=>{var a={};for(const o of e){var i=B(t,o);i&&z(a,o,i._f)}return{criteriaMode:n,names:[...e],fields:a,shouldUseNativeValidation:r}})(e||E.mount,y,h.criteriaMode,h.shouldUseNativeValidation));return I(e),t},T=async(e,t,n={valid:!0})=>{for(const l in e){var r=e[l];if(r){const{_f:u,...c}=r;if(u){var a=E.array.has(u.name),r=(I([l],!0),await Yl(r,v,S,h.shouldUseNativeValidation&&!t,a));if(I([l]),r[u.name]&&(n.valid=!1,t))break;t||(B(r,u.name)?a?(a=g.errors,i=r,o=u.name,s=void 0,s=Sl(B(a,o)),z(s,"root",i[o]),z(a,o,s)):z(g.errors,u.name,r[u.name]):ql(g.errors,u.name))}c&&await T(c,t,n)}}var i,o,s;return n.valid};const d=(e,t)=>(e&&t&&z(v,e,t),!Ql(n(),c)),r=(e,t,n)=>Nl(e,E,{...b.mount?v:cl(t)?c:Cl(e)?{[e]:t}:t},n,t);const l=(e,t,n={})=>{var r=B(y,e);let a=t;r&&(r=r._f)&&(r.disabled||z(v,e,iu(t,r)),a=Vl(r.ref)&&tl(t)?"":t,eu(r.ref)?[...r.ref.options].forEach(e=>e.selected=a.includes(e.value)):r.refs?Qs(r.ref)?1<r.refs.length?r.refs.forEach(t=>(!t.defaultChecked||!t.disabled)&&(t.checked=Array.isArray(a)?!!a.find(e=>e===t.value):a===t.value)):r.refs[0]&&(r.refs[0].checked=!!a):r.refs.forEach(e=>e.checked=e.value===a):Ll(r.ref)?r.ref.value="":(r.ref.value=a,r.ref.type||x.values.next({name:e,values:{...v}}))),(n.shouldDirty||n.shouldTouch)&&C(e,a,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&R(e)},f=(e,t,n)=>{for(const o in t){var r=t[o],a=e+"."+o,i=B(y,a);(!E.array.has(e)&&Jl(r)&&(!i||i._f)||el(r)?l:f)(a,r,n)}},m=(e,t,n={})=>{var r=B(y,e),a=E.array.has(e),t=ll(t);z(v,e,t),a?(x.array.next({name:e,values:{...v}}),(_.isDirty||_.dirtyFields)&&n.shouldDirty&&x.state.next({name:e,dirtyFields:au(c,v),isDirty:d(e,t)})):(!r||r._f||tl(t)?l:f)(e,t,n),Dl(e,E)&&x.state.next({...g}),x.values.next({name:b.mount?e:void 0,values:{...v}})},t=async n=>{b.mount=!0;const r=n.target;let a=r.name,i=!0;const o=B(y,a);var s=e=>{i=Number.isNaN(e)||e===B(v,a,e)};if(o){let e,t;var l,u=r.type?ou(o._f):al(n),c=n.type===pl||n.type===hl,d=!((l=o._f).mount&&(l.required||l.min||l.max||l.maxLength||l.minLength||l.pattern||l.validate)||h.resolver||B(g.errors,a)||o._f.deps)||(l=c,d=B(g.touchedFields,a),f=g.isSubmitted,m=F,!(p=L).isOnAll&&(!f&&p.isOnTouch?!(d||l):(f?m:p).isOnBlur?!l:!(f?m:p).isOnChange||l)),f=Dl(a,E,c),m=(z(v,a,u),c?(o._f.onBlur&&o._f.onBlur(n),w&&w(0)):o._f.onChange&&o._f.onChange(n),C(a,u,c,!1)),p=!_l(m)||f;if(c||x.values.next({name:a,type:n.type,values:{...v}}),d)return _.isValid&&k(),p&&x.state.next({name:a,...f?{}:m});!c&&f&&x.state.next({...g}),h.resolver?(l=(await N([a]))["errors"],s(u),i&&(n=lu(g.errors,y,a),c=lu(l,y,n.name||a),e=c.error,a=c.name,t=_l(l))):(I([a],!0),e=(await Yl(o,v,S,h.shouldUseNativeValidation))[a],I([a]),s(u),i&&(e?t=!1:_.isValid&&(t=await T(y,!0)))),i&&(o._f.deps&&R(o._f.deps),V(a,t,e,m))}},p=(e,t)=>{if(B(g.errors,t)&&e.focus)return e.focus(),1},R=async(e,t={})=>{let n,r;var a=Sl(e);if(h.resolver){const i=await(async e=>{var t=(await N(e))["errors"];if(e)for(const r of e){var n=B(t,r);n?z(g.errors,r,n):ql(g.errors,r)}else g.errors=t;return t})(cl(e)?e:a);n=_l(i),r=e?!a.some(e=>B(i,e)):n}else e?((r=(await Promise.all(a.map(async e=>{var t=B(y,e);return T(t&&t._f?{[e]:t}:t)}))).every(Boolean))||g.isValid)&&k():r=n=await T(y);return x.state.next({...!Cl(e)||_.isValid&&n!==g.isValid?{}:{name:e},...h.resolver||!e?{isValid:n}:{},errors:g.errors}),t.shouldFocus&&!r&&Pl(y,p,e?a:E.mount),r},n=e=>{const t={...b.mount?v:c};return cl(e)?t:Cl(e)?B(t,e):e.map(e=>B(t,e))};var e=(e,t)=>({invalid:!!B((t||g).errors,e),isDirty:!!B((t||g).dirtyFields,e),error:B((t||g).errors,e),isValidating:!!B(g.validatingFields,e),isTouched:!!B((t||g).touchedFields,e)}),a=(e,t,n)=>{var r=(B(y,e,{_f:{}})._f||{}).ref;const{ref:a,message:i,type:o,...s}=B(g.errors,e)||{};z(g.errors,e,{...s,...t,ref:r}),x.state.next({name:e,errors:g.errors,isValid:!1}),n&&n.shouldFocus&&r&&r.focus&&r.focus()};const i=(e,t={})=>{for(const n of e?Sl(e):E.mount)E.mount.delete(n),E.array.delete(n),t.keepValue||(ql(y,n),ql(v,n)),t.keepError||ql(g.errors,n),t.keepDirty||ql(g.dirtyFields,n),t.keepTouched||ql(g.touchedFields,n),t.keepIsValidating||ql(g.validatingFields,n),h.shouldUnregister||t.keepDefaultValue||ql(c,n);x.values.next({values:{...v}}),x.state.next({...g,...t.keepDirty?{isDirty:d()}:{}}),t.keepIsValid||k()},M=({disabled:e,name:t,field:n,fields:r,value:a})=>{(dl(e)&&b.mount||e)&&(e=e?void 0:cl(a)?ou((n||B(r,t))._f):a,z(v,t,e),C(t,e,!1,!1,!0))},O=(r,a={})=>{let i=B(y,r);var e=dl(a.disabled);return z(y,r,{...i||{},_f:{...i&&i._f?i._f:{ref:{name:r}},name:r,mount:!0,...a}}),E.mount.add(r),i?M({field:i,disabled:a.disabled,name:r,value:a.value}):o(r,!0,a.value),{...e?{disabled:a.disabled}:{},...h.progressive?{required:!!a.required,min:su(a.min),max:su(a.max),minLength:su(a.minLength),maxLength:su(a.maxLength),pattern:su(a.pattern)}:{},name:r,onChange:t,onBlur:t,ref:e=>{if(e){O(r,a),i=B(y,r);const n=cl(e.value)&&e.querySelectorAll&&e.querySelectorAll("input,select,textarea")[0]||e;e=n;var e=Bl(e)||Qs(e),t=i._f.refs||[];(e?t.find(e=>e===n):n===i._f.ref)||(z(y,r,{_f:{...i._f,...e?{refs:[...t.filter(tu),n,...Array.isArray(B(c,r))?[{}]:[]],ref:{type:n.type,name:r}}:{ref:n}}}),o(r,!1,void 0,n))}else(i=B(y,r,{}))._f&&(i._f.mount=!1),!h.shouldUnregister&&!a.shouldUnregister||ol(E.array,r)&&b.action||E.unMount.add(r)}}},A=()=>h.shouldFocusError&&Pl(y,p,E.mount);var D=(i,o)=>async e=>{let t=void 0,n=(e&&(e.preventDefault&&e.preventDefault(),e.persist)&&e.persist(),ll(v));var r,a;if(x.state.next({isSubmitting:!0}),h.resolver?({errors:r,values:a}=await N(),g.errors=r,n=a):await T(y),ql(g.errors,"root"),_l(g.errors)){x.state.next({errors:{}});try{await i(n,e)}catch(e){t=e}}else o&&await o({...g.errors},e),A(),setTimeout(A);if(x.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:_l(g.errors)&&!t,submitCount:g.submitCount+1,errors:g.errors}),t)throw t};const P=(e,t={})=>{var n=e?ll(e):c,r=ll(n),a=_l(e),i=a?c:r;if(t.keepDefaultValues||(c=n),!t.keepValues){if(t.keepDirtyValues)for(const s of E.mount)B(g.dirtyFields,s)?z(i,s,B(v,s)):m(s,B(i,s));else{if(sl&&cl(e))for(const l of E.mount){var o=B(y,l);if(o&&o._f){o=Array.isArray(o._f.refs)?o._f.refs[0]:o._f.ref;if(Vl(o)){o=o.closest("form");if(o){o.reset();break}}}}y={}}v=u.shouldUnregister?t.keepDefaultValues?ll(c):{}:ll(i),x.array.next({values:{...i}}),x.values.next({values:{...i}})}E={mount:t.keepDirtyValues?E.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},b.mount=!_.isValid||!!t.keepIsValid||!!t.keepDirtyValues,b.watch=!!u.shouldUnregister,x.state.next({submitCount:t.keepSubmitCount?g.submitCount:0,isDirty:!a&&(t.keepDirty?g.isDirty:!(!t.keepDefaultValues||Ql(e,c))),isSubmitted:!!t.keepIsSubmitted&&g.isSubmitted,dirtyFields:a?{}:t.keepDirtyValues?t.keepDefaultValues&&v?au(c,v):g.dirtyFields:t.keepDefaultValues&&e?au(c,e):t.keepDirty?g.dirtyFields:{},touchedFields:t.keepTouched?g.touchedFields:{},errors:t.keepErrors?g.errors:{},isSubmitSuccessful:!!t.keepIsSubmitSuccessful&&g.isSubmitSuccessful,isSubmitting:!1})},j=(e,t)=>P(Fl(e)?e(v):e,t);return{control:{register:O,unregister:i,getFieldState:e,handleSubmit:D,setError:a,_executeSchema:N,_getWatch:r,_getDirty:d,_updateValid:k,_removeUnmounted:()=>{for(const t of E.unMount){var e=B(y,t);e&&(e._f.refs?e._f.refs.every(e=>!tu(e)):!tu(e._f.ref))&&i(t)}E.unMount=new Set},_updateFieldArray:(e,t=[],n,r,a=!0,i=!0)=>{var o,s;r&&n?(b.action=!0,i&&Array.isArray(B(y,e))&&(o=n(B(y,e),r.argA,r.argB),a)&&z(y,e,o),i&&Array.isArray(B(g.errors,e))&&(o=n(B(g.errors,e),r.argA,r.argB),a&&z(g.errors,e,o),o=g.errors,ul(B(o,s=e)).length||ql(o,s)),_.touchedFields&&i&&Array.isArray(B(g.touchedFields,e))&&(s=n(B(g.touchedFields,e),r.argA,r.argB),a)&&z(g.touchedFields,e,s),_.dirtyFields&&(g.dirtyFields=au(c,v)),x.state.next({name:e,isDirty:d(e,t),dirtyFields:g.dirtyFields,errors:g.errors,isValid:g.isValid})):z(v,e,t)},_updateDisabledField:M,_getFieldArray:e=>ul(B(b.mount?v:c,e,u.shouldUnregister?B(c,e,[]):[])),_reset:P,_resetDefaultValues:()=>Fl(h.defaultValues)&&h.defaultValues().then(e=>{j(e,h.resetOptions),x.state.next({isLoading:!1})}),_updateFormState:e=>{g={...g,...e}},_disableForm:r=>{dl(r)&&(x.state.next({disabled:r}),Pl(y,(e,t)=>{const n=B(y,t);n&&(e.disabled=n._f.disabled||r,Array.isArray(n._f.refs))&&n._f.refs.forEach(e=>{e.disabled=n._f.disabled||r})},0,!1))},_subjects:x,_proxyFormState:_,_setErrors:e=>{g.errors=e,x.state.next({errors:g.errors,isValid:!1})},get _fields(){return y},get _formValues(){return v},get _state(){return b},set _state(e){b=e},get _defaultValues(){return c},get _names(){return E},set _names(e){E=e},get _formState(){return g},set _formState(e){g=e},get _options(){return h},set _options(e){h={...h,...e}}},trigger:R,register:O,handleSubmit:D,watch:(t,n)=>Fl(t)?x.values.subscribe({next:e=>t(r(void 0,n),e)}):r(t,n,!0),setValue:m,getValues:n,reset:j,resetField:(e,t={})=>{B(y,e)&&(cl(t.defaultValue)?m(e,ll(B(c,e))):(m(e,t.defaultValue),z(c,e,ll(t.defaultValue))),t.keepTouched||ql(g.touchedFields,e),t.keepDirty||(ql(g.dirtyFields,e),g.isDirty=t.defaultValue?d(e,ll(B(c,e))):d()),t.keepError||(ql(g.errors,e),_.isValid&&k()),x.state.next({...g}))},clearErrors:e=>{e&&Sl(e).forEach(e=>ql(g.errors,e)),x.state.next({errors:e?g.errors:{}})},unregister:i,setError:a,setFocus:(e,t={})=>{var e=B(y,e),e=e&&e._f;e&&(e=e.refs?e.refs[0]:e.ref).focus&&(e.focus(),t.shouldSelect)&&e.select()},getFieldState:e}}function du(e={}){var t=Js.default.useRef();const n=Js.default.useRef(),[r,a]=Js.default.useState({isDirty:!1,isValidating:!1,isLoading:Fl(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:Fl(e.defaultValues)?void 0:e.defaultValues}),i=(t.current||(t.current={...cu(e),formState:r}),t.current.control);return i._options=e,Il({subject:i._subjects.state,next:e=>{xl(e,i._proxyFormState,i._updateFormState,!0)&&a({...i._formState})}}),Js.default.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),Js.default.useEffect(()=>{var e;i._proxyFormState.isDirty&&(e=i._getDirty())!==r.isDirty&&i._subjects.state.next({isDirty:e})},[i,r.isDirty]),Js.default.useEffect(()=>{e.values&&!Ql(e.values,n.current)?(i._reset(e.values,i._options.resetOptions),n.current=e.values,a(e=>({...e}))):i._resetDefaultValues()},[e.values,i]),Js.default.useEffect(()=>{e.errors&&i._setErrors(e.errors)},[e.errors,i]),Js.default.useEffect(()=>{i._state.mount||(i._updateValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),Js.default.useEffect(()=>{e.shouldUnregister&&i._subjects.values.next({values:i._getWatch()})},[e.shouldUnregister,i]),t.current.formState=wl(r,i),t.current}for(var fu,mu=(e,t,n)=>{e&&"reportValidity"in e&&(n=B(n,t),e.setCustomValidity(n&&n.message||""),e.reportValidity())},pu=(t,e)=>{for(const r in e.fields){var n=e.fields[r];n&&n.ref&&"reportValidity"in n.ref?mu(n.ref,r,t):n.refs&&n.refs.forEach(e=>mu(e,r,t))}},hu=(e,t)=>{t.shouldUseNativeValidation&&pu(e,t);var n={};for(const i in e){var r,a=B(t.fields,i),a=Object.assign(e[i]||{},{ref:a&&a.ref});((e,t)=>e.some(e=>e.startsWith(t+".")))(t.names||Object.keys(e),i)?(r=Object.assign({},B(n,i)),z(r,"root",a),z(n,i,r)):z(n,i,a)}return n},gu=function(t,e){for(var n={};t.length;){var r,a=t[0],i=a.code,o=a.message,s=a.path.join(".");n[s]||("unionErrors"in a?(r=a.unionErrors[0].errors[0],n[s]={message:r.message,type:r.code}):n[s]={message:o,type:i}),"unionErrors"in a&&a.unionErrors.forEach(function(e){return e.errors.forEach(function(e){return t.push(e)})}),e&&(o=(r=n[s].types)&&r[a.code],n[s]=Ol(s,e,n,i,o?[].concat(o,a.message):a.message)),t.shift()}return n},yu=function(a,i,o){return void 0===o&&(o={}),function(n,e,r){try{return Promise.resolve(function(t){try{var e=Promise.resolve(a["sync"===o.mode?"parse":"parseAsync"](n,i)).then(function(e){return r.shouldUseNativeValidation&&pu({},r),{errors:{},values:o.raw?n:e}})}catch(e){return t(e)}return e&&e.then?e.then(void 0,t):e}(function(e){if(Array.isArray(null==e?void 0:e.errors))return{values:{},errors:hu(gu(e.errors,!r.shouldUseNativeValidation&&"all"===r.criteriaMode),r)};throw e}))}catch(e){return Promise.reject(e)}}},vu=t(b()),bu=[],Eu=0;Eu<256;++Eu)bu.push((Eu+256).toString(16).slice(1));var wu=new Uint8Array(16);var _u={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};var xu=function(e,t,n){if(_u.randomUUID&&!t&&!e)return _u.randomUUID();var r=(e=e||{}).random||(e.rng||function(){if(fu=fu||"undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto))return fu(wu);throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported")})();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var a=0;a<16;++a)t[n+a]=r[a];return t}return(bu[r[(e=0)+0]]+bu[r[e+1]]+bu[r[e+2]]+bu[r[e+3]]+"-"+bu[r[e+4]]+bu[r[e+5]]+"-"+bu[r[e+6]]+bu[r[e+7]]+"-"+bu[r[e+8]]+bu[r[e+9]]+"-"+bu[r[e+10]]+bu[r[e+11]]+bu[r[e+12]]+bu[r[e+13]]+bu[r[e+14]]+bu[r[e+15]]).toLowerCase()},a=t(b(),1),n=t(r(),1),Su={},ku=a.default["useDebugValue"],Iu=n.default["useSyncExternalStoreWithSelector"],Cu=!1,Nu=e=>e;var d,Tu,Ru,Mu=e=>{"production"!==(Su.env?Su.env.MODE:void 0)&&"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const r="function"==typeof e?Le(e):e;e=(e,t)=>{return[e,t=Nu,n]=[r,e,t],"production"!==(Su.env?Su.env.MODE:void 0)&&n&&!Cu&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Cu=!0),e=Iu(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n),ku(e),e;var n};return Object.assign(e,r),e},nn=e=>e?Mu(e):Mu,Ou="https://api.spotify.com/v1";function Au(e=!1){let t=y().RequestBuilder.build().withHost(Ou);return t=e?t.withoutMarket():t}function Du(e){var t=e._base62Id;if(t)return t;if(e.id)return e.id;throw new Error("URI does not have an ID")}(Tu=d=d||{}).assertEqual=e=>e,Tu.assertIs=function(e){},Tu.assertNever=function(e){throw new Error},Tu.arrayToEnum=e=>{var t={};for(const n of e)t[n]=n;return t},Tu.getValidEnumValues=t=>{var e={};for(const n of Tu.objectKeys(t).filter(e=>"number"!=typeof t[t[e]]))e[n]=t[n];return Tu.objectValues(e)},Tu.objectValues=t=>Tu.objectKeys(t).map(function(e){return t[e]}),Tu.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{var t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t},Tu.find=(e,t)=>{for(const n of e)if(t(n))return n},Tu.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,Tu.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},Tu.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(Ru||(Ru={})).mergeShapes=(e,t)=>({...e,...t});var g=d.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Pu=e=>{switch(typeof e){case"undefined":return g.undefined;case"string":return g.string;case"number":return isNaN(e)?g.nan:g.number;case"boolean":return g.boolean;case"function":return g.function;case"bigint":return g.bigint;case"symbol":return g.symbol;case"object":return Array.isArray(e)?g.array:null===e?g.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?g.promise:"undefined"!=typeof Map&&e instanceof Map?g.map:"undefined"!=typeof Set&&e instanceof Set?g.set:"undefined"!=typeof Date&&e instanceof Date?g.date:g.object;default:return g.unknown}},E=d.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Lu=class extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};var t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const a=e||function(e){return e.message},i={_errors:[]},t=e=>{for(const r of e.issues)if("invalid_union"===r.code)r.unionErrors.map(t);else if("invalid_return_type"===r.code)t(r.returnTypeError);else if("invalid_arguments"===r.code)t(r.argumentsError);else if(0===r.path.length)i._errors.push(a(r));else{let e=i,t=0;for(;t<r.path.length;){var n=r.path[t];t===r.path.length-1?(e[n]=e[n]||{_errors:[]},e[n]._errors.push(a(r))):e[n]=e[n]||{_errors:[]},e=e[n],t++}}};return t(this),i}static assert(e){if(!(e instanceof Lu))throw new Error("Not a ZodError: "+e)}toString(){return this.message}get message(){return JSON.stringify(this.issues,d.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){var t={},n=[];for(const r of this.issues)(0<r.path.length?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]]):n).push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}},Fu=(Lu.create=e=>{return new Lu(e)},(e,t)=>{let n;switch(e.code){case E.invalid_type:n=e.received===g.undefined?"Required":`Expected ${e.expected}, received `+e.received;break;case E.invalid_literal:n="Invalid literal value, expected "+JSON.stringify(e.expected,d.jsonStringifyReplacer);break;case E.unrecognized_keys:n="Unrecognized key(s) in object: "+d.joinValues(e.keys,", ");break;case E.invalid_union:n="Invalid input";break;case E.invalid_union_discriminator:n="Invalid discriminator value. Expected "+d.joinValues(e.options);break;case E.invalid_enum_value:n=`Invalid enum value. Expected ${d.joinValues(e.options)}, received '${e.received}'`;break;case E.invalid_arguments:n="Invalid function arguments";break;case E.invalid_return_type:n="Invalid function return type";break;case E.invalid_date:n="Invalid date";break;case E.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(n=n+" at one or more positions greater than or equal to "+e.validation.position)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:d.assertNever(e.validation):n="regex"!==e.validation?"Invalid "+e.validation:"Invalid";break;case E.too_small:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?"Number must be "+(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ")+e.minimum:"date"===e.type?"Date must be "+(e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than ")+new Date(Number(e.minimum)):"Invalid input";break;case E.too_big:n="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} `+e.maximum:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} `+e.maximum:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} `+new Date(Number(e.maximum)):"Invalid input";break;case E.custom:n="Invalid input";break;case E.invalid_intersection_types:n="Intersection results could not be merged";break;case E.not_multiple_of:n="Number must be a multiple of "+e.multipleOf;break;case E.not_finite:n="Number must be finite";break;default:n=t.defaultError,d.assertNever(e)}return{message:n}}),Vu=Fu;function ju(){return Vu}var Bu=e=>{var{data:t,path:e,errorMaps:n,issueData:r}=e,e=[...e,...r.path||[]],a={...r,path:e};if(void 0!==r.message)return{...r,path:e,message:r.message};let i="";for(const o of n.filter(e=>!!e).slice().reverse())i=o(a,{data:t,defaultError:i}).message;return{...r,path:e,message:i}};function w(e,t){var n=Vu,t=Bu({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===Fu?void 0:Fu].filter(e=>!!e)});e.common.issues.push(t)}var s,zu=class{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){var n=[];for(const r of t){if("aborted"===r.status)return x;"dirty"===r.status&&e.dirty(),n.push(r.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){var n=[];for(const i of t){var r=await i.key,a=await i.value;n.push({key:r,value:a})}return zu.mergeObjectSync(e,n)}static mergeObjectSync(e,t){var n={};for(const i of t){var{key:r,value:a}=i;if("aborted"===r.status)return x;if("aborted"===a.status)return x;"dirty"===r.status&&e.dirty(),"dirty"===a.status&&e.dirty(),"__proto__"===r.value||void 0===a.value&&!i.alwaysSet||(n[r.value]=a.value)}return{status:e.value,value:n}}},x=Object.freeze({status:"aborted"}),$u=e=>({status:"dirty",value:e}),Hu=e=>({status:"valid",value:e}),Uu=e=>"aborted"===e.status,Zu=e=>"dirty"===e.status,Ku=e=>"valid"===e.status,Wu=e=>"undefined"!=typeof Promise&&e instanceof Promise;function Xu(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e===t&&r:t.has(e))return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e);throw new TypeError("Cannot read private member from an object whose class did not declare it")}function Yu(e,t,n,r,a){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");"a"===r?a.call(e,n):a?a.value=n:t.set(e,n)}(o=s=s||{}).errToObj=e=>"string"==typeof e?{message:e}:e||{},o.toString=e=>"string"==typeof e?e:null==e?void 0:e.message;var qu=class{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Gu=(t,e)=>{if(Ku(e))return{success:!0,data:e.value};if(t.common.issues.length)return{success:!1,get error(){var e;return this._error||(e=new Lu(t.common.issues),this._error=e),this._error}};throw new Error("Validation failed but no issues detected.")};function l(a){if(!a)return{};const{errorMap:e,invalid_type_error:i,required_error:o,description:t}=a;if(e&&(i||o))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:t}:{errorMap:(e,t)=>{var n,r=a["message"];return"invalid_enum_value"===e.code?{message:null!=r?r:t.defaultError}:void 0===t.data?{message:null!=(n=null!=r?r:o)?n:t.defaultError}:"invalid_type"!==e.code?{message:t.defaultError}:{message:null!=(n=null!=r?r:i)?n:t.defaultError}},description:t}}var Ju,u=class{get description(){return this._def.description}_getType(e){return Pu(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Pu(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new zu,ctx:{common:e.parent.common,data:e.data,parsedType:Pu(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){e=this._parse(e);if(Wu(e))throw new Error("Synchronous parse encountered promise.");return e}_parseAsync(e){e=this._parse(e);return Promise.resolve(e)}parse(e,t){e=this.safeParse(e,t);if(e.success)return e.data;throw e.error}safeParse(e,t){var n={common:{issues:[],async:null!=(n=null==t?void 0:t.async)&&n,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Pu(e)},t=this._parseSync({data:e,path:n.path,parent:n});return Gu(n,t)}"~validate"(e){const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Pu(e)};if(!this["~standard"].async)try{var n=this._parseSync({data:e,path:[],parent:t});return Ku(n)?{value:n.value}:{issues:t.common.issues}}catch(e){null!=(n=null==(n=null==e?void 0:e.message)?void 0:n.toLowerCase())&&n.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>Ku(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){e=await this.safeParseAsync(e,t);if(e.success)return e.data;throw e.error}async safeParseAsync(e,t){t={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Pu(e)},e=this._parse({data:e,path:t.path,parent:t}),e=await(Wu(e)?e:Promise.resolve(e));return Gu(t,e)}refine(a,i){return this._refinement((t,n)=>{var e=a(t);const r=()=>{return n.addIssue({code:E.custom,...(e=t,"string"==typeof i||void 0===i?{message:i}:"function"==typeof i?i(e):i)});var e};return"undefined"!=typeof Promise&&e instanceof Promise?e.then(e=>!!e||(r(),!1)):!!e||(r(),!1)})}refinement(n,r){return this._refinement((e,t)=>!!n(e)||(t.addIssue("function"==typeof r?r(e,t):r),!1))}_refinement(e){return new td({schema:this,typeName:c.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return nd.create(this,this._def)}nullable(){return rd.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Dc.create(this)}promise(){return ed.create(this,this._def)}or(e){return Fc.create([this,e],this._def)}and(e){return zc.create(this,e,this._def)}transform(e){return new td({...l(this._def),schema:this,typeName:c.ZodEffects,effect:{type:"transform",transform:e}})}default(e){var t="function"==typeof e?e:()=>e;return new ad({...l(this._def),innerType:this,defaultValue:t,typeName:c.ZodDefault})}brand(){return new sd({typeName:c.ZodBranded,type:this,...l(this._def)})}catch(e){var t="function"==typeof e?e:()=>e;return new id({...l(this._def),innerType:this,catchValue:t,typeName:c.ZodCatch})}describe(e){return new this.constructor({...this._def,description:e})}pipe(e){return ld.create(this,e)}readonly(){return ud.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},Qu=/^c[^\s-]{8,}$/i,ec=/^[0-9a-z]+$/,tc=/^[0-9A-HJKMNP-TV-Z]{26}$/i,nc=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,rc=/^[a-z0-9_-]{21}$/i,ac=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,ic=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,oc=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,sc=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,lc=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,uc=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,cc=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,dc=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,fc=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,mc="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",pc=new RegExp(`^${mc}$`);function hc(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t+="(\\.\\d+)?"),t}function gc(e){return new RegExp(`^${hc(e)}$`)}function yc(e){var t=mc+"T"+hc(e),n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t+=`(${n.join("|")})`,new RegExp(`^${t}$`)}function vc(e,t){return("v4"===t||!t)&&sc.test(e)||!("v6"!==t&&t||!uc.test(e))}function bc(e,t){if(ac.test(e))try{var[n]=e.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(r));return"object"==typeof a&&null!==a?!(!a.typ||!a.alg||t&&a.alg!==t):void 0}catch(e){}}function Ec(e,t){return("v4"===t||!t)&&lc.test(e)||!("v6"!==t&&t||!cc.test(e))}var wc=class extends u{_parse(t){var e;if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==g.string)return w(e=this._getOrReturnCtx(t),{code:E.invalid_type,expected:g.string,received:e.parsedType}),x;var n=new zu;let r=void 0;for(const o of this._def.checks)if("min"===o.kind)t.data.length<o.value&&(w(r=this._getOrReturnCtx(t,r),{code:E.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if("max"===o.kind)t.data.length>o.value&&(w(r=this._getOrReturnCtx(t,r),{code:E.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),n.dirty());else if("length"===o.kind){var a=t.data.length>o.value,i=t.data.length<o.value;(a||i)&&(r=this._getOrReturnCtx(t,r),a?w(r,{code:E.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):i&&w(r,{code:E.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),n.dirty())}else if("email"===o.kind)oc.test(t.data)||(w(r=this._getOrReturnCtx(t,r),{validation:"email",code:E.invalid_string,message:o.message}),n.dirty());else if("emoji"===o.kind)(Ju=Ju||new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")).test(t.data)||(w(r=this._getOrReturnCtx(t,r),{validation:"emoji",code:E.invalid_string,message:o.message}),n.dirty());else if("uuid"===o.kind)nc.test(t.data)||(w(r=this._getOrReturnCtx(t,r),{validation:"uuid",code:E.invalid_string,message:o.message}),n.dirty());else if("nanoid"===o.kind)rc.test(t.data)||(w(r=this._getOrReturnCtx(t,r),{validation:"nanoid",code:E.invalid_string,message:o.message}),n.dirty());else if("cuid"===o.kind)Qu.test(t.data)||(w(r=this._getOrReturnCtx(t,r),{validation:"cuid",code:E.invalid_string,message:o.message}),n.dirty());else if("cuid2"===o.kind)ec.test(t.data)||(w(r=this._getOrReturnCtx(t,r),{validation:"cuid2",code:E.invalid_string,message:o.message}),n.dirty());else if("ulid"===o.kind)tc.test(t.data)||(w(r=this._getOrReturnCtx(t,r),{validation:"ulid",code:E.invalid_string,message:o.message}),n.dirty());else if("url"===o.kind)try{new URL(t.data)}catch(e){w(r=this._getOrReturnCtx(t,r),{validation:"url",code:E.invalid_string,message:o.message}),n.dirty()}else"regex"===o.kind?(o.regex.lastIndex=0,o.regex.test(t.data)||(w(r=this._getOrReturnCtx(t,r),{validation:"regex",code:E.invalid_string,message:o.message}),n.dirty())):"trim"===o.kind?t.data=t.data.trim():"includes"===o.kind?t.data.includes(o.value,o.position)||(w(r=this._getOrReturnCtx(t,r),{code:E.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),n.dirty()):"toLowerCase"===o.kind?t.data=t.data.toLowerCase():"toUpperCase"===o.kind?t.data=t.data.toUpperCase():"startsWith"===o.kind?t.data.startsWith(o.value)||(w(r=this._getOrReturnCtx(t,r),{code:E.invalid_string,validation:{startsWith:o.value},message:o.message}),n.dirty()):"endsWith"===o.kind?t.data.endsWith(o.value)||(w(r=this._getOrReturnCtx(t,r),{code:E.invalid_string,validation:{endsWith:o.value},message:o.message}),n.dirty()):"datetime"===o.kind?yc(o).test(t.data)||(w(r=this._getOrReturnCtx(t,r),{code:E.invalid_string,validation:"datetime",message:o.message}),n.dirty()):"date"===o.kind?pc.test(t.data)||(w(r=this._getOrReturnCtx(t,r),{code:E.invalid_string,validation:"date",message:o.message}),n.dirty()):"time"===o.kind?gc(o).test(t.data)||(w(r=this._getOrReturnCtx(t,r),{code:E.invalid_string,validation:"time",message:o.message}),n.dirty()):"duration"===o.kind?ic.test(t.data)||(w(r=this._getOrReturnCtx(t,r),{validation:"duration",code:E.invalid_string,message:o.message}),n.dirty()):"ip"===o.kind?vc(t.data,o.version)||(w(r=this._getOrReturnCtx(t,r),{validation:"ip",code:E.invalid_string,message:o.message}),n.dirty()):"jwt"===o.kind?bc(t.data,o.alg)||(w(r=this._getOrReturnCtx(t,r),{validation:"jwt",code:E.invalid_string,message:o.message}),n.dirty()):"cidr"===o.kind?Ec(t.data,o.version)||(w(r=this._getOrReturnCtx(t,r),{validation:"cidr",code:E.invalid_string,message:o.message}),n.dirty()):"base64"===o.kind?dc.test(t.data)||(w(r=this._getOrReturnCtx(t,r),{validation:"base64",code:E.invalid_string,message:o.message}),n.dirty()):"base64url"===o.kind?fc.test(t.data)||(w(r=this._getOrReturnCtx(t,r),{validation:"base64url",code:E.invalid_string,message:o.message}),n.dirty()):d.assertNever(o);return{status:n.value,value:t.data}}_regex(t,e,n){return this.refinement(e=>t.test(e),{validation:e,code:E.invalid_string,...s.errToObj(n)})}_addCheck(e){return new wc({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...s.errToObj(e)})}url(e){return this._addCheck({kind:"url",...s.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...s.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...s.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...s.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...s.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...s.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...s.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...s.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...s.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...s.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...s.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...s.errToObj(e)})}datetime(e){var t;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!=(t=null==e?void 0:e.offset)&&t,local:null!=(t=null==e?void 0:e.local)&&t,...s.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...s.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...s.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...s.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...s.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...s.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...s.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...s.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...s.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...s.errToObj(t)})}nonempty(e){return this.min(1,s.errToObj(e))}trim(){return new wc({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new wc({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new wc({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}};function _c(e,t){var n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,n=r<n?n:r;return parseInt(e.toFixed(n).replace(".",""))%parseInt(t.toFixed(n).replace(".",""))/Math.pow(10,n)}wc.create=e=>{var t;return new wc({checks:[],typeName:c.ZodString,coerce:null!=(t=null==e?void 0:e.coerce)&&t,...l(e)})};var xc=class extends u{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){var t;if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==g.number)return w(t=this._getOrReturnCtx(e),{code:E.invalid_type,expected:g.number,received:t.parsedType}),x;let n=void 0;var r=new zu;for(const a of this._def.checks)"int"===a.kind?d.isInteger(e.data)||(w(n=this._getOrReturnCtx(e,n),{code:E.invalid_type,expected:"integer",received:"float",message:a.message}),r.dirty()):"min"===a.kind?(a.inclusive?e.data<a.value:e.data<=a.value)&&(w(n=this._getOrReturnCtx(e,n),{code:E.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):"max"===a.kind?(a.inclusive?e.data>a.value:e.data>=a.value)&&(w(n=this._getOrReturnCtx(e,n),{code:E.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),r.dirty()):"multipleOf"===a.kind?0!==_c(e.data,a.value)&&(w(n=this._getOrReturnCtx(e,n),{code:E.not_multiple_of,multipleOf:a.value,message:a.message}),r.dirty()):"finite"===a.kind?Number.isFinite(e.data)||(w(n=this._getOrReturnCtx(e,n),{code:E.not_finite,message:a.message}),r.dirty()):d.assertNever(a);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,s.toString(t))}gt(e,t){return this.setLimit("min",e,!1,s.toString(t))}lte(e,t){return this.setLimit("max",e,!0,s.toString(t))}lt(e,t){return this.setLimit("max",e,!1,s.toString(t))}setLimit(e,t,n,r){return new xc({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:s.toString(r)}]})}_addCheck(e){return new xc({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:s.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:s.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:s.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:s.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:s.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:s.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:s.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:s.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:s.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&d.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if("finite"===n.kind||"int"===n.kind||"multipleOf"===n.kind)return!0;"min"===n.kind?(null===t||n.value>t)&&(t=n.value):"max"===n.kind&&(null===e||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}},Sc=(xc.create=e=>new xc({checks:[],typeName:c.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...l(e)}),class extends u{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch(e){return this._getInvalidInput(t)}if(this._getType(t)!==g.bigint)return this._getInvalidInput(t);let e=void 0;var n=new zu;for(const r of this._def.checks)"min"===r.kind?(r.inclusive?t.data<r.value:t.data<=r.value)&&(w(e=this._getOrReturnCtx(t,e),{code:E.too_small,type:"bigint",minimum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty()):"max"===r.kind?(r.inclusive?t.data>r.value:t.data>=r.value)&&(w(e=this._getOrReturnCtx(t,e),{code:E.too_big,type:"bigint",maximum:r.value,inclusive:r.inclusive,message:r.message}),n.dirty()):"multipleOf"===r.kind?t.data%r.value!==BigInt(0)&&(w(e=this._getOrReturnCtx(t,e),{code:E.not_multiple_of,multipleOf:r.value,message:r.message}),n.dirty()):d.assertNever(r);return{status:n.value,value:t.data}}_getInvalidInput(e){e=this._getOrReturnCtx(e);return w(e,{code:E.invalid_type,expected:g.bigint,received:e.parsedType}),x}gte(e,t){return this.setLimit("min",e,!0,s.toString(t))}gt(e,t){return this.setLimit("min",e,!1,s.toString(t))}lte(e,t){return this.setLimit("max",e,!0,s.toString(t))}lt(e,t){return this.setLimit("max",e,!1,s.toString(t))}setLimit(e,t,n,r){return new Sc({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:s.toString(r)}]})}_addCheck(e){return new Sc({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:s.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:s.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:s.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:s.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:s.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}),kc=(Sc.create=e=>{var t;return new Sc({checks:[],typeName:c.ZodBigInt,coerce:null!=(t=null==e?void 0:e.coerce)&&t,...l(e)})},class extends u{_parse(e){var t;return this._def.coerce&&(e.data=Boolean(e.data)),this._getType(e)!==g.boolean?(w(t=this._getOrReturnCtx(e),{code:E.invalid_type,expected:g.boolean,received:t.parsedType}),x):Hu(e.data)}}),Ic=(kc.create=e=>new kc({typeName:c.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...l(e)}),class extends u{_parse(e){var t;if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==g.date)return w(t=this._getOrReturnCtx(e),{code:E.invalid_type,expected:g.date,received:t.parsedType}),x;if(isNaN(e.data.getTime()))return w(this._getOrReturnCtx(e),{code:E.invalid_date}),x;var n=new zu;let r=void 0;for(const a of this._def.checks)"min"===a.kind?e.data.getTime()<a.value&&(w(r=this._getOrReturnCtx(e,r),{code:E.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):"max"===a.kind?e.data.getTime()>a.value&&(w(r=this._getOrReturnCtx(e,r),{code:E.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):d.assertNever(a);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ic({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:s.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:s.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}),Cc=(Ic.create=e=>new Ic({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:c.ZodDate,...l(e)}),class extends u{_parse(e){var t;return this._getType(e)!==g.symbol?(w(t=this._getOrReturnCtx(e),{code:E.invalid_type,expected:g.symbol,received:t.parsedType}),x):Hu(e.data)}}),Nc=(Cc.create=e=>new Cc({typeName:c.ZodSymbol,...l(e)}),class extends u{_parse(e){var t;return this._getType(e)!==g.undefined?(w(t=this._getOrReturnCtx(e),{code:E.invalid_type,expected:g.undefined,received:t.parsedType}),x):Hu(e.data)}}),Tc=(Nc.create=e=>new Nc({typeName:c.ZodUndefined,...l(e)}),class extends u{_parse(e){var t;return this._getType(e)!==g.null?(w(t=this._getOrReturnCtx(e),{code:E.invalid_type,expected:g.null,received:t.parsedType}),x):Hu(e.data)}}),Rc=(Tc.create=e=>new Tc({typeName:c.ZodNull,...l(e)}),class extends u{constructor(){super(...arguments),this._any=!0}_parse(e){return Hu(e.data)}}),Mc=(Rc.create=e=>new Rc({typeName:c.ZodAny,...l(e)}),class extends u{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Hu(e.data)}}),Oc=(Mc.create=e=>new Mc({typeName:c.ZodUnknown,...l(e)}),class extends u{_parse(e){e=this._getOrReturnCtx(e);return w(e,{code:E.invalid_type,expected:g.never,received:e.parsedType}),x}}),Ac=(Oc.create=e=>new Oc({typeName:c.ZodNever,...l(e)}),class extends u{_parse(e){var t;return this._getType(e)!==g.undefined?(w(t=this._getOrReturnCtx(e),{code:E.invalid_type,expected:g.void,received:t.parsedType}),x):Hu(e.data)}}),Dc=(Ac.create=e=>new Ac({typeName:c.ZodVoid,...l(e)}),class extends u{_parse(e){const{ctx:n,status:t}=this._processInputParams(e),r=this._def;var a;return n.parsedType!==g.array?(w(n,{code:E.invalid_type,expected:g.array,received:n.parsedType}),x):(null!==r.exactLength&&(e=n.data.length>r.exactLength.value,a=n.data.length<r.exactLength.value,e||a)&&(w(n,{code:e?E.too_big:E.too_small,minimum:a?r.exactLength.value:void 0,maximum:e?r.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:r.exactLength.message}),t.dirty()),null!==r.minLength&&n.data.length<r.minLength.value&&(w(n,{code:E.too_small,minimum:r.minLength.value,type:"array",inclusive:!0,exact:!1,message:r.minLength.message}),t.dirty()),null!==r.maxLength&&n.data.length>r.maxLength.value&&(w(n,{code:E.too_big,maximum:r.maxLength.value,type:"array",inclusive:!0,exact:!1,message:r.maxLength.message}),t.dirty()),n.common.async?Promise.all([...n.data].map((e,t)=>r.type._parseAsync(new qu(n,e,n.path,t)))).then(e=>zu.mergeArray(t,e)):(a=[...n.data].map((e,t)=>r.type._parseSync(new qu(n,e,n.path,t))),zu.mergeArray(t,a)))}get element(){return this._def.type}min(e,t){return new Dc({...this._def,minLength:{value:e,message:s.toString(t)}})}max(e,t){return new Dc({...this._def,maxLength:{value:e,message:s.toString(t)}})}length(e,t){return new Dc({...this._def,exactLength:{value:e,message:s.toString(t)}})}nonempty(e){return this.min(1,e)}});function Pc(e){if(e instanceof Lc){const n={};for(const r in e.shape){var t=e.shape[r];n[r]=nd.create(Pc(t))}return new Lc({...e._def,shape:()=>n})}return e instanceof Dc?new Dc({...e._def,type:Pc(e.element)}):e instanceof nd?nd.create(Pc(e.unwrap())):e instanceof rd?rd.create(Pc(e.unwrap())):e instanceof $c?$c.create(e.items.map(e=>Pc(e))):e}Dc.create=(e,t)=>new Dc({type:e,minLength:null,maxLength:null,exactLength:null,typeName:c.ZodArray,...l(t)});var Lc=class extends u{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){var e,t;return null!==this._cached?this._cached:(e=this._def.shape(),t=d.objectKeys(e),this._cached={shape:e,keys:t})}_parse(e){if(this._getType(e)!==g.object)return w(u=this._getOrReturnCtx(e),{code:E.invalid_type,expected:g.object,received:u.parsedType}),x;const{status:t,ctx:n}=this._processInputParams(e);var{shape:r,keys:a}=this._getCached(),i=[];if(!(this._def.catchall instanceof Oc&&"strip"===this._def.unknownKeys))for(const f in n.data)a.includes(f)||i.push(f);const o=[];for(const m of a){var s=r[m],l=n.data[m];o.push({key:{status:"valid",value:m},value:s._parse(new qu(n,l,n.path,m)),alwaysSet:m in n.data})}if(this._def.catchall instanceof Oc){var u=this._def.unknownKeys;if("passthrough"===u)for(const p of i)o.push({key:{status:"valid",value:p},value:{status:"valid",value:n.data[p]}});else if("strict"===u)0<i.length&&(w(n,{code:E.unrecognized_keys,keys:i}),t.dirty());else if("strip"!==u)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{var c=this._def.catchall;for(const h of i){var d=n.data[h];o.push({key:{status:"valid",value:h},value:c._parse(new qu(n,d,n.path,h)),alwaysSet:h in n.data})}}return n.common.async?Promise.resolve().then(async()=>{var e=[];for(const r of o){var t=await r.key,n=await r.value;e.push({key:t,value:n,alwaysSet:r.alwaysSet})}return e}).then(e=>zu.mergeObjectSync(t,e)):zu.mergeObjectSync(t,o)}get shape(){return this._def.shape()}strict(a){return s.errToObj,new Lc({...this._def,unknownKeys:"strict",...void 0!==a?{errorMap:(e,t)=>{var n,r=null!=(n=null==(n=(r=this._def).errorMap)?void 0:n.call(r,e,t).message)?n:t.defaultError;return"unrecognized_keys"===e.code?{message:null!=(n=s.errToObj(a).message)?n:r}:{message:r}}}:{}})}strip(){return new Lc({...this._def,unknownKeys:"strip"})}passthrough(){return new Lc({...this._def,unknownKeys:"passthrough"})}extend(e){return new Lc({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Lc({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:c.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new Lc({...this._def,catchall:e})}pick(t){const n={};return d.objectKeys(t).forEach(e=>{t[e]&&this.shape[e]&&(n[e]=this.shape[e])}),new Lc({...this._def,shape:()=>n})}omit(t){const n={};return d.objectKeys(this.shape).forEach(e=>{t[e]||(n[e]=this.shape[e])}),new Lc({...this._def,shape:()=>n})}deepPartial(){return Pc(this)}partial(n){const r={};return d.objectKeys(this.shape).forEach(e=>{var t=this.shape[e];n&&!n[e]?r[e]=t:r[e]=t.optional()}),new Lc({...this._def,shape:()=>r})}required(e){const n={};return d.objectKeys(this.shape).forEach(t=>{if(e&&!e[t])n[t]=this.shape[t];else{let e=this.shape[t];for(;e instanceof nd;)e=e._def.innerType;n[t]=e}}),new Lc({...this._def,shape:()=>n})}keyof(){return Yc(d.objectKeys(this.shape))}},Fc=(Lc.create=(e,t)=>new Lc({shape:()=>e,unknownKeys:"strip",catchall:Oc.create(),typeName:c.ZodObject,...l(t)}),Lc.strictCreate=(e,t)=>new Lc({shape:()=>e,unknownKeys:"strict",catchall:Oc.create(),typeName:c.ZodObject,...l(t)}),Lc.lazycreate=(e,t)=>new Lc({shape:e,unknownKeys:"strip",catchall:Oc.create(),typeName:c.ZodObject,...l(t)}),class extends u{_parse(t){const r=this._processInputParams(t)["ctx"];t=this._def.options;if(r.common.async)return Promise.all(t.map(async e=>{var t={...r,common:{...r.common,issues:[]},parent:null};return{result:await e._parseAsync({data:r.data,path:r.path,parent:t}),ctx:t}})).then(function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const n of e)if("dirty"===n.result.status)return r.common.issues.push(...n.ctx.common.issues),n.result;return e=e.map(e=>new Lu(e.ctx.common.issues)),w(r,{code:E.invalid_union,unionErrors:e}),x});{let e=void 0;var n=[];for(const o of t){var a={...r,common:{...r.common,issues:[]},parent:null},i=o._parseSync({data:r.data,path:r.path,parent:a});if("valid"===i.status)return i;"dirty"===i.status&&(e=e||{result:i,ctx:a}),a.common.issues.length&&n.push(a.common.issues)}return e?(r.common.issues.push(...e.ctx.common.issues),e.result):(t=n.map(e=>new Lu(e)),w(r,{code:E.invalid_union,unionErrors:t}),x)}}get options(){return this._def.options}}),Vc=(Fc.create=(e,t)=>new Fc({options:e,typeName:c.ZodUnion,...l(t)}),e=>e instanceof Wc?Vc(e.schema):e instanceof td?Vc(e.innerType()):e instanceof Xc?[e.value]:e instanceof qc?e.options:e instanceof Jc?d.objectValues(e.enum):e instanceof ad?Vc(e._def.innerType):e instanceof Nc?[void 0]:e instanceof Tc?[null]:e instanceof nd?[void 0,...Vc(e.unwrap())]:e instanceof rd?[null,...Vc(e.unwrap())]:e instanceof sd||e instanceof ud?Vc(e.unwrap()):e instanceof id?Vc(e._def.innerType):[]),jc=class extends u{_parse(e){var t,n,e=this._processInputParams(e)["ctx"];return e.parsedType!==g.object?(w(e,{code:E.invalid_type,expected:g.object,received:e.parsedType}),x):(t=this.discriminator,n=e.data[t],(n=this.optionsMap.get(n))?e.common.async?n._parseAsync({data:e.data,path:e.path,parent:e}):n._parseSync({data:e.data,path:e.path,parent:e}):(w(e,{code:E.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[t]}),x))}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,n){var r=new Map;for(const i of t){var a=Vc(i.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const o of a){if(r.has(o))throw new Error(`Discriminator property ${String(e)} has duplicate value `+String(o));r.set(o,i)}}return new jc({typeName:c.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:r,...l(n)})}};function Bc(t,n){var e=Pu(t),r=Pu(n);if(t===n)return{valid:!0,data:t};if(e===g.object&&r===g.object){const u=d.objectKeys(n);var a=d.objectKeys(t).filter(e=>-1!==u.indexOf(e)),i={...t,...n};for(const c of a){var o=Bc(t[c],n[c]);if(!o.valid)return{valid:!1};i[c]=o.data}return{valid:!0,data:i}}if(e!==g.array||r!==g.array)return e===g.date&&r===g.date&&+t==+n?{valid:!0,data:t}:{valid:!1};if(t.length!==n.length)return{valid:!1};var s=[];for(let e=0;e<t.length;e++){var l=Bc(t[e],n[e]);if(!l.valid)return{valid:!1};s.push(l.data)}return{valid:!0,data:s}}var zc=class extends u{_parse(e){const{status:r,ctx:a}=this._processInputParams(e),n=(e,t)=>{var n;return Uu(e)||Uu(t)?x:(n=Bc(e.value,t.value)).valid?((Zu(e)||Zu(t))&&r.dirty(),{status:r.value,value:n.data}):(w(a,{code:E.invalid_intersection_types}),x)};return a.common.async?Promise.all([this._def.left._parseAsync({data:a.data,path:a.path,parent:a}),this._def.right._parseAsync({data:a.data,path:a.path,parent:a})]).then(([e,t])=>n(e,t)):n(this._def.left._parseSync({data:a.data,path:a.path,parent:a}),this._def.right._parseSync({data:a.data,path:a.path,parent:a}))}},$c=(zc.create=(e,t,n)=>new zc({left:e,right:t,typeName:c.ZodIntersection,...l(n)}),class extends u{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);return r.parsedType!==g.array?(w(r,{code:E.invalid_type,expected:g.array,received:r.parsedType}),x):r.data.length<this._def.items.length?(w(r,{code:E.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),x):(!this._def.rest&&r.data.length>this._def.items.length&&(w(r,{code:E.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty()),e=[...r.data].map((e,t)=>{var n=this._def.items[t]||this._def.rest;return n?n._parse(new qu(r,e,r.path,t)):null}).filter(e=>!!e),r.common.async?Promise.all(e).then(e=>zu.mergeArray(t,e)):zu.mergeArray(t,e))}get items(){return this._def.items}rest(e){return new $c({...this._def,rest:e})}}),Hc=($c.create=(e,t)=>{if(Array.isArray(e))return new $c({items:e,typeName:c.ZodTuple,rest:null,...l(t)});throw new Error("You must pass an array of schemas to z.tuple([ ... ])")},class extends u{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){var{status:e,ctx:t}=this._processInputParams(e);if(t.parsedType!==g.object)return w(t,{code:E.invalid_type,expected:g.object,received:t.parsedType}),x;var n=[],r=this._def.keyType,a=this._def.valueType;for(const i in t.data)n.push({key:r._parse(new qu(t,i,t.path,i)),value:a._parse(new qu(t,t.data[i],t.path,i)),alwaysSet:i in t.data});return t.common.async?zu.mergeObjectAsync(e,n):zu.mergeObjectSync(e,n)}get element(){return this._def.valueType}static create(e,t,n){return new Hc(t instanceof u?{keyType:e,valueType:t,typeName:c.ZodRecord,...l(n)}:{keyType:wc.create(),valueType:e,typeName:c.ZodRecord,...l(t)})}}),Uc=class extends u{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:a}=this._processInputParams(e);if(a.parsedType!==g.map)return w(a,{code:E.invalid_type,expected:g.map,received:a.parsedType}),x;const i=this._def.keyType,o=this._def.valueType,s=[...a.data.entries()].map(([e,t],n)=>({key:i._parse(new qu(a,e,a.path,[n,"key"])),value:o._parse(new qu(a,t,a.path,[n,"value"]))}));if(a.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const n of s){var e=await n.key,t=await n.value;if("aborted"===e.status||"aborted"===t.status)return x;"dirty"!==e.status&&"dirty"!==t.status||r.dirty(),u.set(e.value,t.value)}return{status:r.value,value:u}})}var t=new Map;for(const c of s){var n=c.key,l=c.value;if("aborted"===n.status||"aborted"===l.status)return x;"dirty"!==n.status&&"dirty"!==l.status||r.dirty(),t.set(n.value,l.value)}return{status:r.value,value:t}}},Zc=(Uc.create=(e,t,n)=>new Uc({valueType:t,keyType:e,typeName:c.ZodMap,...l(n)}),class extends u{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==g.set)return w(n,{code:E.invalid_type,expected:g.set,received:n.parsedType}),x;e=this._def;null!==e.minSize&&n.data.size<e.minSize.value&&(w(n,{code:E.too_small,minimum:e.minSize.value,type:"set",inclusive:!0,exact:!1,message:e.minSize.message}),r.dirty()),null!==e.maxSize&&n.data.size>e.maxSize.value&&(w(n,{code:E.too_big,maximum:e.maxSize.value,type:"set",inclusive:!0,exact:!1,message:e.maxSize.message}),r.dirty());const a=this._def.valueType;function t(e){var t=new Set;for(const n of e){if("aborted"===n.status)return x;"dirty"===n.status&&r.dirty(),t.add(n.value)}return{status:r.value,value:t}}e=[...n.data.values()].map((e,t)=>a._parse(new qu(n,e,n.path,t)));return n.common.async?Promise.all(e).then(e=>t(e)):t(e)}min(e,t){return new Zc({...this._def,minSize:{value:e,message:s.toString(t)}})}max(e,t){return new Zc({...this._def,maxSize:{value:e,message:s.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}),Kc=(Zc.create=(e,t)=>new Zc({valueType:e,minSize:null,maxSize:null,typeName:c.ZodSet,...l(t)}),class extends u{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const n=this._processInputParams(e)["ctx"];if(n.parsedType!==g.function)return w(n,{code:E.invalid_type,expected:g.function,received:n.parsedType}),x;function a(e,t){return Bu({data:e,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,ju(),Fu].filter(e=>!!e),issueData:{code:E.invalid_arguments,argumentsError:t}})}function i(e,t){return Bu({data:e,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,ju(),Fu].filter(e=>!!e),issueData:{code:E.invalid_return_type,returnTypeError:t}})}const o={errorMap:n.common.contextualErrorMap},s=n.data;if(this._def.returns instanceof ed){const l=this;return Hu(async function(...t){const n=new Lu([]);var e=await l._def.args.parseAsync(t,o).catch(e=>{throw n.addIssue(a(t,e)),n});const r=await Reflect.apply(s,this,e);return await l._def.returns._def.type.parseAsync(r,o).catch(e=>{throw n.addIssue(i(r,e)),n})})}{const r=this;return Hu(function(...e){var t=r._def.args.safeParse(e,o);if(!t.success)throw new Lu([a(e,t.error)]);e=Reflect.apply(s,this,t.data),t=r._def.returns.safeParse(e,o);if(t.success)return t.data;throw new Lu([i(e,t.error)])})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Kc({...this._def,args:$c.create(e).rest(Mc.create())})}returns(e){return new Kc({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,n){return new Kc({args:e||$c.create([]).rest(Mc.create()),returns:t||Mc.create(),typeName:c.ZodFunction,...l(n)})}}),Wc=class extends u{get schema(){return this._def.getter()}_parse(e){e=this._processInputParams(e).ctx;return this._def.getter()._parse({data:e.data,path:e.path,parent:e})}},Xc=(Wc.create=(e,t)=>new Wc({getter:e,typeName:c.ZodLazy,...l(t)}),class extends u{_parse(e){var t;return e.data!==this._def.value?(w(t=this._getOrReturnCtx(e),{received:t.data,code:E.invalid_literal,expected:this._def.value}),x):{status:"valid",value:e.data}}get value(){return this._def.value}});function Yc(e,t){return new qc({values:e,typeName:c.ZodEnum,...l(t)})}Xc.create=(e,t)=>new Xc({value:e,typeName:c.ZodLiteral,...l(t)});var qc=class extends u{constructor(){super(...arguments),Gc.set(this,void 0)}_parse(e){var t,n;return"string"!=typeof e.data?(n=this._getOrReturnCtx(e),t=this._def.values,w(n,{expected:d.joinValues(t),received:n.parsedType,code:E.invalid_type}),x):(Xu(this,Gc,"f")||Yu(this,Gc,new Set(this._def.values),"f"),Xu(this,Gc,"f").has(e.data)?Hu(e.data):(t=this._getOrReturnCtx(e),n=this._def.values,w(t,{received:t.data,code:E.invalid_enum_value,options:n}),x))}get options(){return this._def.values}get enum(){var e={};for(const t of this._def.values)e[t]=t;return e}get Values(){var e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){var e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return qc.create(e,{...this._def,...t})}exclude(t,e=this._def){return qc.create(this.options.filter(e=>!t.includes(e)),{...this._def,...e})}},Gc=new WeakMap,Jc=(qc.create=Yc,class extends u{constructor(){super(...arguments),Qc.set(this,void 0)}_parse(e){var t,n=d.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);return r.parsedType!==g.string&&r.parsedType!==g.number?(t=d.objectValues(n),w(r,{expected:d.joinValues(t),received:r.parsedType,code:E.invalid_type}),x):(Xu(this,Qc,"f")||Yu(this,Qc,new Set(d.getValidEnumValues(this._def.values)),"f"),Xu(this,Qc,"f").has(e.data)?Hu(e.data):(t=d.objectValues(n),w(r,{received:r.data,code:E.invalid_enum_value,options:t}),x))}get enum(){return this._def.values}}),Qc=new WeakMap,ed=(Jc.create=(e,t)=>new Jc({values:e,typeName:c.ZodNativeEnum,...l(t)}),class extends u{unwrap(){return this._def.type}_parse(e){const t=this._processInputParams(e)["ctx"];return t.parsedType!==g.promise&&!1===t.common.async?(w(t,{code:E.invalid_type,expected:g.promise,received:t.parsedType}),x):(e=t.parsedType===g.promise?t.data:Promise.resolve(t.data),Hu(e.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}),td=(ed.create=(e,t)=>new ed({type:e,typeName:c.ZodPromise,...l(t)}),class extends u{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===c.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null,a={addIssue:e=>{w(n,e),e.fatal?t.abort():t.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),"preprocess"===r.type)return e=r.transform(n.data,a),n.common.async?Promise.resolve(e).then(async e=>{return"aborted"===t.value||"aborted"===(e=await this._def.schema._parseAsync({data:e,path:n.path,parent:n})).status?x:"dirty"===e.status||"dirty"===t.value?$u(e.value):e}):"aborted"===t.value||"aborted"===(e=this._def.schema._parseSync({data:e,path:n.path,parent:n})).status?x:"dirty"===e.status||"dirty"===t.value?$u(e.value):e;if("refinement"===r.type){const i=e=>{var t=r.refinement(e,a);if(n.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};return!1===n.common.async?"aborted"===(e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n})).status?x:("dirty"===e.status&&t.dirty(),i(e.value),{status:t.value,value:e.value}):this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(e=>"aborted"===e.status?x:("dirty"===e.status&&t.dirty(),i(e.value).then(()=>({status:t.value,value:e.value}))))}if("transform"===r.type){if(!1!==n.common.async)return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(e=>Ku(e)?Promise.resolve(r.transform(e.value,a)).then(e=>({status:t.value,value:e})):e);e=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Ku(e))return e;e=r.transform(e.value,a);if(e instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:e}}d.assertNever(r)}}),nd=(td.create=(e,t,n)=>new td({schema:e,typeName:c.ZodEffects,effect:t,...l(n)}),td.createWithPreprocess=(e,t,n)=>new td({schema:t,effect:{type:"preprocess",transform:e},typeName:c.ZodEffects,...l(n)}),class extends u{_parse(e){return this._getType(e)===g.undefined?Hu(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}),rd=(nd.create=(e,t)=>new nd({innerType:e,typeName:c.ZodOptional,...l(t)}),class extends u{_parse(e){return this._getType(e)===g.null?Hu(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}),ad=(rd.create=(e,t)=>new rd({innerType:e,typeName:c.ZodNullable,...l(t)}),class extends u{_parse(e){e=this._processInputParams(e).ctx;let t=e.data;return e.parsedType===g.undefined&&(t=this._def.defaultValue()),this._def.innerType._parse({data:t,path:e.path,parent:e})}removeDefault(){return this._def.innerType}}),id=(ad.create=(e,t)=>new ad({innerType:e,typeName:c.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...l(t)}),class extends u{_parse(e){e=this._processInputParams(e).ctx;const t={...e,common:{...e.common,issues:[]}};e=this._def.innerType._parse({data:t.data,path:t.path,parent:{...t}});return Wu(e)?e.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new Lu(t.common.issues)},input:t.data})})):{status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new Lu(t.common.issues)},input:t.data})}}removeCatch(){return this._def.innerType}}),od=(id.create=(e,t)=>new id({innerType:e,typeName:c.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...l(t)}),class extends u{_parse(e){var t;return this._getType(e)!==g.nan?(w(t=this._getOrReturnCtx(e),{code:E.invalid_type,expected:g.nan,received:t.parsedType}),x):{status:"valid",value:e.data}}}),i=(od.create=e=>new od({typeName:c.ZodNaN,...l(e)}),Symbol("zod_brand")),sd=class extends u{_parse(e){var e=this._processInputParams(e)["ctx"],t=e.data;return this._def.type._parse({data:t,path:e.path,parent:e})}unwrap(){return this._def.type}},ld=class extends u{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);return n.common.async?(async()=>{var e=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return"aborted"===e.status?x:"dirty"===e.status?(t.dirty(),$u(e.value)):this._def.out._parseAsync({data:e.value,path:n.path,parent:n})})():"aborted"===(e=this._def.in._parseSync({data:n.data,path:n.path,parent:n})).status?x:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:n.path,parent:n})}static create(e,t){return new ld({in:e,out:t,typeName:c.ZodPipeline})}},ud=class extends u{_parse(e){e=this._def.innerType._parse(e);const t=e=>(Ku(e)&&(e.value=Object.freeze(e.value)),e);return Wu(e)?e.then(e=>t(e)):t(e)}unwrap(){return this._def.innerType}};function cd(r,a={},i){return r?Rc.create().superRefine((e,t)=>{var n;r(e)||(n=null==(n=null!=(n=(e="function"==typeof a?a(e):"string"==typeof a?{message:a}:a).fatal)?n:i)||n,t.addIssue({code:"custom",..."string"==typeof e?{message:e}:e,fatal:n}))}):Rc.create()}ud.create=(e,t)=>new ud({innerType:e,typeName:c.ZodReadonly,...l(t)});var c,Y={object:Lc.lazycreate},dd=((r=c=c||{}).ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly",wc.create),fd=xc.create,a=Sc.create,md=kc.create,n=Ic.create,o=Dc.create,r=Lc.create,pd=Lc.strictCreate,hd=Fc.create,gd=jc.create,yd=zc.create,vd=$c.create,bd=Hc.create,Ed=Zc.create,wd=Kc.create,_d=Wc.create,xd=Xc.create,Sd=qc.create,kd=Jc.create,Id=ed.create,Cd=td.create,Nd=nd.create,Td=rd.create,Rd=td.createWithPreprocess,Md=ld.create,i=Object.freeze({__proto__:null,defaultErrorMap:Fu,setErrorMap:function(e){Vu=e},getErrorMap:ju,makeIssue:Bu,EMPTY_PATH:[],addIssueToContext:w,ParseStatus:zu,INVALID:x,DIRTY:$u,OK:Hu,isAborted:Uu,isDirty:Zu,isValid:Ku,isAsync:Wu,get util(){return d},get objectUtil(){return Ru},ZodParsedType:g,getParsedType:Pu,ZodType:u,datetimeRegex:yc,ZodString:wc,ZodNumber:xc,ZodBigInt:Sc,ZodBoolean:kc,ZodDate:Ic,ZodSymbol:Cc,ZodUndefined:Nc,ZodNull:Tc,ZodAny:Rc,ZodUnknown:Mc,ZodNever:Oc,ZodVoid:Ac,ZodArray:Dc,ZodObject:Lc,ZodUnion:Fc,ZodDiscriminatedUnion:jc,ZodIntersection:zc,ZodTuple:$c,ZodRecord:Hc,ZodMap:Uc,ZodSet:Zc,ZodFunction:Kc,ZodLazy:Wc,ZodLiteral:Xc,ZodEnum:qc,ZodNativeEnum:Jc,ZodPromise:ed,ZodEffects:td,ZodTransformer:td,ZodOptional:nd,ZodNullable:rd,ZodDefault:ad,ZodCatch:id,ZodNaN:od,BRAND:i,ZodBranded:sd,ZodPipeline:ld,ZodReadonly:ud,custom:cd,Schema:u,ZodSchema:u,late:Y,get ZodFirstPartyTypeKind(){return c},coerce:{string:e=>wc.create({...e,coerce:!0}),number:e=>xc.create({...e,coerce:!0}),boolean:e=>kc.create({...e,coerce:!0}),bigint:e=>Sc.create({...e,coerce:!0}),date:e=>Ic.create({...e,coerce:!0})},any:Rc.create,array:o,bigint:a,boolean:md,date:n,discriminatedUnion:gd,effect:Cd,enum:Sd,function:wd,instanceof:(t,e={message:"Input not instance of "+t.name})=>cd(e=>e instanceof t,e),intersection:yd,lazy:_d,literal:xd,map:Uc.create,nan:od.create,nativeEnum:kd,never:Oc.create,null:Tc.create,nullable:Td,number:fd,object:r,oboolean:()=>md().optional(),onumber:()=>fd().optional(),optional:Nd,ostring:()=>dd().optional(),pipeline:Md,preprocess:Rd,promise:Id,record:bd,set:Ed,strictObject:pd,string:dd,symbol:Cc.create,transformer:Cd,tuple:vd,undefined:Nc.create,union:hd,unknown:Mc.create,void:Ac.create,NEVER:x,ZodIssueCode:E,quotelessJson:e=>{return JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:")},ZodError:Lu}),Od=i.object({uri:i.string().nonempty({message:"Artist URI is required"}).refine(e=>Spicetify.URI.isArtist(e),{message:"Invalid artist URI"})}).strict().readonly();var Ad=50,Dd=i.object({uris:i.array(i.string()).nonempty().max(Ad).refine(e=>e.every(e=>Spicetify.URI.isArtist(e)),{message:"Invalid artist URIs"})}).strict().readonly();var Pd=i.object({uris:i.array(i.string()).nonempty().max(100).refine(e=>e.every(e=>Spicetify.URI.isTrack(e)),{message:"Invalid tracks URIs"})}).strict().readonly();function Ld(t,n){var r=[];for(let e=0;e<t.length;e+=n)r.push(t.slice(e,e+n));return r}function Fd(e,r){return e.filter((t,e,n)=>e===n.findIndex(e=>r(e)===r(t)))}async function Vd(t){await new Promise(e=>setTimeout(e,t))}var Y="playlist-maker",jd=Y+":workflows",Bd=Y+":artist-genres";function zd(){return JSON.parse(Spicetify.LocalStorage.get(jd)??"[]")}function $d(){var e=JSON.parse(Spicetify.LocalStorage.get(Bd)??"[]");return new Map(e)}function Hd(e,t){return{value:e,expiry:(new Date).getTime()+t}}var Ud=15552e6;async function Zd(e){var t;for(const a of Ld(e.filter(e=>!Spicetify.URI.isLocalTrack(e.uri)),100)){t={uris:a.map(e=>e.uri)},Pd.parse(t);var n=await(await Au().withPath("/audio-features").withEndpointIdentifier("/audio-features").withQueryParameters({ids:t.uris.map(e=>Du(Spicetify.URI.fromString(e))).join(",")}).send()).body.audio_features;for(const i of a){var r=n.find(e=>null!==e&&e.uri===i.uri);r&&(i.audioFeatures=r)}await Vd(20)}}async function Kd(){var e=y().LibraryAPI,t=(await e.getTracks()).unfilteredTotalLength,e=(await e.getTracks({limit:t,offset:0})).items.filter(e=>!Spicetify.URI.isLocalTrack(e.uri));const n=function(e){var t,n,r=new Date;for([t,n]of e.entries())n.expiry<r.getTime()&&e.delete(t);return e}($d());let r=Fd(e.flatMap(e=>e.artists),e=>e.uri);r=r.filter(e=>!n.has(e.uri)),console.log(`Getting genres for ${r.length.toFixed()} artists`);var a=[];for(const s of Ld(r,Ad)){i={uris:s.map(e=>e.uri)},Dd.parse(i);var i=await(await Au().withPath("/artists").withEndpointIdentifier("/artists").withQueryParameters({ids:i.uris.map(e=>Du(Spicetify.URI.fromString(e))).join(",")}).send()).body.artists;a.push(...i),await Vd(20)}for(const l of a)n.set(l.uri,Hd(l.genres,Ud));for(const u of r.filter(e=>!n.has(e.uri))){o={uri:u.uri},Od.parse(o),o=Du(Spicetify.URI.fromString(o.uri));var o=await(await Au().withPath("/artists/"+o).withEndpointIdentifier("/artists/{id}").send()).body;console.log(`Artist ${u.name} is now `+o.name),n.set(u.uri,Hd(o.genres,Ud))}return t=n,Spicetify.LocalStorage.set(Bd,JSON.stringify(Array.from(t))),new Map(Array.from(n).map(([e,t])=>[e,t.value]))}var o=i.object({isExecuting:i.literal(!0).optional()}).strict(),a=class{constructor(e,t,n){this.currentNodeId=e,this.sourceNodeIds=t,this.data=n}updateNodeData=Jf.getState().updateNodeData;resultCache=null;async getResults(e){e=await this.getInputs(e);return this.setExecuting(!0),null===this.resultCache&&(this.resultCache=await this.getResultsInternal(e)),this.setExecuting(void 0),this.resultCache}async getInputs(e){var t=[];for(const r of this.sourceNodeIds){var n=e[r];if(!n)throw new Error(`Processor for node ${r} not found`);t.push(...await n.getResults(e))}return t}setExecuting(e){this.updateNodeData(this.currentNodeId,{isExecuting:e})}},Wd=i.object({range:i.object({min:i.number().min(0).max(1),max:i.number().min(0).max(1)})}).merge(o).strict(),Xd=class extends a{async getResultsInternal(e){await Zd(e.filter(e=>void 0===e.audioFeatures));e=e.filter(e=>void 0!==e.audioFeatures&&e.audioFeatures?.acousticness>this.data.range.min&&e.audioFeatures?.acousticness<this.data.range.max);return e}},Yd=i.object({range:i.object({min:i.number().min(0).max(1),max:i.number().min(0).max(1)})}).merge(o).strict(),qd=class extends a{async getResultsInternal(e){await Zd(e.filter(e=>void 0===e.audioFeatures));e=e.filter(e=>void 0!==e.audioFeatures&&e.audioFeatures?.danceability>this.data.range.min&&e.audioFeatures?.danceability<this.data.range.max);return e}},Gd=i.object({range:i.object({min:i.number().min(0).max(1),max:i.number().min(0).max(1)})}).merge(o).strict(),Jd=class extends a{async getResultsInternal(e){await Zd(e.filter(e=>void 0===e.audioFeatures));e=e.filter(e=>void 0!==e.audioFeatures&&e.audioFeatures?.energy>this.data.range.min&&e.audioFeatures?.energy<this.data.range.max);return e}},Qd=i.object({range:i.object({min:i.number().min(0).max(1),max:i.number().min(0).max(1)})}).merge(o).strict(),ef=class extends a{async getResultsInternal(e){await Zd(e.filter(e=>void 0===e.audioFeatures));e=e.filter(e=>void 0!==e.audioFeatures&&e.audioFeatures?.instrumentalness>this.data.range.min&&e.audioFeatures?.instrumentalness<this.data.range.max);return e}},tf=class{constructor(e){this.track=e}get uri(){return this.backingTrack.uri}get name(){return this.backingTrack.name}get addedAt(){return tf.isInternalTrack(this.backingTrack)?void 0===this.backingTrack.addedAt?null:this.backingTrack.addedAt instanceof Date?this.backingTrack.addedAt:new Date(this.backingTrack.addedAt):new Date(0)}get duration(){return tf.isInternalTrack(this.backingTrack)?this.backingTrack.duration.milliseconds:tf.isApiTrack(this.backingTrack)?this.backingTrack.duration_ms:0}get trackNumber(){return tf.isInternalTrack(this.backingTrack)?this.backingTrack.trackNumber:tf.isApiTrack(this.backingTrack)?this.backingTrack.track_number:0}get artists(){return this.backingTrack.artists}get album(){return this.backingTrack.album}get backingTrack(){return this.track}get source(){return this.track.source}get isPlayable(){return tf.isInternalTrack(this.backingTrack)?this.backingTrack.isPlayable:!!tf.isApiTrack(this.backingTrack)&&(this.backingTrack.is_playable??!1)}static isInternalTrack(e){return"duration"in e}static isApiTrack(e){return"duration_ms"in e}},nf=i.object({isPlayable:i.boolean()}).merge(o).strict(),rf=class extends a{async getResultsInternal(e){return e.filter(e=>new tf(e).isPlayable===this.data.isPlayable)}},af=i.object({range:i.object({min:i.number().min(0).max(1),max:i.number().min(0).max(1)})}).merge(o).strict(),of=class extends a{async getResultsInternal(e){await Zd(e.filter(e=>void 0===e.audioFeatures));e=e.filter(e=>void 0!==e.audioFeatures&&e.audioFeatures?.liveness>this.data.range.min&&e.audioFeatures?.liveness<this.data.range.max);return e}},sf=i.object({range:i.object({min:i.number().min(-60).max(10),max:i.number().min(-60).max(10)})}).merge(o).strict(),lf=class extends a{async getResultsInternal(e){await Zd(e.filter(e=>void 0===e.audioFeatures));e=e.filter(e=>void 0!==e.audioFeatures&&e.audioFeatures?.loudness>this.data.range.min&&e.audioFeatures?.loudness<this.data.range.max);return e}},uf=i.object({mode:i.union([i.literal("0"),i.literal("1")])}).merge(o).strict(),cf=class extends a{async getResultsInternal(e){await Zd(e.filter(e=>void 0===e.audioFeatures));e=e.filter(e=>void 0!==e.audioFeatures&&e.audioFeatures.mode===+this.data.mode);return e}},df=i.object({range:i.object({min:i.number().min(0).max(1),max:i.number().min(0).max(1)})}).merge(o).strict(),ff=class extends a{async getResultsInternal(e){await Zd(e.filter(e=>void 0===e.audioFeatures));e=e.filter(e=>void 0!==e.audioFeatures&&e.audioFeatures?.speechiness>this.data.range.min&&e.audioFeatures?.speechiness<this.data.range.max);return e}},mf=i.object({range:i.object({min:i.number().min(0).max(1e3),max:i.number().min(0).max(1e3)})}).merge(o).strict(),pf=class extends a{async getResultsInternal(e){await Zd(e.filter(e=>void 0===e.audioFeatures));e=e.filter(e=>void 0!==e.audioFeatures&&e.audioFeatures?.tempo>this.data.range.min&&e.audioFeatures?.tempo<this.data.range.max);return e}},hf=i.object({range:i.object({min:i.number().min(0).max(1),max:i.number().min(0).max(1)})}).merge(o).strict(),gf=class extends a{async getResultsInternal(e){await Zd(e.filter(e=>void 0===e.audioFeatures));e=e.filter(e=>void 0!==e.audioFeatures&&e.audioFeatures?.valence>this.data.range.min&&e.audioFeatures?.valence<this.data.range.max);return e}},yf=class extends a{async getResultsInternal(e){const n=e.map(e=>e.uri);return e.filter((e,t)=>!n.includes(e.uri,t+1))}},vf=class extends a{async getResultsInternal(t){for(let e=t.length-1;0<e;e--){var n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t}},bf=i.object({property:i.enum(["album","artist","name","source","duration"]),order:i.enum(["asc","desc"])}).merge(o).strict(),Ef={album:e=>e.album.name,artist:e=>e.artists.map(e=>e.name).join(", "),name:e=>e.name,source:e=>e.source,duration:e=>e.duration},wf=class extends a{async getResultsInternal(e){const{property:n,order:r}=this.data;return e.sort((e,t)=>{e=this.getPropertyValue(e,n),t=this.getPropertyValue(t,n);return e<t?"asc"===r?-1:1:t<e?"asc"===r?1:-1:0})}getPropertyValue(e,t){return Ef[t](new tf(e))}},_f=class extends a{getResultsInternal(e){return Promise.resolve(e)}};async function xf(e,t){var{data:e,errors:t}=await Spicetify.GraphQL.Request(e,t);if(t)throw new Error(t.map(e=>e.message).join("\n"));return e}var Sf=i.object({uri:i.string().nonempty().refine(e=>Spicetify.URI.isAlbum(e),{message:"Invalid album URI"}),offset:i.number().nonnegative().int(),limit:i.number().nonnegative().int().max(100),locale:i.string().nonempty()}).strict().readonly();async function kf(e){Sf.parse(e);var t=Spicetify.GraphQL.Definitions["getAlbum"];return xf(t,e)}var If=i.object({uri:i.string().nonempty({message:"Album URI is required"}).refine(e=>Spicetify.URI.isAlbum(e),{message:"Invalid album URI"}),offset:i.number().nonnegative().int().optional(),limit:i.number().nonnegative().int().max(100).optional(),onlyLiked:i.boolean()}).merge(o).strict(),Cf=class extends a{async getResultsInternal(){const{offset:e=0,limit:t=100,uri:n,onlyLiked:r}=this.data,a=await kf({uri:n,offset:e,limit:t,locale:Spicetify.Locale.getLocale()});let i=a.albumUnion.tracksV2.items.map(e=>e.track);return(i=r?i.filter(e=>e.saved):i).map(e=>({uri:e.uri,name:e.name,artists:e.artists.items.map(e=>({uri:e.uri,name:e.profile.name})),album:{uri:n,name:a.albumUnion.name,images:a.albumUnion.coverArt.sources.map(e=>({url:e.url}))},duration:{milliseconds:e.duration.totalMilliseconds},trackNumber:e.trackNumber,isPlayable:e.playability.playable})).map(e=>({...e,source:"Album"}))}},Nf=i.object({uri:i.string().nonempty().refine(e=>Spicetify.URI.isAlbum(e),{message:"Invalid album URI"}),offset:i.number().nonnegative().int(),limit:i.number().nonnegative().int().max(100)}).strict().readonly();async function Tf(e){Nf.parse(e);var t=Spicetify.GraphQL.Definitions["getAlbumNameAndTracks"];return xf(t,e)}var Rf=i.object({uri:i.string().nonempty().refine(e=>Spicetify.URI.isAlbum(e),{message:"Invalid album URI"}),offset:i.number().nonnegative().int(),limit:i.number().nonnegative().int().max(100)}).strict().readonly();async function Mf(e){Rf.parse(e);var t=Spicetify.GraphQL.Definitions["queryAlbumTracks"];return xf(t,e)}var Of=i.object({uri:i.string().nonempty().refine(e=>Spicetify.URI.isArtist(e),{message:"Invalid artist URI"}),locale:i.string().nonempty()}).strict().readonly();async function Af(e){Of.parse(e);var t=Spicetify.GraphQL.Definitions["queryArtistOverview"];return xf(t,e)}var Df=i.object({uri:i.string().nonempty({message:"Artist URI is required"}).refine(e=>Spicetify.URI.isArtist(e),{message:"Invalid artist URI"}),trackType:i.enum(["liked","top","discography","latest"])}).merge(o).strict(),Pf=class extends a{async getResultsInternal(){var{uri:e,trackType:t}=this.data;return"liked"===t?this.getLikedTracks(e):"top"===t?this.getTopTracks(e):"latest"===t?this.getLatestReleaseTracks(e):this.getAllTracks(e)}async getLikedTracks(e){return(await y().LibraryAPI.getTracks({limit:5e4,offset:0,uri:e})).items.map(e=>({...e,source:"Artist"}))}async getTopTracks(e){var e=await Af({uri:e,locale:Spicetify.Locale.getLocale()}),t=[];for(const s of e.artistUnion.discography.popularReleasesAlbums.items)t.push(...await this.getTracksFromRelease(s));var n=e.artistUnion.discography.topTracks.items,r=new Map,a=[];for(const l of this.getAllReleasesFromOverview(e))r.set(l.uri,l.name);for(const u of n){var i,o=u.track.albumOfTrack.uri;r.has(o)||(i=await Tf({uri:o,limit:0,offset:0}),r.set(o,i.albumUnion.name)),i=r.get(o),a.push(this.getTrackFromTopTrack(u,i))}return[...a,...t]}async getLatestReleaseTracks(e){e=(await Af({uri:e,locale:Spicetify.Locale.getLocale()})).artistUnion.discography.latest;return this.getTracksFromRelease(e)}async getAllTracks(t){var e=await Af({uri:t,locale:Spicetify.Locale.getLocale()}),n=[];for(const o of e.artistUnion.discography.albums.items.map(e=>e.releases.items).flat())n.push(...await this.getTracksFromRelease(o));var r=[];for(const s of e.artistUnion.discography.compilations.items.map(e=>e.releases.items).flat()){var a=await this.getTracksFromRelease(s);r.push(...a.filter(e=>e.artists.some(e=>e.uri===t)))}var i=[];for(const l of e.artistUnion.discography.singles.items.map(e=>e.releases.items).flat())i.push(...await this.getTracksFromRelease(l));return[...n,...r,...i]}async getTracksFromRelease(t){return(await Mf({uri:t.uri,offset:0,limit:100})).albumUnion.tracksV2.items.map(e=>({uri:e.track.uri,name:e.track.name,album:{uri:t.uri,name:t.name,images:t.coverArt.sources},artists:e.track.artists.items.map(e=>({uri:e.uri,name:e.profile.name})),duration:{milliseconds:e.track.duration.totalMilliseconds},isPlayable:e.track.playability.playable,trackNumber:e.track.trackNumber,addedAt:void 0})).map(e=>({...e,source:"Artist"}))}getTrackFromTopTrack(e,t){return{...{uri:e.track.uri,name:e.track.name,album:{uri:e.track.albumOfTrack.uri,name:t,images:e.track.albumOfTrack.coverArt.sources.map(e=>({url:e.url}))},artists:e.track.artists.items.map(e=>({uri:e.uri,name:e.profile.name})),duration:{milliseconds:e.track.duration.totalMilliseconds},isPlayable:e.track.playability.playable,trackNumber:0,addedAt:void 0},source:"Artist"}}getAllReleasesFromOverview(e){var t=[];return t.push(...e.artistUnion.discography.albums.items.map(e=>e.releases.items).flat()),t.push(...e.artistUnion.discography.compilations.items.map(e=>e.releases.items).flat()),t.push(...e.artistUnion.discography.singles.items.map(e=>e.releases.items).flat()),t}},Lf=i.object({offset:i.number().nonnegative().int().optional(),limit:i.number().nonnegative().int().max(5e4).optional(),filter:i.string().optional(),sortField:i.enum(["ADDED_AT","ALBUM_NAME","NAME","ARTIST_NAME"]),sortOrder:i.enum(["DESC","ASC"]),genres:i.array(i.string())}).merge(o).strict(),Ff=class extends a{async getResultsInternal(){var e=y().LibraryAPI,{offset:t,filter:n,sortField:r,sortOrder:a,genres:i}=this.data;let o=this.data.limit,s=((void 0===o||0<i.length)&&(o=(await e.getTracks()).unfilteredTotalLength),(await e.getTracks({limit:o,offset:t,filters:n?[n]:void 0,sort:{field:r,order:a}})).items);return(s=0<i.length?this.filterTracksByGenres(s,new Set(i),this.data.limit):s).map(e=>({...e,source:"Liked songs"}))}filterTracksByGenres(e,t,n){var r=[],e=e.filter(e=>!Spicetify.URI.isLocalTrack(e.uri));const a=$d();for(const i of e)i.artists.flatMap(e=>a.get(e.uri)?.value??[]).some(e=>t.has(e))&&r.push(i);return void 0!==n?r.slice(0,n):r}},Vf=i.object({filter:i.string().optional(),sortField:i.enum(["ALBUM","TITLE","ARTIST","DURATION","ADDED_AT"]).or(i.literal("NO_SORT")),sortOrder:i.enum(["DESC","ASC"])}).merge(o).strict(),jf=class extends a{async getResultsInternal(){var e=y().LocalFilesAPI,{filter:t,sortField:n,sortOrder:r}=this.data;return(await e.getTracks("NO_SORT"===n?void 0:{field:n,order:r},t)).map(e=>({...e,source:"Local tracks"}))}},Bf=i.object({playlistUri:i.string().nonempty({message:"Playlist URI is required"}).refine(e=>Spicetify.URI.isPlaylistV1OrV2(e),{message:"Invalid playlist URI"}),offset:i.number().nonnegative().int().optional(),limit:i.number().nonnegative().int().max(5e4).optional(),filter:i.string().optional(),sortField:i.enum(["TITLE","ADDED_AT","ADDED_BY","ALBUM","ARTIST","DURATION","SHOW_NAME","PUBLISH_DATE"]).or(i.literal("NO_SORT")),sortOrder:i.enum(["DESC","ASC"]),onlyMine:i.boolean()}).merge(o).strict(),zf=class extends a{async getResultsInternal(){var e=this.data.playlistUri,t=y().PlaylistAPI,{offset:n,limit:r,filter:a,sortField:i,sortOrder:o}=this.data;const s=await t.getPlaylist(e,{},{limit:r,offset:n,filter:a,sort:"NO_SORT"===i?void 0:{field:i,order:o}});return s.contents.items.map(e=>({...e,source:s.metadata.name}))}},$f=i.object({timeRange:i.enum(["short_term","medium_term","long_term"]).optional(),offset:i.number().nonnegative().int().optional(),limit:i.number().nonnegative().int().max(50).optional()}).strict().readonly();async function Hf(e){return $f.parse(e),(await Au().withPath("/me/top/tracks").withEndpointIdentifier("/me/top/tracks").withQueryParameters({time_range:e.timeRange,limit:e.limit?.toString(),offset:e.offset?.toString()}).send()).body}i.object({uri:i.string().nonempty({message:"Album URI is required"}).refine(e=>Spicetify.URI.isAlbum(e),{message:"Invalid album URI"})}).strict().readonly(),i.object({uris:i.array(i.string()).nonempty().max(20).refine(e=>e.every(e=>Spicetify.URI.isAlbum(e)),{message:"Invalid album URIs"})}).strict().readonly(),i.object({uri:i.string().nonempty({message:"Episode URI is required"}).refine(e=>Spicetify.URI.isEpisode(e),{message:"Invalid episode URI"})}).strict().readonly(),i.object({uris:i.array(i.string()).nonempty().max(50).refine(e=>e.every(e=>Spicetify.URI.isEpisode(e)),{message:"Invalid episode URIs"})}).strict().readonly(),i.object({uri:i.string().nonempty({message:"Playlist URI is required"}).refine(e=>Spicetify.URI.isPlaylistV1OrV2(e),{message:"Invalid playlist URI"})}).strict().readonly(),i.object({uri:i.string().nonempty({message:"Show URI is required"}).refine(e=>Spicetify.URI.isShow(e),{message:"Invalid show URI"})}).strict().readonly(),i.object({uris:i.array(i.string()).nonempty().max(20).refine(e=>e.every(e=>Spicetify.URI.isShow(e)),{message:"Invalid show URIs"})}).strict().readonly(),i.object({uri:i.string().nonempty({message:"Track URI is required"}).refine(e=>Spicetify.URI.isTrack(e),{message:"Invalid track URI"}),withoutMarket:i.boolean().optional()}).strict().readonly(),i.object({uris:i.array(i.string()).nonempty().max(50).refine(e=>e.every(e=>Spicetify.URI.isTrack(e)),{message:"Invalid tracks URIs"})}).strict().readonly();async function Uf(e,t,n,r){var a=[];let i=null,o=t,s=void 0!==r&&r<=n?r:n;for(;null!==(i=await e(o,s))&&(void 0===r&&(r=i.total),a.push(...i.items),o+=s,s=Math.min(n,r-a.length),null!==i.next)&&a.length<r;);return a}var Zf=i.object({timeRange:i.enum(["short_term","medium_term","long_term"]),offset:i.number().nonnegative().int().optional(),limit:i.number().nonnegative().int().max(1e3).optional()}).merge(o).strict(),Kf=class extends a{async getResultsInternal(){const{offset:e=0,limit:t,timeRange:n}=this.data;return(await Uf(async(e,t)=>Hf({timeRange:n,limit:t,offset:e}),e,50,t)).map(e=>({...e,is_playable:e.is_playable??!0,source:"Top tracks"}))}},Wf={libraryPlaylistSource:()=>{return{playlistUri:"",offset:void 0,filter:void 0,limit:void 0,sortField:"NO_SORT",sortOrder:"ASC",isExecuting:void 0,onlyMine:!1}},acousticness:()=>{return{range:{min:0,max:1},isExecuting:void 0}},danceability:()=>{return{range:{min:0,max:1},isExecuting:void 0}},energy:()=>{return{range:{min:0,max:1},isExecuting:void 0}},instrumentalness:()=>{return{range:{min:0,max:1},isExecuting:void 0}},isPlayable:()=>{return{isPlayable:!0,isExecuting:void 0}},liveness:()=>{return{range:{min:0,max:1},isExecuting:void 0}},loudness:()=>{return{range:{min:-60,max:10},isExecuting:void 0}},speechiness:()=>{return{range:{min:0,max:1},isExecuting:void 0}},tempo:()=>{return{range:{min:0,max:1e3},isExecuting:void 0}},valence:()=>{return{range:{min:0,max:1},isExecuting:void 0}},sort:()=>{return{order:"asc",property:"name",isExecuting:void 0}},libraryAlbumSource:()=>{return{uri:"",limit:void 0,offset:void 0,onlyLiked:!1,isExecuting:void 0}},likedSongsSource:()=>{return{filter:void 0,offset:void 0,limit:void 0,sortField:"ADDED_AT",sortOrder:"DESC",genres:[],isExecuting:void 0}},localTracksSource:()=>{return{filter:void 0,sortField:"DURATION",sortOrder:"DESC",isExecuting:void 0}},topTracksSource:()=>{return{timeRange:"short_term",offset:void 0,limit:void 0,isExecuting:void 0}},mode:()=>{return{mode:"1",isExecuting:void 0}},shuffle:()=>({isExecuting:void 0}),deduplicate:()=>({isExecuting:void 0}),result:()=>({isExecuting:void 0}),libraryArtistSource:()=>{return{uri:"",isExecuting:void 0,trackType:"liked"}}},Xf=e=>Wf[e](),Yf={likedSongsSource:(e,t)=>new Ff(e.id,[],e.data),localTracksSource:(e,t)=>new jf(e.id,[],e.data),libraryPlaylistSource:(e,t)=>new zf(e.id,[],e.data),topTracksSource:(e,t)=>new Kf(e.id,[],e.data),libraryAlbumSource:(e,t)=>new Cf(e.id,[],e.data),libraryArtistSource:(e,t)=>new Pf(e.id,t.map(e=>e.id),e.data),deduplicate:(e,t)=>new yf(e.id,t.map(e=>e.id),e.data),isPlayable:(e,t)=>new rf(e.id,t.map(e=>e.id),e.data),acousticness:(e,t)=>new Xd(e.id,t.map(e=>e.id),e.data),shuffle:(e,t)=>new vf(e.id,t.map(e=>e.id),e.data),result:(e,t)=>new _f(e.id,t.map(e=>e.id),e.data),sort:(e,t)=>new wf(e.id,t.map(e=>e.id),e.data),danceability:(e,t)=>new qd(e.id,t.map(e=>e.id),e.data),energy:(e,t)=>new Jd(e.id,t.map(e=>e.id),e.data),instrumentalness:(e,t)=>new ef(e.id,t.map(e=>e.id),e.data),liveness:(e,t)=>new of(e.id,t.map(e=>e.id),e.data),loudness:(e,t)=>new lf(e.id,t.map(e=>e.id),e.data),speechiness:(e,t)=>new ff(e.id,t.map(e=>e.id),e.data),valence:(e,t)=>new gf(e.id,t.map(e=>e.id),e.data),tempo:(e,t)=>new pf(e.id,t.map(e=>e.id),e.data),mode:(e,t)=>new cf(e.id,t.map(e=>e.id),e.data)};function qf(e){return"remove"===e.type}var Gf=nn((a,i)=>({reactFlowInstance:null,nodes:[],edges:[],result:[],workflowId:xu(),workflowName:"My workflow",hasPendingChanges:!1,anyExecuting:!1,setReactFlowInstance:e=>{a({reactFlowInstance:e})},onNodesChange:e=>{a({nodes:go(e,i().nodes)}),e.some(e=>{return"position"===(t=e).type&&void 0!==t.position||qf(e);var t})&&a({hasPendingChanges:!0})},onEdgesChange:e=>{a({edges:yo(e,i().edges)}),e.some(e=>qf(e))&&a({hasPendingChanges:!0})},onConnect:e=>{a({edges:oi(e,i().edges),hasPendingChanges:!0})},addNode:(e,t)=>{t={id:xu(),type:e,position:t,data:Xf(e)};a({nodes:i().nodes.concat(t),hasPendingChanges:!0})},updateNodeData:(t,n)=>{a({nodes:i().nodes.map(e=>e.id===t?{...e,data:{...e.data,...n}}:e),hasPendingChanges:!0}),a({anyExecuting:i().nodes.some(e=>!0===e.data.isExecuting)})},setResult:e=>{a({result:e})},setWorkflowName:e=>{a({workflowName:e,hasPendingChanges:!0})},resetState:()=>{a({nodes:[],edges:[],result:[],workflowId:xu(),workflowName:"My workflow",hasPendingChanges:!1})},onWorkflowSaved:()=>{a({hasPendingChanges:!1})},loadWorkflow:e=>{var{x:t=0,y:n=0,zoom:r=1}=e.viewport;i().reactFlowInstance?.setViewport({x:t,y:n,zoom:r}),a({nodes:e.nodes,edges:e.edges,hasPendingChanges:!1,workflowId:e.id,workflowName:e.name})},nodeFormValidationCallbacks:new Map,addValidationCallback:(e,t)=>{a({nodeFormValidationCallbacks:new Map(i().nodeFormValidationCallbacks).set(e,t)})},removeValidationCallback:e=>{var t=new Map(i().nodeFormValidationCallbacks);t.delete(e),a({nodeFormValidationCallbacks:t})},getNodes:()=>i().nodes,getEdges:()=>i().edges})),Jf=Gf;function Qf(t,e,n,r){const{updateNodeData:a,anyExecuting:i,addValidationCallback:o,removeValidationCallback:s}=Jf(Gs(e=>({updateNodeData:e.updateNodeData,anyExecuting:e.anyExecuting,addValidationCallback:e.addValidationCallback,removeValidationCallback:e.removeValidationCallback})));var l=(0,vu.useCallback)(e=>{a(t,e)},[t,a]);const{formState:{errors:u},trigger:c,control:d,getValues:f,setError:m}=du({mode:"onChange",disabled:i,defaultValues:n,values:e,resolver:yu(r)});return(0,vu.useEffect)(()=>(o(t,async()=>c()),()=>{s(t)}),[t,o,s,c]),{errors:u,getValues:f,control:d,setError:m,updateNodeField:l}}var em=t(b()),tm=t(b()),nm=t(re());function rm(a){const{min:i,max:o,step:s}=a;return tm.default.createElement("div",null,tm.default.createElement(Ml,{name:"range",control:a.control,render:({field:{onChange:t,value:n,ref:e},formState:{disabled:r}})=>tm.default.createElement("div",{className:"flex flex-wrap justify-center"},tm.default.createElement(nm.Range,{values:[n.min,n.max],step:s,min:i,max:o,rtl:!1,onChange:e=>{e={min:e[0],max:e[1]};t(e),a.onChange(e)},disabled:r,ref:e,renderTrack:({props:e,children:t})=>tm.default.createElement("div",{onMouseDown:e.onMouseDown,onTouchStart:e.onTouchStart,style:{...e.style,height:"36px",display:"flex",width:"200px"}},tm.default.createElement("div",{ref:e.ref,style:{height:"5px",width:"100%",borderRadius:"4px",background:(0,nm.getTrackBackground)({values:[n.min,n.max],colors:r?["var(--spice-tab-active)","var(--spice-button-disabled)","var(--spice-tab-active)"]:["var(--spice-tab-active)","var(--spice-button)","var(--spice-tab-active)"],min:i,max:o,rtl:!1}),alignSelf:"center"}},t)),renderThumb:({index:e,props:t})=>tm.default.createElement("div",{...t,key:t.key,style:{...t.style,height:"14px",width:"14px",borderRadius:"7px",backgroundColor:r?"var(--spice-subtext)":"var(--spice-text)",display:"flex",justifyContent:"center",alignItems:"center"}},tm.default.createElement("div",{style:{position:"absolute",bottom:"-28px",color:"var(--spice-text)",fontSize:"small",fontWeight:"bold",padding:"4px",borderRadius:"4px"}},[n.min,n.max][e]))}))}))}var am=t(b());function im(e){return am.default.createElement("div",{className:Spicetify.classnames("bg-spice-main-elevated rounded-sm text-base",e.isExecuting?"!outline-spice-button rounded-md !outline-2 !outline-solid":"",!e.isExecuting&&e.isSelected?"!outline-spice-button-transparent rounded-md !outline-2 !outline-solid":"",e.classname)},e.children)}var om=t(b());function sm(e){return om.default.createElement("div",{className:Spicetify.classnames("nowheel nodrag flex cursor-default flex-col gap-1 !p-2",e.className)},e.children)}var lm=t(b());function um(e){return lm.default.createElement("div",{className:"rounded-t-sm border-t !px-2 !py-0.5",style:{backgroundColor:e.backgroundColor,color:e.textColor}},lm.default.createElement(_,{paddingBottom:"0",weight:"bold"},e.label))}function cm(){return lm.default.createElement(um,{label:"Source",backgroundColor:"cornflowerblue",textColor:"black"})}function dm(){return lm.default.createElement(um,{label:"Processing",backgroundColor:"greenyellow",textColor:"black"})}function fm(){return lm.default.createElement(um,{label:"Filter",backgroundColor:"violet",textColor:"black"})}var mm=t(b()),pm=(...e)=>e.filter((e,t,n)=>Boolean(e)&&n.indexOf(e)===t).join(" "),hm=t(b()),gm={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},ym=(0,hm.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:o,...s},l)=>(0,hm.createElement)("svg",{ref:l,...gm,width:t,height:t,stroke:e,strokeWidth:r?24*Number(n)/Number(t):n,className:pm("lucide",a),...s},[...o.map(([e,t])=>(0,hm.createElement)(e,t)),...Array.isArray(i)?i:[i]])),n=(r,a)=>{var e=(0,mm.forwardRef)(({className:e,...t},n)=>(0,mm.createElement)(ym,{ref:n,iconNode:a,className:pm("lucide-"+r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),e),...t}));return e.displayName=""+r,e},vm=n("ArrowRightFromLine",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M21 12H7",key:"13ipq5"}],["path",{d:"m15 18 6-6-6-6",key:"6tx3qv"}]]),bm=n("BadgePlus",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["line",{x1:"12",x2:"12",y1:"8",y2:"16",key:"10p56q"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),Em=n("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),wm=n("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),_m=n("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),xm=n("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]),Sm=n("Import",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m8 11 4 4 4-4",key:"1dohi6"}],["path",{d:"M8 5H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-4",key:"1ywtjm"}]]),km=n("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),Im=n("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]),Cm=n("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),Nm=n("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Tm=n("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),Rm=n("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Mm=t(b());function Om(e){return Mm.default.createElement("div",{className:"!mb-2 flex items-center gap-2"},Mm.default.createElement(_,{elementType:"p",weight:"bold",paddingBottom:"0"},e.title),e.tooltip&&Mm.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:e.tooltip,showDelay:100},Mm.default.createElement(_m,{size:14,strokeWidth:1.5,className:"cursor-help"})))}var Am=t(b());var Dm=t(b());var Pm=t(b());var Lm=t(b()),Fm=t(b());function Vm(o){return Fm.default.createElement(Ml,{control:o.control,name:o.name,render:({field:{onChange:t,onBlur:e,value:n,name:r,ref:a},formState:{disabled:i}})=>Fm.default.createElement("input",{type:"checkbox",onChange:e=>{e=e.target.checked;t(e),o.onChange(e)},onBlur:e,value:n,name:r,disabled:i,ref:a})})}var jm=t(b()),Bm=t(b()),zm=t(b());function $m(e){return zm.default.createElement(zm.default.Fragment,null,e.error&&zm.default.createElement("div",null,zm.default.createElement(_,{elementType:"small",semanticColor:"textNegative"},e.error.message)))}function Hm(e){return Bm.default.createElement("label",{className:"flex flex-row items-start justify-between gap-5"},Bm.default.createElement("div",{className:"flex items-center gap-1"},Bm.default.createElement(_,{elementType:"small"},e.label),e.tooltip&&Bm.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:e.tooltip,showDelay:100},Bm.default.createElement(_m,{size:12,strokeWidth:1.5,className:"cursor-help"}))),Bm.default.createElement("div",{className:"w-[200px]"},e.children,Bm.default.createElement($m,{error:e.error})))}function Um(e){return jm.default.createElement(Hm,{label:e.label,error:e.error,tooltip:e.tooltip},jm.default.createElement("div",{className:"flex justify-end"},e.children))}var Zm=t(b());var Km=t(b());var Wm=t(b()),Xm=t(b());function Ym(n){return Xm.default.createElement("select",{className:"main-dropDown-dropDown",name:n.name,disabled:n.disabled,value:n.selectedValue,onChange:t=>{var e=n.items.find(e=>e.value===t.target.value);e&&n.onItemClicked(e)},onBlur:n.onBlur,ref:n.ref},!n.selectedValue&&Xm.default.createElement("option",{value:n.selectedValue,disabled:!0,selected:!0},n.selectLabel),n.items.map(e=>Xm.default.createElement("option",{key:e.value,value:e.value},e.label)))}var qm=t(b());function Gm(o){return qm.default.createElement(Ml,{name:o.name,control:o.control,render:({field:{onChange:t,onBlur:e,value:n,name:r,ref:a},formState:{disabled:i}})=>qm.default.createElement(Ym,{selectLabel:o.label,selectedValue:n,items:o.items,onItemClicked:e=>{t(e.value),o.onChange&&o.onChange(e.value)},onBlur:e,name:r,disabled:i,ref:a})})}var Jm=[{label:"Major",value:"1"},{label:"Minor",value:"0"}];var Qm=t(b());var ep=t(b());var tp=t(b());var np=t(b());var rp=t(b());var ap=t(b()),ip={album:"Album",artist:"Artist",name:"Name",source:"Source",duration:"Duration"},op={asc:"Ascending",desc:"Descending"};var sp=t(b());var lp=t(b()),up=t(b(),1);function cp(e,s,t){const l=(0,up.useRef)(null),u=(0,up.useRef)(0),c=(0,up.useRef)(null),d=(0,up.useRef)([]),f=(0,up.useRef)(),m=(0,up.useRef)(),p=(0,up.useRef)(e),h=(0,up.useRef)(!0),g=(p.current=e,"undefined"!=typeof window),y=!s&&0!==s&&g;if("function"!=typeof e)throw new TypeError("Expected a function");s=+s||0;const v=!!(t=t||{}).leading,b=!("trailing"in t&&!t.trailing),E="maxWait"in t,w="debounceOnServer"in t&&!!t.debounceOnServer,_=E?Math.max(+t.maxWait||0,s):null;return(0,up.useEffect)(()=>(h.current=!0,()=>{h.current=!1}),[]),(0,up.useMemo)(()=>{const r=e=>{var t=d.current,n=f.current;return d.current=f.current=null,u.current=e,m.current=p.current.apply(n,t)},a=(e,t)=>{y&&cancelAnimationFrame(c.current),c.current=y?requestAnimationFrame(e):setTimeout(e,t)},i=e=>{var t;return!!h.current&&(t=e-l.current,!l.current||s<=t||t<0||E&&e-u.current>=_)},n=e=>(c.current=null,b&&d.current?r(e):(d.current=f.current=null,m.current)),o=()=>{var e,t=Date.now();if(i(t))return n(t);h.current&&(e=s-(t-l.current),t=E?Math.min(e,_-(t-u.current)):e,a(o,t))},e=(...e)=>{if(g||w){var t=Date.now(),n=i(t);if(d.current=e,f.current=this,l.current=t,n){if(!c.current&&h.current)return u.current=l.current,a(o,s),v?r(l.current):m.current;if(E)return a(o,s),r(l.current)}return c.current||a(o,s),m.current}};return e.cancel=()=>{c.current&&(y?cancelAnimationFrame:clearTimeout)(c.current),u.current=0,d.current=l.current=f.current=c.current=null},e.isPending=()=>!!c.current,e.flush=()=>c.current?n(Date.now()):m.current,e},[v,E,s,_,b,y,g,w])}function dp(n,r,a,t){const[e,i]=(0,lp.useState)(null),[o,s]=(0,lp.useState)(""),[l,u]=(0,lp.useState)([]),c=cp(e=>{r(e).then(e=>{u(e)}).catch(e=>{console.error("Failed to fetch items",e)})},200);const d=(0,lp.useCallback)((e,t,n)=>{i(e),s(t),u(n)},[]);var f=(0,lp.useCallback)(async e=>{var t;""===e?(t=await r(""),d(null,"",t)):null===(t=await n(e))?d(null,"",[]):d(t,a(t),[t])},[n,r,a,d]);return{selectedItem:e,onItemSelected:e=>{t(e),i(e),s(e?a(e):"")},items:l,inputValue:o,onInputChanged:e=>{s(e),c(e)},resetSelection:()=>{t(null),i(null),s("")},syncInputWithSelectedItem:()=>{s(e?a(e):"")},onSelectedIdChanged:f}}var fp=t(b()),mp=t(b());function pp(e,t){if(null==e)return{};var n,r={};for(n in e)if({}.hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}function P(){return(P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)!{}.hasOwnProperty.call(r,n)||(e[n]=r[n])}return e}).apply(null,arguments)}function hp(e,t){return(hp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var f=t(de()),L=t(b()),gp=t(e()),yp=e=>"object"==typeof e&&null!=e&&1===e.nodeType,vp=(e,t)=>(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e,bp=(e,t)=>{var n;return(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth)&&(n=getComputedStyle(e,null),vp(n.overflowY,t)||vp(n.overflowX,t)||!!(t=(e=>{if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}})(n=e))&&(t.clientHeight<n.scrollHeight||t.clientWidth<n.scrollWidth))},Ep=(e,t,n,r,a,i,o,s)=>i<e&&t<o||e<i&&o<t?0:i<=e&&s<=n||t<=o&&n<=s?i-e-r:t<o&&s<n||i<e&&n<s?o-t+a:0,wp=e=>{var t=e.parentElement;return null==t?e.getRootNode().host||null:t},_p=function(){return(_p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},xp=0;function Sp(e){return"function"==typeof e?e:kp}function kp(){}function Ip(e,t){e&&((e,t)=>{if("undefined"==typeof document)return[];const{scrollMode:L,block:r,inline:a,boundary:n,skipOverflowHiddenElements:F}=t,V="function"==typeof n?n:e=>e!==n;if(!yp(e))throw new TypeError("Invalid target");var i=document.scrollingElement||document.documentElement,o=[];let s=e;for(;yp(s)&&V(s);){if((s=wp(s))===i){o.push(s);break}null!=s&&s===document.body&&bp(s)&&!bp(document.documentElement)||null!=s&&bp(s,F)&&o.push(s)}var l=null!=(t=null==(t=window.visualViewport)?void 0:t.width)?t:innerWidth,u=null!=(t=null==(t=window.visualViewport)?void 0:t.height)?t:innerHeight,{scrollX:c,scrollY:d}=window,{height:f,width:m,top:p,right:h,bottom:g,left:y}=e.getBoundingClientRect(),{top:e,right:t,bottom:j,left:B}=(t=window.getComputedStyle(e),{top:parseFloat(t.scrollMarginTop)||0,right:parseFloat(t.scrollMarginRight)||0,bottom:parseFloat(t.scrollMarginBottom)||0,left:parseFloat(t.scrollMarginLeft)||0});let v="start"===r||"nearest"===r?p-e:"end"===r?g+j:p+f/2-e+j,b="center"===a?y+m/2-B+t:"end"===a?h+t:y-B;var E=[];for(let n=0;n<o.length;n++){var w=o[n],{height:_,width:x,top:S,right:k,bottom:I,left:C}=w.getBoundingClientRect();if("if-needed"===L&&0<=p&&0<=y&&g<=u&&h<=l&&(w===i&&!bp(w)||S<=p&&g<=I&&C<=y&&h<=k))return E;var N=getComputedStyle(w),T=parseInt(N.borderLeftWidth,10),R=parseInt(N.borderTopWidth,10),M=parseInt(N.borderRightWidth,10),N=parseInt(N.borderBottomWidth,10);let e=0,t=0;var O="offsetWidth"in w?w.offsetWidth-w.clientWidth-T-M:0,A="offsetHeight"in w?w.offsetHeight-w.clientHeight-R-N:0,D=!("offsetWidth"in w)||0===w.offsetWidth?0:x/w.offsetWidth,P=!("offsetHeight"in w)||0===w.offsetHeight?0:_/w.offsetHeight;i===w?(e="start"===r?v:"end"===r?v-u:"nearest"===r?Ep(d,d+u,u,R,N,d+v,d+v+f,f):v-u/2,t="start"===a?b:"center"===a?b-l/2:"end"===a?b-l:Ep(c,c+l,l,T,M,c+b,c+b+m,m),e=Math.max(0,e+d),t=Math.max(0,t+c)):(e="start"===r?v-S-R:"end"===r?v-I+N+A:"nearest"===r?Ep(S,I,_,R,N+A,v,v+f,f):v-(S+_/2)+A/2,t="start"===a?b-C-T:"center"===a?b-(C+x/2)+O/2:"end"===a?b-k+M+O:Ep(C,k,x,T,M+O,b,b+m,m),{scrollLeft:I,scrollTop:R}=w,e=0==P?0:Math.max(0,Math.min(R+e/P,w.scrollHeight-_/P+A)),t=0==D?0:Math.max(0,Math.min(I+t/D,w.scrollWidth-x/D+O)),v+=R-e,b+=I-t),E.push({el:w,top:e,left:t})}return E})(e,{boundary:t,block:"nearest",scrollMode:"if-needed"}).forEach(function(e){var t=e.el,n=e.top,e=e.left;t.scrollTop=n,t.scrollLeft=e})}function Cp(e,t,n){return e===t||t instanceof n.Node&&e.contains&&e.contains(t)}function Np(r,a){var i;function o(){i&&clearTimeout(i)}function e(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o(),i=setTimeout(function(){i=null,r.apply(void 0,t)},a)}return e.cancel=o,e}function Tp(){for(var e=arguments.length,a=new Array(e),t=0;t<e;t++)a[t]=arguments[t];return function(t){for(var e=arguments.length,n=new Array(1<e?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return a.some(function(e){return e&&e.apply(void 0,[t].concat(n)),t.preventDownshiftDefault||t.hasOwnProperty("nativeEvent")&&t.nativeEvent.preventDownshiftDefault})}}function Rp(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(t){n.forEach(function(e){"function"==typeof e?e(t):e&&(e.current=t)})}}function Mp(){return String(xp++)}function Op(e){var t=e.isOpen,n=e.resultCount,e=e.previousResultCount;return t?n?n!==e?n+" result"+(1===n?" is":"s are")+" available, use up and down arrow keys to navigate. Press Enter key to select.":"":"No results are available.":""}function Ap(e,t){return!(e=Array.isArray(e)?e[0]:e)&&t?t:e}function Dp(e){return"string"==typeof e.type}function Pp(e){return e.props}var Lp=["highlightedIndex","inputValue","isOpen","selectedItem","type"];function Fp(t){void 0===t&&(t={});var n={};return Lp.forEach(function(e){t.hasOwnProperty(e)&&(n[e]=t[e])}),n}function Vp(n,r){return n&&r?Object.keys(n).reduce(function(e,t){return e[t]=(jp(r,t)?r:n)[t],e},{}):n}function jp(e,t){return void 0!==e[t]}function Bp(e){var t=e.key,e=e.keyCode;return 37<=e&&e<=40&&0!==t.indexOf("Arrow")?"Arrow"+t:t}function zp(e,t,n,r,a){void 0===a&&(a=!1);var i,o,s=n.length;return 0===s?-1:(o=s-1,(i=(e="number"!=typeof e||e<0||o<e?0<t?-1:1+o:e)+t)<0?i=a?o:0:o<i&&(i=a?0:o),-1===(o=$p(i,t<0,n,r,a))?s<=e?-1:e:o)}function $p(e,t,n,r,a){void 0===a&&(a=!1);var i=n.length;if(t){for(var o=e;0<=o;o--)if(!r(n[o],o))return o}else for(var s=e;s<i;s++)if(!r(n[s],s))return s;return a?$p(t?i-1:0,t,n,r):-1}function Hp(t,e,n,r){return void 0===r&&(r=!0),n&&e.some(function(e){return e&&(Cp(e,t,n)||r&&Cp(e,n.document.activeElement,n))})}var Up=kp,Up=function(e,t,n){var r="This prop should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled Downshift element for the lifetime of the component. More info: https://github.com/downshift-js/downshift#control-props";Object.keys(e).forEach(function(e){void 0!==t[e]&&void 0===n[e]?console.error('downshift: A component has changed the controlled prop "'+e+'" to be uncontrolled. '+r):void 0===t[e]&&void 0!==n[e]&&console.error('downshift: A component has changed the uncontrolled prop "'+e+'" to be controlled. '+r)})},Zp=Np(function(e){Kp(e).textContent=""},500);function Kp(e){var t=e.getElementById("a11y-status-message");return t||((t=e.createElement("div")).setAttribute("id","a11y-status-message"),t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-relevant","additions text"),Object.assign(t.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),e.body.appendChild(t)),t}function Wp(e,t){e&&t&&(Kp(t).textContent=e,Zp(t))}var Xp="__autocomplete_unknown__",Yp="__autocomplete_mouseup__",qp="__autocomplete_item_mouseenter__",Gp="__autocomplete_keydown_arrow_up__",Jp="__autocomplete_keydown_arrow_down__",Qp="__autocomplete_keydown_escape__",eh="__autocomplete_keydown_enter__",th="__autocomplete_keydown_home__",nh="__autocomplete_keydown_end__",rh="__autocomplete_click_item__",ah="__autocomplete_blur_input__",ih="__autocomplete_change_input__",oh="__autocomplete_keydown_space_button__",sh="__autocomplete_click_button__",lh="__autocomplete_blur_button__",uh="__autocomplete_controlled_prop_updated_selected_item__",ch="__autocomplete_touchend__",dh=Object.freeze({__proto__:null,blurButton:lh,blurInput:ah,changeInput:ih,clickButton:sh,clickItem:rh,controlledPropUpdatedSelectedItem:uh,itemMouseEnter:qp,keyDownArrowDown:Jp,keyDownArrowUp:Gp,keyDownEnd:nh,keyDownEnter:eh,keyDownEscape:Qp,keyDownHome:th,keyDownSpaceButton:oh,mouseUp:Yp,touchEnd:ch,unknown:Xp}),fh=["refKey","ref"],mh=["onClick","onPress","onKeyDown","onKeyUp","onBlur"],ph=["onKeyDown","onBlur","onChange","onInput","onChangeText"],hh=["refKey","ref"],gh=["onMouseMove","onMouseDown","onClick","onPress","index","item"];function yh(e,t){t=t.refKey;e||console.error('downshift: The ref prop "'+t+'" from getMenuProps was not applied correctly on your menu element.')}var vh={highlightedIndex:-1,isOpen:!(function(){var e=function(o){function e(e){var c=o.call(this,e)||this,e=(c.id=c.props.id||"downshift-"+Mp(),c.menuId=c.props.menuId||c.id+"-menu",c.labelId=c.props.labelId||c.id+"-label",c.inputId=c.props.inputId||c.id+"-input",c.getItemId=c.props.getItemId||function(e){return c.id+"-item-"+e},c.items=[],c.itemCount=null,c.previousResultCount=0,c.timeoutIds=[],c.internalSetTimeout=function(e,t){var n=setTimeout(function(){c.timeoutIds=c.timeoutIds.filter(function(e){return e!==n}),e()},t);c.timeoutIds.push(n)},c.setItemCount=function(e){c.itemCount=e},c.unsetItemCount=function(){c.itemCount=null},c.isItemDisabled=function(e,t){t=c.getItemNodeFromIndex(t);return t&&t.hasAttribute("disabled")},c.setHighlightedIndex=function(e,t){void 0===e&&(e=c.props.defaultHighlightedIndex),t=Fp(t=void 0===t?{}:t),c.internalSetState(P({highlightedIndex:e},t))},c.clearSelection=function(e){c.internalSetState({selectedItem:null,inputValue:"",highlightedIndex:c.props.defaultHighlightedIndex,isOpen:c.props.defaultIsOpen},e)},c.selectItem=function(e,t,n){t=Fp(t),c.internalSetState(P({isOpen:c.props.defaultIsOpen,highlightedIndex:c.props.defaultHighlightedIndex,selectedItem:e,inputValue:c.props.itemToString(e)},t),n)},c.selectItemAtIndex=function(e,t,n){e=c.items[e];null!=e&&c.selectItem(e,t,n)},c.selectHighlightedItem=function(e,t){return c.selectItemAtIndex(c.getState().highlightedIndex,e,t)},c.internalSetState=function(e,t){var a,i,o={},s="function"==typeof e;return!s&&e.hasOwnProperty("inputValue")&&c.props.onInputValueChange(e.inputValue,P({},c.getStateAndHelpers(),e)),c.setState(function(t){t=c.getState(t);var n=s?e(t):e,n=c.props.stateReducer(t,n),r=(a=n.hasOwnProperty("selectedItem"),{});return a&&n.selectedItem!==t.selectedItem&&(i=n.selectedItem),n.type||(n.type=Xp),Object.keys(n).forEach(function(e){t[e]!==n[e]&&(o[e]=n[e]),"type"===e||(n[e],jp(c.props,e))||(r[e]=n[e])}),s&&n.hasOwnProperty("inputValue")&&c.props.onInputValueChange(n.inputValue,P({},c.getStateAndHelpers(),n)),r},function(){Sp(t)(),1<Object.keys(o).length&&c.props.onStateChange(o,c.getStateAndHelpers()),a&&c.props.onSelect(e.selectedItem,c.getStateAndHelpers()),void 0!==i&&c.props.onChange(i,c.getStateAndHelpers()),c.props.onUserAction(o,c.getStateAndHelpers())})},c.rootRef=function(e){return c._rootNode=e},c.getRootProps=function(e,t){var n,e=void 0===e?{}:e,r=e.refKey,r=void 0===r?"ref":r,a=e.ref,e=pp(e,fh),t=(void 0===t?{}:t).suppressRefError,t=void 0!==t&&t;c.getRootProps.called=!0,c.getRootProps.refKey=r,c.getRootProps.suppressRefError=t;t=c.getState().isOpen;return P(((n={})[r]=Rp(a,c.rootRef),n.role="combobox",n["aria-expanded"]=t,n["aria-haspopup"]="listbox",n["aria-owns"]=t?c.menuId:void 0,n["aria-labelledby"]=c.labelId,n),e)},c.keyDownHandlers={ArrowDown:function(e){var t=this;e.preventDefault(),this.getState().isOpen?(e=e.shiftKey?5:1,this.moveHighlightedIndex(e,{type:Jp})):this.internalSetState({isOpen:!0,type:Jp},function(){var e=t.getItemCount();0<e&&(e=zp(t.getState().highlightedIndex,1,{length:e},t.isItemDisabled,!0),t.setHighlightedIndex(e,{type:Jp}))})},ArrowUp:function(e){var t=this;e.preventDefault(),this.getState().isOpen?(e=e.shiftKey?-5:-1,this.moveHighlightedIndex(e,{type:Gp})):this.internalSetState({isOpen:!0,type:Gp},function(){var e=t.getItemCount();0<e&&(e=zp(t.getState().highlightedIndex,-1,{length:e},t.isItemDisabled,!0),t.setHighlightedIndex(e,{type:Gp}))})},Enter:function(e){var t,n;229!==e.which&&(n=(t=this.getState()).isOpen,t=t.highlightedIndex,n)&&null!=t&&(e.preventDefault(),n=this.items[t],e=this.getItemNodeFromIndex(t),null==n||e&&e.hasAttribute("disabled")||this.selectHighlightedItem({type:eh}))},Escape:function(e){e.preventDefault(),this.reset(P({type:Qp},!this.state.isOpen&&{selectedItem:null,inputValue:""}))}},c.buttonKeyDownHandlers=P({},c.keyDownHandlers,{" ":function(e){e.preventDefault(),this.toggleMenu({type:oh})}}),c.inputKeyDownHandlers=P({},c.keyDownHandlers,{Home:function(e){var t=this.getState().isOpen;t&&(e.preventDefault(),(e=this.getItemCount())<=0||!t||(t=$p(0,!1,{length:e},this.isItemDisabled),this.setHighlightedIndex(t,{type:th})))},End:function(e){var t=this.getState().isOpen;t&&(e.preventDefault(),(e=this.getItemCount())<=0||!t||(t=$p(e-1,!0,{length:e},this.isItemDisabled),this.setHighlightedIndex(t,{type:nh})))}}),c.getToggleButtonProps=function(e){var e=void 0===e?{}:e,t=e.onClick,n=(e.onPress,e.onKeyDown),r=e.onKeyUp,a=e.onBlur,e=pp(e,mh),i=c.getState().isOpen,t={onClick:Tp(t,c.buttonHandleClick),onKeyDown:Tp(n,c.buttonHandleKeyDown),onKeyUp:Tp(r,c.buttonHandleKeyUp),onBlur:Tp(a,c.buttonHandleBlur)};return P({type:"button",role:"button","aria-label":i?"close menu":"open menu","aria-haspopup":!0,"data-toggle":!0},e.disabled?{}:t,e)},c.buttonHandleKeyUp=function(e){e.preventDefault()},c.buttonHandleKeyDown=function(e){var t=Bp(e);c.buttonKeyDownHandlers[t]&&c.buttonKeyDownHandlers[t].call(c,e)},c.buttonHandleClick=function(e){var t,n;e.preventDefault(),c.props.environment&&(t=(n=c.props.environment.document).body,n=n.activeElement,t)&&t===n&&e.target.focus(),c.internalSetTimeout(function(){return c.toggleMenu({type:sh})})},c.buttonHandleBlur=function(e){var t=e.target;c.internalSetTimeout(function(){var e;c.isMouseDown||!c.props.environment||null!=(e=c.props.environment.document.activeElement)&&e.id===c.inputId||e===t||c.reset({type:lh})})},c.getLabelProps=function(e){return P({htmlFor:c.inputId,id:c.labelId},e)},c.getInputProps=function(e){var t,e=void 0===e?{}:e,n=e.onKeyDown,r=e.onBlur,a=e.onChange,i=e.onInput,e=(e.onChangeText,pp(e,ph)),o={},s=c.getState(),l=s.inputValue,u=s.isOpen,s=s.highlightedIndex;return e.disabled||((t={}).onChange=Tp(a,i,c.inputHandleChange),t.onKeyDown=Tp(n,c.inputHandleKeyDown),t.onBlur=Tp(r,c.inputHandleBlur),o=t),P({"aria-autocomplete":"list","aria-activedescendant":u&&"number"==typeof s&&0<=s?c.getItemId(s):void 0,"aria-controls":u?c.menuId:void 0,"aria-labelledby":e&&e["aria-label"]?void 0:c.labelId,autoComplete:"off",value:l,id:c.inputId},o,e)},c.inputHandleKeyDown=function(e){var t=Bp(e);t&&c.inputKeyDownHandlers[t]&&c.inputKeyDownHandlers[t].call(c,e)},c.inputHandleChange=function(e){c.internalSetState({type:ih,isOpen:!0,inputValue:e.target.value,highlightedIndex:c.props.defaultHighlightedIndex})},c.inputHandleBlur=function(){c.internalSetTimeout(function(){var e,t;c.isMouseDown||!c.props.environment||(null==(t=c.props.environment.document.activeElement)||null==(e=t.dataset)?void 0:e.toggle)&&c._rootNode&&c._rootNode.contains(t)||c.reset({type:ah})})},c.menuRef=function(e){c._menuNode=e},c.getMenuProps=function(e,t){var e=void 0===e?{}:e,n=e.refKey,n=void 0===n?"ref":n,r=e.ref,e=pp(e,hh),t=(void 0===t?{}:t).suppressRefError,t=void 0!==t&&t;return c.getMenuProps.called=!0,c.getMenuProps.refKey=n,c.getMenuProps.suppressRefError=t,P(((t={})[n]=Rp(r,c.menuRef),t.role="listbox",t["aria-labelledby"]=e&&e["aria-label"]?void 0:c.labelId,t.id=c.menuId,t),e)},c.getItemProps=function(e){var e=void 0===e?{}:e,t=e.onMouseMove,n=e.onMouseDown,r=e.onClick,a=(e.onPress,e.index),i=e.item,i=void 0===i?void console.error('The property "item" is required in "getItemProps"'):i,e=pp(e,gh),i=(void 0===a?(c.items.push(i),a=c.items.indexOf(i)):c.items[a]=i,r),t=((r={onMouseMove:Tp(t,function(){a!==c.getState().highlightedIndex&&(c.setHighlightedIndex(a,{type:qp}),c.avoidScrolling=!0,c.internalSetTimeout(function(){return c.avoidScrolling=!1},250))}),onMouseDown:Tp(n,function(e){e.preventDefault()})}).onClick=Tp(i,function(){c.selectItemAtIndex(a,{type:rh})}),r),n=e.disabled?{onMouseDown:t.onMouseDown}:t;return P({id:c.getItemId(a),role:"option","aria-selected":c.getState().highlightedIndex===a},n,e)},c.clearItems=function(){c.items=[]},c.reset=function(t,e){t=Fp(t=void 0===t?{}:t),c.internalSetState(function(e){e=e.selectedItem;return P({isOpen:c.props.defaultIsOpen,highlightedIndex:c.props.defaultHighlightedIndex,inputValue:c.props.itemToString(e)},t)},e)},c.toggleMenu=function(n,r){n=Fp(n=void 0===n?{}:n),c.internalSetState(function(e){e=e.isOpen;return P({isOpen:!e},e&&{highlightedIndex:c.props.defaultHighlightedIndex},n)},function(){var e=c.getState(),t=e.isOpen,e=e.highlightedIndex;t&&0<c.getItemCount()&&"number"==typeof e&&c.setHighlightedIndex(e,n),Sp(r)()})},c.openMenu=function(e){c.internalSetState({isOpen:!0},e)},c.closeMenu=function(e){c.internalSetState({isOpen:!1},e)},c.updateStatus=Np(function(){var e,t,n;null!=(e=c.props)&&null!=(e=e.environment)&&e.document&&(e=c.getState(),n=c.items[e.highlightedIndex],t=c.getItemCount(),n=c.props.getA11yStatusMessage(P({itemToString:c.props.itemToString,previousResultCount:c.previousResultCount,resultCount:t,highlightedItem:n},e)),c.previousResultCount=t,Wp(n,c.props.environment.document))},200),c.props),t=e.defaultHighlightedIndex,n=e.initialHighlightedIndex,r=e.defaultIsOpen,a=e.initialIsOpen,i=e.initialInputValue,e=e.initialSelectedItem,t=c.getState({highlightedIndex:void 0===n?t:n,isOpen:void 0===a?r:a,inputValue:void 0===i?"":i,selectedItem:void 0===e?null:e});return null!=t.selectedItem&&void 0===c.props.initialInputValue&&(t.inputValue=c.props.itemToString(t.selectedItem)),c.state=t,c}t=o,(n=e).prototype=Object.create(t.prototype),hp(n.prototype.constructor=n,t);var t,n=e.prototype;return n.internalClearTimeouts=function(){this.timeoutIds.forEach(function(e){clearTimeout(e)}),this.timeoutIds=[]},n.getState=function(e){return Vp(e=void 0===e?this.state:e,this.props)},n.getItemCount=function(){var e=this.items.length;return null!=this.itemCount?e=this.itemCount:void 0!==this.props.itemCount&&(e=this.props.itemCount),e},n.getItemNodeFromIndex=function(e){return this.props.environment?this.props.environment.document.getElementById(this.getItemId(e)):null},n.scrollHighlightedItemIntoView=function(){var e=this.getItemNodeFromIndex(this.getState().highlightedIndex);this.props.scrollIntoView(e,this._menuNode)},n.moveHighlightedIndex=function(e,t){var n=this.getItemCount(),r=this.getState().highlightedIndex;0<n&&(r=zp(r,e,{length:n},this.isItemDisabled,!0),this.setHighlightedIndex(r,t))},n.getStateAndHelpers=function(){var e=this.getState(),t=e.highlightedIndex,n=e.inputValue,r=e.selectedItem,e=e.isOpen,a=this.props.itemToString,i=this.id,o=this.getRootProps,s=this.getToggleButtonProps,l=this.getLabelProps,u=this.getMenuProps,c=this.getInputProps,d=this.getItemProps,f=this.openMenu,m=this.closeMenu,p=this.toggleMenu,h=this.selectItem,g=this.selectItemAtIndex,y=this.selectHighlightedItem,v=this.setHighlightedIndex,b=this.clearSelection,E=this.clearItems;return{getRootProps:o,getToggleButtonProps:s,getLabelProps:l,getMenuProps:u,getInputProps:c,getItemProps:d,reset:this.reset,openMenu:f,closeMenu:m,toggleMenu:p,selectItem:h,selectItemAtIndex:g,selectHighlightedItem:y,setHighlightedIndex:v,clearSelection:b,clearItems:E,setItemCount:this.setItemCount,unsetItemCount:this.unsetItemCount,setState:this.internalSetState,itemToString:a,id:i,highlightedIndex:t,inputValue:n,isOpen:e,selectedItem:r}},n.componentDidMount=function(){var e,t,n,r,a,i,o=this;this.getMenuProps.called&&!this.getMenuProps.suppressRefError&&yh(this._menuNode,this.getMenuProps),this.props.environment?(t=function(e){o.isMouseDown=!1,!Hp(e.target,[o._rootNode,o._menuNode],o.props.environment)&&o.getState().isOpen&&o.reset({type:Yp},function(){return o.props.onOuterClick(o.getStateAndHelpers())})},n=function(){o.isTouchMove=!1},r=function(){o.isTouchMove=!0},a=function(e){e=Hp(e.target,[o._rootNode,o._menuNode],o.props.environment,!1);o.isTouchMove||e||!o.getState().isOpen||o.reset({type:ch},function(){return o.props.onOuterClick(o.getStateAndHelpers())})},(i=this.props.environment).addEventListener("mousedown",e=function(){o.isMouseDown=!0}),i.addEventListener("mouseup",t),i.addEventListener("touchstart",n),i.addEventListener("touchmove",r),i.addEventListener("touchend",a),this.cleanup=function(){o.internalClearTimeouts(),o.updateStatus.cancel(),i.removeEventListener("mousedown",e),i.removeEventListener("mouseup",t),i.removeEventListener("touchstart",n),i.removeEventListener("touchmove",r),i.removeEventListener("touchend",a)}):this.cleanup=function(){o.internalClearTimeouts()}},n.shouldScroll=function(e,t){var n=(void 0===this.props.highlightedIndex?this.getState():this.props).highlightedIndex,t=(void 0===t.highlightedIndex?e:t).highlightedIndex;return n&&this.getState().isOpen&&!e.isOpen||n!==t},n.componentDidUpdate=function(e,t){Up(this.state,e,this.props),this.getMenuProps.called&&!this.getMenuProps.suppressRefError&&yh(this._menuNode,this.getMenuProps),jp(this.props,"selectedItem")&&this.props.selectedItemChanged(e.selectedItem,this.props.selectedItem)&&this.internalSetState({type:uh,inputValue:this.props.itemToString(this.props.selectedItem)}),!this.avoidScrolling&&this.shouldScroll(t,e)&&this.scrollHighlightedItemIntoView(),this.updateStatus()},n.componentWillUnmount=function(){this.cleanup()},n.render=function(){var e,t,n,r,a=Ap(this.props.children,kp),a=(this.clearItems(),this.getRootProps.called=!1,this.getRootProps.refKey=void 0,this.getRootProps.suppressRefError=void 0,this.getMenuProps.called=!1,this.getMenuProps.refKey=void 0,this.getMenuProps.suppressRefError=void 0,this.getLabelProps.called=!1,this.getInputProps.called=!1,Ap(a(this.getStateAndHelpers())));if(!a)return null;if(this.getRootProps.called||this.props.suppressRefError)return this.getRootProps.suppressRefError||this.props.suppressRefError||(e=a,t=this.getRootProps,n="ref"!==(t=t.refKey),!(r=!Dp(e))||n||(0,gp.isForwardRef)(e)?!r&&n&&console.error('downshift: You returned a DOM element. You should not specify a refKey in getRootProps. You specified "'+t+'"'):console.error("downshift: You returned a non-DOM element. You must specify a refKey in getRootProps"),(0,gp.isForwardRef)(e))||Pp(e)[t]||console.error('downshift: You must apply the ref prop "'+t+'" from getRootProps onto your root element.'),a;if(Dp(a))return(0,L.cloneElement)(a,this.getRootProps(Pp(a)));throw new Error("downshift: If you return a non-DOM element, you must apply the getRootProps function")},e}(L.Component);return e.defaultProps={defaultHighlightedIndex:null,defaultIsOpen:!1,getA11yStatusMessage:Op,itemToString:function(e){return null==e?"":("[object Object]"!==Object.prototype.toString.call(e)||e.hasOwnProperty("toString")||console.warn("downshift: An object was passed to the default implementation of `itemToString`. You should probably provide your own `itemToString` implementation. Please refer to the `itemToString` API documentation.","The object that was passed:",e),String(e))},onStateChange:kp,onInputValueChange:kp,onUserAction:kp,onChange:kp,onSelect:kp,onOuterClick:kp,selectedItemChanged:function(e,t){return e!==t},environment:"undefined"==typeof window?void 0:window,stateReducer:function(e,t){return t},suppressRefError:!1,scrollIntoView:Ip},e.stateChangeTypes=dh,e}().propTypes={children:f.default.func,defaultHighlightedIndex:f.default.number,defaultIsOpen:f.default.bool,initialHighlightedIndex:f.default.number,initialSelectedItem:f.default.any,initialInputValue:f.default.string,initialIsOpen:f.default.bool,getA11yStatusMessage:f.default.func,itemToString:f.default.func,onChange:f.default.func,onSelect:f.default.func,onStateChange:f.default.func,onInputValueChange:f.default.func,onUserAction:f.default.func,onOuterClick:f.default.func,selectedItemChanged:f.default.func,stateReducer:f.default.func,itemCount:f.default.number,id:f.default.string,environment:f.default.shape({addEventListener:f.default.func.isRequired,removeEventListener:f.default.func.isRequired,document:f.default.shape({createElement:f.default.func.isRequired,getElementById:f.default.func.isRequired,activeElement:f.default.any.isRequired,body:f.default.any.isRequired}).isRequired,Node:f.default.func.isRequired}),suppressRefError:f.default.bool,scrollIntoView:f.default.func,selectedItem:f.default.any,isOpen:f.default.bool,inputValue:f.default.string,highlightedIndex:f.default.number,labelId:f.default.string,inputId:f.default.string,menuId:f.default.string,getItemId:f.default.func}),selectedItem:null,inputValue:""};function bh(s,l,u){var e=s.props,t=s.type,c={};Object.keys(l).forEach(function(e){var t,n,r,a,i,o;t=e,r=l,a=u,i=(n=s).props,n=s.type,o="on"+Sh(t)+"Change",i[o]&&void 0!==a[t]&&a[t]!==r[t]&&i[o](P({type:n},a)),u[e]!==l[e]&&(c[e]=u[e])}),e.onStateChange&&Object.keys(c).length&&e.onStateChange(P({type:t},c))}var Eh=Np(function(e,t){Wp(e,t)},200),wh="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?L.useLayoutEffect:L.useEffect,_h="useId"in L.default?function(e){var t=e.id,n=e.labelId,r=e.menuId,a=e.getItemId,i=e.toggleButtonId,e=e.inputId,o="downshift-"+L.default.useId(),t=t||o;return(0,L.useRef)({labelId:n||t+"-label",menuId:r||t+"-menu",getItemId:a||function(e){return t+"-item-"+e},toggleButtonId:i||t+"-toggle-button",inputId:e||t+"-input"}).current}:function(e){var t=e.id,n=void 0===t?"downshift-"+Mp():t,t=e.labelId,r=e.menuId,a=e.getItemId,i=e.toggleButtonId,e=e.inputId;return(0,L.useRef)({labelId:t||n+"-label",menuId:r||n+"-menu",getItemId:a||function(e){return n+"-item-"+e},toggleButtonId:i||n+"-toggle-button",inputId:e||n+"-input"}).current};function xh(e,t,n,r){var a,i;if(void 0===e){if(void 0===t)throw new Error(r);a=n[t],i=t}else i=void 0===t?n.indexOf(e):t,a=e;return[a,i]}function Sh(e){return""+e.slice(0,1).toUpperCase()+e.slice(1)}function kh(e){var t=(0,L.useRef)(e);return t.current=e,t}function Ih(r,e,t,n){var a=(0,L.useRef)(),i=(0,L.useRef)(),o=(0,L.useCallback)(function(e,t){e=Vp(e,(i.current=t).props);var n=r(e,t);return t.props.stateReducer(e,P({},t,{changes:n}))},[r]),o=(0,L.useReducer)(o,e,t),s=o[0],l=o[1],u=kh(e),t=(0,L.useCallback)(function(e){return l(P({props:u.current},e))},[u]),c=i.current;return(0,L.useEffect)(function(){var e=Vp(a.current,null==c?void 0:c.props);c&&a.current&&!n(e,s)&&bh(c,e,s),a.current=s},[s,c,n]),[s,t]}function Ch(e,t,n,r){e=Ih(e,t,n,r),n=e[0],r=e[1];return[Vp(n,t),r]}gd={itemToString:function(e){return e?String(e):""},itemToKey:function(e){return e},stateReducer:function(e,t){return t.changes},scrollIntoView:Ip,environment:"undefined"==typeof window?void 0:window};function Nh(e,t,n){void 0===n&&(n=vh);e=e["default"+Sh(t)];return void 0!==e?e:n[t]}function Th(e,t,n){void 0===n&&(n=vh);var r=e[t];return void 0!==r||void 0!==(r=e["initial"+Sh(t)])?r:Nh(e,t,n)}function Rh(t){var n=Th(t,"selectedItem"),e=Th(t,"isOpen"),r=function(e){var t=Th(e,"highlightedIndex");if(-1<t&&e.isItemDisabled(e.items[t],t))return-1;return t}(t),a=Th(t,"inputValue");return{highlightedIndex:r<0&&n&&e?t.items.findIndex(function(e){return t.itemToKey(e)===t.itemToKey(n)}):r,isOpen:e,selectedItem:n,inputValue:a}}function Mh(e,t,n){var r=e.items,a=e.initialHighlightedIndex,i=e.defaultHighlightedIndex,o=e.isItemDisabled,s=e.itemToKey,l=t.selectedItem,e=t.highlightedIndex;return 0===r.length?-1:void 0===a||e!==a||o(r[a],a)?void 0===i||o(r[i],i)?l?r.findIndex(function(e){return s(l)===s(e)}):n<0&&!o(r[r.length-1],r.length-1)?r.length-1:0<n&&!o(r[0],0)?0:-1:i:a}function Oh(o,s,l){var u=(0,L.useRef)({isMouseDown:!1,isTouchMove:!1,isTouchEnd:!1});return(0,L.useEffect)(function(){var t;return o?(t=l.map(function(e){return e.current}),o.addEventListener("mousedown",e),o.addEventListener("mouseup",n),o.addEventListener("touchstart",r),o.addEventListener("touchmove",a),o.addEventListener("touchend",i),function(){o.removeEventListener("mousedown",e),o.removeEventListener("mouseup",n),o.removeEventListener("touchstart",r),o.removeEventListener("touchmove",a),o.removeEventListener("touchend",i)}):kp;function e(){u.current.isTouchEnd=!1,u.current.isMouseDown=!0}function n(e){u.current.isMouseDown=!1,Hp(e.target,t,o)||s()}function r(){u.current.isTouchEnd=!1,u.current.isTouchMove=!1}function a(){u.current.isTouchMove=!0}function i(e){u.current.isTouchEnd=!0,u.current.isTouchMove||Hp(e.target,t,o,!1)||s()}},[l,o,s]),u.current}var Ah=function(){return kp};function Dh(t,n,e,r){var a=(r=void 0===r?{}:r).document,i=jh();(0,L.useEffect)(function(){var e;t&&!i&&a&&(e=t(n),Eh(e,a))},e),(0,L.useEffect)(function(){return function(){var e;Eh.cancel(),(e=null==(e=a)?void 0:e.getElementById("a11y-status-message"))&&e.remove()}},[a])}function Ph(e){var t=e.highlightedIndex,n=e.isOpen,r=e.itemRefs,a=e.getItemNodeFromIndex,i=e.menuElement,o=e.scrollIntoView,s=(0,L.useRef)(!0);return wh(function(){t<0||!n||!Object.keys(r.current).length||(!1===s.current?s.current=!0:o(a(t),i))},[t]),s}var Ah=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=(0,L.useRef)(t.reduce(function(e,t){return e[t]={},e},{}));return(0,L.useEffect)(function(){Object.keys(a.current).forEach(function(e){var t,n,r=a.current[e];Object.keys(r).length?(t=r.suppressRefError,n=r.refKey,r=r.elementRef,t||null!=r&&r.current||console.error('downshift: The ref prop "'+n+'" from '+e+" was not applied correctly on your element.")):console.error("downshift: You forgot to call the "+e+" getter function on your component / element.")})},[]),(0,L.useCallback)(function(e,t,n,r){a.current[e]={suppressRefError:t,refKey:n,elementRef:r}},[])},Lh=kp;function Fh(e,t,n){var r;return void 0===n&&(n=!0),P({isOpen:!1,highlightedIndex:-1},(null==(r=e.items)?void 0:r.length)&&0<=t&&P({selectedItem:e.items[t],isOpen:Nh(e,"isOpen"),highlightedIndex:Nh(e,"highlightedIndex")},n&&{inputValue:e.itemToString(e.items[t])}))}function Vh(e,t){return e.isOpen===t.isOpen&&e.inputValue===t.inputValue&&e.highlightedIndex===t.highlightedIndex&&e.selectedItem===t.selectedItem}function jh(){var e=L.default.useRef(!0);return L.default.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]),e.current}function Bh(e){var t=Nh(e,"highlightedIndex");return-1<t&&e.isItemDisabled(e.items[t],t)?-1:t}Lh=function(e){var t=e.props,n=e.state,r=(0,L.useRef)(t),a=jh();(0,L.useEffect)(function(){a||(Up(n,r.current,t),r.current=t)},[n,t,a])},Sd={environment:f.default.shape({addEventListener:f.default.func.isRequired,removeEventListener:f.default.func.isRequired,document:f.default.shape({createElement:f.default.func.isRequired,getElementById:f.default.func.isRequired,activeElement:f.default.any.isRequired,body:f.default.any.isRequired}).isRequired,Node:f.default.func.isRequired}),itemToString:f.default.func,itemToKey:f.default.func,stateReducer:f.default.func},wd=P({},Sd,{getA11yStatusMessage:f.default.func,highlightedIndex:f.default.number,defaultHighlightedIndex:f.default.number,initialHighlightedIndex:f.default.number,isOpen:f.default.bool,defaultIsOpen:f.default.bool,initialIsOpen:f.default.bool,selectedItem:f.default.any,initialSelectedItem:f.default.any,defaultSelectedItem:f.default.any,id:f.default.string,labelId:f.default.string,menuId:f.default.string,getItemId:f.default.func,toggleButtonId:f.default.string,onSelectedItemChange:f.default.func,onHighlightedIndexChange:f.default.func,onStateChange:f.default.func,onIsOpenChange:f.default.func,scrollIntoView:f.default.func});function zh(e,t,n){var r,a=t.type,i=t.props;switch(a){case n.ItemMouseMove:r={highlightedIndex:t.disabled?-1:t.index};break;case n.MenuMouseLeave:r={highlightedIndex:-1};break;case n.ToggleButtonClick:case n.FunctionToggleMenu:r={isOpen:!e.isOpen,highlightedIndex:e.isOpen?-1:Mh(i,e,0)};break;case n.FunctionOpenMenu:r={isOpen:!0,highlightedIndex:Mh(i,e,0)};break;case n.FunctionCloseMenu:r={isOpen:!1};break;case n.FunctionSetHighlightedIndex:r={highlightedIndex:i.isItemDisabled(i.items[t.highlightedIndex],t.highlightedIndex)?-1:t.highlightedIndex};break;case n.FunctionSetInputValue:r={inputValue:t.inputValue};break;case n.FunctionReset:r={highlightedIndex:Bh(i),isOpen:Nh(i,"isOpen"),selectedItem:Nh(i,"selectedItem"),inputValue:Nh(i,"inputValue")};break;default:throw new Error("Reducer called without proper action type.")}return P({},e,r)}_p(_p({},wd),{items:f.default.array.isRequired,isItemDisabled:f.default.func}),_p(_p({},gd),{isItemDisabled:function(){return!1}});var $h="__input_keydown_arrow_down__",Hh="__input_keydown_arrow_up__",Uh="__input_keydown_escape__",Zh="__input_keydown_home__",Kh="__input_keydown_end__",Wh="__input_keydown_page_up__",Xh="__input_keydown_page_down__",Yh="__input_keydown_enter__",qh="__input_change__",Gh="__input_blur__",Jh="__input_click__",Qh="__menu_mouse_leave__",eg="__item_mouse_move__",tg="__item_click__",ng="__togglebutton_click__",rg="__function_toggle_menu__",ag="__function_open_menu__",ig="__function_close_menu__",og="__function_set_highlighted_index__",sg="__function_select_item__",lg="__function_set_input_value__",ug="__function_reset__",cg="__controlled_prop_updated_selected_item__",dg=Object.freeze({__proto__:null,ControlledPropUpdatedSelectedItem:cg,FunctionCloseMenu:ig,FunctionOpenMenu:ag,FunctionReset:ug,FunctionSelectItem:sg,FunctionSetHighlightedIndex:og,FunctionSetInputValue:lg,FunctionToggleMenu:rg,InputBlur:Gh,InputChange:qh,InputClick:Jh,InputKeyDownArrowDown:$h,InputKeyDownArrowUp:Hh,InputKeyDownEnd:Kh,InputKeyDownEnter:Yh,InputKeyDownEscape:Uh,InputKeyDownHome:Zh,InputKeyDownPageDown:Xh,InputKeyDownPageUp:Wh,ItemClick:tg,ItemMouseMove:eg,MenuMouseLeave:Qh,ToggleButtonClick:ng});function fg(e){var t=Rh(e),n=t.selectedItem,r=t.inputValue;return P({},t,{inputValue:r=""===r&&n&&void 0===e.defaultInputValue&&void 0===e.initialInputValue&&void 0===e.inputValue?e.itemToString(n):r})}var mg=P({},wd,{items:f.default.array.isRequired,isItemDisabled:f.default.func,inputValue:f.default.string,defaultInputValue:f.default.string,initialInputValue:f.default.string,inputId:f.default.string,onInputValueChange:f.default.func});var pg=kp,pg=function(e,t){f.default.checkPropTypes(mg,e,"prop",t.name)},hg=P({},gd,{isItemDisabled:function(){return!1}});function gg(e,t){var n,r,a=t.type,i=t.props,o=t.altKey;switch(a){case tg:r={isOpen:Nh(i,"isOpen"),highlightedIndex:Bh(i),selectedItem:i.items[t.index],inputValue:i.itemToString(i.items[t.index])};break;case $h:r=e.isOpen?{highlightedIndex:zp(e.highlightedIndex,1,i.items,i.isItemDisabled,!0)}:{highlightedIndex:o&&null==e.selectedItem?-1:Mh(i,e,1),isOpen:0<=i.items.length};break;case Hh:r=e.isOpen?o?Fh(i,e.highlightedIndex):{highlightedIndex:zp(e.highlightedIndex,-1,i.items,i.isItemDisabled,!0)}:{highlightedIndex:Mh(i,e,-1),isOpen:0<=i.items.length};break;case Yh:r=Fh(i,e.highlightedIndex);break;case Uh:r=P({isOpen:!1,highlightedIndex:-1},!e.isOpen&&{selectedItem:null,inputValue:""});break;case Wh:r={highlightedIndex:zp(e.highlightedIndex,-10,i.items,i.isItemDisabled,!0)};break;case Xh:r={highlightedIndex:zp(e.highlightedIndex,10,i.items,i.isItemDisabled,!0)};break;case Zh:r={highlightedIndex:$p(0,!1,i.items,i.isItemDisabled)};break;case Kh:r={highlightedIndex:$p(i.items.length-1,!0,i.items,i.isItemDisabled)};break;case Gh:r=P({isOpen:!1,highlightedIndex:-1},0<=e.highlightedIndex&&(null==(n=i.items)?void 0:n.length)&&t.selectItem&&{selectedItem:i.items[e.highlightedIndex],inputValue:i.itemToString(i.items[e.highlightedIndex])});break;case qh:r={isOpen:!0,highlightedIndex:Bh(i),inputValue:t.inputValue};break;case Jh:r={isOpen:!e.isOpen,highlightedIndex:e.isOpen?-1:Mh(i,e,0)};break;case sg:r={selectedItem:t.selectedItem,inputValue:i.itemToString(t.selectedItem)};break;case cg:r={inputValue:t.inputValue};break;default:return zh(e,t,dg)}return P({},e,r)}var yg=["onMouseLeave","refKey","ref"],vg=["item","index","refKey","ref","onMouseMove","onMouseDown","onClick","onPress","disabled"],bg=["onClick","onPress","refKey","ref"],Eg=["onKeyDown","onChange","onInput","onBlur","onChangeText","onClick","refKey","ref"];function wg(e){pg(e=void 0===e?{}:e,wg);var t,n,r,a,i,o=P({},hg,e),s=o.items,e=o.scrollIntoView,d=o.environment,l=o.getA11yStatusMessage,u=(p=gg,t=o,u=fg,c=Vh,n=(0,L.useRef)(),r=(p=Ih(p,t,u,c))[0],a=p[1],i=jh(),(0,L.useEffect)(function(){jp(t,"selectedItem")&&(i||t.itemToKey(t.selectedItem)!==t.itemToKey(n.current)&&a({type:cg,inputValue:t.itemToString(t.selectedItem)}),n.current=(r.selectedItem===n.current?t:r).selectedItem)},[r.selectedItem,t.selectedItem]),[Vp(r,t),a]),c=u[0],m=u[1],f=c.isOpen,p=c.highlightedIndex,u=c.selectedItem,h=c.inputValue,g=(0,L.useRef)(null),y=(0,L.useRef)({}),v=(0,L.useRef)(null),b=(0,L.useRef)(null),E=jh(),w=_h(o),_=(0,L.useRef)(),x=kh({state:c,props:o}),S=(0,L.useCallback)(function(e){return y.current[w.getItemId(e)]},[w]),k=(Dh(l,c,[f,p,u,h],d),Ph({menuElement:g.current,highlightedIndex:p,isOpen:f,itemRefs:y,scrollIntoView:e,getItemNodeFromIndex:S})),I=(Lh({props:o,state:c}),(0,L.useEffect)(function(){Th(o,"isOpen")&&v.current&&v.current.focus()},[]),(0,L.useEffect)(function(){E||(_.current=s.length)}),Oh(d,(0,L.useCallback)(function(){x.current.state.isOpen&&m({type:Gh,selectItem:!1})},[m,x]),(0,L.useMemo)(function(){return[g,b,v]},[g.current,b.current,v.current]))),C=Ah("getInputProps","getMenuProps"),N=((0,L.useEffect)(function(){f||(y.current={})},[f]),(0,L.useEffect)(function(){var e;f&&null!=d&&d.document&&null!=v&&null!=(e=v.current)&&e.focus&&d.document.activeElement!==v.current&&v.current.focus()},[f,d]),(0,L.useMemo)(function(){return{ArrowDown:function(e){e.preventDefault(),m({type:$h,altKey:e.altKey})},ArrowUp:function(e){e.preventDefault(),m({type:Hh,altKey:e.altKey})},Home:function(e){x.current.state.isOpen&&(e.preventDefault(),m({type:Zh}))},End:function(e){x.current.state.isOpen&&(e.preventDefault(),m({type:Kh}))},Escape:function(e){var t=x.current.state;(t.isOpen||t.inputValue||t.selectedItem||-1<t.highlightedIndex)&&(e.preventDefault(),m({type:Uh}))},Enter:function(e){x.current.state.isOpen&&229!==e.which&&(e.preventDefault(),m({type:Yh}))},PageUp:function(e){x.current.state.isOpen&&(e.preventDefault(),m({type:Wh}))},PageDown:function(e){x.current.state.isOpen&&(e.preventDefault(),m({type:Xh}))}}},[m,x])),l=(0,L.useCallback)(function(e){return P({id:w.labelId,htmlFor:w.inputId},e)},[w]),e=(0,L.useCallback)(function(e,t){var e=void 0===e?{}:e,n=e.onMouseLeave,r=e.refKey,r=void 0===r?"ref":r,a=e.ref,e=pp(e,yg),t=(void 0===t?{}:t).suppressRefError;return C("getMenuProps",void 0!==t&&t,r,g),P(((t={})[r]=Rp(a,function(e){g.current=e}),t.id=w.menuId,t.role="listbox",t["aria-labelledby"]=e&&e["aria-label"]?void 0:""+w.labelId,t.onMouseLeave=Tp(n,function(){m({type:Qh})}),t),e)},[m,C,w]),S=(0,L.useCallback)(function(e){var e=void 0===e?{}:e,t=e.item,n=e.index,r=e.refKey,r=void 0===r?"ref":r,a=e.ref,i=e.onMouseMove,o=e.onMouseDown,s=e.onClick,l=(e.onPress,e.disabled),e=pp(e,vg),l=(void 0!==l&&console.warn('Passing "disabled" as an argument to getItemProps is not supported anymore. Please use the isItemDisabled prop from useCombobox.'),x.current),u=l.props,c=l.state,l=xh(t,n,u.items,"Pass either item or index to getItemProps!"),t=l[0],d=l[1],f=u.isItemDisabled(t,d),n=s;return P(((l={})[r]=Rp(a,function(e){e&&(y.current[w.getItemId(d)]=e)}),l["aria-disabled"]=f,l["aria-selected"]=d===c.highlightedIndex,l.id=w.getItemId(d),l.role="option",l),!f&&((u={}).onClick=Tp(n,function(){m({type:tg,index:d})}),u),{onMouseMove:Tp(i,function(){I.isTouchEnd||d===c.highlightedIndex||(k.current=!1,m({type:eg,index:d,disabled:f}))}),onMouseDown:Tp(o,function(e){return e.preventDefault()})},e)},[m,w,x,I,k]),c=(0,L.useCallback)(function(e){var t,e=void 0===e?{}:e,n=e.onClick,r=(e.onPress,e.refKey),r=void 0===r?"ref":r,a=e.ref,e=pp(e,bg),i=x.current.state;return P(((t={})[r]=Rp(a,function(e){b.current=e}),t["aria-controls"]=w.menuId,t["aria-expanded"]=i.isOpen,t.id=w.toggleButtonId,t.tabIndex=-1,t),!e.disabled&&P({},{onClick:Tp(n,function(){m({type:ng})})}),e)},[m,x,w]),T=(0,L.useCallback)(function(e,t){var n,e=void 0===e?{}:e,r=e.onKeyDown,a=e.onChange,i=e.onInput,o=e.onBlur,s=(e.onChangeText,e.onClick),l=e.refKey,l=void 0===l?"ref":l,u=e.ref,e=pp(e,Eg),t=(void 0===t?{}:t).suppressRefError,c=(C("getInputProps",void 0!==t&&t,l,v),x.current.state),t={};return e.disabled||((n={}).onChange=Tp(a,i,function(e){m({type:qh,inputValue:e.target.value})}),n.onKeyDown=Tp(r,function(e){var t=Bp(e);t&&N[t]&&N[t](e)}),n.onBlur=Tp(o,function(e){null!=d&&d.document&&c.isOpen&&!I.isMouseDown&&(e=null===e.relatedTarget&&d.document.activeElement!==d.document.body,m({type:Gh,selectItem:!e}))}),n.onClick=Tp(s,function(){m({type:Jh})}),t=n),P(((a={})[l]=Rp(u,function(e){v.current=e}),a["aria-activedescendant"]=c.isOpen&&-1<c.highlightedIndex?w.getItemId(c.highlightedIndex):"",a["aria-autocomplete"]="list",a["aria-controls"]=w.menuId,a["aria-expanded"]=c.isOpen,a["aria-labelledby"]=e&&e["aria-label"]?void 0:w.labelId,a.autoComplete="off",a.id=w.inputId,a.role="combobox",a.value=c.inputValue,a),t,e)},[m,w,d,N,x,I,C]),R=(0,L.useCallback)(function(){m({type:rg})},[m]),M=(0,L.useCallback)(function(){m({type:ig})},[m]),O=(0,L.useCallback)(function(){m({type:ag})},[m]),A=(0,L.useCallback)(function(e){m({type:og,highlightedIndex:e})},[m]),D=(0,L.useCallback)(function(e){m({type:sg,selectedItem:e})},[m]);return{getItemProps:S,getLabelProps:l,getMenuProps:e,getInputProps:T,getToggleButtonProps:c,toggleMenu:R,openMenu:O,closeMenu:M,setHighlightedIndex:A,setInputValue:(0,L.useCallback)(function(e){m({type:lg,inputValue:e})},[m]),selectItem:D,reset:(0,L.useCallback)(function(){m({type:ug})},[m]),highlightedIndex:p,isOpen:f,selectedItem:u,inputValue:h}}wg.stateChangeTypes=dg;var _g={activeIndex:-1,selectedItems:[]};function xg(e,t){return Th(e,t,_g)}function Sg(e,t){return Nh(e,t,_g)}function kg(e){return{activeIndex:xg(e,"activeIndex"),selectedItems:xg(e,"selectedItems")}}function Ig(e){return e.shiftKey||e.metaKey||e.ctrlKey||e.altKey||(e=e.target)instanceof HTMLInputElement&&""!==e.value&&(0!==e.selectionStart||0!==e.selectionEnd)?void 0:1}function Cg(e,t){return e.selectedItems===t.selectedItems&&e.activeIndex===t.activeIndex}var Ng={stateReducer:Sd.stateReducer,itemToKey:Sd.itemToKey,environment:Sd.environment,selectedItems:f.default.array,initialSelectedItems:f.default.array,defaultSelectedItems:f.default.array,getA11yStatusMessage:f.default.func,activeIndex:f.default.number,initialActiveIndex:f.default.number,defaultActiveIndex:f.default.number,onActiveIndexChange:f.default.func,onSelectedItemsChange:f.default.func,keyNavigationNext:f.default.string,keyNavigationPrevious:f.default.string},Tg={itemToKey:gd.itemToKey,stateReducer:gd.stateReducer,environment:gd.environment,keyNavigationNext:"ArrowRight",keyNavigationPrevious:"ArrowLeft"},Rg=kp,Rg=function(e,t){f.default.checkPropTypes(Ng,e,"prop",t.name)},Mg="__selected_item_click__",Og="__selected_item_keydown_delete__",Ag="__selected_item_keydown_backspace__",Dg="__selected_item_keydown_navigation_next__",Pg="__selected_item_keydown_navigation_previous__",Lg="__dropdown_keydown_navigation_previous__",Fg="__dropdown_keydown_backspace__",Vg="__dropdown_click__",jg="__function_add_selected_item__",Bg="__function_remove_selected_item__",zg="__function_set_selected_items__",$g="__function_set_active_index__",Hg="__function_reset__",yd=Object.freeze({__proto__:null,DropdownClick:Vg,DropdownKeyDownBackspace:Fg,DropdownKeyDownNavigationPrevious:Lg,FunctionAddSelectedItem:jg,FunctionRemoveSelectedItem:Bg,FunctionReset:Hg,FunctionSetActiveIndex:$g,FunctionSetSelectedItems:zg,SelectedItemClick:Mg,SelectedItemKeyDownBackspace:Ag,SelectedItemKeyDownDelete:Og,SelectedItemKeyDownNavigationNext:Dg,SelectedItemKeyDownNavigationPrevious:Pg});function Ug(e,t){var n=t.type,r=t.index,a=t.props,i=t.selectedItem,o=e.activeIndex,s=e.selectedItems;switch(n){case Mg:c={activeIndex:r};break;case Pg:c={activeIndex:o-1<0?0:o-1};break;case Dg:c={activeIndex:o+1>=s.length?-1:o+1};break;case Ag:case Og:o<0||(l=o,1===s.length?l=-1:o===s.length-1&&(l=s.length-2),c=P({selectedItems:[].concat(s.slice(0,o),s.slice(o+1))},{activeIndex:l}));break;case Lg:c={activeIndex:s.length-1};break;case Fg:c={selectedItems:s.slice(0,s.length-1)};break;case jg:c={selectedItems:[].concat(s,[i])};break;case Vg:c={activeIndex:-1};break;case Bg:var l=o,u=s.findIndex(function(e){return a.itemToKey(e)===a.itemToKey(i)});u<0||(1===s.length?l=-1:u===s.length-1&&(l=s.length-2),c={selectedItems:[].concat(s.slice(0,u),s.slice(u+1)),activeIndex:l});break;case zg:var c={selectedItems:t.selectedItems};break;case $g:c={activeIndex:t.activeIndex};break;case Hg:c={activeIndex:Sg(a,"activeIndex"),selectedItems:Sg(a,"selectedItems")};break;default:throw new Error("Reducer called without proper action type.")}return P({},e,c)}var Zg=["refKey","ref","onClick","onKeyDown","selectedItem","index"],Kg=["refKey","ref","onKeyDown","onClick","preventKeyAction"];function Wg(e){Rg(e=void 0===e?{}:e,Wg);var e=P({},Tg,e),t=e.getA11yStatusMessage,n=e.environment,r=e.keyNavigationNext,a=e.keyNavigationPrevious,i=Ch(Ug,e,kg,Cg),o=i[0],u=i[1],s=o.activeIndex,i=o.selectedItems,l=jh(),c=(0,L.useRef)(null),d=(0,L.useRef)(),f=(d.current=[],kh({state:o,props:e})),m=(Dh(t,o,[s,i],n),(0,L.useEffect)(function(){l||(-1===s&&c.current?c.current.focus():d.current[s]&&d.current[s].focus())},[s]),Lh({props:e,state:o}),Ah("getDropdownProps")),p=(0,L.useMemo)(function(){var e={};return e[a]=function(){u({type:Pg})},e[r]=function(){u({type:Dg})},e.Delete=function(){u({type:Og})},e.Backspace=function(){u({type:Ag})},e},[u,r,a]),h=(0,L.useMemo)(function(){var e={};return e[a]=function(e){Ig(e)&&u({type:Lg})},e.Backspace=function(e){Ig(e)&&u({type:Fg})},e},[u,a]);return{getSelectedItemProps:(0,L.useCallback)(function(e){var e=void 0===e?{}:e,t=e.refKey,t=void 0===t?"ref":t,n=e.ref,r=e.onClick,a=e.onKeyDown,i=e.selectedItem,o=e.index,e=pp(e,Zg),s=f.current.state,l=xh(i,o,s.selectedItems,"Pass either item or index to getSelectedItemProps!")[1],i=-1<l&&l===s.activeIndex;return P(((o={})[t]=Rp(n,function(e){e&&d.current.push(e)}),o.tabIndex=i?0:-1,o.onClick=Tp(r,function(){u({type:Mg,index:l})}),o.onKeyDown=Tp(a,function(e){var t=Bp(e);t&&p[t]&&p[t](e)}),o),e)},[u,f,p]),getDropdownProps:(0,L.useCallback)(function(e,t){var e=void 0===e?{}:e,n=e.refKey,n=void 0===n?"ref":n,r=e.ref,a=e.onKeyDown,i=e.onClick,o=e.preventKeyAction,o=void 0!==o&&o,e=pp(e,Kg),t=(void 0===t?{}:t).suppressRefError;m("getDropdownProps",void 0!==t&&t,n,c);return P(((t={})[n]=Rp(r,function(e){e&&(c.current=e)}),t),!o&&{onKeyDown:Tp(a,function(e){var t=Bp(e);t&&h[t]&&h[t](e)}),onClick:Tp(i,function(){u({type:Vg})})},e)},[u,h,m]),addSelectedItem:(0,L.useCallback)(function(e){u({type:jg,selectedItem:e})},[u]),removeSelectedItem:(0,L.useCallback)(function(e){u({type:Bg,selectedItem:e})},[u]),setSelectedItems:(0,L.useCallback)(function(e){u({type:zg,selectedItems:e})},[u]),setActiveIndex:(0,L.useCallback)(function(e){u({type:$g,activeIndex:e})},[u]),reset:(0,L.useCallback)(function(){u({type:Hg})},[u]),selectedItems:i,activeIndex:s}}Wg.stateChangeTypes=yd;var Xg=t(b());function Yg(n){const{selectedItem:r,items:e,inputValue:t,forceOpen:a=!1}=n,{isOpen:i,getToggleButtonProps:o,getLabelProps:s,getMenuProps:l,getInputProps:u,highlightedIndex:c,getItemProps:d}=wg({items:e,itemToString(e){return e?n.itemToString(e):""},selectedItem:r,onSelectedItemChange:({selectedItem:e})=>{n.onItemSelected(e)},inputValue:t});return Xg.default.createElement("div",{className:"relative"},Xg.default.createElement("div",{className:"flex flex-col gap-1"},Xg.default.createElement("label",{htmlFor:"combobox-search",className:"w-fit",...s()},Xg.default.createElement(_,{elementType:"small"},n.label)),Xg.default.createElement("div",{className:"bg-spice-tab-active flex gap-0.5 rounded-sm !pe-1"},Xg.default.createElement("input",{...u({onChange:e=>{e=e.target.value;r&&e===n.itemToString(r)||n.onInputChanged(e)}}),placeholder:n.placeholder,className:"w-full truncate !p-1.5",id:"combobox-search",onBlur:()=>{n.onBlur()},disabled:n.disabled}),null!==r&&Xg.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:"Clear selection"},Xg.default.createElement("button",{"aria-label":"clear selection",type:"button",disabled:n.disabled},Xg.default.createElement(Rm,{size:16,onClick:n.onClear}))),Xg.default.createElement("button",{"aria-label":"toggle menu",className:"!px-2",type:"button",...o(),disabled:n.disabled},i?Xg.default.createElement(wm,{size:16}):Xg.default.createElement(Em,{size:16})))),Xg.default.createElement("ul",{className:"bg-spice-highlight-elevated absolute z-10 !mt-1 max-h-80 w-full overflow-scroll rounded-sm !p-0 "+(i||a?"":"hidden"),...l()},(i||a)&&0<e.length&&e.map((e,t)=>Xg.default.createElement("li",{className:Spicetify.classnames(c===t?"bg-spice-highlight-elevated-hover":"","flex flex-col"),key:e.id,...d({item:e,index:t})},n.itemRenderer({item:e,index:t,isHighlighted:c===t,isSelected:r?.id===e.id}))),(i||a)&&0===e.length&&Xg.default.createElement("div",{className:"flex items-center justify-center !p-2"},Xg.default.createElement(_,{elementType:"span",fontSize:"small"},"No results"))))}function qg(n){const{required:r=!1}=n;return mp.default.createElement(Ml,{name:n.name,control:n.control,render:({field:{onChange:t},formState:{disabled:e}})=>mp.default.createElement(Yg,{items:n.items,itemRenderer:n.itemRenderer,itemToString:n.itemToString,label:n.label,placeholder:n.placeholder,selectedItem:n.selectedItem,onItemSelected:e=>{n.onItemSelected(e),t(e?.id??(r?"":void 0))},inputValue:n.inputValue,onInputChanged:n.onInputChanged,onClear:n.onClear,onBlur:n.onBlur,disabled:e})})}var Gg=t(b());function Jg(s){const{required:l=!1}=s;return Gg.default.createElement(Ml,{control:s.control,name:s.name,render:({field:{onChange:t,onBlur:e,value:n,name:r,ref:a},fieldState:{invalid:i},formState:{disabled:o}})=>{return Gg.default.createElement("input",{className:Spicetify.classnames("bg-spice-tab-active w-full rounded-sm !p-1 !px-2.5",i?"border-spice-error border-1 border-solid":"border-0 border-none"),type:"number",placeholder:s.placeholder,onChange:e=>{e=l?e.target.valueAsNumber:""===(e=e.target.value)?void 0:Number(e);t(e),s.onChange(e)},onBlur:e,value:l?n:void 0===(i=n)?"":i.toString(),name:r,disabled:o,ref:a})}})}var Qg=t(b());function ey(e){return Qg.default.createElement("div",null,e.children,Qg.default.createElement($m,{error:e.error}))}function ty(e){return"album"===e.type}function ny(e){return fp.default.createElement("div",{className:"flex max-h-[80px] items-stretch gap-2"},fp.default.createElement("div",{className:"flex h-[60px] w-[60px] shrink-0 items-center justify-center !p-2"},e.item.image&&fp.default.createElement("img",{src:e.item.image,className:"rounded-md object-contain",alt:"album"}),null===e.item.image&&fp.default.createElement(km,{size:60,strokeWidth:1})),fp.default.createElement("div",{className:"flex min-w-0 flex-col items-stretch justify-center"},fp.default.createElement("span",{className:Spicetify.classnames("truncate",e.isSelected?"font-bold":"")},e.item.name),fp.default.createElement("span",{className:"truncate text-sm"},e.item.artists)))}var ry=t(b()),ay=[{label:"Liked tracks",value:"liked"},{label:"Top tracks & popular releases",value:"top"},{label:"Latest release",value:"latest"},{label:"All tracks",value:"discography"}];function iy(e){return"artist"===e.type}function oy(e){return ry.default.createElement("div",{className:"flex max-h-[80px] items-stretch gap-2"},ry.default.createElement("div",{className:"flex h-[60px] w-[60px] shrink-0 items-center justify-center !p-2"},e.item.image&&ry.default.createElement("img",{src:e.item.image,className:"rounded-full object-contain",alt:"artist"}),null===e.item.image&&ry.default.createElement(km,{size:60,strokeWidth:1})),ry.default.createElement("div",{className:"flex min-w-0 flex-col items-stretch justify-center"},ry.default.createElement("span",{className:Spicetify.classnames("truncate",e.isSelected?"font-bold":"")},e.item.name)))}function sy(e){return"folder"===e.type}function ly(e){return"playlist"===e.type}async function uy(e){return(await y().RootlistAPI.getContents({flatten:!0,filter:e})).items.filter(ly)}var S=t(b()),cy=t(b());function dy(s){const{required:l=!1}=s;return cy.default.createElement(Ml,{control:s.control,name:s.name,render:({field:{onChange:t,onBlur:e,value:n,name:r,ref:a},fieldState:{invalid:i},formState:{disabled:o}})=>cy.default.createElement("input",{className:Spicetify.classnames("bg-spice-tab-active w-full rounded-sm !p-1 !px-2.5",i?"border-spice-error border-1 border-solid":"border-0 border-none"),type:"text",placeholder:s.placeholder,onChange:e=>{e=l?e.target.value:""===(e=e.target.value)?void 0:e;t(e),s.onChange&&s.onChange(e)},onBlur:e,value:l?n:n??"",name:r,disabled:o,ref:a})})}var fy={ALBUM:"Album",ARTIST:"Artist",TITLE:"Name",DURATION:"Duration",ADDED_AT:"Added at",ADDED_BY:"Added by",PUBLISH_DATE:"Publish date",SHOW_NAME:"Show name",NO_SORT:"No sort"},my={ASC:"Ascending",DESC:"Descending"};function py(e){return S.default.createElement("div",{className:"flex max-h-[80px] items-stretch gap-2"},S.default.createElement("div",{className:"flex h-[60px] w-[60px] shrink-0 items-center justify-center !p-2"},e.item.image&&S.default.createElement("img",{src:e.item.image,className:"rounded-md object-contain",alt:"playlist"}),null===e.item.image&&S.default.createElement(km,{size:60,strokeWidth:1})),S.default.createElement("div",{className:"flex min-w-0 flex-col items-stretch justify-center"},S.default.createElement("span",{className:Spicetify.classnames("truncate",e.isSelected?"font-bold":"")},e.item.name),S.default.createElement("span",{className:"truncate text-sm"},"by ",e.item.ownerName)))}var hy=t(b());function gy(e){return e.icon?hy.default.createElement(Spicetify.ReactComponent.IconComponent,{iconSize:e.iconSize,semanticColor:e.semanticColor,dangerouslySetInnerHTML:{__html:Spicetify.SVGIcons[e.icon]},viewBox:"0 0 16 16"}):e.iconPath?hy.default.createElement(Spicetify.ReactComponent.IconComponent,{iconSize:e.iconSize,semanticColor:e.semanticColor,dangerouslySetInnerHTML:{__html:e.iconPath},viewBox:"0 0 16 16"}):hy.default.createElement(hy.default.Fragment,null)}var yy=t(b());var vy=()=>{},h=t(b()),by=t(b()),Ey=t(b()),wy=t=>{const n=Ey.default.useRef(null);return Ey.default.useEffect(()=>{const e=e=>{n.current&&!n.current.contains(e.target)&&t()};return document.addEventListener("click",e,!0),()=>{document.removeEventListener("click",e,!0)}},[n,t]),n},k=t(b());function _y(){return k.default.createElement("div",{className:"flex flex-col"},k.default.createElement("div",{className:"flex items-center !px-2 !py-1"},k.default.createElement("span",null,"Select all")),k.default.createElement("hr",{className:"border-t-1"}))}function xy(){return k.default.createElement("div",{className:"flex flex-col"},k.default.createElement("div",{className:"flex items-center justify-between gap-2 !px-2 !py-1"},k.default.createElement("span",null,"Unselect all"),k.default.createElement("span",{className:"shrink-0"},k.default.createElement(gy,{semanticColor:"textBrightAccent",icon:"check",iconSize:12}))),k.default.createElement("hr",{className:"border-t-1"}))}function Sy(r){const{selectedItems:a,onItemsSelected:n,inputValue:e,forceOpen:t=!1,selectAllItem:i,unselectAllItem:o,itemRenderer:s}=r;var l=[r.items.every(e=>a.includes(e))?o:i,...r.items];const{isOpen:u,getToggleButtonProps:c,getLabelProps:d,getMenuProps:f,getInputProps:m,highlightedIndex:p,getItemProps:h,closeMenu:g}=wg({items:l,itemToString(e){return e?r.itemToString(e):""},selectedItem:null,inputValue:e,stateReducer(e,t){var{changes:n,type:t}=t;switch(t){case wg.stateChangeTypes.InputKeyDownEnter:case wg.stateChangeTypes.ItemClick:return{...n,isOpen:!0};default:return n}},onStateChange({inputValue:e,type:t,selectedItem:n}){switch(t){case wg.stateChangeTypes.InputKeyDownEnter:case wg.stateChangeTypes.ItemClick:case wg.stateChangeTypes.InputBlur:if(n){if(n===r.selectAllItem)return void r.onItemsSelected(Fd([...r.selectedItems,...r.items],e=>e.id));if(n===r.unselectAllItem)return void r.onItemsSelected([...r.selectedItems.filter(e=>!r.items.includes(e))]);a.includes(n)?r.onItemsSelected(a.filter(e=>e!==n)):r.onItemsSelected([...a,n])}break;case wg.stateChangeTypes.InputChange:r.onInputChanged(e??"")}}}),{getSelectedItemProps:y,getDropdownProps:v,removeSelectedItem:b}=Wg({selectedItems:a,onStateChange({selectedItems:e,type:t}){switch(t){case Wg.stateChangeTypes.SelectedItemKeyDownBackspace:case Wg.stateChangeTypes.SelectedItemKeyDownDelete:case Wg.stateChangeTypes.DropdownKeyDownBackspace:case Wg.stateChangeTypes.FunctionRemoveSelectedItem:n(e??[])}}}),E=(0,k.useCallback)((e,t)=>e===i?k.default.createElement(_y,null):e===o?k.default.createElement(xy,null):s({item:e,index:t,isHighlighted:p===t,isSelected:a.includes(e)}),[p,a,i,o,s]);var w=wy(g);return k.default.createElement(k.default.Fragment,null,k.default.createElement("div",{className:"relative"},k.default.createElement("div",{className:"flex flex-col gap-1"},k.default.createElement("label",{htmlFor:"multiselect-search",className:"w-fit",...d()},k.default.createElement(_,{elementType:"small"},r.label)),k.default.createElement("div",{className:"bg-spice-tab-active flex gap-0.5 rounded-sm !pe-1"},k.default.createElement("input",{...m({...v({preventKeyAction:u}),onChange:e=>{e=e.target.value;r.onInputChanged(e)}}),placeholder:r.placeholder,className:"w-full truncate !p-1.5",id:"multiselect-search",onBlur:()=>{r.onBlur()},disabled:r.disabled}),k.default.createElement("button",{"aria-label":"toggle menu",className:"!px-2",type:"button",...c(),disabled:r.disabled},u?k.default.createElement(wm,{size:16}):k.default.createElement(Em,{size:16})))),k.default.createElement("ul",{className:"bg-spice-highlight-elevated absolute z-10 !mt-1 max-h-80 w-full overflow-scroll rounded-sm !p-0 "+(u||t?"":"hidden"),ref:w,...f()},(u||t)&&0<r.items.length&&k.default.createElement(k.default.Fragment,null,l.map((e,t)=>k.default.createElement("li",{className:Spicetify.classnames(p===t?"bg-spice-highlight-elevated-hover":"","flex flex-col"),key:e.id,...h({item:e,index:t})},E(e,t)))),(u||t)&&0===r.items.length&&k.default.createElement("div",{className:"flex items-center justify-center !p-2"},k.default.createElement(_,{elementType:"span",fontSize:"small"},"No results")))),k.default.createElement("div",{className:"flex flex-wrap gap-1"},a.map((t,e)=>k.default.createElement("span",{className:"hover:bg-spice-tab-active bg-spice-highlight-elevated flex max-w-72 items-center gap-2 rounded-full !px-2.5",key:"selected-item-"+e.toFixed(),...y({selectedItem:t,index:e}),tabIndex:-1},k.default.createElement("span",{className:"truncate"},r.itemToString(t)),k.default.createElement("button",{"aria-label":"Remove item",onClick:e=>{e.stopPropagation(),b(t)}},k.default.createElement(gy,{icon:"x",iconSize:12}))))))}function ky(n){return by.default.createElement(Ml,{name:n.name,control:n.control,render:({field:{onChange:t},formState:{disabled:e}})=>by.default.createElement(Sy,{selectedItems:n.selectedItems,onItemsSelected:e=>{n.onItemsSelected(e),t(e)},inputValue:n.inputValue,onInputChanged:n.onInputChanged,placeholder:n.placeholder,itemRenderer:n.itemRenderer,itemToString:n.itemToString,items:n.items,label:n.label,disabled:n.disabled||e,onBlur:n.onBlur,selectAllItem:n.selectAllItem,unselectAllItem:n.unselectAllItem})})}var Iy=[{label:"Added at",value:"ADDED_AT"},{label:"Album",value:"ALBUM_NAME"},{label:"Artist",value:"ARTIST_NAME"},{label:"Name",value:"NAME"}],Cy=[{label:"Ascending",value:"ASC"},{label:"Descending",value:"DESC"}];function Ny(e){return h.default.createElement("div",{className:"flex items-center justify-between gap-2 !px-2 !py-1"},h.default.createElement("span",{className:"truncate"},e.item.name),e.isSelected&&h.default.createElement("span",{className:"shrink-0"},h.default.createElement(gy,{semanticColor:"textBrightAccent",icon:"check",iconSize:12})),!e.isSelected&&h.default.createElement("div",{className:"h-[12px] w-[12px]"}))}var Ty=t(b()),Ry={ALBUM:"Album",ARTIST:"Artist",TITLE:"Name",DURATION:"Duration",ADDED_AT:"Added at",NO_SORT:"No sort"},My={ASC:"Ascending",DESC:"Descending"};var Oy=t(b());var Ay={likedSongsSource:function(e){const t=e.data["genres"],{control:n,errors:r,updateNodeField:a}=Qf(e.id,e.data,Xf("likedSongsSource"),Lf),[i,o]=(0,h.useState)([]),[s,l]=(0,h.useState)(!0),{items:u,selectedItems:c,onSelectedIdsChanged:d,inputValue:f,onInputChanged:m,onItemsSelected:p}=function(r,t,n){const[a,i]=(0,yy.useState)([]),[e,o]=(0,yy.useState)(""),[s,l]=(0,yy.useState)([]),u=cp(e=>{t(e).then(e=>{l(e)}).catch(e=>{console.error("Failed to fetch items",e)})},200);var c=(0,yy.useCallback)(async e=>{var t=new Set(e);const n=new Set(a.map(e=>e.id));t.size===n.size&&[...t].every(e=>n.has(e))||(t=await r(e),i(t))},[r,a,i]);return(0,yy.useEffect)(()=>{(async()=>{var e=await t("");l(e)})()},[t,l]),{selectedItems:a,onItemsSelected:e=>{n(e)},items:s,inputValue:e,onInputChanged:e=>{o(e),u(e)},onSelectedIdsChanged:c}}((0,h.useCallback)(t=>Promise.resolve(i.filter(e=>t.includes(e.id))),[i]),(0,h.useCallback)(t=>Promise.resolve(i.filter(e=>e.name.toLowerCase().includes(t.toLowerCase()))),[i]),e=>{a({genres:e.map(e=>e.id)})});return(0,h.useEffect)(()=>{s||d(t)},[t,d,s]),(0,h.useEffect)(()=>{(async()=>{var e=await Kd();const n=new Set;e.forEach(e=>{for(const t of e)n.add(t)}),o(Array.from(n).sort((e,t)=>e.localeCompare(t)).map(e=>({id:e,name:e}))),l(!1)})()},[]),h.default.createElement(im,{isExecuting:e.data.isExecuting,isSelected:e.selected,classname:"max-w-80"},h.default.createElement(cm,null),h.default.createElement(sm,null,h.default.createElement(Om,{title:"Liked songs"}),h.default.createElement(Hm,{label:"Filter",tooltip:"Search filter to apply",error:r.filter},h.default.createElement(dy,{control:n,placeholder:"Search",name:"filter",onChange:e=>{a({filter:e})}})),h.default.createElement(Hm,{label:"Offset",tooltip:"Number of elements to skip",error:r.offset},h.default.createElement(Jg,{placeholder:"0",control:n,name:"offset",onChange:e=>{a({offset:e})}})),h.default.createElement(Hm,{label:"Limit",tooltip:"Number of elements to take. Leave empty to take all elements.",error:r.limit},h.default.createElement(Jg,{placeholder:"None",control:n,name:"limit",onChange:e=>{a({limit:e})}})),h.default.createElement(Hm,{label:"Sort by",error:r.sortField},h.default.createElement(Gm,{name:"sortField",control:n,items:Iy,label:"Property to sort on",onChange:e=>{a({sortField:e})}})),h.default.createElement(Hm,{label:"Order",error:r.sortOrder},h.default.createElement(Gm,{name:"sortOrder",control:n,items:Cy,label:"Sort order",onChange:e=>{a({sortOrder:e})}})),h.default.createElement(ky,{control:n,name:"genres",selectedItems:c,onItemsSelected:p,inputValue:f,onInputChanged:m,placeholder:"Rock, Pop, Hip Hop...",itemRenderer:Ny,itemToString:e=>e.name,items:u,label:s?"Genres (loading...)":"Genres",onBlur:vy,selectAllItem:{id:"select-all",name:"Select all"},unselectAllItem:{id:"unselect-all",name:"Unselect all"},disabled:s})),h.default.createElement(v,{type:"source",position:O.Right,id:"result",style:{top:"40px"}}))},localTracksSource:function(e){const{control:t,errors:n,updateNodeField:r}=Qf(e.id,e.data,Xf("localTracksSource"),Vf);return Ty.default.createElement(im,{isExecuting:e.data.isExecuting,isSelected:e.selected},Ty.default.createElement(cm,null),Ty.default.createElement(sm,null,Ty.default.createElement(Om,{title:"Local tracks"}),Ty.default.createElement(Hm,{tooltip:"Search filter to apply",label:"Filter",error:n.filter},Ty.default.createElement(dy,{placeholder:"Search",control:t,name:"filter",onChange:e=>{r({filter:e})}})),Ty.default.createElement(Hm,{label:"Sort by",error:n.sortField},Ty.default.createElement(Gm,{label:"Property to sort on",name:"sortField",control:t,items:Object.entries(Ry).map(([e,t])=>({label:t,value:e})),onChange:e=>{r({sortField:e})}})),Ty.default.createElement(Hm,{label:"Order",error:n.sortOrder},Ty.default.createElement(Gm,{label:"Sort order",name:"sortOrder",control:t,items:Object.entries(My).map(([e,t])=>({label:t,value:e})),onChange:e=>{r({sortOrder:e})}}))),Ty.default.createElement(v,{type:"source",position:O.Right,id:"result",style:{top:"40px"}}))},libraryPlaylistSource:function(e){const{onlyMine:r,playlistUri:t}=e.data,{errors:n,control:a,updateNodeField:i}=Qf(e.id,e.data,Xf("libraryPlaylistSource"),Bf);var o=(0,S.useCallback)(async e=>{const t=await y().UserAPI.getUser();let n=await uy(e);return n=n.filter(e=>""!==e.name),(n=(n=r?n.filter(e=>e.owner.uri===t.uri):n).toSorted((e,t)=>e.name.localeCompare(t.name))).map(e=>({id:e.uri,name:e.name,uri:e.uri,image:0<e.images.length?e.images.find(e=>"small"===e.label)?.url??e.images[0].url:null,ownerName:e.owner.displayName}))},[r]),s=(0,S.useCallback)(async e=>{var t=y().PlaylistAPI;try{var n=await t.getPlaylist(e,{},{});return{id:n.metadata.uri,name:n.metadata.name,uri:n.metadata.uri,image:0<n.metadata.images.length?n.metadata.images[0].url:null,ownerName:n.metadata.owner.displayName}}catch(e){return console.error("Failed to fetch playlist",e),i({playlistUri:""}),null}},[i]),l=(0,S.useCallback)(e=>e.name,[]);const{inputValue:u,items:c,onInputChanged:d,onItemSelected:f,resetSelection:m,selectedItem:p,syncInputWithSelectedItem:h,onSelectedIdChanged:g}=dp(s,o,l,e=>{i({playlistUri:e?.uri??""})});return(0,S.useEffect)(()=>{g(t)},[t,g]),S.default.createElement(im,{isExecuting:e.data.isExecuting,isSelected:e.selected},S.default.createElement(cm,null),S.default.createElement(sm,null,S.default.createElement(Om,{title:"Playlist"}),S.default.createElement(Um,{label:"Search only my playlists",error:n.onlyMine},S.default.createElement(Vm,{control:a,name:"onlyMine",onChange:e=>{i({onlyMine:e})}})),S.default.createElement(ey,{error:n.playlistUri},S.default.createElement(qg,{control:a,name:"playlistUri",selectedItem:p,onItemSelected:f,items:c,itemRenderer:py,itemToString:l,label:"Playlist",placeholder:"Search for a playlist",required:!0,inputValue:u,onInputChanged:d,onClear:m,onBlur:h})),S.default.createElement(_,{elementType:"p",fontSize:"small",semanticColor:"textSubdued"},"Selected:"," ",""===e.data.playlistUri?"-":e.data.playlistUri),S.default.createElement(Hm,{tooltip:"Search filter to apply",label:"Filter",error:n.filter},S.default.createElement(dy,{placeholder:"Search",name:"filter",control:a,onChange:e=>{i({filter:e})}})),S.default.createElement(Hm,{label:"Offset",tooltip:"Number of elements to skip",error:n.offset},S.default.createElement(Jg,{placeholder:"0",control:a,name:"offset",onChange:e=>{i({offset:e})}})),S.default.createElement(Hm,{label:"Limit",tooltip:"Number of elements to take. Leave empty to take all elements.",error:n.limit},S.default.createElement(Jg,{placeholder:"None",control:a,name:"limit",onChange:e=>{i({limit:e})}})),S.default.createElement(Hm,{label:"Sort by",error:n.sortField},S.default.createElement(Gm,{label:"Property to sort on",name:"sortField",control:a,items:Object.entries(fy).map(([e,t])=>({label:t,value:e})),onChange:e=>{i({sortField:e})}})),S.default.createElement(Hm,{label:"Order",error:n.sortOrder},S.default.createElement(Gm,{label:"Sort order",name:"sortOrder",control:a,items:Object.entries(my).map(([e,t])=>({label:t,value:e})),onChange:e=>{i({sortOrder:e})}}))),S.default.createElement(v,{type:"source",position:O.Right,id:"result",style:{top:"40px"}}))},topTracksSource:function(e){const{errors:t,control:n,updateNodeField:r}=Qf(e.id,e.data,Xf("topTracksSource"),Zf);return Oy.default.createElement(im,{isExecuting:e.data.isExecuting,isSelected:e.selected},Oy.default.createElement(cm,null),Oy.default.createElement(sm,null,Oy.default.createElement(Om,{title:"Top tracks"}),Oy.default.createElement(Hm,{label:"Time range",error:t.timeRange},Oy.default.createElement(Gm,{label:"Select a time range",name:"timeRange",control:n,items:[{label:"Short term",value:"short_term"},{label:"Medium term",value:"medium_term"},{label:"Long term",value:"long_term"}],onChange:e=>{r({timeRange:e})}})),Oy.default.createElement(Hm,{label:"Offset",tooltip:"Number of elements to skip",error:t.offset},Oy.default.createElement(Jg,{placeholder:"0",control:n,name:"offset",onChange:e=>{r({offset:e})}})),Oy.default.createElement(Hm,{label:"Limit",tooltip:"Number of elements to take. Leave empty to take all elements.",error:t.limit},Oy.default.createElement(Jg,{placeholder:"None",control:n,name:"limit",onChange:e=>{r({limit:e})}}))),Oy.default.createElement(v,{type:"source",position:O.Right,id:"result",style:{top:"40px"}}))},libraryAlbumSource:function(e){const t=e.data["uri"],{errors:n,control:r,updateNodeField:a}=Qf(e.id,e.data,Xf("libraryAlbumSource"),If);var i=(0,fp.useCallback)(async e=>{return(await y().LibraryAPI.getContents({filters:["0"],textFilter:e,filtersPickedByUser:!0,offset:0,limit:5e3})).items.filter(ty).toSorted((e,t)=>e.name.localeCompare(t.name)).map(e=>({id:e.uri,name:e.name,uri:e.uri,image:0<e.images.length?e.images[0].url:null,artists:e.artists.map(e=>e.name).join(", ")}))},[]),o=(0,fp.useCallback)(async e=>{try{var t=await kf({uri:e,offset:0,limit:0,locale:Spicetify.Locale.getLocale()});if("NotFound"===t.albumUnion.__typename)throw new Error("Album not found");return{id:t.albumUnion.uri,name:t.albumUnion.name,uri:t.albumUnion.uri,image:0<t.albumUnion.coverArt.sources.length?t.albumUnion.coverArt.sources[0].url:null,artists:t.albumUnion.artists.items.map(e=>e.profile.name).join(", ")}}catch(e){return console.error("Failed to fetch album",e),a({uri:""}),null}},[a]),s=(0,fp.useCallback)(e=>e.name,[]);const{inputValue:l,items:u,onInputChanged:c,onItemSelected:d,resetSelection:f,selectedItem:m,syncInputWithSelectedItem:p,onSelectedIdChanged:h}=dp(o,i,s,e=>{a({uri:e?.uri??""})});return(0,fp.useEffect)(()=>{h(t)},[t,h]),fp.default.createElement(im,{isExecuting:e.data.isExecuting,isSelected:e.selected},fp.default.createElement(cm,null),fp.default.createElement(sm,null,fp.default.createElement(Om,{title:"Album"}),fp.default.createElement(ey,{error:n.uri},fp.default.createElement(qg,{control:r,name:"uri",selectedItem:m,onItemSelected:d,items:u,itemRenderer:ny,itemToString:s,label:"Album",placeholder:"Search for an album",required:!0,inputValue:l,onInputChanged:c,onClear:f,onBlur:p})),fp.default.createElement(_,{elementType:"p",fontSize:"small",semanticColor:"textSubdued"},"Selected: ",""===e.data.uri?"-":e.data.uri),fp.default.createElement(Hm,{label:"Offset",tooltip:"Number of elements to skip",error:n.offset},fp.default.createElement(Jg,{placeholder:"0",control:r,name:"offset",onChange:e=>{a({offset:e})}})),fp.default.createElement(Hm,{label:"Limit",tooltip:"Number of elements to take. Leave empty to take all elements.",error:n.limit},fp.default.createElement(Jg,{placeholder:"None",control:r,name:"limit",onChange:e=>{a({limit:e})}})),fp.default.createElement(Um,{label:"Only liked songs",tooltip:"Only keep songs that are liked in this album",error:n.onlyLiked},fp.default.createElement(Vm,{control:r,name:"onlyLiked",onChange:e=>{a({onlyLiked:e})}}))),fp.default.createElement(v,{type:"source",position:O.Right,id:"result",style:{top:"40px"}}))},libraryArtistSource:function(e){const t=e.data["uri"],{errors:n,control:r,updateNodeField:a}=Qf(e.id,e.data,Xf("libraryArtistSource"),Df);var i=(0,ry.useCallback)(async e=>{return(await y().LibraryAPI.getContents({filters:["1"],textFilter:e,filtersPickedByUser:!0,offset:0,limit:5e3})).items.filter(iy).toSorted((e,t)=>e.name.localeCompare(t.name)).map(e=>({id:e.uri,name:e.name,uri:e.uri,image:0<e.images.length?e.images[0].url:null}))},[]),o=(0,ry.useCallback)(async e=>{try{var t=await Af({uri:e,locale:Spicetify.Locale.getLocale()});if("NotFound"===t.artistUnion.__typename)throw new Error("Artist not found");return{id:t.artistUnion.uri,name:t.artistUnion.profile.name,uri:t.artistUnion.uri,image:0<t.artistUnion.visuals.avatarImage.sources.length?t.artistUnion.visuals.avatarImage.sources[0].url:null}}catch(e){return console.error("Failed to fetch artist",e),a({uri:""}),null}},[a]),s=(0,ry.useCallback)(e=>e.name,[]);const{inputValue:l,items:u,onInputChanged:c,onItemSelected:d,resetSelection:f,selectedItem:m,syncInputWithSelectedItem:p,onSelectedIdChanged:h}=dp(o,i,s,e=>{a({uri:e?.uri??""})});return(0,ry.useEffect)(()=>{h(t)},[t,h]),ry.default.createElement(im,{isExecuting:e.data.isExecuting,isSelected:e.selected},ry.default.createElement(cm,null),ry.default.createElement(sm,null,ry.default.createElement(Om,{title:"Artist"}),ry.default.createElement(ey,{error:n.uri},ry.default.createElement(qg,{control:r,name:"uri",selectedItem:m,onItemSelected:d,items:u,itemRenderer:oy,itemToString:s,label:"Artist",placeholder:"Search for an artist",required:!0,inputValue:l,onInputChanged:c,onClear:f,onBlur:p})),ry.default.createElement(_,{elementType:"p",fontSize:"small",semanticColor:"textSubdued"},"Selected: ",""===e.data.uri?"-":e.data.uri),ry.default.createElement(Hm,{label:"Type of tracks",error:n.trackType,tooltip:"Type of tracks to get from the artist : top tracks & popular releases, liked tracks, latest release or all tracks."},ry.default.createElement(Gm,{label:"Type of tracks",name:"trackType",control:r,items:ay,onChange:e=>{a({trackType:e})}}))),ry.default.createElement(v,{type:"source",position:O.Right,id:"result",style:{top:"40px"}}))},deduplicate:function(e){return np.default.createElement(im,{isExecuting:e.data.isExecuting,isSelected:e.selected},np.default.createElement(dm,null),np.default.createElement(sm,null,np.default.createElement(Om,{title:"Deduplicate",tooltip:"Remove duplicate tracks."})),np.default.createElement(v,{type:"target",position:O.Left,id:"input",style:{top:"42px"}}),np.default.createElement(v,{type:"source",position:O.Right,id:"input",style:{top:"42px"}}))},isPlayable:function(e){const{control:t,updateNodeField:n,errors:r}=Qf(e.id,e.data,Xf("isPlayable"),nf);return Lm.default.createElement(im,{isExecuting:e.data.isExecuting,isSelected:e.selected},Lm.default.createElement(fm,null),Lm.default.createElement(sm,null,Lm.default.createElement(Om,{title:"Is playable"}),Lm.default.createElement(Um,{label:"Is playable ?",error:r.isPlayable},Lm.default.createElement(Vm,{control:t,name:"isPlayable",onChange:e=>{n({isPlayable:e})}}))),Lm.default.createElement(v,{type:"target",position:O.Left,id:"input",style:{top:"42px"}}),Lm.default.createElement(v,{type:"source",position:O.Right,id:"input",style:{top:"42px"}}))},result:function(e){var t=Jf(Gs(e=>({result:e.result})))["result"];return sp.default.createElement(im,{isExecuting:e.data.isExecuting,isSelected:e.selected},sp.default.createElement(um,{label:"Result",backgroundColor:"orange",textColor:"black"}),sp.default.createElement(sm,null,sp.default.createElement(Om,{title:"Final playlist"}),sp.default.createElement("div",{style:{display:"flex",alignItems:"center",gap:"8px"}},sp.default.createElement(_,{elementType:"p"},"Number of tracks in result:"),0===t.length&&sp.default.createElement(_,{elementType:"p"},"-"),0!==t.length&&sp.default.createElement(_,{elementType:"p",weight:"bold",paddingBottom:"0"},t.length))),sp.default.createElement(v,{type:"target",position:O.Left,id:"input",style:{top:"42px"}}))},shuffle:function(e){return rp.default.createElement(im,{isExecuting:e.data.isExecuting,isSelected:e.selected},rp.default.createElement(dm,null),rp.default.createElement(sm,null,rp.default.createElement(Om,{title:"Shuffle"})),rp.default.createElement(v,{type:"target",position:O.Left,id:"input",style:{top:"42px"}}),rp.default.createElement(v,{type:"source",position:O.Right,id:"input",style:{top:"42px"}}))},sort:function(e){var{errors:t,control:n}=Qf(e.id,e.data,Xf("sort"),bf);return ap.default.createElement(im,{isExecuting:e.data.isExecuting,isSelected:e.selected},ap.default.createElement(dm,null),ap.default.createElement(sm,null,ap.default.createElement(Om,{title:"Sort"}),ap.default.createElement(Hm,{label:"Property",error:t.property},ap.default.createElement(Gm,{label:"Property to sort on",name:"property",control:n,items:Object.entries(ip).map(([e,t])=>({label:t,value:e}))})),ap.default.createElement(Hm,{label:"Order",error:t.order},ap.default.createElement(Gm,{label:"Sort order",name:"order",control:n,items:Object.entries(op).map(([e,t])=>({label:t,value:e}))}))),ap.default.createElement(v,{type:"target",position:O.Left,id:"input",style:{top:"42px"}}),ap.default.createElement(v,{type:"source",position:O.Right,id:"input",style:{top:"42px"}}))},acousticness:function(e){const{control:t,updateNodeField:n}=Qf(e.id,e.data,Xf("acousticness"),Wd);return em.default.createElement(im,{isExecuting:e.data.isExecuting,isSelected:e.selected},em.default.createElement(fm,null),em.default.createElement(sm,null,em.default.createElement("div",{style:{paddingLeft:"8px",paddingRight:"8px",paddingBottom:"8px"}},em.default.createElement(Om,{title:"Acousticness",tooltip:"A confidence measure from 0.0 to 1.0 of whether the track is acoustic. \n                        1.0 represents high confidence the track is acoustic."}),em.default.createElement(rm,{control:t,min:0,max:1,step:.01,onChange:e=>{n({range:e})}}))),em.default.createElement(v,{type:"target",position:O.Left,id:"input",style:{top:"42px"}}),em.default.createElement(v,{type:"source",position:O.Right,id:"input",style:{top:"42px"}}))},danceability:function(e){const{control:t,updateNodeField:n}=Qf(e.id,e.data,Xf("danceability"),Yd);return Am.default.createElement(im,{isExecuting:e.data.isExecuting,isSelected:e.selected},Am.default.createElement(fm,null),Am.default.createElement(sm,null,Am.default.createElement("div",{style:{paddingLeft:"8px",paddingRight:"8px",paddingBottom:"8px"}},Am.default.createElement(Om,{title:"Danceability",tooltip:"How suitable a track is for\n                            dancing based on a combination of musical elements\n                            including tempo, rhythm stability, beat strength, and\n                            overall regularity. A value of 0.0 is least\n                            danceable and 1.0 is most danceable."}),Am.default.createElement(rm,{control:t,min:0,max:1,step:.01,onChange:e=>{n({range:e})}}))),Am.default.createElement(v,{type:"target",position:O.Left,id:"input",style:{top:"42px"}}),Am.default.createElement(v,{type:"source",position:O.Right,id:"input",style:{top:"42px"}}))},energy:function(e){const{control:t,updateNodeField:n}=Qf(e.id,e.data,Xf("energy"),Gd);return Dm.default.createElement(im,{isExecuting:e.data.isExecuting,isSelected:e.selected},Dm.default.createElement(fm,null),Dm.default.createElement(sm,null,Dm.default.createElement("div",{style:{paddingLeft:"8px",paddingRight:"8px",paddingBottom:"8px"}},Dm.default.createElement(Om,{title:"Energy",tooltip:"Measure from 0.0 to 1.0 that represents a perceptual measure of intensity and activity. \n                        Typically, energetic tracks feel fast, loud, and noisy. \n                        For example, death metal has high energy, while a Bach prelude scores low on the scale."}),Dm.default.createElement(rm,{control:t,min:0,max:1,step:.01,onChange:e=>{n({range:e})}}))),Dm.default.createElement(v,{type:"target",position:O.Left,id:"input",style:{top:"42px"}}),Dm.default.createElement(v,{type:"source",position:O.Right,id:"input",style:{top:"42px"}}))},instrumentalness:function(e){const{control:t,updateNodeField:n}=Qf(e.id,e.data,Xf("instrumentalness"),Qd);return Pm.default.createElement(im,{isExecuting:e.data.isExecuting,isSelected:e.selected},Pm.default.createElement(fm,null),Pm.default.createElement(sm,null,Pm.default.createElement("div",{style:{paddingLeft:"8px",paddingRight:"8px",paddingBottom:"8px"}},Pm.default.createElement(Om,{title:"Instrumentalness",tooltip:"Predicts whether a track contains no vocals.\n                        Values above 0.5 are intended to represent instrumental tracks. \n                        The closer the instrumentalness value is to 1.0, the greater likelihood the track contains no vocal content."}),Pm.default.createElement(rm,{control:t,min:0,max:1,step:.01,onChange:e=>{n({range:e})}}))),Pm.default.createElement(v,{type:"target",position:O.Left,id:"input",style:{top:"42px"}}),Pm.default.createElement(v,{type:"source",position:O.Right,id:"input",style:{top:"42px"}}))},liveness:function(e){const{control:t,updateNodeField:n}=Qf(e.id,e.data,Xf("liveness"),af);return Zm.default.createElement(im,{isExecuting:e.data.isExecuting,isSelected:e.selected},Zm.default.createElement(fm,null),Zm.default.createElement(sm,null,Zm.default.createElement("div",{style:{paddingLeft:"8px",paddingRight:"8px",paddingBottom:"8px"}},Zm.default.createElement(Om,{title:"Liveness",tooltip:"Detects the presence of an audience in the recording. \n                        Higher liveness values represent an increased probability that the track was performed live. \n                        A value above 0.8 provides strong likelihood that the track is live."}),Zm.default.createElement(rm,{control:t,min:0,max:1,step:.01,onChange:e=>{n({range:e})}}))),Zm.default.createElement(v,{type:"target",position:O.Left,id:"input",style:{top:"42px"}}),Zm.default.createElement(v,{type:"source",position:O.Right,id:"input",style:{top:"42px"}}))},loudness:function(e){const{control:t,updateNodeField:n}=Qf(e.id,e.data,Xf("loudness"),sf);return Km.default.createElement(im,{isExecuting:e.data.isExecuting,isSelected:e.selected},Km.default.createElement(fm,null),Km.default.createElement(sm,null,Km.default.createElement("div",{style:{paddingLeft:"8px",paddingRight:"8px",paddingBottom:"8px"}},Km.default.createElement(Om,{title:"Loudness (dB)",tooltip:"The overall loudness of a track in decibels (dB). \n                        Loudness values are averaged across the entire track and are useful for comparing relative loudness of tracks."}),Km.default.createElement(rm,{control:t,min:-60,max:10,step:.01,onChange:e=>{n({range:e})}}))),Km.default.createElement(v,{type:"target",position:O.Left,id:"input",style:{top:"42px"}}),Km.default.createElement(v,{type:"source",position:O.Right,id:"input",style:{top:"42px"}}))},speechiness:function(e){const{control:t,updateNodeField:n}=Qf(e.id,e.data,Xf("speechiness"),df);return Qm.default.createElement(im,{isExecuting:e.data.isExecuting,isSelected:e.selected},Qm.default.createElement(fm,null),Qm.default.createElement(sm,null,Qm.default.createElement("div",{style:{paddingLeft:"8px",paddingRight:"8px",paddingBottom:"8px"}},Qm.default.createElement(Om,{title:"Speechiness",tooltip:"Detects the presence of spoken words in a track. \n                        Values above 0.66 describe tracks that are probably made entirely of spoken words (e.g. talk show, audio book, poetry). \n                        Values below 0.33 most likely represent music and other non-speech-like tracks."}),Qm.default.createElement(rm,{control:t,min:0,max:1,step:.01,onChange:e=>{n({range:e})}}))),Qm.default.createElement(v,{type:"target",position:O.Left,id:"input",style:{top:"42px"}}),Qm.default.createElement(v,{type:"source",position:O.Right,id:"input",style:{top:"42px"}}))},valence:function(e){const{control:t,updateNodeField:n}=Qf(e.id,e.data,Xf("valence"),hf);return tp.default.createElement(im,{isExecuting:e.data.isExecuting,isSelected:e.selected},tp.default.createElement(fm,null),tp.default.createElement(sm,null,tp.default.createElement("div",{style:{paddingLeft:"8px",paddingRight:"8px",paddingBottom:"8px"}},tp.default.createElement(Om,{title:"Valence",tooltip:"A measure from 0.0 to 1.0 describing the musical positiveness conveyed by a track. \n                        Tracks with high valence sound more positive (e.g. happy, cheerful, euphoric),\n                        while tracks with low valence sound more negative (e.g. sad, depressed, angry)."}),tp.default.createElement(rm,{control:t,min:0,max:1,step:.01,onChange:e=>{n({range:e})}}))),tp.default.createElement(v,{type:"target",position:O.Left,id:"input",style:{top:"42px"}}),tp.default.createElement(v,{type:"source",position:O.Right,id:"input",style:{top:"42px"}}))},tempo:function(e){const{control:t,updateNodeField:n}=Qf(e.id,e.data,Xf("tempo"),mf);return ep.default.createElement(im,{isExecuting:e.data.isExecuting,isSelected:e.selected},ep.default.createElement(fm,null),ep.default.createElement(sm,null,ep.default.createElement("div",{style:{paddingLeft:"8px",paddingRight:"8px",paddingBottom:"8px"}},ep.default.createElement(Om,{title:"Tempo (BPM)",tooltip:"The overall estimated tempo of a track in beats per minute (BPM). \n                        In musical terminology, tempo is the speed or pace of a given piece and derives directly from the average beat duration."}),ep.default.createElement(rm,{control:t,min:0,max:1e3,step:1,onChange:e=>{n({range:e})}}))),ep.default.createElement(v,{type:"target",position:O.Left,id:"input",style:{top:"42px"}}),ep.default.createElement(v,{type:"source",position:O.Right,id:"input",style:{top:"42px"}}))},mode:function(e){const{control:t,errors:n,updateNodeField:r}=Qf(e.id,e.data,Xf("mode"),uf);return Wm.default.createElement(im,{isExecuting:e.data.isExecuting,isSelected:e.selected},Wm.default.createElement(fm,null),Wm.default.createElement(sm,null,Wm.default.createElement(Om,{title:"Mode",tooltip:"Mode indicates the modality (major or minor) of a track, the type of scale from which its melodic content is derived."}),Wm.default.createElement(Hm,{label:"Mode",error:n.mode},Wm.default.createElement(Gm,{label:"Mode",name:"mode",control:t,items:Jm,onChange:e=>{r({mode:e})}}))),Wm.default.createElement(v,{type:"target",position:O.Left,id:"input",style:{top:"42px"}}),Wm.default.createElement(v,{type:"source",position:O.Right,id:"input",style:{top:"42px"}}))}},m=t(b());function Dy(e){return m.default.createElement("li",null,m.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:"Coming soon",showDelay:100},m.default.createElement("li",{className:"w-full cursor-not-allowed border-none bg-transparent !py-1 text-start opacity-50"},m.default.createElement(_,{elementType:"span",fontSize:"medium"},e.label))))}function Py(n){const t=Gf(e=>e.addNode);return m.default.createElement("li",null,m.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:n.tooltip,showDelay:500},m.default.createElement("button",{onDragStart:e=>{var t;e=e,t=n.nodeType,e.dataTransfer.setData("application/reactflow",t),e.dataTransfer.effectAllowed="move"},draggable:!0,tabIndex:0,onKeyDown:e=>{"Enter"===e.key&&(e=n.nodeType,t(e,{x:0,y:0}))},className:"hover:bg-spice-highlight hover:!text-spice-text w-full cursor-grab border-none bg-transparent !py-1 text-start"},m.default.createElement(_,{elementType:"span",fontSize:"medium"},n.label))))}function Ly(e){return m.default.createElement("details",null,m.default.createElement("summary",null,m.default.createElement(_,{elementType:"h2",weight:"bold",fontSize:"large",className:"inline"},e.label)),m.default.createElement("div",{className:"!mt-2"},e.children))}function Fy(e){return m.default.createElement(m.default.Fragment,null,m.default.createElement(_,{elementType:"h1",fontSize:"x-large"},e.label),m.default.createElement("hr",{className:"divide-solid opacity-60"}))}function Vy(){return m.default.createElement("div",{className:"flex flex-col gap-2"},m.default.createElement("div",{className:"flex flex-col gap-2"},m.default.createElement(Fy,{label:"Sources"}),m.default.createElement(Ly,{label:"Library"},m.default.createElement("ul",null,m.default.createElement(Py,{label:"Liked songs",nodeType:"likedSongsSource",tooltip:"Get tracks from your liked songs."}),m.default.createElement(Py,{label:"Local files",nodeType:"localTracksSource",tooltip:"Get tracks from your local files."}),m.default.createElement(Py,{label:"Top tracks",nodeType:"topTracksSource",tooltip:"Get tracks from your top tracks."}),m.default.createElement(Py,{label:"Saved playlist",nodeType:"libraryPlaylistSource",tooltip:"Get tracks from a playlist in your library."}),m.default.createElement(Py,{label:"Saved album",nodeType:"libraryAlbumSource",tooltip:"Get tracks from an album in your library."}),m.default.createElement(Py,{label:"Saved artist",nodeType:"libraryArtistSource",tooltip:"Get tracks from an artist in your library."}))),m.default.createElement(Ly,{label:"Search"},m.default.createElement("ul",null,m.default.createElement(Dy,{label:"Playlist"}),m.default.createElement(Dy,{label:"Album"})))),m.default.createElement("div",{className:"flex flex-col gap-2"},m.default.createElement(Fy,{label:"Filters"}),m.default.createElement(Ly,{label:"Track property"},m.default.createElement("ul",null,m.default.createElement(Py,{label:"Is playable",nodeType:"isPlayable",tooltip:"Filter tracks that are playable."}))),m.default.createElement(Ly,{label:"Audio features"},m.default.createElement("ul",null,m.default.createElement(Py,{label:"Acousticness",nodeType:"acousticness",tooltip:"Filter tracks by acousticness."}),m.default.createElement(Py,{label:"Danceability",nodeType:"danceability",tooltip:"Filter tracks by danceability."}),m.default.createElement(Py,{label:"Energy",nodeType:"energy",tooltip:"Filter tracks by energy."}),m.default.createElement(Py,{label:"Instrumentalness",nodeType:"instrumentalness",tooltip:"Filter tracks by instrumentalness."}),m.default.createElement(Py,{label:"Liveness",nodeType:"liveness",tooltip:"Filter tracks by liveness."}),m.default.createElement(Py,{label:"Speechiness",nodeType:"speechiness",tooltip:"Filter tracks by speechiness."}),m.default.createElement(Py,{label:"Valence",nodeType:"valence",tooltip:"Filter tracks by valence."}),m.default.createElement(Py,{label:"Loudness",nodeType:"loudness",tooltip:"Filter tracks by loudness."}),m.default.createElement(Py,{label:"Tempo",nodeType:"tempo",tooltip:"Filter tracks by tempo."}),m.default.createElement(Py,{label:"Mode",nodeType:"mode",tooltip:"Filter tracks by mode."})))),m.default.createElement("div",{className:"flex flex-col gap-2"},m.default.createElement(Fy,{label:"Processing"}),m.default.createElement("ul",null,m.default.createElement(Py,{label:"Deduplicate",nodeType:"deduplicate",tooltip:"Remove duplicate tracks."}),m.default.createElement(Py,{label:"Shuffle",nodeType:"shuffle",tooltip:"Shuffle the tracks."}),m.default.createElement(Py,{label:"Sort",nodeType:"sort",tooltip:"Sort the tracks."}))),m.default.createElement("div",{className:"flex flex-col gap-2"},m.default.createElement(Fy,{label:"Result"}),m.default.createElement("ul",null,m.default.createElement(Py,{label:"Result",nodeType:"result",tooltip:"The workflow result."}))))}var jy=nn((t,e)=>({showConfirmNewModal:!1,showConfirmLoadModal:!1,showConfirmDeleteModal:!1,selectedWorkflow:null,savedWorkflows:[],setShowConfirmNewModal:e=>{t({showConfirmNewModal:e})},setShowConfirmLoadModal:e=>{t({showConfirmLoadModal:e})},setShowConfirmDeleteModal:e=>{t({showConfirmDeleteModal:e})},setSelectedWorkflow:e=>{t({selectedWorkflow:e})},setSavedWorkflows:e=>{t({savedWorkflows:e})}})),By=t(b());function zy(){const{showConfirmDeleteModal:e,setShowConfirmDeleteModal:n,selectedWorkflow:r,setSavedWorkflows:a}=jy(Gs(e=>({showConfirmDeleteModal:e.showConfirmDeleteModal,setShowConfirmDeleteModal:e.setShowConfirmDeleteModal,selectedWorkflow:e.selectedWorkflow,setSavedWorkflows:e.setSavedWorkflows})));return By.default.createElement(Spicetify.ReactComponent.ConfirmDialog,{isOpen:e,onConfirm:()=>{var t,e;n(!1),null!==r&&(t=r?.id,e=zd().filter(e=>e.id!==t),Spicetify.LocalStorage.set(jd,JSON.stringify(e)),a(zd()))},onClose:()=>{n(!1)},onOutside:()=>{n(!1)},titleText:"Delete workflow",descriptionText:`Are you sure you want to delete the workflow "${r?.name}" ?`,confirmText:"Confirm",cancelText:"Cancel"})}var $y=t(b());function Hy(){const e=Jf(Gs(e=>({loadWorkflow:e.loadWorkflow})))["loadWorkflow"],{showConfirmLoadModal:t,setShowConfirmLoadModal:n,selectedWorkflow:r}=jy(Gs(e=>({showConfirmLoadModal:e.showConfirmLoadModal,setShowConfirmLoadModal:e.setShowConfirmLoadModal,selectedWorkflow:e.selectedWorkflow})));return $y.default.createElement(Spicetify.ReactComponent.ConfirmDialog,{isOpen:t,onConfirm:()=>{n(!1),null!==r&&e(r),Spicetify.PopupModal.hide()},onClose:()=>{n(!1)},onOutside:()=>{n(!1)},titleText:"Load workflow",descriptionText:"You have unsaved changes that will be lost. Confirm?",confirmText:"Confirm",cancelText:"Cancel"})}var Uy=t(b());function Zy(){const e=Jf(Gs(e=>({resetState:e.resetState})))["resetState"],{showConfirmNewModal:t,setShowConfirmNewModal:n}=jy(Gs(e=>({showConfirmNewModal:e.showConfirmNewModal,setShowConfirmNewModal:e.setShowConfirmNewModal})));return Uy.default.createElement(Spicetify.ReactComponent.ConfirmDialog,{isOpen:t,onConfirm:()=>{n(!1),e()},onClose:()=>{n(!1)},onOutside:()=>{n(!1)},titleText:"Create new workflow",descriptionText:"You have unsaved changes that will be lost. Confirm?",confirmText:"Confirm",cancelText:"Cancel"})}var Ky={"grid-container":"EditorPage-module__grid-container___Mvr8j_playlistDmaker",padding:"EditorPage-module__padding___n1uom_playlistDmaker",sidenav:"EditorPage-module__sidenav___UBA-J_playlistDmaker",main:"EditorPage-module__main___kYWdy_playlistDmaker"},Wy=t(b()),Xy=t(b());function Yy(){const{hasPendingChanges:t,loadWorkflow:n}=Jf(Gs(e=>({hasPendingChanges:e.hasPendingChanges,loadWorkflow:e.loadWorkflow}))),{setShowConfirmLoadModal:r,setShowConfirmDeleteModal:a,setSelectedWorkflow:i,savedWorkflows:e,setSavedWorkflows:o}=jy(Gs(e=>({setShowConfirmLoadModal:e.setShowConfirmLoadModal,setShowConfirmDeleteModal:e.setShowConfirmDeleteModal,setSelectedWorkflow:e.setSelectedWorkflow,savedWorkflows:e.savedWorkflows,setSavedWorkflows:e.setSavedWorkflows})));return(0,Xy.useEffect)(()=>{o(zd())},[o]),Xy.default.createElement(Xy.default.Fragment,null,0===e.length&&Xy.default.createElement(_,{elementType:"small",semanticColor:"textSubdued"},"No saved workflows"),e.map(e=>Xy.default.createElement("div",{key:e.id,className:"flex flex-row items-center justify-between"},Xy.default.createElement(_,null,e.name),Xy.default.createElement("div",null,Xy.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:"Load workflow"},Xy.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":"Load workflow",onClick:()=>{i(e),t?r(!0):(n(e),Spicetify.PopupModal.hide())},buttonSize:"sm",iconOnly:()=>Xy.default.createElement(Sm,{size:20})})),Xy.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:"Delete workflow"},Xy.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":"Delete workflow",onClick:()=>{i(e),a(!0)},buttonSize:"sm",iconOnly:()=>Xy.default.createElement(Tm,{size:20,className:"text-spice-error"})}))))))}var qy={panel:"CenterPanel-module__panel___M4yLx_playlistDmaker","divider-vertical":"CenterPanel-module__divider-vertical___rGt2c_playlistDmaker","title-input":"CenterPanel-module__title-input___GJaDF_playlistDmaker","flex-row":"CenterPanel-module__flex-row___JlGxZ_playlistDmaker"},Gy=i.object({workflowName:i.string().nonempty({message:"Name cannot be empty"})});function Jy(){const{workflowName:n,setWorkflowName:e,hasPendingChanges:t,reactFlowInstance:r,workflowId:a,onWorkflowSaved:i,resetState:o,anyExecuting:s}=Jf(Gs(e=>({workflowName:e.workflowName,setWorkflowName:e.setWorkflowName,hasPendingChanges:e.hasPendingChanges,reactFlowInstance:e.reactFlowInstance,workflowId:e.workflowId,onWorkflowSaved:e.onWorkflowSaved,resetState:e.resetState,anyExecuting:e.anyExecuting}))),{formState:{errors:l,isValid:u},control:c,getValues:d,setValue:f}=du({mode:"onChange",disabled:s,defaultValues:{workflowName:n},resolver:yu(Gy)}),m=Tl({control:c}),p=((0,Wy.useEffect)(()=>{e(m.workflowName??"")},[m,e]),(0,Wy.useEffect)(()=>{d("workflowName")!==n&&f("workflowName",n,{shouldValidate:!0})},[n,d,f]),jy(Gs(e=>({setShowConfirmNewModal:e.setShowConfirmNewModal}))))["setShowConfirmNewModal"],h=(0,Wy.useCallback)(()=>{var t,e;null!==r&&(e=r.toObject(),t={...e,id:a,name:n},e=zd().filter(e=>e.id!==t.id),Spicetify.LocalStorage.set(jd,JSON.stringify([...e,t])),i(),Spicetify.showNotification("Workflow saved",!1,1e3))},[r,i,a,n]),g=(0,Wy.useCallback)(()=>{t?p(!0):o()},[t,o,p]);return Wy.default.createElement(aa,{className:qy.panel+" "+qy["flex-row"],position:"top-center"},Wy.default.createElement("div",null,Wy.default.createElement("div",{className:qy["flex-row"]},Wy.default.createElement(dy,{placeholder:"",control:c,name:"workflowName",required:!0}),Wy.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:"Save workflow"},Wy.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":"Save workflow",disabled:!t||!u,onClick:()=>{h()},buttonSize:"sm",iconOnly:()=>Wy.default.createElement(Cm,{size:20})}))),Wy.default.createElement("div",{className:qy["title-input"]},Wy.default.createElement($m,{error:l.workflowName}))),Wy.default.createElement("div",{className:qy["divider-vertical"]}),Wy.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:"Manage workflows"},Wy.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":"Manage workflows",onClick:()=>{Spicetify.PopupModal.display({title:"Saved workflows",content:Wy.default.createElement(Yy),isLarge:!1})},buttonSize:"sm",iconOnly:()=>Wy.default.createElement(Im,{size:20})})),Wy.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:"Create new"},Wy.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":"Create new",onClick:()=>{g()},buttonSize:"sm",iconOnly:()=>Wy.default.createElement(bm,{size:20})})))}var Qy=t(b()),ev={panel:"TopLeftPanel-module__panel___tilhV_playlistDmaker","divider-horizontal":"TopLeftPanel-module__divider-horizontal___ZDnoT_playlistDmaker"},tv=t(b()),nv="HelpButton-module__help-panel___puwoe_playlistDmaker",rv="HelpButton-module__help-button___yRJAR_playlistDmaker",p=t(b()),av="HelpModal-module__help-modal___VsRP1_playlistDmaker";function iv(e){return p.default.createElement(_,{elementType:"p",semanticColor:"textSubdued",fontSize:"medium",paddingBottom:"1rem"},e.children)}function ov(e){return p.default.createElement(_,{elementType:"span",semanticColor:"textBase",fontSize:"medium"},e.children)}function sv(){return p.default.createElement("div",{className:av},p.default.createElement(iv,null,"Drag and drop nodes from the side menu to create a workflow.",p.default.createElement("br",null),"Move nodes in the editor by dragging them by their header."),p.default.createElement(iv,null,"A workflow must have ",p.default.createElement(ov,null,"at least one source node"),", and ",p.default.createElement(ov,null,"one result node"),".",p.default.createElement("br",null),"Connect the nodes together to create a workflow. Connections on the right of the nodes are ",p.default.createElement(ov,null,"outputs"),", and connections on the left are ",p.default.createElement(ov,null,"inputs"),".",p.default.createElement("br",null),"Nodes can accept ",p.default.createElement(ov,null,"multiple connections")," on their input side."),p.default.createElement(iv,null,"Select a node by clicking on it. The selected node will be highlighted.",p.default.createElement("br",null),"To select multiple nodes, hold down the ",p.default.createElement("kbd",null,"Control")," key while clicking on the nodes.",p.default.createElement("br",null),"Selected nodes can be moved together by dragging any of them.",p.default.createElement("br",null),"Selected nodes can be ",p.default.createElement(ov,null,"deleted")," by selecting it and pressing the ",p.default.createElement("kbd",null,"Backspace")," key."),p.default.createElement(iv,null,"Hover over the node names in the menu to see a description of the node."),p.default.createElement(iv,null,"When the workflow is done, click the"," ",p.default.createElement(ov,null,'"Execute"')," button to run the workflow.",p.default.createElement("br",null),"The results will be displayed in the"," ",p.default.createElement(ov,null,'"Result" tab'),".",p.default.createElement("br",null),"You can then either play the tracks directly or save the result to a playlist."),p.default.createElement(iv,null,"You can ",p.default.createElement(ov,null,"save")," and ",p.default.createElement(ov,null,"load")," ","workflows using the buttons in the top center of the editor."))}function lv(){return tv.default.createElement("div",{className:nv},tv.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:"Help",placement:"right"},tv.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":"Help",iconOnly:()=>tv.default.createElement(_m,{size:20,strokeWidth:1.5}),buttonSize:"sm",onClick:()=>{Spicetify.PopupModal.display({title:"Help",content:tv.default.createElement(sv,null),isLarge:!0})},className:rv})))}var uv=t(b()),cv=t(b());function dv(){return cv.default.createElement(_,{elementType:"p",semanticColor:"textSubdued",fontSize:"small"},"Coming soon")}function fv(){return uv.default.createElement("div",{className:"flex flex-col items-center"},uv.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:"Settings",placement:"right"},uv.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":"Settings",iconOnly:()=>uv.default.createElement(Nm,{size:20,strokeWidth:1.5,className:"text-spice-text"}),buttonSize:"sm",onClick:()=>{Spicetify.PopupModal.display({title:"Settings",content:uv.default.createElement(dv),isLarge:!0})},className:"p-1"})))}function mv(){return Qy.default.createElement(aa,{className:ev.panel,position:"top-left"},Qy.default.createElement(lv,null),Qy.default.createElement("div",{className:ev["divider-horizontal"]}),Qy.default.createElement(fv,null))}var pv=t(b()),hv={panel:"TopRightPanel-module__panel___dSzF7_playlistDmaker"};function gv(){const{nodes:e,edges:t}=Jf(Gs(e=>({nodes:e.nodes,edges:e.edges})));return pv.default.createElement(aa,{className:hv.panel,position:"top-right"},pv.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":"Execute",onClick:async()=>{(async function(t,n){var r=Jf.getState().setResult,a=Jf.getState().updateNodeData,i=Jf.getState().nodeFormValidationCallbacks,o=t.filter(e=>"result"===e.type);if(0===o.length)Spicetify.showNotification("No result node found in workflow",!0);else if(1<o.length)Spicetify.showNotification("The workflow should have only one result node",!0);else{o=o[0];let e=!0;for(const p of i.values()){var s=await p();e=e&&s}if(e){for(var l=ni(o,t,n),i=Yf.result(o,l),u={[o.id]:i},c=new Set([o.id]);0<l.length;){var d,f,m=l.pop();c.has(m.id)||(c.add(m.id),d=ni(m,t,n),f=m.type,u[m.id]=Yf[f](m,d),l.push(...d))}try{r(await i.getResults(u)),Spicetify.showNotification("Workflow executed successfully",!1,1e3)}catch(e){console.error("Error while executing workflow:",e),Spicetify.showNotification("Error while executing workflow",!0),r([]);for(const h of t)a(h.id,{isExecuting:!1})}}else Spicetify.showNotification("Some nodes are invalid",!0)}})(e,t)},buttonSize:"sm",iconLeading:()=>pv.default.createElement(xm,{size:20})},"Execute"))}var yv=e=>({reactFlowInstance:e.reactFlowInstance,nodes:e.nodes,edges:e.edges,onNodesChange:e.onNodesChange,onEdgesChange:e.onEdgesChange,onConnect:e.onConnect,addNode:e.addNode,setReactFlowInstance:e.setReactFlowInstance,getNodes:e.getNodes,getEdges:e.getEdges});function vv(){const{nodes:e,edges:t,onNodesChange:n,onEdgesChange:r,onConnect:a,addNode:i,reactFlowInstance:o,setReactFlowInstance:s,getNodes:l,getEdges:u}=Gf(Gs(yv));var c=(0,Ae.useCallback)(e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},[]),d=(0,Ae.useCallback)(e=>{e.preventDefault();var t=e.dataTransfer.getData("application/reactflow");void 0!==t&&t&&(e=o?.screenToFlowPosition({x:e.clientX,y:e.clientY})??{x:0,y:0},i(t,e))},[o,i]),f=(0,Ae.useCallback)(r=>{const a=l(),i=u();var e=a.find(e=>e.id===r.target);if(void 0===e)return!1;const o=(e,t=new Set)=>{if(!t.has(e.id)){t.add(e.id);for(const n of ti(e,a,i)){if(n.id===r.source)return!0;if(o(n,t))return!0}}return!1};return e.id!==r.source&&!o(e)},[l,u]);return Ae.default.createElement(Ae.default.Fragment,null,Ae.default.createElement("div",{className:"app-container"},Ae.default.createElement("div",{className:Spicetify.classnames(Ky["grid-container"],"gap-panel h-full w-full")},Ae.default.createElement("div",{className:Spicetify.classnames(Ky.padding,"panel")}),Ae.default.createElement("div",{className:Spicetify.classnames(Ky.sidenav,"panel overflow-scroll !p-5")},Ae.default.createElement(Vy,null)),Ae.default.createElement("div",{className:Spicetify.classnames(Ky.main,"panel")},Ae.default.createElement(ws,{nodes:e,edges:t,onNodesChange:n,onEdgesChange:r,onConnect:a,onInit:s,onDrop:d,onDragOver:c,deleteKeyCode:["Backspace"],nodeTypes:Ay,isValidConnection:f,selectNodesOnDrag:!1},Ae.default.createElement(mv,null),Ae.default.createElement(Jy,null),Ae.default.createElement(gv,null),Ae.default.createElement(zs,null),Ae.default.createElement(Ms,null),Ae.default.createElement(Ys,{variant:Vs.Dots,gap:12,size:1}))))),Ae.default.createElement(Zy,null),Ae.default.createElement(Hy,null),Ae.default.createElement(zy,null))}var bv=t(b());var Ev=t(b());function I(e,...t){let n=y().Translations;for(const a of e){if("string"==typeof n)throw new Error(`Key "${a}" not found in translations.`);n=n[a]}let r=n;return t.forEach((e,t)=>{r=r.replace(`{${t.toFixed()}}`,e)}),r}var wv=t(b()),_v={"display-list":"TrackListGrid-module__display-list___ahMmJ_playlistDmaker","display-list-compact":"TrackListGrid-module__display-list-compact___Uwrj2_playlistDmaker"},xv=t(b()),Sv=t(b());function kv(e){return Sv.default.createElement("svg",{height:"16",width:"16",viewBox:"0 0 16 16",fill:"var(--text-bright-accent)",className:e.className},Sv.default.createElement("path",{d:"M14 10L8 4l-6 6h12z"}))}var Iv=t(b());function Cv(e){return Iv.default.createElement("svg",{height:"16",width:"16",viewBox:"0 0 16 16",fill:"var(--text-bright-accent)",className:e.className},Iv.default.createElement("path",{d:"M14 6l-6 6-6-6h12z"}))}function Nv(n){function r(){return void 0===n.sortedHeader?xv.default.createElement(xv.default.Fragment,null):"ascending"===n.sortedHeader.order?xv.default.createElement(kv,{className:"main-trackList-arrow"}):xv.default.createElement(Cv,{className:"main-trackList-arrow"})}const a=void 0!==n.sortedHeader?"main-trackList-sortable":"";return xv.default.createElement("div",{className:"main-trackList-trackListHeader"},xv.default.createElement("div",{className:"main-trackList-trackListHeaderRow main-trackList-trackListRowGrid","aria-rowindex":1},xv.default.createElement("div",{className:"main-trackList-rowSectionIndex","aria-colindex":1,"aria-sort":"none",tabIndex:-1},"#"),n.headers.map((e,t)=>xv.default.createElement("div",{key:e.key,className:0===t?"main-trackList-rowSectionStart":"main-trackList-rowSectionVariable","aria-colindex":t+2,"aria-sort":n.sortedHeader&&n.sortedHeader.key===e.key?n.sortedHeader.order:"none",tabIndex:-1},xv.default.createElement("button",{className:"main-trackList-column "+a,tabIndex:-1,onClick:()=>{n.onHeaderClicked?.(e.key)}},xv.default.createElement(_,{variant:"mesto"},e.label),n.sortedHeader&&n.sortedHeader.key===e.key&&r()))),xv.default.createElement("div",{className:"main-trackList-rowSectionEnd","aria-colindex":n.headers.length+2,"aria-sort":"none",tabIndex:-1},xv.default.createElement("button",{"aria-label":I(["tracklist.header.duration"]),className:"main-trackList-column main-trackList-durationHeader "+a,onClick:()=>{n.onHeaderClicked?.("duration")}},xv.default.createElement("svg",{height:"16",width:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor"},xv.default.createElement("path",{d:"M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8z"}),xv.default.createElement("path",{d:"M8 3.25a.75.75 0 01.75.75v3.25H11a.75.75 0 010 1.5H7.25V4A.75.75 0 018 3.25z"}))),n.sortedHeader&&"duration"===n.sortedHeader.key&&r())))}var Tv=t(b());var Rv=t(b());function Mv(e){const[t,n]=(0,Rv.useState)(y().LibraryAPI.containsSync(e));return(0,Rv.useEffect)(()=>{y().LibraryAPI.contains(e).then(e=>{n(e[0])}).catch(console.error)},[e]),[t,n]}var C=t(b());function Ov(n){var e=(0,C.useRef)(null);const r=function(t){const[e,n]=(0,Tv.useState)(!1);return(0,Tv.useEffect)(()=>{const e=new IntersectionObserver(e=>{n(e.some(e=>e.isIntersecting))},{rootMargin:"0px",threshold:0});return e.observe(t.current),()=>{e.disconnect()}},[t]),e}(e),[t,a]=(0,C.useState)(!1),[i,o]=Mv(n.track.uri);(0,C.useEffect)(()=>{const e=y().LibraryAPI;if(r){const t=e=>{e.data.uris.some(e=>e===n.track.uri)&&("add"===e.data.operation?o(!0):"remove"===e.data.operation&&o(!1))};return e.getEvents().addListener("operation_complete",t),()=>{e.getEvents().removeListener("operation_complete",t)}}},[r,n.track.uri,o]);var s=C.default.createElement("div",{style:{height:"compact"===n.displayType?"32px":"54px"}}),l=C.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:I(["save_to_your_liked_songs"]),showDelay:100},C.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":I(["save_to_your_liked_songs"]),iconOnly:()=>C.default.createElement(gy,{icon:"plus-alt",iconSize:16}),buttonSize:"sm",style:{padding:0,visibility:t?void 0:"hidden"},onClick:async function(){await y().LibraryAPI.add({uris:[n.track.uri]})}})),u=C.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:I(["remove_from_your_liked_songs"]),showDelay:100},C.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":I(["remove_from_your_liked_songs"]),iconOnly:()=>C.default.createElement(gy,{icon:"check-alt-fill",iconSize:16}),buttonSize:"sm",style:{padding:0},onClick:async function(){await y().LibraryAPI.remove({uris:[n.track.uri]})},semanticColor:"essentialBrightAccent"})),c=C.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{iconOnly:()=>C.default.createElement(C.default.Fragment,null),buttonSize:"sm",style:{padding:0,visibility:t?void 0:"hidden"}});let d;switch(i){case!0:d=u;break;case!1:d=l;break;default:d=c}return C.default.createElement("div",{ref:e,onMouseEnter:()=>{a(!0)},onMouseLeave:()=>{a(!1)}},r?C.default.createElement(Spicetify.ReactComponent.RightClickMenu,{menu:n.getRowMenu(n.track)},C.default.createElement("div",{"aria-selected":n.selected,onClick:n.onClick,onDoubleClick:()=>{n.track.isPlayable&&n.onDoubleClick()},draggable:"true",onDragStart:e=>{n.dragHandler.draggable&&n.dragHandler.onDragStart(e)}},C.default.createElement("div",{className:`main-trackList-trackListRow main-trackList-trackListRowGrid ${n.active?"main-trackList-active":""} ${n.selected?"main-trackList-selected":""} `+("compact"===n.displayType?"main-trackList-rowCompactMode":""),style:{opacity:n.track.isPlayable?1:.4}},C.default.createElement("div",{className:"main-trackList-rowSectionIndex","aria-colindex":1,tabIndex:-1},C.default.createElement("div",{className:"main-trackList-rowMarker"},n.playing?C.default.createElement(C.default.Fragment,null,C.default.createElement("img",{className:"main-trackList-playingIcon",width:"14",height:"14",alt:"",src:"/images/equaliser-animated-green.gif"}),C.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:I(["playback-control.pause"]),showDelay:200},C.default.createElement("button",{className:"main-trackList-rowImagePlayButton","aria-label":I(["playback-control.pause"]),tabIndex:0,"aria-expanded":"false",onClick:()=>{Spicetify.Player.pause()}},C.default.createElement("svg",{height:"24",width:"24","aria-hidden":"true",fill:"currentColor",className:"main-trackList-rowPlayPauseIcon",viewBox:"0 0 24 24"},C.default.createElement("path",{d:"M5.7 3a.7.7 0 0 0-.7.7v16.6a.7.7 0 0 0 .7.7h2.6a.7.7 0 0 0 .7-.7V3.7a.7.7 0 0 0-.7-.7H5.7zm10 0a.7.7 0 0 0-.7.7v16.6a.7.7 0 0 0 .7.7h2.6a.7.7 0 0 0 .7-.7V3.7a.7.7 0 0 0-.7-.7h-2.6z"}))))):C.default.createElement(C.default.Fragment,null,C.default.createElement("span",{className:"main-trackList-number"},n.index),n.track.isPlayable&&C.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:I(["tracklist.a11y.play"],n.track.name,n.track.artists.map(e=>e.name).join(", ")),showDelay:200},C.default.createElement("button",{className:"main-trackList-rowImagePlayButton","aria-label":I(["tracklist.a11y.play"],n.track.name,n.track.artists.map(e=>e.name).join(", ")),onClick:()=>{n.active?Spicetify.Player.play():n.track.isPlayable&&n.onDoubleClick()},tabIndex:-1},C.default.createElement("svg",{height:"24",width:"24","aria-hidden":"true",className:"main-trackList-rowPlayPauseIcon",viewBox:"0 0 24 24","data-encore-id":"icon",fill:"currentColor"},C.default.createElement("path",{d:"M7.05 3.606l13.49 7.788a.7.7 0 010 1.212L7.05 20.394A.7.7 0 016 19.788V4.212a.7.7 0 011.05-.606z"}))))))),n.children&&C.Children.map(n.children,(e,t)=>C.default.createElement("div",{className:0===t?"main-trackList-rowSectionStart":"main-trackList-rowSectionVariable","aria-colindex":t+2,tabIndex:-1},e)),C.default.createElement("div",{className:"main-trackList-rowSectionEnd","aria-colindex":C.Children.count(n.children)+2,tabIndex:-1},d,C.default.createElement(_,{variant:"mesto",semanticColor:"textSubdued",className:"main-trackList-rowDuration"},Spicetify.Player.formatTime(n.track.duration)),C.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:I(["more.label.track"],n.track.name,n.track.artists.map(e=>e.name).join(", ")),showDelay:100},C.default.createElement("div",null,C.default.createElement(Spicetify.ReactComponent.ContextMenu,{trigger:"click",action:"toggle",menu:n.getRowMenu(n.track)},C.default.createElement(Spicetify.ReactComponent.ButtonTertiary,{"aria-label":I(["more.label.track"],n.track.name,n.track.artists.map(e=>e.name).join(", ")),"aria-haspopup":"menu",iconOnly:()=>C.default.createElement(gy,{icon:"more",iconSize:16}),buttonSize:"sm",style:{padding:0,visibility:t?void 0:"hidden"}})))))))):s)}function Av(n){const r=function(){const[e,t]=(0,bv.useState)(Spicetify.Player.data.item.uri);return(0,bv.useEffect)(()=>{function e(e){t(e?.data.item.uri??"")}return Spicetify.Player.addEventListener("songchange",e),()=>{Spicetify.Player.removeEventListener("songchange",e)}}),e}(),a=function(){const[e,t]=(0,Ev.useState)(Spicetify.Player.data.isPaused?"pause":"play");return(0,Ev.useEffect)(()=>{function e(e){t(e.data.isPaused?"pause":"play")}return Spicetify.Player.addEventListener("onplaypause",e),()=>{Spicetify.Player.removeEventListener("onplaypause",e)}}),e}(),[i,o]=(0,wv.useState)(new Map),s=(0,wv.useMemo)(()=>{var e=Array.from(i.entries());return 0===e.length?Spicetify.ReactHook.DragHandler({itemUris:[],dragLabelText:""}):Spicetify.ReactHook.DragHandler({itemUris:e.map(e=>e[0]),dragLabelText:1<i.size?I(["tracklist.drag.multiple.label","other"],i.size.toFixed()):e[0][1].name})},[i]);function l(e,t){e.ctrlKey?(i.has(t.uri)?i.delete(t.uri):i.set(t.uri,t),o(new Map(i))):o(new Map([[t.uri,t]]))}return wv.default.createElement("div",{className:"contentSpacing"},wv.default.createElement("div",{role:"grid","aria-rowcount":n.tracks.length,"aria-colcount":n.headers.length+2,"aria-label":n.gridLabel,className:"main-trackList-trackList main-trackList-indexable",tabIndex:0},wv.default.createElement(Nv,{headers:n.headers,sortedHeader:n.sortedHeader,onHeaderClicked:n.onHeaderClicked}),wv.default.createElement("div",{className:"compact"===n.displayType?_v["display-list-compact"]:_v["display-list"]},n.tracks.map((t,e)=>wv.default.createElement(Ov,{key:t.uri,track:t,index:n.useTrackNumber?t.trackNumber:e+1,selected:i.has(t.uri),active:r===t.uri,playing:r===t.uri&&"play"===a,onClick:e=>{l(e,t)},onDoubleClick:()=>{n.onPlayTrack(t.uri)},dragHandler:s,displayType:n.displayType,getRowMenu:n.getRowMenu},n.getRowContent(t))),n.subtracks.map(e=>wv.default.createElement(wv.default.Fragment,null,e.headerRow,e.tracks.map((t,e)=>wv.default.createElement(Ov,{key:t.uri,track:t,index:n.useTrackNumber?t.trackNumber:e+1,selected:i.has(t.uri),active:r===t.uri,playing:r===t.uri&&"play"===a,onClick:e=>{l(e,t)},onDoubleClick:()=>{n.onPlayTrack(t.uri)},dragHandler:s,displayType:n.displayType,getRowMenu:n.getRowMenu},n.getRowContent(t))))))))}var Dv=t(b());function Pv(e){return Dv.default.createElement(_,{variant:"mesto"},Dv.default.createElement("a",{className:"standalone-ellipsis-one-line",dir:"auto",href:"#",tabIndex:-1,onClick:()=>{e.onAlbumClick(e.track.album.uri)}},e.track.album.name))}var Lv=t(b()),Fv=t(b());function Vv(t){return Fv.default.createElement("div",{className:"main-trackList-rowMainContent"},Fv.default.createElement(_,{className:"main-trackList-rowTitle standalone-ellipsis-one-line",variant:"ballad",semanticColor:"textBase"},t.track.name),t.withArtists&&Fv.default.createElement(_,{className:"main-trackList-rowSubTitle standalone-ellipsis-one-line",variant:"mesto",semanticColor:"textSubdued"},t.track.artists.map(e=>Fv.default.createElement("a",{dir:"auto",href:"#",tabIndex:-1,onClick:()=>{t.onArtistClick(e.uri)},key:e.uri},e.name)).reduce((e,t)=>null===e?[t]:[...e,Fv.default.createElement(Fv.default.Fragment,null,", "),t],null)))}function jv(e){const t=Lv.default.createElement("div",{className:"main-trackList-rowImage main-trackList-rowImageFallback"},Lv.default.createElement("svg",{role:"img",height:"16",width:"16","aria-hidden":"true",viewBox:"0 0 16 16",fill:"currentColor"},Lv.default.createElement("path",{d:"M10 2v9.5a2.75 2.75 0 11-2.75-2.75H8.5V2H10zm-1.5 8.25H7.25A1.25 1.25 0 108.5 11.5v-1.25z"})));var n=0===(n=e.track.backingTrack.album).images.length?"":n.images[0].url;return Lv.default.createElement(Lv.default.Fragment,null,""!==n?Lv.default.createElement("img",{loading:"eager",src:n,className:"main-image-image main-trackList-rowImage main-image-loaded",width:"40",height:"40",onError:e=>e.currentTarget.outerHTML=Spicetify.ReactDOMServer.renderToString(t)}):t,Lv.default.createElement(Vv,{track:e.track,withArtists:e.withArtists,onArtistClick:e.onArtistClick}))}var Bv='<path d="M16 15H2v-1.5h14V15zm0-4.5H2V9h14v1.5zm-8.034-6A5.484 5.484 0 0 1 7.187 6H13.5a2.5 2.5 0 0 0 0-5H7.966c.159.474.255.978.278 1.5H13.5a1 1 0 1 1 0 2H7.966zM2 2V0h1.5v2h2v1.5h-2v2H2v-2H0V2h2z"></path>';var zv,$v,Hv=t(b()),Uv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},Zv=(zv="Radio",$v=[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]],(_d=(0,Hv.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,children:a,...i},o)=>(0,Hv.createElement)("svg",{ref:o,...Uv,width:t,height:t,stroke:e,strokeWidth:r?24*Number(n)/Number(t):n,className:"lucide lucide-"+zv.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),...i},[...$v.map(([e,t])=>(0,Hv.createElement)(e,t)),...(Array.isArray(a)?a:[a])||[]]))).displayName=""+zv,_d),N=t(b()),Kv=t(b()),Wv=t(b());function Xv(e){return Wv.default.createElement(Spicetify.ReactComponent.Menu,{className:"encore-dark-theme main-contextMenu-menu"},e.children)}function Yv(t){return Kv.default.createElement(Xv,null,t.artists.map(e=>Kv.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:()=>{t.onArtistClick(e.uri)},key:e.uri},Kv.default.createElement("span",null,e.name))))}var qv=t(b());function Gv(n){const[e,r]=(0,qv.useState)([]);return(0,qv.useEffect)(()=>{!async function(){const t=await y().UserAPI.getUser();var e=(await uy()).filter(e=>e.owner.uri===t.uri);r(e)}()},[]),qv.default.createElement(Xv,null,e.map(t=>qv.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:async()=>{var e;e=t.uri,await y().PlaylistAPI.add(e,n.tracksUri,{after:"end"})},key:t.uri},qv.default.createElement("span",null,t.name))))}var Jv=t(b());function Qv(e){var t=Spicetify.ReactDOMServer.renderToString(Jv.default.createElement(Spicetify.ReactComponent.MenuItem,{leadingIcon:e.leadingIcon,trailingIcon:Jv.default.createElement("svg",{height:"16",width:"16","aria-hidden":"true",className:"main-contextMenu-subMenuIcon",viewBox:"0 0 16 16",fill:"currentColor"},Jv.default.createElement("path",{d:"M14 10 8 4l-6 6h12z"}))},Jv.default.createElement("span",null,e.label)));return Jv.default.createElement(Spicetify.ReactComponent.ContextMenu,{trigger:"click",action:"toggle",placement:"right-end",renderInline:!0,menu:e.submenu},Jv.default.createElement("div",{role:"menu",tabIndex:0,onMouseEnter:e=>{e.currentTarget.click()},dangerouslySetInnerHTML:{__html:t}}))}function e0(t){var[e]=Mv(t.track.uri);let n;switch(e){case!0:n=N.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:async function(){await y().LibraryAPI.remove({uris:[t.track.uri]})},leadingIcon:N.default.createElement(gy,{icon:"check-alt-fill",iconSize:16,semanticColor:"essentialBrightAccent"})},N.default.createElement("span",null,I(["remove_from_your_liked_songs"])));break;case!1:n=N.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:async function(){await y().LibraryAPI.add({uris:[t.track.uri]})},leadingIcon:N.default.createElement(gy,{icon:"plus-alt",iconSize:16})},N.default.createElement("span",null,I(["save_to_your_liked_songs"])));break;default:n=N.default.createElement(Spicetify.ReactComponent.MenuItem,null,N.default.createElement("span",null,"..."))}return N.default.createElement(Xv,null,N.default.createElement(Qv,{label:I(["contextmenu.add-to-playlist"]),submenu:N.default.createElement(Gv,{tracksUri:[t.track.uri]}),leadingIcon:N.default.createElement(gy,{icon:"plus2px",iconSize:16})}),n,N.default.createElement(Spicetify.ReactComponent.MenuItem,{divider:"after",onClick:async function(){await y().PlayerAPI.addToQueue([{uri:t.track.uri}])},leadingIcon:N.default.createElement(gy,{iconPath:Bv,iconSize:16})},N.default.createElement("span",null,I(["contextmenu.add-to-queue"]))),1===t.track.artists.length?N.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:()=>{t.onArtistClick(t.track.artists[0].uri)},leadingIcon:N.default.createElement(gy,{icon:"artist",iconSize:16})},N.default.createElement("span",null,I(["contextmenu.go-to-artist"]))):N.default.createElement(Qv,{label:I(["contextmenu.go-to-artist"]),submenu:N.default.createElement(Yv,{artists:t.track.artists,onArtistClick:t.onArtistClick}),leadingIcon:N.default.createElement(gy,{icon:"artist",iconSize:16})}),N.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:()=>{t.onAlbumClick(t.track.album.uri)},leadingIcon:N.default.createElement(gy,{icon:"album",iconSize:16})},N.default.createElement("span",null,I(["contextmenu.go-to-album"]))),!Spicetify.URI.isLocalTrack(t.track.uri)&&N.default.createElement(Spicetify.ReactComponent.MenuItem,{onClick:async function(){var e=await async function(e){if(!(Spicetify.URI.isTrack(e)||Spicetify.URI.isArtist(e)||Spicetify.URI.isAlbum(e)))throw new Error("The source URI must be a track, artist or album URI.");if(200!==(e=await y().RequestBuilder.build().withHost("https://spclient.wg.spotify.com/inspiredby-mix/v2").withPath("/seed_to_playlist/"+e).withEndpointIdentifier("/seed_to_playlist/{uri}").withQueryParameters({"response-format":"json"}).withoutMarket().send()).status)throw new Error("Failed to get the radio playlist.");return e.body.mediaItems[0].uri}(t.track.uri);y().History.push(Spicetify.URI.fromString(e).toURLPath(!0))},leadingIcon:N.default.createElement(Zv,{size:16})},N.default.createElement("span",null,I(["contextmenu.go-to-song-radio"]))))}var t0=t(b());function n0(t){let e;return"lg"===t.size?e="large":"md"===t.size?e="medium":"sm"===t.size&&(e="small"),t0.default.createElement(Spicetify.ReactComponent.ButtonPrimary,{"aria-label":I(["play"]),size:e,buttonSize:t.size,disabled:t.disabled,onClick:e=>{e.stopPropagation(),t.onClick()},iconOnly:()=>t0.default.createElement(gy,{icon:"play"})})}var r0=t(b()),a0=t(b()),i0={"button-wrapper":"CreatePlaylistModal-module__button-wrapper___bVbk-_playlistDmaker",fieldset:"CreatePlaylistModal-module__fieldset___tZbPT_playlistDmaker"},o0=i.object({playlistName:i.string().nonempty({message:"Name cannot be empty"}),parentFolder:i.string().optional()}),s0={playlistName:"My playlist",parentFolder:void 0};function l0(){const[e,i]=a0.default.useState(!1),[t,n]=a0.default.useState([]),{workflowName:r,result:o}=Jf(Gs(e=>({workflowName:e.workflowName,result:e.result}))),{formState:{errors:a,isValid:s},getValues:l,control:u}=du({mode:"onChange",defaultValues:{...s0,playlistName:r},resolver:yu(o0)}),c=(0,a0.useCallback)(async()=>{i(!0);var e=y().RootlistAPI,t=y().PlaylistAPI,{playlistName:n,parentFolder:r}=l();try{var a=await e.createPlaylist(n??"New playlist",{after:void 0!==r&&""!==r?{uri:r}:"end"});await t.add(a,o.map(e=>e.uri),{after:"end"})}catch(e){return console.error("Error creating playlist",e),Spicetify.showNotification("Error creating playlist",!1),void i(!1)}i(!1),Spicetify.PopupModal.hide()},[l,o]);return(0,a0.useEffect)(()=>{!async function(){var e=await async function(){var e=await y().RootlistAPI.getContents();const t=e=>e.filter(sy).flatMap(e=>[e,...t(e.items)]);return t(e.items)}();n(e.map(e=>({uri:e.uri,name:e.name})))}()},[]),a0.default.createElement("div",null,a0.default.createElement(_,{paddingBottom:"8px",weight:"bold",elementType:"p"},"Save ",o.length," tracks to a new playlist"),a0.default.createElement("fieldset",{className:i0.fieldset,disabled:e},a0.default.createElement("label",null,a0.default.createElement(_,{elementType:"small",paddingBottom:"4px"},"Playlist name"),a0.default.createElement(dy,{placeholder:"Playlist name",control:u,name:"playlistName"})),a0.default.createElement($m,{error:a.playlistName}),a0.default.createElement("label",null,a0.default.createElement(_,{elementType:"small",paddingBottom:"4px"},"Parent folder"),a0.default.createElement(Gm,{label:"Root",name:"parentFolder",control:u,items:t.map(e=>({label:e.name,value:e.uri}))})),a0.default.createElement("div",{className:i0["button-wrapper"]},a0.default.createElement(Spicetify.ReactComponent.ButtonPrimary,{disabled:!s,buttonSize:"sm",onClick:async()=>{await c()}},"Create playlist"))))}var u0={"grid-container":"ResultPage-module__grid-container___xqfAg_playlistDmaker",padding:"ResultPage-module__padding___d6g1j_playlistDmaker",main:"ResultPage-module__main___WzLf0_playlistDmaker"};function c0(){const t=y().History,n=Jf(Gs(e=>({result:e.result})))["result"];var e,r,a,i,o=(0,r0.useMemo)(()=>n.map(e=>new tf(e)),[n]),s=[{key:"title",label:I(["tracklist.header.title"])},{key:"album",label:I(["tracklist.header.album"])},{key:"source",label:"Source"}];const l=async e=>{e=e?{uri:e}:void 0;await y().PlayerAPI.play({uri:"",pages:[{items:n}]},{},{skipTo:e})};return r0.default.createElement("div",{className:"app-container"},r0.default.createElement("div",{className:Spicetify.classnames(u0["grid-container"],"gap-panel h-full w-full")},r0.default.createElement("div",{className:Spicetify.classnames(u0.padding,"panel")}),r0.default.createElement("div",{className:Spicetify.classnames(u0.main,"panel")},r0.default.createElement("div",{className:"main-actionBar-ActionBar contentSpacing"},r0.default.createElement("div",{className:"main-actionBar-ActionBarRow"},r0.default.createElement("div",{className:"main-playButton-PlayButton"},r0.default.createElement(n0,{disabled:0===o.length,size:"lg",onClick:()=>{l()}})),r0.default.createElement(Spicetify.ReactComponent.TooltipWrapper,{label:"Create playlist from tracks"},r0.default.createElement(Spicetify.ReactComponent.ButtonSecondary,{disabled:0===o.length,"aria-label":"Create playlist from tracks",iconOnly:()=>r0.default.createElement(vm,{size:30}),buttonSize:"lg",onClick:()=>{Spicetify.PopupModal.display({title:"Create playlist",content:r0.default.createElement(l0,null),isLarge:!0})},className:u0["help-button"]})),0<o.length&&r0.default.createElement("p",null,I(["tracklist-header.songs-counter",1===o.length?"one":"other"],o.length.toFixed()),r0.default.createElement("span",{className:"main-entityHeader-divider"}),(e=o.reduce((e,t)=>e+t.duration,0),r=Math.floor(e/1e3%60),a=Math.floor(e/1e3/60%60),e=Math.floor(e/1e3/60/60%24),i=[],0!==e&&i.push(I(["time.hours.short",1===e?"one":"other"],e.toFixed())),0!==a&&i.push(I(["time.minutes.short",1===a?"one":"other"],a.toFixed())),0===e&&0!==r&&i.push(I(["time.seconds.short",1===r?"one":"other"],r.toFixed())),i.join(" "))))),r0.default.createElement(Av,{tracks:o,subtracks:[],gridLabel:I(["local-files"]),useTrackNumber:!1,onPlayTrack:e=>{l(e)},headers:s,getRowContent:e=>{return[r0.default.createElement(jv,{track:e,withArtists:!0,key:e.uri,onArtistClick:e=>{t.push("/artist/"+Du(Spicetify.URI.fromString(e)))}}),r0.default.createElement(Pv,{track:e,key:e.uri,onAlbumClick:e=>{t.push("/album/"+Du(Spicetify.URI.fromString(e)))}}),r0.default.createElement(_,{key:e.uri,variant:"mesto",className:"standalone-ellipsis-one-line"},e.source)]},displayType:"list",getRowMenu:e=>r0.default.createElement(e0,{track:e,onArtistClick:e=>{var t=y().History,e=Spicetify.URI.fromString(e).toURLPath(!0);t.push(e)},onAlbumClick:e=>{var t=y().History,e=Spicetify.URI.fromString(e).toURLPath(!0);t.push(e)}})}))))}var xd="/playlist-maker",d0=xd+"/editor",f0=xd+"/result",m0=[{key:"Editor",href:d0,label:"Editor"},{key:"Result",href:f0,label:"Result"}];var p0=function(){(0,ge.useEffect)(()=>{!async function(){await be("playlist-maker",Ee,{title:"New in v"+Ee,content:ge.default.createElement("p",null,ge.default.createElement("ul",null,we.map(e=>ge.default.createElement("li",{key:e},e)))),isLarge:!0})}()},[]);const t=y().History,n=t.location;let e=ge.default.createElement(ge.default.Fragment,null);switch(n.pathname){case d0:e=ge.default.createElement(vv,null);break;case f0:e=ge.default.createElement(c0,null);break;default:t.replace(d0)}var r=document.querySelector(".main-topBar-topbarContentWrapper");return ge.default.createElement(ge.default.Fragment,null,e,null!==r&&Spicetify.ReactDOM.createPortal(ge.default.createElement(Oe,{onItemClicked:e=>{t.push(e.href)},items:m0,activeItem:m0.find(e=>e.href.startsWith(n.pathname))??m0[0]}),r))},h0=t(b());return kd=me,j(M({},"__esModule",{value:!0}),kd)})();const render=()=>playlistDmaker.default();